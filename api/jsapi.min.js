/**** v6.4.7, build: 09/19/2020 ****/
"use strict";
!(function (t) {
  var e =
      (this && this.g) ||
      (function () {
        var t = function (e, i) {
          return (t =
            Object.setPrototypeOf ||
            ({
              __proto__: []
            } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
            })(e, i);
        };
        return function (e, i) {
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })(),
    i = (function (t) {
      var e = {},
        i = (function () {
          function t(t, e, i) {
            (this.name = t), (this.h = e), (this.i = i);
          }
          return (
            (t.prototype.initialize = function () {
              var t = this.name,
                i = this.i,
                n = {};
              (e[t] = n), (e["exports"] = n);
              var s = [];
              if (
                (r(this.h, function () {
                  for (var t = 0; t < arguments.length; t++)
                    s.push(arguments[t]);
                }),
                "function" == typeof i)
              ) {
                var o = i.apply(i, s);
                void 0 !== o && (e[t] = o);
              } else e[t] = i;
            }),
            t
          );
        })(),
        r = function () {
          var t = arguments[0];
          if (3 === arguments.length) {
            var r = t,
              n = arguments[1],
              s = arguments[2];
            e[r] = new i(r, n, s);
          } else {
            if (!(1 <= arguments.length && arguments.length <= 2))
              throw new Error("");
            for (
              var n = Array.isArray(t) ? t : [t], o = [], a = 0, h = n;
              a < h.length;
              a++
            ) {
              var u = h[a];
              if (u in e) {
                var c = e[u];
                c instanceof i && (c.initialize(), (c = e[u])), o.push(c);
              } else {
                e[u] = null;
                var p = e["require"](u);
                (e[u] = p), o.push(p);
              }
            }
            var f = arguments[1];
            "function" == typeof f && f.apply(f, o);
          }
        };
      return (
        (r["modules"] = e),
        (e["define"] = r),
        (e["require"] = t["require"] || r),
        r
      );
    })(this || t);
  i("utils/ASCII", ["require", "exports"], function (t, e) {
    Object.defineProperty(e, "__esModule", {
      value: !0
    });
  }),
    i("utils/Comparable", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i("utils/Utils", ["require", "exports"], function (t, e) {
      function i(t, e, i, r) {
        function n(t, e, i, r, o) {
          var a, h, u, c;
          if (r < o - 1)
            if (o - r > 50)
              null === e && (e = new Array(o - r + 1)),
                s(t, e, i, r, ((r + o) / 2) | 0, o);
            else {
              for (a = t[r], h = r, u = r, c = o; h + 1 < c; )
                if (u == c) {
                  var p = h + 1;
                  i(a, t[p]) >= 0 ? (h = p) : ((t[u] = t[p]), (h = p), (u = p));
                } else {
                  if (((c += -1), i(a, t[c]) <= 0)) continue;
                  (t[u] = t[c]), (u = c);
                }
              (t[u] = a), n(t, e, i, r, u), n(t, e, i, u + 1, o);
            }
        }
        function s(t, e, i, r, s, o) {
          n(t, e, i, r, s), n(t, e, i, s, o);
          for (var a = r, h = s, u = 0, c = t[a], p = t[h]; a < s && h < o; ) {
            var f = i(c, p);
            isNaN(f)
              ? ((e[u++] = p), (p = t[++h]))
              : (f <= 0 && ((e[u++] = c), (c = t[++a])),
                f >= 0 && ((e[u++] = p), (p = t[++h])));
          }
          for (; a < s; a++) e[u++] = t[a];
          for (; h < o; h++) e[u++] = t[h];
          for (a = r, h = 0; h < u; a++, h++) t[a] = e[h];
        }
        n(t, null, e, i, r);
      }
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var r = null,
        n = new ArrayBuffer(8),
        s = new Float64Array(n),
        o = new Uint32Array(n),
        a = new Uint16Array(n);
      e.j = i;
      var h = (function () {
        function t() {}
        return (
          (t.repeat = function (t, e) {
            for (var i = new Array(e); e-- > 0; ) i[e] = t;
            return i.join("");
          }),
          (t.k = function (t, e, i) {
            var r = i - t.length;
            return r > 0 ? this.repeat(e, r) + t : t;
          }),
          (t.l = function (t, e, i) {
            var r = i - t.length;
            return r > 0 ? t + this.repeat(e, r) : t;
          }),
          (t.m = function (t) {
            if (t.length > 0) {
              for (var e = 0, i = 0; i < t.length; i++)
                e = (31 * e + t.charCodeAt(i)) | 0;
              return e;
            }
            return 0;
          }),
          (t.o = function (t, e, i, r, n) {
            if (!(t.length >= e + n && i.length >= r + n))
              throw new Error("arraycopy out of range");
            for (; n-- > 0; ) i[r++] = t[e++];
          }),
          (t.p = function (t) {
            return null;
          }),
          (t.reverse = function (t, e) {
            for (var i = 0, r = t.length - 1; r >= 0; i++, r--) e[i] = t[r];
            return e;
          }),
          (t.q = function (t, e) {
            return t - e;
          }),
          (t.s = function (t) {
            for (var e = t.length, i = new Array(), r = -1, n = 0; n < e; n++) {
              var s = t.charAt(n);
              if (r >= 0) {
                if (";" === s) {
                  var o = t.substring(r + 1, n);
                  switch (o) {
                    case "lt":
                      i.push("<");
                      break;
                    case "gt":
                      i.push(">");
                      break;
                    case "quot":
                      i.push('"');
                      break;
                    case "apos":
                      i.push("'");
                      break;
                    case "amp":
                      i.push("&");
                      break;
                    default:
                      if ("#" === o.charAt(0)) {
                        var a = parseInt(o.substring(1));
                        i.push(String.fromCharCode(a));
                      } else i.push("&" + o + ";");
                  }
                  r = -1;
                }
              } else "&" === s ? (r = n) : i.push(s);
            }
            return r >= 0 && i.push(t.substring(r)), i.join("");
          }),
          (t.t = function (t, e) {
            for (var i = 0, r = e; i < r.length; i++) {
              var n = r[i];
              t.push(n);
            }
          }),
          (t.contains = function (t, e) {
            for (var i = 0, r = t; i < r.length; i++) {
              if (r[i].u(e)) return !0;
            }
            return !1;
          }),
          (t.u = function (t, e) {
            if (t.length == e.length) {
              for (var i = 0; i < t.length; i++) if (t[i] !== e[i]) return !1;
              return !0;
            }
            return !1;
          }),
          (t.remove = function (t, e) {
            for (var i = 0, r = t.length, n = 0; n < r; n++)
              t[n] === e && (t.splice(n, 1), n--, r--, i++);
            return i;
          }),
          (t.v = function () {
            for (
              var t = {},
                e = location.href
                  .slice(location.href.indexOf("?") + 1)
                  .split("&"),
                i = 0;
              i < e.length;
              i++
            ) {
              var r = e[i].split("=");
              t[decodeURIComponent(r[0])] = decodeURIComponent(r[1]);
            }
            return t;
          }),
          (t.prefix = function () {
            if (!r) {
              var t = this.v().version;
              r = t ? "/analyzer/v" + t : "/analyzer";
            }
            return r;
          }),
          (t.A = function (t, e, i) {
            if (e in t) return t[e];
            var r = i(e);
            return (t[e] = r), r;
          }),
          (t.B = function (t, e) {
            var i = document.createElement("a"),
              r = URL.createObjectURL(e);
            (i.download = t), (i.href = r), i.click(), URL.revokeObjectURL(r);
          }),
          (t.uuid = function () {
            var t = new Array();
            (s[0] = new Date().getTime()),
              t.push(o[1].toString(16)),
              (s[0] = Math.random()),
              t.push(a[3].toString(16));
            var e = a[2].toString(16);
            t.push("4" + e.substr(0, 3)), (s[0] = performance.now());
            var i = o[0].toString(16) + o[1].toString(16);
            return (
              t.push("0" + i.substr(0, 3)), t.push(i.substr(3)), t.join("-")
            );
          }),
          (t.C = function (t) {
            return eval("(" + t.toString() + ")");
          }),
          (t.D = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            for (var i = 0, r = t; i < r.length; i++) {
              var n = r[i];
              if (null !== n) return n;
            }
            return null;
          }),
          t
        );
      })();
      e.F = h;
    }),
    i(
      "utils/StringKit",
      ["require", "exports", "utils/Utils", "utils/Check"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = /(\.?0+)$/,
          s = (function () {
            function t() {}
            return (
              (t.format = function (t) {
                for (var e = [], i = 1; i < arguments.length; i++)
                  e[i - 1] = arguments[i];
                return this.G(t, e);
              }),
              (t.G = function (t, e) {
                var i = this.H(t, e);
                if ("string" == typeof i) return i;
                throw new Error(this.format("Invalid state on (%d) %s", i, t));
              }),
              (t.H = function (t, e) {
                for (
                  var r, n = [], s = 0, o = 0, a = 0, h = 0, u = 0;
                  u < t.length;
                  u++
                ) {
                  var c = t.charAt(u),
                    p = c.charCodeAt(0);
                  switch (s) {
                    case 0:
                      37 === p ? (s = 1) : n.push(c);
                      break;
                    case 1:
                      switch (p) {
                        case 100:
                          if ("number" != typeof (r = e[o++])) return u;
                          n.push(r.toFixed(0)), (s = 0);
                          break;
                        case 102:
                          if ("number" != typeof (r = e[o++])) return u;
                          n.push(r.toString()), (s = 0);
                          break;
                        case 120:
                          if ("number" != typeof (r = e[o++])) return u;
                          n.push((0 | r).toString(16)), (s = 0);
                          break;
                        case 88:
                          if ("number" != typeof (r = e[o++])) return u;
                          n.push((0 | r).toString(16).toUpperCase()), (s = 0);
                          break;
                        case 115:
                        case 99:
                          (r = e[o++]),
                            n.push(null === r ? "null" : r.toString()),
                            (s = 0);
                          break;
                        case 48:
                          (a = u + 1), (h = -1), (s = 2);
                          break;
                        case 37:
                          n.push("%"), (s = 0);
                          break;
                        default:
                          return u;
                      }
                      break;
                    case 2:
                      switch (p) {
                        case 48:
                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:
                        case 57:
                          h = u;
                          break;
                        case 120:
                          if (!(h >= a)) return u;
                          var f = parseInt(t.substring(a, h + 1));
                          if ("number" != typeof (r = e[o++])) return u;
                          n.push(i.F.k((0 | r).toString(16), "0", f)), (s = 0);
                          break;
                        case 88:
                          if (!(h >= a)) return u;
                          var f = parseInt(t.substring(a, h + 1));
                          if ("number" != typeof (r = e[o++])) return u;
                          n.push(
                            i.F.k((0 | r).toString(16).toUpperCase(), "0", f)
                          ),
                            (s = 0);
                          break;
                        default:
                          return u;
                      }
                      break;
                    default:
                      return u;
                  }
                }
                return n.join("");
              }),
              (t.startsWith = function (t, e) {
                return t.length >= e.length && t.substring(0, e.length) === e;
              }),
              (t.endsWith = function (t, e) {
                return (
                  t.length >= e.length && t.substring(t.length - e.length) === e
                );
              }),
              (t.split = function (t, e) {
                for (var i = new Array(), n = 0; ; ) {
                  var s = t.exec(e);
                  if (null === s) {
                    var o = e.substring(n);
                    r.J.I(o) || i.push(o);
                    break;
                  }
                  var a = t.lastIndex - s[0].length;
                  i.push(e.substring(n, a)), (n = t.lastIndex);
                }
                return i;
              }),
              (t.K = function (t) {
                return t.toFixed(5).replace(n, "");
              }),
              t
            );
          })();
        e.L = s;
      }
    ),
    i(
      "utils/Check",
      ["require", "exports", "utils/StringKit"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t() {}
          return (
            (t.M = function (t) {
              if (0 <= t && t <= 255) return t;
              throw new Error(
                i.L.format(
                  "RGB should not nagative and not over 255(0xFF): %X",
                  t
                )
              );
            }),
            (t.N = function (t) {
              if (isFinite(t)) return t;
              throw new Error(i.L.format("%f is not permitted", t));
            }),
            (t.O = function (t) {
              if (t >= 0) return t;
              throw new Error(i.L.format("%f must >= 0", t));
            }),
            (t.P = function (t) {
              if (t > 0) return t;
              throw new Error(i.L.format("%f must > 0", t));
            }),
            (t.R = function (t) {
              if (null !== t && void 0 !== t) return t;
              throw new Error("invalid null value");
            }),
            (t.S = function (t) {
              if (null === t) return null;
              throw new Error("value must be null");
            }),
            (t.T = function (t) {
              if (null === t || void 0 === t || 0 === t.length)
                throw new Error("invalid empty string");
              return t;
            }),
            (t.I = function (t) {
              return null === t || void 0 === t || 0 === t.length;
            }),
            (t.U = function (t) {
              if (null !== t && void 0 !== t) return t;
              throw new Error("null or undefined is not permitted");
            }),
            t
          );
        })();
        e.J = r;
      }
    ),
    i("utils/DoubleKit", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t() {}
        return (
          (t.V = function (t) {
            return Math.round(t * this.precision) / this.precision;
          }),
          (t.W = function (t, e) {
            return Math.abs(t - e) <= this.X;
          }),
          (t.Y = function (t, e) {
            return Math.abs(t - e) > this.X;
          }),
          (t.Z = function (t, e) {
            return t - e < -this.X;
          }),
          (t.$ = function (t, e) {
            return t - e < this.X;
          }),
          (t._ = function (t, e) {
            return t - e > this.X;
          }),
          (t.aa = function (t, e) {
            return t - e > -this.X;
          }),
          (t.sqrt = function (t) {
            return Math.abs(t) <= 1e-10 ? 0 : Math.sqrt(t);
          }),
          (t.q = function (t, e) {
            return t - e;
          }),
          (t.ba = function (t, e) {
            return e - t;
          }),
          (t.X = 1e-8),
          (t.precision = 1e8),
          t
        );
      })();
      e.ca = i;
    }),
    i(
      "geometry/Matrix",
      ["require", "exports", "utils/Check", "utils/Utils"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t(t, e, r) {
            (this.da = i.J.N(t)), (this.n = i.J.N(e));
            var n = t * e;
            if (r.length !== n) throw new Error("invalid matrix size");
            for (var s = 0; s < r.length; s++) i.J.N(r[s]);
            this.data = r;
          }
          return (
            (t.ea = function (t, e, i, r, n, s) {
              for (var o = 0, a = 0, h = 0; h < t; h++) {
                for (var u = 0; u < i; u++) {
                  for (var c = u, p = 0, f = 0; f < e; f++)
                    (p += r[a + f] * n[c]), (c += i);
                  s[o++] = p;
                }
                a += e;
              }
            }),
            (t.prototype.ea = function (e) {
              if (this.n === e.da) {
                var i = new Array(this.da * e.n);
                return (
                  t.ea(this.da, this.n, e.n, this.data, e.data, i),
                  new t(this.da, e.n, i)
                );
              }
              throw new Error("m !== p");
            }),
            (t.prototype.toString = function () {
              var t = [];
              t.push("Matrix ("),
                t.push(this.da.toString()),
                t.push(" x "),
                t.push(this.n.toString()),
                t.push(")");
              for (var e = 0, i = 0; i < this.da; i++)
                for (var r = 0; r < this.n; r++) {
                  var n = this.data[e++].toString();
                  0 === r
                    ? (t.push("\n"), t.push("\t"), t.push(n))
                    : (t.push(", "), t.push(n));
                }
              return t.join("");
            }),
            (t.fa = function (t, e, i) {
              return t * e + i;
            }),
            (t.prototype.ga = function (e) {
              for (
                var i = this.da,
                  r = this.n,
                  n = 2 * r,
                  s = new Array(i * n),
                  o = 0;
                o < i;
                o++
              )
                for (var a = 0; a < n; a++)
                  s[t.fa(n, o, a)] =
                    a < r ? e[t.fa(r, o, a)] : a === i + o ? 1 : 0;
              return s;
            }),
            (t.prototype.ha = function (e, i, r) {
              for (var n = 0; n < i; n++)
                for (var s = e[t.fa(r, n, n)], o = 0; o < r; o++)
                  e[t.fa(r, n, o)] /= s;
              return e;
            }),
            (t.prototype.ia = function (e, i, n) {
              for (var s = Math.min(i, n), o = 0; o < i; o++) {
                if (0 === e[t.fa(n, o, o)]) {
                  var a = new Array(n),
                    h = void 0;
                  for (h = o; h < i; h++)
                    if (0 !== e[t.fa(n, h, o)]) {
                      r.F.o(e, t.fa(n, h, 0), a, 0, n),
                        r.F.o(e, t.fa(n, o, 0), e, t.fa(n, h, 0), n),
                        r.F.o(a, 0, e, t.fa(n, o, 0), n);
                      break;
                    }
                  h >= i && (s -= 1);
                }
                if (!(s < i))
                  for (var u = 0; u < i; u++)
                    if (u !== o)
                      for (
                        var c = e[t.fa(n, u, o)] / e[t.fa(n, o, o)], p = 0;
                        p < n;
                        p++
                      )
                        e[t.fa(n, u, p)] -= e[t.fa(n, o, p)] * c;
              }
              return s;
            }),
            (t.prototype.ja = function () {
              var e = this.data.slice(0);
              if (this.da !== this.n)
                throw new Error(
                  "The matrix is an " +
                    this.da +
                    "x" +
                    this.n +
                    " order matrix, non-square matrix, please check!"
                );
              var i = 2 * this.n,
                r = this.ga(e),
                n = new Array(this.da * this.n),
                s = this.ia(r, this.da, i);
              if (s !== this.da)
                throw new Error(
                  "The ranks of the matrix is " +
                    s +
                    ", a non-full rank matrix, please check!"
                );
              r = this.ha(r, this.da, i);
              for (var o = 0; o < this.da; o++)
                for (var a = this.n; a < i; a++)
                  n[t.fa(this.n, o, a - this.n)] = r[t.fa(i, o, a)];
              return n;
            }),
            (t.prototype.u = function (e) {
              return (
                this === e ||
                (e instanceof t &&
                  this.da == e.da &&
                  this.n == e.n &&
                  r.F.u(this.data, e.data))
              );
            }),
            t
          );
        })();
        e.ka = n;
      }
    ),
    i(
      "geometry/Vector3",
      ["require", "exports", "utils/Check"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e, r) {
            (this.x = i.J.N(t)), (this.y = i.J.N(e)), (this.z = i.J.N(r));
          }
          return (
            (t.N = function (t, e, i) {
              var r = e.sub(t),
                n = i.sub(e);
              return r.la(n);
            }),
            (t.prototype.la = function (e) {
              return new t(
                this.y * e.z - this.z * e.y,
                this.z * e.x - this.x * e.z,
                this.x * e.y - this.y * e.x
              );
            }),
            (t.prototype.length = function () {
              return Math.sqrt(
                this.x * this.x + this.y * this.y + this.z * this.z
              );
            }),
            (t.prototype.normalize = function () {
              var e = this.length();
              return new t(this.x / e, this.y / e, this.z / e);
            }),
            (t.prototype.sub = function (e) {
              return new t(this.x - e.x, this.y - e.y, this.z - e.z);
            }),
            (t.prototype.add = function (e) {
              return new t(this.x + e.x, this.y + e.y, this.z + e.z);
            }),
            (t.prototype.scale = function (e) {
              return new t(this.x * e, this.y * e, this.z * e);
            }),
            (t.prototype.ma = function () {
              return new t(-this.x, -this.y, -this.z);
            }),
            (t.prototype.na = function (e) {
              var i =
                  this.x * e.data[0] +
                  this.y * e.data[4] +
                  this.z * e.data[8] +
                  e.data[12],
                r =
                  this.x * e.data[1] +
                  this.y * e.data[5] +
                  this.z * e.data[9] +
                  e.data[13],
                n =
                  this.x * e.data[2] +
                  this.y * e.data[6] +
                  this.z * e.data[10] +
                  e.data[14],
                s =
                  this.x * e.data[3] +
                  this.y * e.data[7] +
                  this.z * e.data[11] +
                  e.data[15];
              return 0 != s ? new t(i / s, r / s, n / s) : new t(i, r, n);
            }),
            (t.oa = new t(0, 0, 0)),
            t
          );
        })();
        e.pa = r;
      }
    ),
    i(
      "geometry/Matrix4",
      ["require", "exports", "geometry/Matrix3", "geometry/Matrix"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
          o = (function (t) {
            function i(e) {
              return void 0 === e && (e = s), t.call(this, 4, 4, e) || this;
            }
            return (
              e(i, t),
              (i.translate = function (t, e, r) {
                return new i([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, t, e, r, 1]);
              }),
              (i.qa = function (t) {
                return new i([
                  1,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  t.x,
                  t.y,
                  t.z,
                  1
                ]);
              }),
              (i.rotateX = function (t) {
                var e = Math.cos(t),
                  r = Math.sin(t);
                return new i([1, 0, 0, 0, 0, e, r, 0, 0, -r, e, 0, 0, 0, 0, 1]);
              }),
              (i.rotateY = function (t) {
                var e = Math.cos(t),
                  r = Math.sin(t);
                return new i([e, 0, -r, 0, 0, 1, 0, 0, r, 0, e, 0, 0, 0, 0, 1]);
              }),
              (i.rotateZ = function (t) {
                var e = Math.cos(t),
                  r = Math.sin(t);
                return new i([e, r, 0, 0, -r, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
              }),
              (i.scale = function (t, e, r) {
                return (
                  void 0 === e && (e = t),
                  void 0 === r && (r = t),
                  new i([t, 0, 0, 0, 0, e, 0, 0, 0, 0, r, 0, 0, 0, 0, 1])
                );
              }),
              (i.prototype.translate = function (t) {
                return this.na(i.qa(t));
              }),
              (i.prototype.qa = function (t, e, r) {
                return this.na(i.translate(t, e, r));
              }),
              (i.prototype.rotateX = function (t) {
                return this.na(i.rotateX(t));
              }),
              (i.prototype.rotateY = function (t) {
                return this.na(i.rotateY(t));
              }),
              (i.prototype.rotateZ = function (t) {
                return this.na(i.rotateZ(t));
              }),
              (i.prototype.scale = function (t, e, r) {
                return (
                  void 0 === e && (e = t),
                  void 0 === r && (r = t),
                  this.na(i.scale(t, e, r))
                );
              }),
              (i.prototype.ra = function (t) {
                return this.na(i.scale(t.x, t.y, t.z));
              }),
              (i.prototype.sa = function (t, e, r) {
                return i.translate(-t, -e, -r).na(this).qa(t, e, r);
              }),
              (i.prototype.ta = function (t) {
                return this.sa(t.x, t.y, t.z);
              }),
              (i.prototype.na = function (t) {
                var e = new Array(16);
                return n.ka.ea(4, 4, 4, this.data, t.data, e), new i(e);
              }),
              (i.prototype.inverse = function () {
                return new i(this.ja());
              }),
              (i.prototype.ua = function () {
                var t = this.data;
                return new r.va([
                  t[0],
                  t[1],
                  0,
                  t[4],
                  t[5],
                  0,
                  t[12],
                  t[13],
                  1
                ]);
              }),
              (i.oa = new i()),
              i
            );
          })(n.ka);
        i.wa = o;
      }
    ),
    i("utils/Types", ["require", "exports"], function (t, e) {
      function i(t) {
        throw new Error("");
      }
      Object.defineProperty(e, "__esModule", {
        value: !0
      }),
        (e.xa = i);
    }),
    i("utils/Itor", ["require", "exports"], function (t, e) {
      function i(t, e) {
        r(t.iterator(), e);
      }
      function r(t, e) {
        for (var i = 0; t.za(); ) {
          var r = t.next();
          e(i++, r);
        }
      }
      function n(t) {
        return new o(t);
      }
      function s(t) {
        return new a(t);
      }
      Object.defineProperty(e, "__esModule", {
        value: !0
      }),
        (e.ya = i),
        (e.Aa = r);
      var o = (function () {
          function t(t) {
            this.Ba = t;
          }
          return (
            (t.prototype.iterator = function () {
              return new a(this.Ba);
            }),
            t
          );
        })(),
        a = (function () {
          function t(t) {
            (this.Ca = -1), (this.Ba = t);
          }
          return (
            (t.prototype.za = function () {
              return this.Ca < this.Ba.length - 1;
            }),
            (t.prototype.next = function () {
              if (this.Ca < this.Ba.length - 1)
                return this.Ca++, this.Ba[this.Ca];
              throw new Error("bug");
            }),
            t
          );
        })();
      (e.Da = n), (e.Ea = s);
    }),
    i("utils/LinkedList", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = new Error("list is empty"),
        r = (function () {
          function t(t, e) {
            (this.Fa = null),
              (this.next = null),
              (this.parent = t),
              (this.item = e);
          }
          return (
            (t.prototype.Ga = function (t) {
              (t.next = this.next),
                (this.next = t),
                (t.Fa = this),
                null !== t.next && (t.next.Fa = t);
            }),
            (t.prototype.insertBefore = function (t) {
              (t.Fa = this.Fa),
                (this.Fa = t),
                (t.next = this),
                null !== t.Fa && (t.Fa.next = t);
            }),
            (t.prototype.remove = function () {
              null !== this.Fa && (this.Fa.next = this.next),
                null !== this.next && (this.next.Fa = this.Fa);
            }),
            (t.prototype.set = function (t) {
              this.item = t;
            }),
            t
          );
        })();
      e.Ha = r;
      var n = (function () {
          function t(t) {
            this.Ia = t;
          }
          return (
            (t.prototype.za = function () {
              return null !== this.Ia;
            }),
            (t.prototype.next = function () {
              var t = this.Ia;
              if (null !== t) return (this.Ia = t.next), t.item;
              throw new Error("iterator is null");
            }),
            t
          );
        })(),
        s = (function () {
          function t(t) {
            this.Ia = t;
          }
          return (
            (t.prototype.za = function () {
              return null !== this.Ia;
            }),
            (t.prototype.next = function () {
              var t = this.Ia;
              if (null !== t) return (this.Ia = t.next), t;
              throw new Error("iterator is null");
            }),
            t
          );
        })(),
        o = (function () {
          function t() {
            (this.Ja = null), (this.Ka = null), (this.La = 0);
          }
          return (
            (t.prototype.add = function (t) {
              return this.Ma(t);
            }),
            (t.prototype.push = function (t) {
              return this.Ma(t);
            }),
            (t.prototype.pop = function () {
              return this.Na();
            }),
            (t.prototype.shift = function () {
              return this.Oa();
            }),
            (t.prototype.Oa = function () {
              var t = this.Ja;
              if (null === t) throw i;
              return this.remove(t), t.item;
            }),
            (t.prototype.Na = function () {
              var t = this.Ka;
              if (null === t) throw i;
              return this.remove(t), t.item;
            }),
            (t.prototype.Ma = function (t) {
              if (null === this.Ja || null === this.Ka) {
                var e = new r(this, t);
                return (this.Ja = e), (this.Ka = e), this.La++, e;
              }
              return this.Ga(this.Ka, t);
            }),
            (t.prototype.Pa = function (t) {
              if (null === this.Ja || null === this.Ka) {
                var e = new r(this, t);
                return (this.Ja = e), (this.Ka = e), this.La++, e;
              }
              return this.insertBefore(this.Ja, t);
            }),
            (t.prototype.Qa = function () {
              if (null === this.Ja) throw i;
              return this.Ja.item;
            }),
            (t.prototype.Ra = function () {
              if (null === this.Ka) throw i;
              return this.Ka.item;
            }),
            (t.prototype.Ga = function (t, e) {
              var i = new r(this, e);
              return t.Ga(i), t === this.Ka && (this.Ka = i), this.La++, i;
            }),
            (t.prototype.insertBefore = function (t, e) {
              var i = new r(this, e);
              return (
                t.insertBefore(i), t === this.Ja && (this.Ja = i), this.La++, i
              );
            }),
            (t.prototype.remove = function (t) {
              t.remove(),
                t === this.Ja && (this.Ja = t.next),
                t === this.Ka && (this.Ka = t.Fa),
                this.La--;
            }),
            (t.prototype.size = function () {
              return this.La;
            }),
            (t.prototype.clear = function () {
              (this.Ja = null), (this.Ka = null), (this.La = 0);
            }),
            (t.prototype.iterator = function () {
              return new n(this.Ja);
            }),
            (t.prototype.Sa = function () {
              return new s(this.Ja);
            }),
            (t.prototype.toArray = function () {
              for (var t = new Array(), e = this.Ja; null != e; )
                t.push(e.item), (e = e.next);
              return t;
            }),
            t
          );
        })();
      e.Ta = o;
    }),
    i(
      "utils/LinkedHashMap",
      ["require", "exports", "utils/Types", "utils/LinkedList", "utils/Itor"],
      function (t, e, i, r, n) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var s = (function () {
          function t(t, e) {
            (this.Ua = null),
              (this.Va = null),
              (this.key = t),
              (this.value = e);
          }
          return t;
        })();
        e.Wa = s;
        var o = (function () {
            function t(t) {
              this.Xa = t;
            }
            return (
              (t.prototype.za = function () {
                return this.Xa.za();
              }),
              (t.prototype.next = function () {
                return this.Xa.next().key;
              }),
              t
            );
          })(),
          a = (function () {
            function t(t) {
              this.Xa = t;
            }
            return (
              (t.prototype.za = function () {
                return this.Xa.za();
              }),
              (t.prototype.next = function () {
                return this.Xa.next().value;
              }),
              t
            );
          })(),
          h = (function () {
            function t() {
              (this.Ya = new r.Ta()), (this.Za = {});
            }
            return (
              (t.prototype.replace = function (t, e) {
                null !== t.Ua && (t.Ua.set(e), (e.Ua = t.Ua)),
                  null !== t.Va && (t.Va.set(e), (e.Va = t.Va));
              }),
              (t.prototype.put = function (t, e) {
                var o = this,
                  a = t.$a(),
                  h = new s(t, e),
                  u = this.Za[a];
                if (void 0 === u)
                  return (h.Ua = this.Ya.add(h)), (this.Za[a] = h), null;
                if (u instanceof s) {
                  if (u.key.u(t))
                    return (this.Za[a] = h), this.replace(u, h), u.value;
                  h.Ua = this.Ya.add(h);
                  var c = new r.Ta();
                  return (
                    (u.Va = c.add(u)), (h.Va = c.add(h)), (this.Za[a] = c), null
                  );
                }
                if (u instanceof r.Ta) {
                  var p = null;
                  return (
                    n.ya(u, function (e, i) {
                      return (
                        !i.key.u(t) || (o.replace(i, h), (p = i.value), !1)
                      );
                    }),
                    null === p
                      ? ((h.Ua = this.Ya.add(h)), (h.Va = u.push(h)), null)
                      : p
                  );
                }
                return i.xa(u);
              }),
              (t.prototype.get = function (t) {
                var e = t.$a(),
                  o = this.Za[e];
                if (void 0 === o) return null;
                if (o instanceof s) return o.key.u(t) ? o.value : null;
                if (o instanceof r.Ta) {
                  var a = null;
                  return (
                    n.ya(o, function (e, i) {
                      return !i.key.u(t) || ((a = i.value), !1);
                    }),
                    a
                  );
                }
                return i.xa(o);
              }),
              (t.prototype._a = function (t) {
                return null !== this.get(t);
              }),
              (t.prototype.delete = function (t) {
                null !== t.Ua && t.Ua.parent.remove(t.Ua),
                  null === t.Va
                    ? delete this.Za[t.key.$a()]
                    : t.Va.parent.remove(t.Va);
              }),
              (t.prototype.remove = function (t) {
                var e = this,
                  o = t.$a(),
                  a = this.Za[o];
                if (void 0 === a) return null;
                if (a instanceof s)
                  return a.key.u(t) ? (this.delete(a), a.value) : null;
                if (a instanceof r.Ta) {
                  var h = null;
                  return (
                    n.ya(a, function (i, r) {
                      return !r.key.u(t) || ((h = r.value), e.delete(r), !1);
                    }),
                    h
                  );
                }
                return i.xa(a);
              }),
              (t.prototype.ab = function (t, e) {
                var i = this.get(t);
                if (null === i) {
                  var r = e(t);
                  return this.put(t, r), r;
                }
                return i;
              }),
              (t.prototype.size = function () {
                return this.Ya.size();
              }),
              (t.prototype.bb = function () {
                return 0 === this.Ya.size();
              }),
              (t.prototype.keys = function () {
                return new o(this.Ya.iterator());
              }),
              (t.prototype.values = function () {
                return new a(this.Ya.iterator());
              }),
              (t.prototype.entries = function () {
                return this.Ya.iterator();
              }),
              t
            );
          })();
        e.cb = h;
      }
    ),
    i(
      "geometry/utils/StaticRTree",
      ["require", "exports", "geometry/BBox2", "utils/Utils"],
      function (t, e, i, r) {
        function n(t, e) {
          var i = t.eb(),
            r = e.eb();
          return (i.fb + i.gb) / 2 - (r.fb + r.gb) / 2;
        }
        function s(t, e) {
          var i = t.eb(),
            r = e.eb();
          return (i.hb + i.ib) / 2 - (r.hb + r.ib) / 2;
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = (function () {
          function t(t) {
            if (((this.jb = null), void 0 !== t))
              if (t instanceof Array) {
                this.kb = [];
                for (var e = 0, i = t; e < i.length; e++) {
                  var r = i[e];
                  this.add(r);
                }
              } else (this.kb = t), (this.jb = t.eb());
            else this.kb = [];
          }
          return (
            (t.prototype.add = function (t) {
              if (!(this.kb instanceof Array))
                throw new Error("can't insert multiple item into leaf node");
              this.kb.push(t), (this.jb = i.mb.lb(this.jb, t.eb()));
            }),
            (t.prototype.nb = function () {
              return this.kb;
            }),
            (t.prototype.eb = function () {
              if (null !== this.jb) return this.jb;
              throw new Error("bug");
            }),
            t
          );
        })();
        e.ob = o;
        var a = (function () {
          function t(t) {
            (this.pb = !1),
              (this.root = new o()),
              (this.qb = t),
              (this.rb = t * t),
              (this.sb = []);
          }
          return (
            (t.prototype.size = function () {
              return this.sb.length;
            }),
            (t.prototype.nb = function () {
              return this.tb(), this.sb;
            }),
            (t.prototype.add = function (t) {
              this.sb.push(t), (this.pb = !0);
            }),
            (t.prototype.remove = function (t) {
              r.F.remove(this.sb, t), (this.pb = !0);
            }),
            (t.prototype.clear = function () {
              (this.pb = !1), (this.root = new o()), (this.sb.length = 0);
            }),
            (t.prototype.tb = function () {
              if (this.pb) {
                for (
                  var t = new Array(), e = 0, i = this.sb;
                  e < i.length;
                  e++
                ) {
                  var r = i[e];
                  t.push(new o(r));
                }
                for (;;) {
                  var n = this.ub(t);
                  if (!(n.length > 1)) break;
                  t = n;
                }
                (this.root = new o(t)), (this.pb = !1);
              }
            }),
            (t.prototype.ub = function (t) {
              r.j(t, s, 0, t.length);
              for (var e = t.length, i = [], a = 0; a < e; )
                if (a + this.rb <= e) {
                  var h = a + this.rb;
                  r.j(t, n, a, h);
                  for (var u = a; u < h; u += this.qb) {
                    var c = new o(t.slice(u, u + this.qb));
                    i.push(c);
                  }
                  a += this.qb * this.qb;
                } else {
                  var c = new o(t.slice(a, a + this.qb));
                  i.push(c), (a += this.qb);
                }
              return i;
            }),
            (t.prototype.search = function (t) {
              this.tb();
              var e = [],
                i = [];
              for (i.push(this.root); ; ) {
                var r = i.shift();
                if (void 0 === r) break;
                var n = r.nb();
                if (n instanceof Array)
                  for (var s = 0, o = n; s < o.length; s++) {
                    var a = o[s];
                    if (!t.vb(a.eb())) {
                      var h = a.nb();
                      h instanceof Array ? i.push(a) : e.push(h);
                    }
                  }
                else t.vb(r.eb()) || e.push(n);
              }
              return e;
            }),
            (t.prototype.wb = function (t) {
              this.tb(), this.xb(this.root, 0, t);
            }),
            (t.prototype.xb = function (t, e, i) {
              this.tb();
              var r = t.nb();
              if (r instanceof Array)
                for (var n = 0, s = r; n < s.length; n++) {
                  var o = s[n];
                  this.xb(o, e + 1, i);
                }
              else i(r, e);
            }),
            (t.prototype.eb = function () {
              return this.tb(), this.root.eb();
            }),
            t
          );
        })();
        e.yb = a;
      }
    ),
    i("geometry/utils/Vector", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t() {}
        return (
          (t.zb = function (t, e, i, r) {
            return t * i + e * r;
          }),
          (t.Ab = function (t, e, i, r, n, s) {
            return this.zb(i - t, r - e, n - i, s - r);
          }),
          (t.Bb = function (t, e, i) {
            return this.Ab(t.x, t.y, e.x, e.y, i.x, i.y);
          }),
          (t.Cb = function (t, e, i, r) {
            return t * r - e * i;
          }),
          (t.Db = function (t, e, i, r, n, s) {
            return this.Cb(i - t, r - e, n - i, s - r);
          }),
          (t.Eb = function (t, e, i) {
            return this.Db(t.x, t.y, e.x, e.y, i.x, i.y);
          }),
          (t.Fb = function (t, e, i, r) {
            var n = i - t,
              s = r - e;
            return n * n + s * s;
          }),
          (t.Gb = function (t, e, i, r) {
            return this.hypot(i - t, r - e);
          }),
          (t.Hb = function (t, e) {
            return this.Gb(t.x, t.y, e.x, e.y);
          }),
          (t.hypot = function (t, e) {
            if (((t = Math.abs(t)), (e = Math.abs(e)) > t)) {
              var i = e;
              (e = t), (t = i);
            }
            if (0 === t) return e;
            var r = e / t;
            return t * Math.sqrt(1 + r * r);
          }),
          t
        );
      })();
      e.Ib = i;
    }),
    i(
      "geometry/Vector2",
      [
        "require",
        "exports",
        "utils/Check",
        "geometry/utils/Angle",
        "geometry/utils/Vector",
        "utils/DoubleKit",
        "geometry/BBox2"
      ],
      function (t, e, i, r, n, s, o) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var a = new ArrayBuffer(16),
          h = new Float64Array(a),
          u = new Int32Array(a),
          c = (function () {
            function t(t, e) {
              (this.x = i.J.N(t)),
                (this.y = i.J.N(e)),
                (h[0] = t),
                (h[1] = e),
                (this.Jb = u[0] ^ u[1] ^ u[2] ^ u[3]);
            }
            return (
              (t.Kb = function (t, e) {
                return t.x - e.x;
              }),
              (t.Lb = function (t, e) {
                return t.y - e.y;
              }),
              (t.Mb = function (t, e) {
                return t.x < e.x ? -1 : t.x > e.x ? 1 : t.y - e.y;
              }),
              (t.N = function (t, e, i) {
                var r = e.sub(t),
                  n = i.sub(e);
                return r.la(n);
              }),
              (t.Nb = function (e) {
                return new t(Math.cos(e), Math.sin(e));
              }),
              (t.prototype.Ob = function (t) {
                return this.x * t.x + this.y * t.y;
              }),
              (t.prototype.length = function () {
                return Math.sqrt(this.Ob(this));
              }),
              (t.prototype.Pb = function () {
                return this.x / this.length();
              }),
              (t.prototype.sub = function (e) {
                return new t(this.x - e.x, this.y - e.y);
              }),
              (t.prototype.add = function (e) {
                return new t(this.x + e.x, this.y + e.y);
              }),
              (t.prototype.Qb = function (e, i) {
                return new t(this.x + e, this.y + i);
              }),
              (t.prototype.ea = function (e) {
                return new t(this.x * e, this.y * e);
              }),
              (t.prototype.la = function (t) {
                return this.x * t.y - this.y * t.x;
              }),
              (t.prototype.Rb = function () {
                return this.y / this.length();
              }),
              (t.prototype.angle = function (t) {
                return Math.atan2(this.y - t.y, this.x - t.x);
              }),
              (t.prototype.Sb = function (t) {
                return r.Ub.Tb(this.angle(t));
              }),
              (t.prototype.Gb = function (t) {
                var e = t.x - this.x,
                  i = t.y - this.y;
                return n.Ib.hypot(e, i);
              }),
              (t.prototype.Fb = function (t) {
                var e = t.x - this.x,
                  i = t.y - this.y;
                return e * e + i * i;
              }),
              (t.prototype.Vb = function (t, e) {
                return this.rotate(t, r.Ub.Wb(e));
              }),
              (t.prototype.rotate = function (t, e) {
                var i = Math.cos(e),
                  r = Math.sin(e),
                  n = this.x - t.x,
                  s = this.y - t.y,
                  o = n * i + s * -r,
                  a = n * r + s * i;
                return t.Qb(o, a);
              }),
              (t.prototype.Xb = function (e) {
                return new t(
                  this.x * e.data[0] + this.y * e.data[3] + e.data[6],
                  this.x * e.data[1] + this.y * e.data[4] + e.data[7]
                );
              }),
              (t.prototype.na = function (e) {
                return new t(
                  this.x * e.data[0] + this.y * e.data[4] + e.data[12],
                  this.x * e.data[1] + this.y * e.data[5] + e.data[13]
                );
              }),
              (t.prototype.$a = function () {
                return this.Jb;
              }),
              (t.prototype.u = function (e) {
                return e instanceof t && e.x === this.x && e.y === this.y;
              }),
              (t.prototype.Yb = function (t) {
                return s.ca.W(this.x, t.x) && s.ca.W(this.y, t.y);
              }),
              (t.prototype.toString = function () {
                return "Vector [X=" + this.x + ", Y=" + this.y + "]";
              }),
              (t.prototype.eb = function () {
                var t = this.x,
                  e = this.y;
                return new o.mb(t, t, e, e);
              }),
              (t.oa = new t(0, 0)),
              t
            );
          })();
        e.Zb = c;
      }
    ),
    i(
      "geometry/utils/Angle",
      ["require", "exports", "geometry/Vector2"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t() {}
          return (
            (t.Tb = function (t) {
              return (180 * t) / Math.PI;
            }),
            (t.Wb = function (t) {
              return (t / 180) * Math.PI;
            }),
            (t.$b = function (t) {
              return (t %= 360), t < 0 ? 360 + t : t;
            }),
            (t.V = function (e) {
              return (e %= t._b), e < 0 ? t._b + e : e;
            }),
            (t.ac = function (e) {
              return t.V(((e + t.bc) / t.cc) * t.cc);
            }),
            (t.dc = function (e) {
              return t.$b(90 * (((e + 45) / 90) | 0));
            }),
            (t.ec = function (e, i) {
              return t.Tb(t.transform(t.Wb(e), i));
            }),
            (t.transform = function (e, r) {
              var n = Math.cos(e),
                s = Math.sin(e),
                o = new i.Zb(r.data[6], r.data[7]),
                a = new i.Zb(n, s).Xb(r);
              return t.V(a.angle(o));
            }),
            (t._b = 2 * Math.PI),
            (t.cc = Math.PI / 2),
            (t.bc = Math.PI / 4),
            t
          );
        })();
        e.Ub = r;
      }
    ),
    i(
      "geometry/Matrix3",
      ["require", "exports", "geometry/Matrix", "geometry/utils/Angle"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = [1, 0, 0, 0, 1, 0, 0, 0, 1],
          o = (function (t) {
            function i(e) {
              void 0 === e && (e = s);
              var i = t.call(this, 3, 3, e) || this,
                r = e[0],
                n = e[3],
                o = e[1],
                a = e[4];
              return (
                (i.fc = Math.sqrt(r * r + o * o)),
                (i.gc = Math.sqrt(n * n + a * a)),
                i
              );
            }
            return (
              e(i, t),
              (i.translate = function (t, e) {
                return new i([1, 0, 0, 0, 1, 0, t, e, 1]);
              }),
              (i.qa = function (t) {
                return this.translate(t.x, t.y);
              }),
              (i.rotate = function (t) {
                var e = Math.cos(t),
                  r = Math.sin(t);
                return new i([e, r, 0, -r, e, 0, 0, 0, 1]);
              }),
              (i.Vb = function (t) {
                return this.rotate(n.Ub.Wb(t));
              }),
              (i.scale = function (t) {
                return new i([t, 0, 0, 0, t, 0, 0, 0, 1]);
              }),
              (i.prototype.hc = function () {
                return this.ic() < 0;
              }),
              (i.prototype.Xb = function (t) {
                var e = new Array(9);
                return r.ka.ea(3, 3, 3, this.data, t.data, e), new i(e);
              }),
              (i.prototype.translate = function (t, e) {
                return this.Xb(i.translate(t, e));
              }),
              (i.prototype.qa = function (t) {
                return this.Xb(i.qa(t));
              }),
              (i.prototype.scale = function (t) {
                return this.Xb(i.scale(t));
              }),
              (i.prototype.ic = function () {
                return (
                  this.data[0] * this.data[4] - this.data[3] * this.data[1]
                );
              }),
              (i.prototype.jc = function () {
                return new i(this.jc().data);
              }),
              (i.prototype.Vb = function (t) {
                return this.Xb(i.Vb(t));
              }),
              (i.prototype.rotate = function (t) {
                return this.Xb(i.rotate(t));
              }),
              (i.prototype.kc = function () {
                var t = this.data;
                return new i([t[0], t[1], 0, t[3], t[4], 0, 0, 0, 1]);
              }),
              (i.prototype.sa = function (t, e) {
                return i.translate(-t, -e).Xb(this).translate(t, e);
              }),
              (i.prototype.ta = function (t) {
                return this.sa(t.x, t.y);
              }),
              (i.lc = new i([1, 0, 0, 0, -1, 0, 0, 0, 1])),
              (i.mc = new i([-1, 0, 0, 0, 1, 0, 0, 0, 1])),
              (i.nc = new i([0, 1, 0, -1, 0, 0, 0, 0, 1])),
              (i.oc = new i([0, -1, 0, 1, 0, 0, 0, 0, 1])),
              i
            );
          })(r.ka);
        i.va = o;
      }
    ),
    i(
      "geometry/BBox2",
      [
        "require",
        "exports",
        "utils/Check",
        "utils/DoubleKit",
        "utils/Itor",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = (function () {
          function t() {
            (this.hb = Number.POSITIVE_INFINITY),
              (this.ib = Number.NEGATIVE_INFINITY),
              (this.fb = Number.POSITIVE_INFINITY),
              (this.gb = Number.NEGATIVE_INFINITY);
          }
          return (
            (t.prototype.pc = function (t) {
              return (
                (this.hb = Math.min(this.hb, t.hb)),
                (this.ib = Math.max(this.ib, t.ib)),
                (this.fb = Math.min(this.fb, t.fb)),
                (this.gb = Math.max(this.gb, t.gb)),
                this
              );
            }),
            (t.prototype.qc = function (t) {
              return (
                (this.hb = Math.min(this.hb, t.x)),
                (this.ib = Math.max(this.ib, t.x)),
                (this.fb = Math.min(this.fb, t.y)),
                (this.gb = Math.max(this.gb, t.y)),
                this
              );
            }),
            (t.prototype.rc = function (t) {
              for (var e = 0; e < t.length; e++) {
                var i = t[e];
                this.qc(i);
              }
              return this;
            }),
            (t.prototype.sc = function (t) {
              var e = this;
              return (
                n.ya(t, function (t, i) {
                  return e.qc(i), !0;
                }),
                this
              );
            }),
            (t.prototype.tc = function (t, e, i, r) {
              return (
                (this.hb = Math.min(this.hb, t)),
                (this.ib = Math.max(this.ib, e)),
                (this.fb = Math.min(this.fb, i)),
                (this.gb = Math.max(this.gb, r)),
                this
              );
            }),
            (t.prototype.uc = function (t, e) {
              return (
                (this.hb = Math.min(this.hb, t)),
                (this.ib = Math.max(this.ib, t)),
                (this.fb = Math.min(this.fb, e)),
                (this.gb = Math.max(this.gb, e)),
                this
              );
            }),
            (t.prototype.vc = function (t) {
              if (t < 0) {
                var e = 2 * t;
                if (e < this.hb - this.ib || e < this.fb - this.gb)
                  throw new Error("");
              }
              return (
                (this.hb -= t),
                (this.ib += t),
                (this.fb -= t),
                (this.gb += t),
                this
              );
            }),
            (t.prototype.valid = function () {
              return (
                isFinite(this.hb) &&
                isFinite(this.ib) &&
                isFinite(this.fb) &&
                isFinite(this.gb)
              );
            }),
            (t.prototype.clear = function () {
              (this.hb = Number.POSITIVE_INFINITY),
                (this.ib = Number.NEGATIVE_INFINITY),
                (this.fb = Number.POSITIVE_INFINITY),
                (this.gb = Number.NEGATIVE_INFINITY);
            }),
            (t.prototype.wc = function () {
              return new a(this.hb, this.ib, this.fb, this.gb);
            }),
            t
          );
        })();
        e.xc = o;
        var a = (function () {
          function t(t, e, r, n) {
            (this.hb = i.J.N(t)),
              (this.ib = i.J.N(e)),
              (this.fb = i.J.N(r)),
              (this.gb = i.J.N(n));
          }
          return (
            (t.yc = function (e, i) {
              return null === e
                ? new t(i.x, i.x, i.y, i.y)
                : new t(
                    Math.min(e.hb, i.x),
                    Math.max(e.ib, i.x),
                    Math.min(e.fb, i.y),
                    Math.max(e.gb, i.y)
                  );
            }),
            (t.lb = function (e, i) {
              return null === e
                ? i
                : new t(
                    Math.min(e.hb, i.hb),
                    Math.max(e.ib, i.ib),
                    Math.min(e.fb, i.fb),
                    Math.max(e.gb, i.gb)
                  );
            }),
            (t.prototype.zc = function (t) {
              return this.Ac(t.x, t.y);
            }),
            (t.prototype.Ac = function (t, e) {
              return this.Bc(t) && this.Cc(e);
            }),
            (t.prototype.Dc = function (t, e) {
              return this.Ec(t) && this.Fc(e);
            }),
            (t.prototype.Bc = function (t) {
              return t >= this.hb && t <= this.ib;
            }),
            (t.prototype.Ec = function (t) {
              return r.ca.aa(t, this.hb) && r.ca.$(t, this.ib);
            }),
            (t.prototype.Cc = function (t) {
              return t >= this.fb && t <= this.gb;
            }),
            (t.prototype.Fc = function (t) {
              return r.ca.aa(t, this.fb) && r.ca.$(t, this.gb);
            }),
            (t.prototype.Gc = function (t) {
              return (
                !(Math.max(this.hb, t.hb) > Math.min(this.ib, t.ib)) &&
                !(Math.max(this.fb, t.fb) > Math.min(this.gb, t.gb))
              );
            }),
            (t.prototype.Hc = function (e) {
              return (
                i.J.O(e),
                new t(this.hb - e, this.ib + e, this.fb - e, this.gb + e)
              );
            }),
            (t.prototype.Ic = function (t) {
              return (
                this.hb >= t.hb &&
                this.ib <= t.ib &&
                this.fb >= t.fb &&
                this.gb <= t.gb
              );
            }),
            (t.prototype.Jc = function (e) {
              var i = Math.max(this.hb, e.hb),
                n = Math.min(this.ib, e.ib);
              if (r.ca._(i, n)) return null;
              i > n && (n = i);
              var s = Math.max(this.fb, e.fb),
                o = Math.min(this.gb, e.gb);
              return r.ca._(s, o)
                ? null
                : (s > o && (o = s), new t(i, n, s, o));
            }),
            (t.prototype.width = function () {
              return this.ib - this.hb;
            }),
            (t.prototype.height = function () {
              return this.gb - this.fb;
            }),
            (t.prototype.Kc = function () {
              return new s.Zb(this.hb, this.gb);
            }),
            (t.prototype.Lc = function () {
              return new s.Zb(this.ib, this.gb);
            }),
            (t.prototype.Mc = function () {
              return new s.Zb(this.hb, this.fb);
            }),
            (t.prototype.Nc = function () {
              return new s.Zb(this.ib, this.fb);
            }),
            (t.prototype.Oc = function () {
              return new s.Zb(
                this.ib - (this.ib - this.hb) / 2,
                this.gb - (this.gb - this.fb) / 2
              );
            }),
            (t.prototype.Pc = function () {
              return this.width() * this.height();
            }),
            (t.prototype.transform = function (t) {
              var e = new o();
              return (
                e.qc(this.Mc().Xb(t)),
                e.qc(this.Nc().Xb(t)),
                e.qc(this.Lc().Xb(t)),
                e.qc(this.Kc().Xb(t)),
                e.wc()
              );
            }),
            (t.prototype.vb = function (t) {
              var e;
              e = this.hb >= t.hb ? this.hb : t.hb;
              var i;
              if (((i = this.ib <= t.ib ? this.ib : t.ib), e > i)) return !0;
              var r = void 0;
              r = this.fb >= t.fb ? this.fb : t.fb;
              var n = void 0;
              return (n = this.gb <= t.gb ? this.gb : t.gb), r > n;
            }),
            (t.prototype.Qc = function (t) {
              var e,
                i = 0,
                r = 0;
              this.hb > t.hb
                ? (i++, (e = this.hb))
                : this.hb === t.hb
                ? (e = this.hb)
                : (r++, (e = t.hb));
              var n;
              if (
                (this.ib < t.ib
                  ? (i++, (n = this.ib))
                  : this.ib === t.ib
                  ? (n = this.ib)
                  : (r++, (n = t.ib)),
                e > n)
              )
                return 2;
              var s = void 0;
              this.fb > t.fb
                ? (i++, (s = this.fb))
                : this.fb === t.fb
                ? (s = this.fb)
                : (r++, (s = t.fb));
              var o = void 0;
              return (
                this.gb < t.gb
                  ? (i++, (o = this.gb))
                  : this.gb === t.gb
                  ? (o = this.gb)
                  : (r++, (o = t.gb)),
                s > o
                  ? 2
                  : 4 === i
                  ? 0
                  : 4 === r
                  ? 1
                  : 0 === i && 0 === r
                  ? 4
                  : e === n || s === o
                  ? 6
                  : i !== r
                  ? 5
                  : 3
              );
            }),
            (t.prototype.toString = function () {
              return (
                "BBox [minX=" +
                this.hb +
                ", maxX=" +
                this.ib +
                ", minY=" +
                this.fb +
                ", maxY=" +
                this.gb +
                "]"
              );
            }),
            t
          );
        })();
        e.mb = a;
      }
    ),
    i("geometry/LineCap", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i("geometry/Sweep", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i("geometry/BaseOperator", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i("geometry/Primitive", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t() {}
        return t;
      })();
      e.Rc = i;
    }),
    i(
      "geometry/Line",
      [
        "require",
        "exports",
        "geometry/Primitive",
        "geometry/BBox2",
        "geometry/Matrix3",
        "geometry/Polyline",
        "geometry/Arc",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var u = (function (t) {
          function i(e, i) {
            var r = t.call(this) || this;
            return (
              e.u(i)
                ? ((r.a = NaN),
                  (r.b = NaN),
                  (r.c = NaN),
                  (r.Sc = e),
                  (r.Tc = i))
                : ((r.a = i.y - e.y),
                  (r.b = e.x - i.x),
                  (r.c = i.x * e.y - e.x * i.y),
                  (r.Sc = e),
                  (r.Tc = i)),
              (r.jb = new n.xc().qc(e).qc(i).wc()),
              (r.Jb = r.Uc()),
              r
            );
          }
          return (
            e(i, t),
            (i.prototype.Uc = function () {
              var t = 1;
              return (t = 31 * t + this.Sc.$a()), (t = 31 * t + this.Tc.$a());
            }),
            (i.prototype.start = function () {
              return this.Sc;
            }),
            (i.prototype.end = function () {
              return this.Tc;
            }),
            (i.prototype.Vc = function (t) {
              var e = this.Tc.x - this.Sc.x,
                r = this.Tc.y - this.Sc.y,
                n = Math.sqrt(e * e + r * r);
              return (
                (e = (e * t) / n),
                (r = (-r * t) / n),
                new i(
                  new h.Zb(this.Sc.x + r, this.Sc.y + e),
                  new h.Zb(this.Tc.x + r, this.Tc.y + e)
                )
              );
            }),
            (i.prototype.Wc = function () {
              return this.Sc.u(this.Tc);
            }),
            (i.prototype.Xc = function () {
              return this.Sc.Yb(this.Tc);
            }),
            (i.prototype.length = function () {
              return this.Sc.Gb(this.Tc);
            }),
            (i.prototype.toString = function () {
              return "Line [start=" + this.Sc + ", end=" + this.Tc + "]";
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.Xb = function (t) {
              return new i(this.Sc.Xb(t), this.Tc.Xb(t));
            }),
            (i.prototype.$a = function () {
              return this.Jb;
            }),
            (i.prototype.u = function (t) {
              var e = t;
              return this.Jb === e.Jb && this.Sc.u(e.start) && this.Tc.u(e.end);
            }),
            (i.prototype.stroke = function (t, e, i) {
              var r, n, u;
              this.Tc.x < this.Sc.x
                ? ((n = this.Sc.x - this.Tc.x),
                  (u = this.Sc.y - this.Tc.y),
                  (r = this.Tc))
                : ((n = this.Tc.x - this.Sc.x),
                  (u = this.Tc.y - this.Sc.y),
                  (r = this.Sc));
              var c,
                p,
                f,
                l = Math.sqrt(n * n + u * u),
                v = t / 2;
              2 === e ? ((p = -v), (f = l + v)) : ((p = 0), (f = l)),
                (c =
                  0 === e || 2 === e
                    ? 0 === i
                      ? o.Zc.Yc([p, -v, p, v, f, v, f, -v])
                      : o.Zc.Yc([p, v, p, -v, f, -v, f, v])
                    : 0 === i
                    ? o.Zc.$c([
                        a.ad._c(new h.Zb(p, 0), -90, -180, v, v),
                        a.ad._c(new h.Zb(f, 0), 90, -180, v, v)
                      ])
                    : o.Zc.$c([
                        a.ad._c(new h.Zb(p, 0), 90, 180, v, v),
                        a.ad._c(new h.Zb(f, 0), -90, 180, v, v)
                      ]));
              var b = Math.atan2(u, n),
                y = s.va.rotate(b).qa(r);
              return c.Xb(y);
            }),
            (i.prototype.points = function (t) {
              return [this.Sc, this.Tc];
            }),
            i
          );
        })(r.Rc);
        i.bd = u;
      }
    ),
    i(
      "geometry/Bezier",
      [
        "require",
        "exports",
        "geometry/Primitive",
        "geometry/BBox2",
        "utils/Utils",
        "utils/Itor"
      ],
      function (t, i, r, n, s, o) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var a = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            if (((i.dd = []), e.length < 2))
              throw new Error("Bezier needs at least 2 endpoints");
            return s.F.t(i.dd, e), (i.ed = new n.xc().rc(i.points(20)).wc()), i;
          }
          return (
            e(i, t),
            (i.prototype.fd = function (t) {
              var e = [];
              return (
                o.ya(t, function (t, i) {
                  return e.push(i), !0;
                }),
                new i(e)
              );
            }),
            (i.prototype.start = function () {
              return this.dd[0];
            }),
            (i.prototype.end = function () {
              return this.dd[this.dd.length - 1];
            }),
            (i.gd = function (t, e) {
              if (e.length < 1)
                throw new Error("bezier must have at least 1 point");
              if (1 === e.length) return e[0];
              for (var r = new Array(e.length - 1), n = 1; n < e.length; n++) {
                var s = e[n - 1],
                  o = e[n],
                  a = (o.x - s.x) * t,
                  h = (o.y - s.y) * t;
                r[n - 1] = s.Qb(a, h);
              }
              return i.gd(t, r);
            }),
            (i.prototype.toString = function () {
              return "Bezier [" + this.dd.join(" ") + "]";
            }),
            (i.prototype.eb = function () {
              return this.ed;
            }),
            (i.prototype.Xb = function (t) {
              for (
                var e = new Array(this.dd.length), r = 0;
                r < this.dd.length;
                r++
              ) {
                var n = this.dd[r];
                e[r] = n.Xb(t);
              }
              return new i(e);
            }),
            (i.prototype.stroke = function (t, e, i) {
              throw new Error("not supported");
            }),
            (i.prototype.points = function (t) {
              for (
                var e = t * t, r = this.dd[0], n = 0.5;
                n > 1e-5 && !(r.Fb(i.gd(n, this.dd)) <= e);
                n *= 0.5
              );
              var s = Math.ceil(1 / n),
                o = new Array(s + 1),
                a = 0;
              o[0] = this.start();
              for (var h = 1; h < s; h++) (a += n), (o[h] = i.gd(a, this.dd));
              return (o[s] = this.end()), o;
            }),
            i
          );
        })(r.Rc);
        i.hd = a;
      }
    ),
    i(
      "geometry/Polyline",
      [
        "require",
        "exports",
        "geometry/BBox2",
        "utils/Itor",
        "geometry/Line",
        "utils/Utils",
        "geometry/Arc",
        "geometry/Bezier",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o, a, h) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var u = (function () {
          function t(t, e) {
            (this.jd = t), (this.jb = e);
          }
          return (
            (t.kd = function (t) {
              for (var e = new i.xc(), r = 0; r < t.length; r++) {
                var n = t[r];
                e.pc(n.eb());
              }
              return e.wc();
            }),
            (t.fd = function (e) {
              var i = [],
                s = null;
              return (
                r.Aa(e, function (t, e) {
                  var r = e.start(),
                    o = e.end();
                  return (
                    null === s || r.u(s) || i.push(new n.bd(s, r)),
                    i.push(e),
                    (s = o),
                    !0
                  );
                }),
                0 === i.length && null != s && i.push(new n.bd(s, s)),
                new t(i, t.kd(i))
              );
            }),
            (t.$c = function (e) {
              return t.fd(r.Ea(e));
            }),
            (t._c = function (e) {
              var s = new i.xc(),
                o = [],
                a = null;
              return (
                r.Aa(e, function (t, e) {
                  return (
                    null !== a && o.push(new n.bd(a, e)), s.qc(e), (a = e), !0
                  );
                }),
                new t(o, s.wc())
              );
            }),
            (t.ld = function (t) {
              return this._c(r.Ea(t));
            }),
            (t.Yc = function (t) {
              for (var e = [], i = 0; i < t.length; i += 2)
                e.push(new h.Zb(t[i], t[i + 1]));
              return this.ld(e);
            }),
            (t.prototype.closed = function () {
              if (this.jd.length <= 1) return !1;
              var t = this.jd[0],
                e = this.jd[this.jd.length - 1];
              return t.start().u(e.end());
            }),
            (t.prototype.md = function () {
              var e = this.jd[0],
                i = this.jd[this.jd.length - 1],
                r = e.start(),
                o = i.end();
              if (r.u(o)) return this;
              var a = new Array();
              return s.F.t(a, this.jd), a.push(new n.bd(o, r)), t.$c(a);
            }),
            (t.prototype.reverse = function () {
              for (
                var e = new Array(this.jd.length),
                  i = 0,
                  r = this.jd.length - 1;
                r >= 0;
                i++, r--
              ) {
                var s = this.jd[r];
                if (s instanceof n.bd) s = new n.bd(s.end(), s.start());
                else if (s instanceof o.ad) s = s.nd();
                else {
                  if (!(s instanceof a.hd)) throw new Error("bug");
                  var h = s.dd.reverse();
                  s = new a.hd(h);
                }
                e[i] = s;
              }
              return new t(e, this.jb);
            }),
            (t.prototype.points = function (t, e) {
              for (var i = 0, r = this.jd; i < r.length; i++)
                for (var n = r[i], s = 0, o = n.points(t); s < o.length; s++) {
                  var a = o[s];
                  e(a);
                }
            }),
            (t.prototype.Xb = function (e) {
              for (
                var r = new i.xc(), n = new Array(this.jd.length), s = 0;
                s < this.jd.length;
                s++
              ) {
                var o = this.jd[s].Xb(e);
                (n[s] = o), r.pc(o.eb());
              }
              return new t(n, r.wc());
            }),
            (t.prototype.eb = function () {
              return this.jb;
            }),
            t
          );
        })();
        e.Zc = u;
      }
    ),
    i(
      "geometry/Triangle",
      ["require", "exports", "geometry/utils/Vector", "geometry/Vector2"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t(t, e, i) {
            (this.p1 = t), (this.p2 = e), (this.p3 = i);
          }
          return (
            (t.prototype.od = function () {
              return t.od(this.p1, this.p2, this.p3);
            }),
            (t.od = function (t, e, i) {
              var n = t.x + e.x + i.x,
                s = t.y + e.y + i.y;
              return new r.Zb(n / 3, s / 3);
            }),
            (t.prototype.Pc = function () {
              return t.Pc(this.p1, this.p2, this.p3);
            }),
            (t.Pc = function (t, e, i) {
              return this.pd(t.x, t.y, e.x, e.y, i.x, i.y) / 2;
            }),
            (t.pd = function (t, e, r, n, s, o) {
              return Math.abs(i.Ib.Db(t, e, r, n, s, o));
            }),
            t
          );
        })();
        e.qd = n;
      }
    ),
    i(
      "geometry/Arc",
      [
        "require",
        "exports",
        "geometry/BBox2",
        "utils/Check",
        "geometry/utils/Angle",
        "geometry/Matrix3",
        "utils/StringKit",
        "geometry/Polyline",
        "geometry/Triangle",
        "geometry/Primitive",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var f = (function (t) {
          function i(e, i, r, n, s) {
            var o = t.call(this) || this;
            return (
              (o.rx = e),
              (o.ry = i),
              (o.rd = e * e),
              (o.sd = i * i),
              (o.Oc = r),
              (o.td = n),
              (o.ud = s),
              (o.Sc = p.Zb.oa),
              (o.Tc = p.Zb.oa),
              (o.Sc = o.gd(n)),
              (o.Tc = o.gd(n + s)),
              (o.vd = o.wd(n, s, o.Sc, o.Tc)),
              (o.jb = o.xd()),
              o
            );
          }
          return (
            e(i, t),
            (i.prototype.wd = function (t, e, i, r) {
              for (
                var n = e >= 0 ? -0.01 : 0.01, s = t + e;
                ((e >= 0 && s > t) || (e < 0 && s < t)) && i.Fb(r) < 2e-4;

              )
                (n *= 2), (s += n), (r = this.gd(s));
              return r;
            }),
            (i.fd = function (t, e, r, o, a, h) {
              if ((n.J.P(r), n.J.P(o), t.u(e)))
                return new i(0.001, 0.001, t, 0, a ? 360 : 0);
              var u = t.x,
                c = -t.y,
                f = e.x,
                l = -e.y,
                v = 0 === h,
                b = (u - f) / 2,
                y = (c - l) / 2,
                d = Math.cos(0),
                g = Math.sin(0),
                w = d * b + g * y,
                m = -g * b + d * y;
              (r = Math.abs(r)), (o = Math.abs(o));
              var E = r * r,
                O = o * o,
                x = w * w,
                A = m * m,
                N = a === v ? -1 : 1,
                q = (E * O - E * A - O * x) / (E * A + O * x);
              q = q < 0 ? 0 : q;
              var T = N * Math.sqrt(q),
                k = T * ((r * m) / o),
                R = T * ((-o * w) / r),
                S = (u + f) / 2,
                I = (c + l) / 2,
                L = S + (d * k - g * R),
                P = I + (g * k + d * R),
                _ = (w - k) / r,
                M = (m - R) / o,
                C = (-w - k) / r,
                F = (-m - R) / o,
                j = void 0,
                D = void 0;
              (D = Math.sqrt(_ * _ + M * M)), (j = _), (N = M < 0 ? -1 : 1);
              var B = s.Ub.Tb(N * Math.acos(j / D));
              (D = Math.sqrt((_ * _ + M * M) * (C * C + F * F))),
                (j = _ * C + M * F),
                (N = _ * F - M * C < 0 ? -1 : 1);
              var U = j / D,
                Q = void 0;
              Q = U < -1 ? Math.acos(-1) : U > 1 ? Math.acos(1) : Math.acos(U);
              var X = s.Ub.Tb(N * Q);
              !v && X > 0 ? (X -= 360) : v && X < 0 && (X += 360),
                n.J.N(B),
                n.J.N(X);
              var Z = t.Gb(e) / 2;
              return (
                r < Z && o < Z && ((r = Z), (o = Z)),
                new i(r, o, new p.Zb(L, -P), s.Ub.$b(-B), -X)
              );
            }),
            (i.$c = function (t, e, r, o, a, h) {
              n.J.P(o), n.J.P(a), n.J.N(e), n.J.N(r);
              var u;
              return (
                e === r
                  ? ((e = s.Ub.$b(e)), (r = s.Ub.$b(r)), (u = 0))
                  : ((e = s.Ub.$b(e)),
                    (r = s.Ub.$b(r)),
                    1 === h ? r <= e && (r += 360) : r >= e && (e += 360),
                    (u = r - e)),
                new i(o, a, t, s.Ub.$b(e), u)
              );
            }),
            (i._c = function (t, e, r, o, a) {
              return (
                n.J.P(o), n.J.P(a), n.J.N(r), new i(o, a, t, s.Ub.$b(e), r)
              );
            }),
            (i.prototype.start = function () {
              return this.Sc;
            }),
            (i.prototype.end = function () {
              return this.Tc;
            }),
            (i.prototype.yd = function () {
              return Math.abs(this.ud) > 180;
            }),
            (i.prototype.zd = function () {
              return this.ud >= 0 ? 1 : 0;
            }),
            (i.prototype.Ad = function () {
              return this.td + this.ud;
            }),
            (i.prototype.gd = function (t) {
              t = s.Ub.$b(t);
              var e = this.rx,
                i = this.ry;
              if (0 === t) return this.Oc.Qb(e, 0);
              if (90 === t) return this.Oc.Qb(0, i);
              if (180 === t) return this.Oc.Qb(-e, 0);
              if (270 === t) return this.Oc.Qb(0, -i);
              var r = this.rd,
                n = this.sd,
                o = Math.tan(s.Ub.Wb(t)),
                a = o * o,
                h = Math.sqrt((r * n) / (r + n / a)),
                u = Math.sqrt((r * n) / (n + r * a));
              return (
                t > 90 && t < 270 && (u = -u),
                t > 180 && t < 360 && (h = -h),
                isNaN(u) && (u = 0),
                isNaN(h) && (h = 0),
                this.Oc.Qb(u, h)
              );
            }),
            (i.prototype.nd = function () {
              return i._c(
                this.Oc,
                this.td + this.ud,
                -this.ud,
                this.rx,
                this.ry
              );
            }),
            (i.prototype.Bd = function () {
              return (Math.abs(this.ud) / 360) * Math.PI * this.rx * this.ry;
            }),
            (i.prototype.Pc = function () {
              var t = u.qd.Pc(this.Oc, this.Sc, this.gd(this.Ad()));
              return this.Bd() - t;
            }),
            (i.prototype.Xb = function (t) {
              var e;
              e = t.hc() ? -this.ud : this.ud;
              var r;
              return (
                (r = t.u(o.va.nc)
                  ? s.Ub.$b(this.td + 90)
                  : t.u(o.va.oc)
                  ? s.Ub.$b(this.td - 90)
                  : s.Ub.ec(this.td, t)),
                i._c(this.Oc.Xb(t), r, e, t.fc * this.rx, t.fc * this.ry)
              );
            }),
            (i.prototype.xd = function () {
              var t = this.td + this.ud,
                e = new r.xc().qc(this.Sc).qc(this.gd(t));
              if (this.ud > 0)
                for (var i = 0; i < t; )
                  i > this.td && e.qc(this.gd(i)), (i += 90);
              else if (this.ud < 0)
                for (var i = 360; i > t; )
                  i < this.td && e.qc(this.gd(i)), (i -= 90);
              return e.wc();
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.toString = function () {
              return a.L.format(
                "Arc [start=%s, end=%s, rx=%s, ry=%s, center=%s, startAngle=%s, sweepAngle=%s]",
                this.Sc,
                this.Tc,
                this.rx,
                this.ry,
                this.Oc,
                this.td,
                this.ud
              );
            }),
            (i.prototype.stroke = function (t, e, r) {
              var n = t / 2,
                s = this.rx + n,
                a = this.ry + n,
                u = this.rx - n,
                c = this.ry - n,
                p = new o.va();
              u < 0 && ((u = -u), (p = p.Xb(o.va.lc))),
                c < 0 && ((c = -c), (p = p.Xb(o.va.mc))),
                0 === u && (u = 0.001),
                0 === c && (c = 0.001),
                (p = p.ta(this.Oc));
              var f, l;
              switch (
                (r === this.zd()
                  ? ((f = i._c(this.Oc, this.td, this.ud, s, a)),
                    (l = i._c(this.Oc, this.td + this.ud, -this.ud, u, c)))
                  : ((f = i._c(this.Oc, this.td + this.ud, -this.ud, s, a)),
                    (l = i._c(this.Oc, this.td, this.ud, u, c))),
                (l = l.Xb(p)),
                e)
              ) {
                case 1:
                  var v = 1 === r ? 180 : -180,
                    b = r === this.zd() ? this.gd(this.Ad()) : this.gd(this.td),
                    y = r === this.zd() ? this.gd(this.td) : this.gd(this.Ad()),
                    d = f.gd(f.Ad()).Sb(b),
                    g = l.gd(l.Ad()).Sb(y);
                  return h.Zc.$c([
                    f,
                    i._c(b, d, v, n, n),
                    l,
                    i._c(y, g, v, n, n)
                  ]);
                default:
                  return h.Zc.$c([f, l]);
              }
            }),
            (i.prototype.points = function (t) {
              for (
                var e =
                    2 *
                    Math.PI *
                    Math.max(this.rx, this.ry) *
                    (Math.abs(this.ud) / 360),
                  i = Math.ceil(e / t),
                  r = new Array(i + 1),
                  n = this.ud / i,
                  s = this.td,
                  o = 0;
                o <= i;
                o++, s += n
              )
                r[o] = this.gd(s);
              return r;
            }),
            (i.prototype.Vc = function (t) {
              return this.ud > 0
                ? new i(this.rx - t, this.ry - t, this.Oc, this.td, this.ud)
                : new i(this.rx + t, this.ry + t, this.Oc, this.td, this.ud);
            }),
            i
          );
        })(c.Rc);
        i.ad = f;
      }
    ),
    i(
      "geometry/BBox3",
      ["require", "exports", "utils/Check", "geometry/Vector3"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t() {
            (this.hb = Number.POSITIVE_INFINITY),
              (this.fb = Number.POSITIVE_INFINITY),
              (this.Cd = Number.POSITIVE_INFINITY),
              (this.ib = Number.NEGATIVE_INFINITY),
              (this.gb = Number.NEGATIVE_INFINITY),
              (this.Dd = Number.NEGATIVE_INFINITY);
          }
          return (
            (t.prototype.pc = function (t, e, i, r, n, s) {
              if (!(t <= r && e <= n && i <= s))
                throw new Error("min > max is not permitted");
              return (
                (this.hb = Math.min(this.hb, t)),
                (this.fb = Math.min(this.fb, e)),
                (this.Cd = Math.min(this.Cd, i)),
                (this.ib = Math.max(this.ib, r)),
                (this.gb = Math.max(this.gb, n)),
                (this.Dd = Math.max(this.Dd, s)),
                this
              );
            }),
            (t.prototype.qc = function (t, e, i) {
              return (
                (this.hb = Math.min(this.hb, t)),
                (this.fb = Math.min(this.fb, e)),
                (this.Cd = Math.min(this.Cd, i)),
                (this.ib = Math.max(this.ib, t)),
                (this.gb = Math.max(this.gb, e)),
                (this.Dd = Math.max(this.Dd, i)),
                this
              );
            }),
            (t.prototype.rc = function (t) {
              return this.qc(t.x, t.y, t.z);
            }),
            (t.prototype.sc = function (t) {
              return this.pc(t.hb, t.fb, t.Cd, t.ib, t.gb, t.Dd);
            }),
            (t.prototype.tc = function (t, e) {
              return (
                (this.hb = Math.min(this.hb, t)),
                (this.fb = Math.min(this.fb, e)),
                (this.ib = Math.max(this.ib, t)),
                (this.gb = Math.max(this.gb, e)),
                this
              );
            }),
            (t.prototype.uc = function (t) {
              return (
                (this.Cd = Math.min(this.Cd, t)),
                (this.Dd = Math.max(this.Dd, t)),
                this
              );
            }),
            (t.prototype.Ed = function () {
              return (
                isFinite(this.hb) &&
                isFinite(this.fb) &&
                isFinite(this.Cd) &&
                isFinite(this.ib) &&
                isFinite(this.gb) &&
                isFinite(this.Dd)
              );
            }),
            (t.prototype.wc = function () {
              return new s(
                this.hb,
                this.fb,
                this.Cd,
                this.ib,
                this.gb,
                this.Dd
              );
            }),
            t
          );
        })();
        e.Fd = n;
        var s = (function () {
          function t(t, e, r, n, s, o) {
            if (!(t <= n && e <= s && r <= o))
              throw new Error("min > max is not permitted");
            (this.hb = i.J.N(t)),
              (this.fb = i.J.N(e)),
              (this.Cd = i.J.N(r)),
              (this.ib = i.J.N(n)),
              (this.gb = i.J.N(s)),
              (this.Dd = i.J.N(o));
          }
          return (
            (t.prototype.Oc = function () {
              return new r.pa(
                (this.hb + this.ib) / 2,
                (this.fb + this.gb) / 2,
                (this.Cd + this.Dd) / 2
              );
            }),
            (t.prototype.transform = function (t) {
              var e = new n(),
                i = new r.pa(this.hb, this.fb, this.Cd).na(t),
                s = new r.pa(this.ib, this.gb, this.Dd).na(t);
              return e.rc(i).rc(s).wc();
            }),
            t
          );
        })();
        e.Gd = s;
      }
    ),
    i(
      "geometry/PolylineGroup",
      ["require", "exports", "geometry/BBox2", "utils/Utils", "utils/Itor"],
      function (t, e, i, r, n) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var s = (function () {
          function t(t) {
            (this.nb = new Array(t.length)),
              r.F.o(t, 0, this.nb, 0, t.length),
              (this.jb = this.kd());
          }
          return (
            (t.fd = function (e) {
              var i = [];
              return (
                n.Aa(e, function (t, e) {
                  return i.push(e), !0;
                }),
                new t(i)
              );
            }),
            (t.prototype.kd = function () {
              for (var t = new i.xc(), e = 0; e < this.nb.length; e++)
                t.pc(this.nb[e].eb());
              return t.wc();
            }),
            (t.prototype.Xb = function (e) {
              for (var i = new Array(this.nb.length), r = 0; r < i.length; r++)
                i[r] = this.nb[r].Xb(e);
              return new t(i);
            }),
            (t.prototype.eb = function () {
              return this.jb;
            }),
            t
          );
        })();
        e.Hd = s;
      }
    ),
    i(
      "geometry/utils/Distance",
      [
        "require",
        "exports",
        "geometry/Line",
        "geometry/Arc",
        "geometry/utils/Intersection",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = (function () {
          function t(t, e) {
            (this.Id = Number.MAX_VALUE),
              (this.Jd = t),
              (this.p1 = e),
              this.Kd()
                ? ((this.Id = 0), (this.Ld = new i.bd(s.Zb.oa, s.Zb.oa)))
                : (this.Ld = this.Md());
          }
          return (
            (t.prototype.Nd = function () {
              return this.Id;
            }),
            (t.prototype.Od = function () {
              return this.Ld;
            }),
            (t.prototype.Kd = function () {
              return n.Pd(this.Jd, this.p1) > 0;
            }),
            (t.prototype.Md = function () {
              if (this.Jd instanceof i.bd && this.p1 instanceof i.bd) {
                var t = this.Jd,
                  e = this.p1;
                return this.Qd(t, e, this.Ld);
              }
              if (this.Jd instanceof r.ad && this.p1 instanceof i.bd) {
                var n = this.Jd,
                  s = this.p1;
                return this.Rd(n, s, this.Ld);
              }
              if (this.Jd instanceof i.bd && this.p1 instanceof r.ad) {
                var n = this.p1,
                  s = this.Jd;
                return this.Rd(n, s, this.Ld);
              }
              if (this.Jd instanceof r.ad && this.p1 instanceof r.ad) {
                var o = this.Jd,
                  a = this.p1;
                return this.Sd(o, a, this.Ld);
              }
              return this.Ld;
            }),
            (t.prototype.Qd = function (t, e, i) {
              for (
                var r = [t.start(), t.end(), e.start(), e.end()], n = 0;
                n < r.length;
                n++
              )
                i = n < 2 ? this.Td(i, e, r[n]) : this.Td(i, t, r[n]);
              return i;
            }),
            (t.prototype.Rd = function (e, i, r) {
              (r = this.Td(r, i, e.start())), (r = this.Td(r, i, e.vd));
              var n = t.Ud(i, e.Oc);
              return (
                i.eb().zc(n) && (r = this.Vd(r, e, n)),
                (r = this.Vd(r, e, i.start())),
                (r = this.Vd(r, e, i.end()))
              );
            }),
            (t.prototype.Sd = function (t, e, i) {
              return (
                (i = this.Wd(t, e, i)),
                n.Xd(t, e.Oc) && n.Xd(e, t.Oc)
                  ? (i = this.Yd(t, e, i))
                  : ((i = this.Zd(e.start(), t, i)),
                    (i = this.Zd(e.vd, t, i)),
                    (i = this.Zd(t.start(), e, i)),
                    (i = this.Zd(t.vd, e, i))),
                i
              );
            }),
            (t.prototype.$d = function (t, e, i) {
              var r = t.gd(i.Sb(t.Oc)),
                n = t.gd(t.Oc.Sb(i));
              return (e = this._d(t, e, i, r)), (e = this._d(t, e, i, n));
            }),
            (t.prototype.ae = function (t, e, r) {
              var n = r.Gb(t.Oc);
              if (0 !== n) {
                var o = (t.rx * (r.y - t.Oc.y)) / n + t.Oc.y,
                  a = (t.rx * (r.x - t.Oc.x)) / n + t.Oc.x,
                  h = new i.bd(new s.Zb(a, o), r);
                (n = t.rx - n), n < this.Id && ((this.Id = n), (e = h));
              } else {
                var h = new i.bd(t.start(), r);
                (n = t.rx - n), n < this.Id && ((this.Id = n), (e = h));
              }
              return e;
            }),
            (t.prototype.Yd = function (t, e, i) {
              var r = t.Oc.Sb(e.Oc),
                s = e.Oc.Sb(t.Oc),
                o = t.gd(r),
                a = t.gd(s),
                h = e.gd(r),
                u = e.gd(s);
              return (
                n.Xd(t, o) &&
                  ((i = this._d(e, i, o, h)), (i = this._d(e, i, o, u))),
                n.Xd(t, a) &&
                  ((i = this._d(e, i, a, h)), (i = this._d(e, i, a, u))),
                i
              );
            }),
            (t.prototype.Wd = function (t, e, r) {
              if (t.Oc.Gb(e.Oc) < 1e-5 && t.rx === e.rx && t.ry === e.ry) {
                var n = new i.bd(t.start(), e.vd);
                n.length() < this.Id && ((this.Id = n.length()), (r = n)),
                  (n = new i.bd(e.start(), t.vd)),
                  n.length() < this.Id && ((this.Id = n.length()), (r = n));
              }
              return r;
            }),
            (t.prototype.Zd = function (t, e, i) {
              if (n.Xd(e, t)) {
                var r = e.gd(t.Sb(e.Oc)),
                  s = e.gd(e.Oc.Sb(t));
                (i = this._d(e, i, t, r)), (i = this._d(e, i, t, s));
              } else (i = this.be(i, e.start(), t)), (i = this.be(i, e.vd, t));
              return i;
            }),
            (t.prototype.Vd = function (t, e, i) {
              if (n.Xd(e, i)) {
                var r = i.Gb(e.Oc);
                t = r > e.rx || r > e.ry ? this.$d(e, t, i) : this.ae(e, t, i);
              }
              return t;
            }),
            (t.prototype.Td = function (e, i, r) {
              var n = t.Ud(i, r);
              return (
                i.eb().zc(n)
                  ? (e = this.be(e, n, r))
                  : ((e = this.be(e, i.start(), r)),
                    (e = this.be(e, i.end(), r))),
                e
              );
            }),
            (t.prototype.be = function (t, e, r) {
              var n = e.Gb(r);
              return n < this.Id && ((this.Id = n), (t = new i.bd(e, r))), t;
            }),
            (t.prototype._d = function (t, e, r, s) {
              if (n.Xd(t, s)) {
                var o = new i.bd(r, s),
                  a = o.length();
                a < this.Id && ((this.Id = a), (e = o));
              }
              return e;
            }),
            (t.Ud = function (t, e) {
              if (t.Wc()) return t.start();
              if (0 !== t.b && 0 !== t.a) {
                var i =
                    (t.b * t.b * e.x - t.a * t.b * e.y - t.a * t.c) /
                    (t.b * t.b + t.a * t.a),
                  r =
                    (-t.a * t.b * e.x + t.a * t.a * e.y - t.b * t.c) /
                    (t.b * t.b + t.a * t.a);
                return new s.Zb(i, r);
              }
              return 0 === t.b && 0 !== t.a
                ? new s.Zb(t.start().x, e.y)
                : 0 !== t.b && 0 === t.a
                ? new s.Zb(e.x, t.start().y)
                : e;
            }),
            t
          );
        })();
        e.ce = o;
      }
    ),
    i(
      "geometry/utils/Intersection",
      [
        "require",
        "exports",
        "geometry/Line",
        "geometry/Arc",
        "utils/DoubleKit",
        "geometry/Triangle",
        "geometry/utils/Distance",
        "geometry/utils/Vector",
        "geometry/utils/Angle",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o, a, h, u) {
        function c(t, e, i, r, n) {
          if (!(t.length >= e + n && i.length >= r + n))
            throw new Error("arraycopy out of range");
          for (; n-- > 0; ) i[r++] = t[e++];
        }
        function p(t, e) {
          if (t instanceof i.bd && e instanceof i.bd) return d(t, e);
          if (t instanceof r.ad && e instanceof i.bd) return O(t, e);
          if (t instanceof i.bd && e instanceof r.ad) return O(e, t);
          if (t instanceof r.ad && e instanceof r.ad) return A(t, e);
          throw new Error("not supported operation");
        }
        function f(t, e) {
          if (t instanceof i.bd) return l(t, e);
          if (t instanceof r.ad) return v(t, e);
          throw new Error("not supported operation");
        }
        function l(t, e) {
          var r = t.eb();
          if (r.Fc(e)) {
            return d(
              new i.bd(new u.Zb(r.hb - 1, e), new u.Zb(r.ib + 1, e)),
              t
            ) > 0
              ? 1
              : 0;
          }
          return 0;
        }
        function v(t, e) {
          if (t.rx === t.ry) {
            var r = t.eb();
            if (r.Fc(e)) {
              return w(
                t,
                new i.bd(new u.Zb(r.hb - 1, e), new u.Zb(r.ib + 1, e))
              ) > 0
                ? 1
                : 0;
            }
            return 0;
          }
          throw new Error("not supported operation");
        }
        function b(t, e, i) {
          return !(!isFinite(e) || !isFinite(i)) && t.Dc(e, i);
        }
        function y(t, e) {
          var i = t.eb().Jc(e.eb());
          if (null != i) {
            var r = a.Ib.Eb(e.start(), e.end(), t.start()),
              n = a.Ib.Eb(e.start(), e.end(), t.end());
            return Math.abs(r) < 1e-10 || Math.abs(n) < 1e-10 || r * n < 0
              ? i
              : null;
          }
          return null;
        }
        function d(t, i) {
          if (t.Xc()) return g(i, t.start());
          if (i.Xc()) return g(t, i.start());
          var r = y(t, i);
          if (null != r) {
            var n = 0,
              o = t.start().x,
              a = t.start().y,
              h = t.end().x,
              u = t.end().y,
              c = i.start().x,
              p = i.start().y,
              f = i.end().x,
              l = i.end().y,
              v = NaN,
              d = NaN,
              w = o,
              m = a,
              E = h,
              O = u,
              x = s.qd.pd(w, m, c, p, f, l),
              A = s.qd.pd(E, O, c, p, f, l);
            if (x < 1e-10 && A < 1e-10) {
              var N = r.Kc(),
                q = r.Lc(),
                T = r.Mc(),
                k = r.Nc();
              if (0 == r.height() && 0 == r.width())
                (e.cache[n++] = N.x), (e.cache[n++] = N.y);
              else if (0 == r.width())
                (e.cache[n++] = N.x),
                  (e.cache[n++] = N.y),
                  (e.cache[n++] = T.x),
                  (e.cache[n++] = T.y);
              else if (0 == r.height())
                (e.cache[n++] = N.x),
                  (e.cache[n++] = N.y),
                  (e.cache[n++] = q.x),
                  (e.cache[n++] = q.y);
              else {
                var R = s.qd.pd(N.x, N.y, c, p, f, l),
                  S = s.qd.pd(q.x, q.y, c, p, f, l);
                R < S
                  ? ((e.cache[n++] = N.x),
                    (e.cache[n++] = N.y),
                    (e.cache[n++] = k.x),
                    (e.cache[n++] = k.y))
                  : ((e.cache[n++] = q.x),
                    (e.cache[n++] = q.y),
                    (e.cache[n++] = T.x),
                    (e.cache[n++] = T.y));
              }
            } else if (x < 1e-10) (v = w), (d = m);
            else if (A < 1e-10) (v = E), (d = O);
            else
              for (var I = Number.POSITIVE_INFINITY, L = 0; I > 0; ) {
                L++;
                var P = x / (x + A);
                (v = w + (E - w) * P), (d = m + (O - m) * P);
                var _ = s.qd.pd(v, d, c, p, f, l);
                if (x === A || (w === v && m === d) || (E === v && O === d)) {
                  _ > 2e-8 && ((v = NaN), (d = NaN));
                  break;
                }
                (I = _),
                  x < A
                    ? ((E = v), (O = d), (A = I))
                    : ((w = v), (m = d), (x = I));
              }
            return b(r, v, d) && ((e.cache[n++] = v), (e.cache[n++] = d)), n;
          }
          return 0;
        }
        function g(t, i) {
          return t.Wc()
            ? i.Yb(t.start())
              ? ((e.cache[0] = i.x), (e.cache[1] = i.y), 2)
              : 0
            : n.ca.W(
                s.qd.pd(
                  t.start().x,
                  t.start().y,
                  t.end().x,
                  t.end().y,
                  i.x,
                  i.y
                ),
                0
              )
            ? ((e.cache[0] = i.x), (e.cache[1] = i.y), 2)
            : 0;
        }
        function w(t, i) {
          var r = t.eb().Jc(i.eb());
          if (null != r) {
            var h = t.Oc.x,
              u = t.Oc.y,
              p = t.rd,
              f = i.start().x,
              l = i.start().y,
              v = i.end().x,
              b = i.end().y,
              y = t.Oc.Fb(i.start()),
              d = t.Oc.Fb(i.end()),
              g = 0;
            if (n.ca.Z(y, p) && n.ca.Z(d, p)) return 0;
            if (n.ca.W(y, p) && n.ca.W(d, p))
              (e.cache[g++] = f),
                (e.cache[g++] = l),
                (e.cache[g++] = v),
                (e.cache[g++] = b);
            else if (n.ca._(y, p) && n.ca._(d, p)) {
              var w = o.ce.Ud(i, t.Oc),
                O = w.Fb(t.Oc);
              if (n.ca._(O, p)) return 0;
              if (n.ca.W(O, p)) {
                var A = w.Fb(t.start()),
                  N = w.Fb(t.end());
                n.ca.W(A, 0)
                  ? ((e.cache[g++] = t.start().x), (e.cache[g++] = t.start().y))
                  : n.ca.W(N, 0)
                  ? ((e.cache[g++] = t.end().x), (e.cache[g++] = t.end().y))
                  : ((e.cache[g++] = w.x), (e.cache[g++] = w.y));
              } else {
                var q = t.start().x,
                  T = t.start().y,
                  k = t.end().x,
                  R = t.end().y;
                if (
                  (s.qd.pd(q, T, f, l, v, b) < 2e-8 &&
                    ((e.cache[g++] = q), (e.cache[g++] = T)),
                  s.qd.pd(k, R, f, l, v, b) < 2e-8 &&
                    ((e.cache[g++] = k), (e.cache[g++] = R)),
                  g < 4)
                ) {
                  g = E(h, u, f, l, v, b, g);
                  var S = e.cache[g - 2],
                    I = e.cache[g - 1],
                    L = a.Ib.Fb(h, u, S, I);
                  if (((g -= 2), n.ca.W(L, p)))
                    (e.cache[g++] = S), (e.cache[g++] = I);
                  else {
                    if (!(L < p)) return 0;
                    (g = m(p, h, u, f, l, S, I, g)),
                      (g = m(p, h, u, S, I, v, b, g));
                  }
                }
              }
            } else
              n.ca.W(y, p)
                ? ((e.cache[g++] = f), (e.cache[g++] = l))
                : n.ca.W(d, p)
                ? ((e.cache[g++] = v), (e.cache[g++] = b))
                : (g = m(p, h, u, f, l, v, b, g));
            if (g > 0) {
              c(e.cache, 0, e.cache, g, g);
              for (var P = 0, _ = 0; _ < g; _ += 2) {
                var M = e.cache[g + _];
                P = x(t, r, P, e.cache[g + _ + 1], M);
              }
              return P;
            }
            return 0;
          }
          return 0;
        }
        function m(t, i, r, s, o, h, u, c) {
          var p = a.Ib.Fb(s, o, i, r) - t;
          if (n.ca.W(0, p)) return (e.cache[c++] = s), (e.cache[c++] = o), c;
          var f = a.Ib.Fb(h, u, i, r) - t;
          if (n.ca.W(0, f)) return (e.cache[c++] = h), (e.cache[c++] = u), c;
          for (
            var l = s,
              v = o,
              b = h,
              y = u,
              d = NaN,
              g = NaN,
              w = Number.POSITIVE_INFINITY,
              m = 0;
            0 !== w;

          ) {
            m++;
            var E = Math.max(
              Math.min(Math.abs(p) / (Math.abs(p) + Math.abs(f)), 0.9),
              0.1
            );
            if (
              ((d = l + (b - l) * E),
              (g = v + (y - v) * E),
              (l === d && v === g) || (b === d && y === g))
            )
              break;
            (w = a.Ib.Fb(d, g, i, r) - t),
              (w < 0 && p > f) || (w > 0 && p < f)
                ? ((b = d), (y = g), (f = w))
                : ((l = d), (v = g), (p = w));
          }
          return n.ca.W(0, w) ? ((e.cache[c++] = d), (e.cache[c++] = g), c) : c;
        }
        function E(t, i, r, n, s, o, h) {
          if (0 == a.Ib.Db(r, n, s, o, t, i)) {
            var u = a.Ib.Ab(r, n, s, o, t, i),
              c = a.Ib.Ab(s, o, r, n, t, i);
            return u < 0 && c < 0
              ? ((e.cache[h++] = t), (e.cache[h++] = i), h)
              : u >= 0
              ? ((e.cache[h++] = s), (e.cache[h++] = o), h)
              : ((e.cache[h++] = r), (e.cache[h++] = n), h);
          }
          for (
            var p = NaN,
              f = NaN,
              l = r,
              v = n,
              b = s,
              y = o,
              d = a.Ib.Fb(r, n, t, i),
              g = a.Ib.Fb(s, o, t, i),
              w = Number.POSITIVE_INFINITY,
              m = 0;
            w > 0 &&
            (m++,
            (p = l + 0.5 * (b - l)),
            (f = v + 0.5 * (y - v)),
            !(d == g || (l == p && v == f) || (b == p && y == f)));

          ) {
            w = a.Ib.Fb(p, f, t, i);
            var E = a.Ib.Ab(l, v, p, f, t, i);
            if (0 == E) break;
            E < 0 ? ((b = p), (y = f), (g = w)) : ((l = p), (v = f), (d = w));
          }
          return (e.cache[h++] = p), (e.cache[h++] = f), h;
        }
        function O(t, e) {
          if (t.rx === t.ry) return w(t, e);
          throw new Error("not supported");
        }
        function x(t, i, r, n, s) {
          return (
            isFinite(s) &&
              isFinite(n) &&
              b(i, s, n) &&
              T(t, new u.Zb(s, n)) &&
              ((e.cache[r++] = s), (e.cache[r++] = n)),
            r
          );
        }
        function A(t, e) {
          if (null != t.eb().Jc(e.eb())) {
            if (t.rx === t.ry && e.rx === e.ry) return N(t, e);
            throw new Error("not supported operation");
          }
          return 0;
        }
        function N(t, r) {
          var s = t.Oc.x,
            o = t.Oc.y,
            a = r.Oc.x,
            h = r.Oc.y,
            c = t.rx,
            p = r.rx,
            f = t.rd,
            l = r.rd,
            v = t.Oc.Fb(r.Oc),
            b = (c - p) * (c - p),
            y = (c + p) * (c + p);
          if (n.ca._(v, y) || n.ca.Z(v, b)) return 0;
          if (n.ca.W(v, y)) {
            var d = 0,
              g = 0,
              m = new i.bd(t.Oc, r.Oc);
            return (g += w(r, m)), q(t, r, d, g);
          }
          if (n.ca._(b, 0) && n.ca._(v, 0) && n.ca.W(v, b)) {
            var d = 0;
            if (c > p) {
              var E = (c - p) / c;
              return (
                (e.cache[0] = s + (a - s) / E),
                (e.cache[1] = o + (h - o) / E),
                q(t, r, d, 2)
              );
            }
            var E = (p - c) / p;
            return (
              (e.cache[0] = a + (s - a) / E),
              (e.cache[1] = h + (o - h) / E),
              q(t, r, d, 2)
            );
          }
          if (n.ca.W(b, 0) && n.ca.W(v, 0) && n.ca.W(v, b)) {
            var g = 0;
            return (
              T(t, r.start()) &&
                ((e.cache[g] = r.start().x),
                (e.cache[g + 1] = r.start().y),
                (g += 2)),
              T(t, r.end()) &&
                ((e.cache[g] = r.end().x),
                (e.cache[g + 1] = r.end().y),
                (g += 2)),
              T(r, t.start()) &&
                ((e.cache[g] = t.start().x),
                (e.cache[g + 1] = t.start().y),
                (g += 2)),
              T(r, t.end()) &&
                ((e.cache[g] = t.end().x),
                (e.cache[g + 1] = t.end().y),
                (g += 2)),
              g
            );
          }
          var d = 0,
            g = 0,
            O = Math.sqrt(v),
            x = (v - l + f) / (2 * O),
            E = x / O,
            A = (a - s) * E + s,
            N = (h - o) * E + o,
            k = n.ca.V(a - s),
            R = n.ca.V(h - o),
            S = Math.max(c, p);
          if (0 !== R) {
            var I = k / -R,
              L = N - I * A,
              m = new i.bd(
                new u.Zb(A - S, I * (A - S) + L),
                new u.Zb(A + S, I * (A + S) + L)
              );
            g += w(r, m);
          } else {
            var m = new i.bd(new u.Zb(A, N - S), new u.Zb(A, N + S));
            g += w(r, m);
          }
          return q(t, r, d, g);
        }
        function q(t, i, r, n) {
          if (n > 0) {
            var s = 2 * n;
            c(e.cache, 0, e.cache, s, n);
            for (var o = 0; o < n; o += 2) {
              var a = e.cache[s + o],
                h = e.cache[s + o + 1],
                p = new u.Zb(a, h);
              T(t, p) && T(i, p) && ((e.cache[r++] = a), (e.cache[r++] = h));
            }
          }
          return r;
        }
        function T(t, e) {
          var i = t.eb();
          if (
            e.x - i.hb > -k &&
            e.x - i.ib < k &&
            e.y - i.fb > -k &&
            e.y - i.gb < k
          ) {
            if (Math.abs(t.ud) > 180) {
              var r = h.Ub.$b(e.Sb(t.Oc));
              return t.ud > 0
                ? (n.ca.Z(r, t.td) && (r += 360), n.ca.aa(t.Ad(), r))
                : (n.ca._(r, t.td) && (r -= 360), n.ca.$(t.Ad(), r));
            }
            return !0;
          }
          return !1;
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var k = 1e-4;
        (e.cache = new Float64Array(100)),
          (e.Pd = p),
          (e.de = f),
          (e.ee = l),
          (e.fe = v),
          (e.ge = y),
          (e.he = d),
          (e.ie = g),
          (e.je = w),
          (e.ke = E),
          (e.le = O),
          (e.me = A),
          (e.Xd = T);
      }
    ),
    i(
      "geometry/polybool/Side",
      [
        "require",
        "exports",
        "utils/StringKit",
        "geometry/BBox2",
        "utils/Utils",
        "geometry/Line",
        "geometry/Arc",
        "geometry/polybool/BooleanOperation",
        "geometry/utils/Intersection"
      ],
      function (t, e, i, r, n, s, o, a, h) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var u = (function () {
          function t(t, e, i, n, s, o, a) {
            (this.ne = []),
              (this.connect = new Array()),
              (this.oe = null),
              (this.next = null),
              (this.pe = -1),
              (this.qe = NaN),
              (this.re = 0),
              (this.se = 0),
              (this.te = 0),
              (this.ue = 0),
              (this.ve = NaN),
              (this.we = NaN),
              (this.xe = NaN),
              (this.status = 0),
              (this.ye = t),
              (this.shape = e),
              (this.ze = i),
              n.y > s.y
                ? (this.weight = -i)
                : n.y == s.y
                ? (this.weight = 0)
                : (this.weight = i),
              (this.start = n),
              (this.end = s),
              (this.Ae = o),
              (this.Be = a),
              (this.ed = new r.xc().pc(e.eb()).qc(n).qc(s).wc()),
              this.ne.push(n),
              this.ne.push(s);
            var h = 1;
            (h = 31 * h + this.Ae), (h = 31 * h + this.Be), (this.Ce = h);
          }
          return (
            (t.De = function (t, e, i) {
              if (t instanceof s.bd || e.Fb(i) < 1e-6) return new s.bd(e, i);
              if (t instanceof o.ad) {
                var r = t,
                  n = t.eb().Oc().x,
                  a = void 0;
                a = e.y > i.y ? (n > r.Oc.x ? 0 : 1) : n > r.Oc.x ? 1 : 0;
                var h = e.Sb(r.Oc),
                  u = i.Sb(r.Oc);
                return o.ad.$c(r.Oc, h, u, r.rx, r.ry, a);
              }
              throw new Error("not supported operation");
            }),
            (t.prototype.is = function (t, e) {
              return t === this.Ae && e === this.Be;
            }),
            (t.prototype.Ee = function (t) {
              if (this.ve != t) {
                var e = this.ed.height();
                if (0 !== e)
                  if (
                    Math.abs(t - this.ed.gb) > 5e-4 &&
                    Math.abs(t - this.ed.fb) > 5e-4
                  ) {
                    var i = 1 - Math.abs(2 * t - this.ed.gb - this.ed.fb) / e;
                    this.ue = (1e4 * i) | 0;
                  } else this.ue = 0;
                else this.ue = 1;
                this.ve = t;
              }
              return this.ue;
            }),
            (t.prototype.Fe = function () {
              return this.re + this.se + this.te < 5e3;
            }),
            (t.prototype.Ge = function (t) {
              var e = this.Ee(t);
              return (this.re -= e), (this.te += e), e;
            }),
            (t.prototype.He = function (t) {
              var e = this.Ee(t);
              return (this.se -= e), (this.te += e), e;
            }),
            (t.prototype.Ie = function (t) {
              var e = this.Ee(t);
              return (this.re += e), e;
            }),
            (t.prototype.Je = function (t) {
              var e = this.Ee(t);
              return (this.se += e), e;
            }),
            (t.prototype.Ke = function (t) {
              var e = this.Ee(t);
              return (this.te += e), e;
            }),
            (t.prototype.Le = function () {
              for (var t = this.oe; null != t && t != this; ) {
                if (0 != t.weight) return t;
                t = t.oe;
              }
              return null;
            }),
            (t.prototype.Me = function () {
              for (var t = this.next; null != t && t != this; ) {
                if (0 != t.weight) return t;
                t = t.next;
              }
              return null;
            }),
            (t.prototype.Ne = function (t) {
              if (null !== this.ye)
                return (
                  this.xe != t &&
                    (a.Oe(this, t) > 0
                      ? (this.we = h.cache[0])
                      : (this.we = NaN),
                    (this.xe = t)),
                  this.we
                );
              throw new Error("not supported operation");
            }),
            (t.prototype.Pe = function () {
              return this.re > this.se && this.re > this.te
                ? 2
                : this.se > this.re && this.se > this.te
                ? 1
                : this.te > this.re && this.te > this.se
                ? 3
                : 0;
            }),
            (t.prototype.reverse = function (e) {
              if (2 === e) {
                if (this.start.y > this.end.y) {
                  var i = t.De(this.shape, this.end, this.start),
                    r = new t(
                      this.ye,
                      i,
                      this.ze,
                      this.end,
                      this.start,
                      this.Ae,
                      this.Be
                    );
                  return n.F.t(r.connect, this.connect), r;
                }
                return this;
              }
              if (1 === e) {
                if (this.start.y < this.end.y) {
                  var i = t.De(this.shape, this.end, this.start),
                    r = new t(
                      this.ye,
                      i,
                      this.ze,
                      this.end,
                      this.start,
                      this.Ae,
                      this.Be
                    );
                  return n.F.t(r.connect, this.connect), r;
                }
                return this;
              }
              return this;
            }),
            (t.prototype.Qe = function (t) {
              return this.Fe() && this.Ee(t) > 0;
            }),
            (t.prototype.$a = function () {
              return this.Ce;
            }),
            (t.prototype.u = function (e) {
              return e instanceof t && this.Ae === e.Ae && this.Be === e.Be;
            }),
            (t.prototype.eb = function () {
              return this.ed;
            }),
            (t.prototype.toString = function () {
              return i.L.format(
                "(%d,%d,%d) (%d,%d,%d) %s %s",
                this.Ae,
                this.Be,
                this.weight,
                this.re,
                this.te,
                this.se,
                this.start,
                this.end
              );
            }),
            t
          );
        })();
        e.Re = u;
      }
    ),
    i(
      "geometry/polybool/SideLoader",
      [
        "require",
        "exports",
        "geometry/polybool/Side",
        "geometry/Line",
        "geometry/Arc",
        "geometry/utils/Angle"
      ],
      function (t, e, i, r, n, s) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = (function () {
          function t(t) {
            (this.ye = null),
              (this.Se = new Array()),
              (this.Ae = 0),
              (this.Be = 0),
              (this.Te = null),
              (this.Ue = null),
              (this.Ve = t);
          }
          return (
            (t.prototype.We = function (t) {
              null == this.Te ||
                null == this.Ue ||
                this.Te.end.u(this.Ue.start) ||
                this.Xe(new r.bd(this.Te.end, this.Ue.start), t);
              for (
                var e = new Array(), i = null, n = null, s = 0, o = this.Se;
                s < o.length;
                s++
              ) {
                var a = o[s];
                (this.Ve && 0 === a.weight) ||
                  (null != i ? ((i.next = a), (a.oe = i)) : (n = a),
                  (i = a),
                  e.push(a));
              }
              return (
                null != i && null != n && ((n.oe = i), (i.next = n)),
                this.Ae++,
                (this.Se.length = 0),
                (this.Te = null),
                (this.Ue = null),
                (this.Be = 0),
                e
              );
            }),
            (t.prototype.Ye = function (t, e) {
              for (var i = 0, s = t.jd; i < s.length; i++) {
                var o = s[i];
                if (o instanceof r.bd) this.Xe(o, e);
                else if (o instanceof n.ad && o.rx === o.ry) this.Ze(o, e);
                else
                  for (
                    var a = null, h = 0, u = o.points(1);
                    h < u.length;
                    h++
                  ) {
                    var c = u[h];
                    null != a && this.Xe(new r.bd(a, c), e), (a = c);
                  }
              }
              return this.We(e);
            }),
            (t.prototype.Ze = function (t, e) {
              var i = t.ud,
                r = s.Ub.$b(t.td),
                o = t.Ad();
              if (i > 0) {
                for (var a = 90; a < o; )
                  a > r &&
                    (this.Xe(n.ad._c(t.Oc, r, a - r, t.rx, t.ry), e), (r = a)),
                    (a += 90);
                r < o && this.Xe(n.ad._c(t.Oc, r, o - r, t.rx, t.ry), e);
              } else if (i < 0) {
                for (var a = 270; a > o; )
                  a < r &&
                    (this.Xe(n.ad._c(t.Oc, r, a - r, t.rx, t.ry), e), (r = a)),
                    (a -= 90);
                r > o && this.Xe(n.ad._c(t.Oc, r, o - r, t.rx, t.ry), e);
              }
            }),
            (t.prototype.Xe = function (t, e) {
              if (!t.start().u(t.end())) {
                var n,
                  s = t.start();
                null != this.Te
                  ? (this.Te.end.u(s) || this.Xe(new r.bd(this.Te.end, s), e),
                    (n = new i.Re(
                      this.ye,
                      t,
                      e,
                      t.start(),
                      t.end(),
                      this.Ae,
                      this.Be++
                    )))
                  : ((n = new i.Re(
                      this.ye,
                      t,
                      e,
                      t.start(),
                      t.end(),
                      this.Ae,
                      this.Be++
                    )),
                    (this.Ue = n)),
                  (this.Te = n),
                  this.Se.push(n);
              }
            }),
            t
          );
        })();
        e.$e = o;
      }
    ),
    i(
      "utils/Logger",
      ["require", "exports", "utils/StringKit"],
      function (t, e, i) {
        function r(t) {
          switch (t) {
            case 0:
              return "DEBUG";
            case 1:
              return "INFO";
            case 2:
              return "WARNING";
            case 3:
              return "ERROR";
            case 4:
              return "DUMMY";
          }
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e._e = r);
        var n = function (t, e) {},
          s = function (t, e) {
            return i.L.format("%s %s: %s", new Date(), r(t), e);
          },
          o = (function () {
            function t(t, e, i) {
              void 0 === e && (e = n),
                void 0 === i && (i = s),
                (this.level = t),
                (this.af = e),
                (this.bf = i);
            }
            return (
              (t.cf = function () {
                for (var e = [], i = 0; i < arguments.length; i++)
                  e[i] = arguments[i];
                for (var r = 4, n = 0, s = e; n < s.length; n++) {
                  var o = s[n];
                  o.level < r && (r = o.level);
                }
                return new t(
                  r,
                  function (t, i) {
                    for (var r = 0, n = e; r < n.length; r++) {
                      n[r].df(t, i);
                    }
                  },
                  function (t, e) {
                    return e;
                  }
                );
              }),
              (t.prototype.wrap = function (e, i) {
                var r = this;
                void 0 === e && (e = null), void 0 === i && (i = null);
                var n =
                    null === e
                      ? this.bf
                      : function (t, i) {
                          return (i = e(t, i)), r.bf(t, i);
                        },
                  s =
                    null === i
                      ? this.af
                      : function (t, e) {
                          i(t, e), r.af(t, e);
                        };
                return new t(this.level, s, n);
              }),
              (t.prototype.chain = function (t) {
                return t.wrap(this.bf.bind(this), this.af.bind(this));
              }),
              (t.prototype.ef = function (t) {
                return this.level <= t;
              }),
              (t.prototype.ff = function (t, e, r) {
                this.ef(t) &&
                  this.af(t, this.bf(t, i.L.format.apply(i.L, [e].concat(r))));
              }),
              (t.prototype.gf = function (t, e) {
                this.ef(t) &&
                  (e instanceof Error
                    ? this.af(t, this.bf(t, e.stack))
                    : this.af(t, this.bf(t, e.toString())));
              }),
              (t.prototype.df = function (t, e) {
                this.ef(t) && this.af(t, this.bf(t, e));
              }),
              (t.prototype.hf = function (t) {
                for (var e = [], i = 1; i < arguments.length; i++)
                  e[i - 1] = arguments[i];
                this.ff(0, t, e);
              }),
              (t.prototype.if = function (t) {
                this.gf(0, t);
              }),
              (t.prototype.jf = function (t) {
                this.df(0, t);
              }),
              (t.prototype.kf = function (t) {
                for (var e = [], i = 1; i < arguments.length; i++)
                  e[i - 1] = arguments[i];
                this.ff(1, t, e);
              }),
              (t.prototype.lf = function (t) {
                this.gf(1, t);
              }),
              (t.prototype.mf = function (t) {
                this.df(1, t);
              }),
              (t.prototype.nf = function (t) {
                for (var e = [], i = 1; i < arguments.length; i++)
                  e[i - 1] = arguments[i];
                this.ff(2, t, e);
              }),
              (t.prototype.pf = function (t) {
                this.gf(2, t);
              }),
              (t.prototype.qf = function (t) {
                this.df(2, t);
              }),
              (t.prototype.rf = function (t) {
                for (var e = [], i = 1; i < arguments.length; i++)
                  e[i - 1] = arguments[i];
                this.ff(3, t, e);
              }),
              (t.prototype.sf = function (t) {
                this.gf(3, t);
              }),
              (t.prototype.tf = function (t) {
                this.df(3, t);
              }),
              (t.uf = new t(4)),
              t
            );
          })();
        e.vf = o;
      }
    ),
    i(
      "geometry/polybool/BooleanSweepEvent",
      ["require", "exports", "geometry/Vector2"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t() {}
          return (
            (t.prototype.wf = function (t) {}),
            (t.prototype.xf = function (t) {}),
            (t.prototype.yf = function (t) {}),
            (t.prototype.zf = function (t) {}),
            (t.prototype.Af = function (t) {}),
            (t.prototype.Bf = function (t, e, i, r, n, s) {}),
            (t.prototype.Cf = function (t, e, i) {}),
            (t.prototype.Df = function (t, e, i, r, n, s) {}),
            (t.prototype.Ef = function (t, e, i) {
              this.Df(t.start, t.weight, t, e.end, e.weight, e);
            }),
            (t.prototype.Ff = function (t, e, i) {
              this.Bf(t.start, t.weight, t, e.end, e.weight, e);
            }),
            t
          );
        })();
        e.Gf = r;
      }
    ),
    i("geometry/polybool/FillRule", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      }),
        (e.Hf = function (t) {
          return 0 !== t;
        }),
        (e.If = function (t) {
          return t > 0;
        }),
        (e.Jf = function (t) {
          return t < 0;
        }),
        (e.Kf = function (t) {
          return t % 2 != 0;
        });
    }),
    i(
      "utils/HashSet",
      ["require", "exports", "utils/LinkedHashMap"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t() {
            this.Za = new i.cb();
          }
          return (
            (t.prototype.add = function (t) {
              return !0 !== this.Za.put(t, !0);
            }),
            (t.prototype.remove = function (t) {
              this.Za.remove(t);
            }),
            (t.prototype.contains = function (t) {
              return !0 === this.Za.get(t);
            }),
            (t.prototype.iterator = function () {
              return this.Za.keys();
            }),
            (t.prototype.t = function (t) {
              for (var e = t.iterator(); e.za(); ) this.add(e.next());
            }),
            (t.prototype.size = function () {
              return this.Za.size();
            }),
            t
          );
        })();
        e.Lf = r;
      }
    ),
    i(
      "geometry/polybool/BooleanOperation",
      [
        "require",
        "exports",
        "geometry/polybool/Side",
        "geometry/utils/StaticRTree",
        "utils/Utils",
        "geometry/Arc",
        "geometry/Line",
        "utils/HashSet",
        "geometry/utils/Intersection",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o, a, h, u) {
        function c(t, e) {
          var i = 0;
          if (Math.abs(t.start.y - e) <= 1e-4) h.cache[i++] = t.start.x;
          else if (Math.abs(t.end.y - e) <= 1e-4) h.cache[i++] = t.end.x;
          else if (t.shape instanceof o.bd) i = h.ee(t.shape, e);
          else {
            if (!(t.shape instanceof s.ad))
              throw new Error("not supported operation");
            i = h.fe(t.shape, e);
          }
          return i;
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var p = n.F.C(n.j);
        e.Oe = c;
        var f = (function () {
          function t(t, e, i, r) {
            (this.Se = new Array()),
              (this.Mf = t),
              (this.Mf.ye = this),
              (this.Nf = i),
              (this.Of = e),
              (this.event = r);
          }
          return (
            (t.Pf = function (t, e) {
              return t.eb().fb - e.eb().fb;
            }),
            (t.Qf = function (t, e) {
              return e.eb().Pc() - t.eb().Pc();
            }),
            (t.prototype.Rf = function (t, e) {
              void 0 === e && (e = 1);
              for (var i = 0, r = this.Mf.Ye(t, e); i < r.length; i++) {
                var n = r[i];
                this.Se.push(n), this.event.yf(n);
              }
            }),
            (t.prototype.Sf = function () {
              for (
                var t = new r.yb(10), e = 0, i = this.Se;
                e < i.length;
                e++
              ) {
                var n = i[e];
                t.add(n);
              }
              return t;
            }),
            (t.prototype.Tf = function (t, e, i) {
              for (var r = 0, n = e; r < n.length; r++) {
                var s = n[r];
                isFinite(s.Ne(i)) && t.push(s);
              }
            }),
            (t.prototype.Uf = function (t) {
              for (var e = new Array(), i = 0, r = t; i < r.length; i++) {
                var n = r[i];
                n.Fe() && (e.push(n.start), e.push(n.end));
              }
              p(e, u.Zb.Lb, 0, e.length);
              for (
                var s = new Array(), o = Number.NEGATIVE_INFINITY, a = 0, h = e;
                a < h.length;
                a++
              ) {
                var c = h[a],
                  f = c.y;
                f > o && (s.push(f), (o = f));
              }
              return s;
            }),
            (t.prototype.Vf = function (t, e, r) {
              var n = t.start,
                a = t.end,
                h = new u.Zb(a.x + 2 * (n.x - a.x), a.y + 2 * (n.y - a.y));
              p(
                t.ne,
                function (t, e) {
                  return t.Fb(h) - e.Fb(h);
                },
                0,
                t.ne.length
              );
              for (var c = null, f = 0, l = t.ne; f < l.length; f++) {
                var v = l[f];
                if (null == c) v.u(n) && (c = v);
                else if (!v.u(c)) {
                  var b = i.Re.De(t.shape, c, v);
                  if (
                    (b instanceof s.ad &&
                      Math.abs(b.ud) > 190 &&
                      (b = new o.bd(c, v)),
                    e.push(new i.Re(this, b, t.ze, c, v, t.Ae, r++)),
                    v.u(a))
                  )
                    break;
                  c = v;
                }
              }
              return r;
            }),
            (t.prototype.Wf = function () {
              for (var t = new Array(), e = 0, i = this.Se; e < i.length; e++) {
                var r = i[e];
                if (0 == r.Be) {
                  var n = 0,
                    s = null,
                    o = null;
                  do {
                    var a = new Array();
                    n = this.Vf(r, a, n);
                    for (var h = 0, u = a; h < u.length; h++) {
                      var c = u[h];
                      null != s ? ((s.next = c), (c.oe = s)) : (o = c),
                        (s = c),
                        this.event.zf(c),
                        t.push(c);
                    }
                    if (null === r.next)
                      throw new Error("not supported operation");
                    r = r.next;
                  } while (0 !== r.Be);
                  null != o && null != s && ((o.oe = s), (s.next = o));
                }
              }
              this.Se.length = 0;
              for (var p = 0, f = t; p < f.length; p++) {
                var l = f[p];
                this.Se.push(l);
              }
            }),
            (t.prototype.Xf = function () {
              if (this.Se.length > 0)
                for (
                  var t = this.Sf(), e = new a.Lf(), i = 0, r = this.Se;
                  i < r.length;
                  i++
                ) {
                  var n = r[i];
                  e.add(n);
                  for (
                    var s = n.eb().Hc(1e-5),
                      c = n.shape instanceof o.bd,
                      p = 0,
                      f = t.search(s);
                    p < f.length;
                    p++
                  ) {
                    var l = f[p];
                    if (!e.contains(l)) {
                      var v = l.shape instanceof o.bd;
                      if (
                        c &&
                        v &&
                        null !== n.next &&
                        null !== n.oe &&
                        (n.next.u(l) || n.oe.u(l))
                      );
                      else
                        for (
                          var b = h.Pd(n.shape, l.shape), y = 0;
                          y < b;
                          y += 2
                        ) {
                          var d = new u.Zb(h.cache[y], h.cache[y + 1]);
                          n.ne.push(d), l.ne.push(d), this.event.Cf(d, n, l);
                        }
                    }
                  }
                }
            }),
            t
          );
        })();
        e.Yf = f;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbLayer",
      ["require", "exports", "utils/Check", "utils/StringKit"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.Zf = function (t) {
            switch (t) {
              case 0:
                return "MULTI";
              case 1:
                return "TOP_SILK";
              case 2:
                return "TOP_SOLDER_MASK";
              case 3:
                return "TOP_PASTE";
              case 4:
                return "TOP_COPPER";
              case 5:
                return "INNER";
              case 6:
                return "PLANE";
              case 7:
                return "BOT_COPPER";
              case 8:
                return "BOT_PASTE";
              case 9:
                return "BOT_SOLDER_MASK";
              case 10:
                return "BOT_SILK";
              case 11:
                return "OUTLINE";
              case 12:
                return "DOCUMENT";
              case 13:
                return "MECHANICAL";
              case 14:
                return "RATELINE";
              case 15:
                return "MODEL";
              case 16:
                return "OTHER";
            }
          });
        var n = (function () {
          function t(t, e) {
            switch (((this.type = t), t)) {
              case 5:
              case 13:
              case 6:
                this.order = i.J.P(e);
                break;
              default:
                if (0 !== e)
                  throw new Error(
                    r.L.format("layer type %s order must eq 0, not %d", t, e)
                  );
                this.order = e;
            }
            this.Jb = 31 * (31 + t) + e;
          }
          return (
            (t.isTop = function (t) {
              switch (t) {
                case 4:
                case 3:
                case 2:
                case 1:
                  return !0;
                default:
                  return !1;
              }
            }),
            (t.$f = function (t) {
              switch (t) {
                case 7:
                case 8:
                case 9:
                case 10:
                  return !0;
                default:
                  return !1;
              }
            }),
            (t.prototype.$a = function () {
              return this.Jb;
            }),
            (t.prototype.toString = function () {
              return (
                "PcbLayer [type=" + this.type + ", order=" + this.order + "]"
              );
            }),
            (t.prototype.u = function (e) {
              return (
                e instanceof t && this.type === e.type && this.order === e.order
              );
            }),
            (t._f = new t(0, 0)),
            (t.ag = new t(1, 0)),
            (t.bg = new t(2, 0)),
            (t.cg = new t(3, 0)),
            (t.dg = new t(4, 0)),
            (t.eg = new t(7, 0)),
            (t.fg = new t(8, 0)),
            (t.gg = new t(9, 0)),
            (t.hg = new t(10, 0)),
            (t.ig = new t(11, 0)),
            (t.jg = new t(12, 0)),
            (t.kg = new t(14, 0)),
            (t.lg = new t(16, 0)),
            t
          );
        })();
        e.mg = n;
      }
    ),
    i("pcb/primitives/pcb/PcbShape", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e, i) {
          (this.id = t), (this.ng = e), (this.og = i);
        }
        return t;
      })();
      e.pg = i;
    }),
    i(
      "pcb/primitives/pcb/PcbRegion",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "pcb/primitives/pcb/PcbLayer"
      ],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i, r, n) {
            var s = t.call(this, "", e, i) || this;
            return (s.kind = r), (s.qg = n), (s.jb = s.ed()), s;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.ng, this.og, this.kind, this.qg.Xb(t));
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              return this.qg.eb();
            }),
            (i.prototype.shape = function (t, e) {
              return this.og.u(t) || this.og.u(n.mg._f) ? this.qg : null;
            }),
            i
          );
        })(r.pg);
        i.rg = s;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbTrack",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "utils/Check",
        "geometry/Line"
      ],
      function (t, i, r, n, s, o) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var a = (function (t) {
          function i(e, i, r, n, o, a) {
            var h = t.call(this, "", e, i) || this;
            return (
              (h.start = r),
              (h.end = n),
              (h.width = s.J.N(o)),
              (h.sg = a),
              (h.jb = h.ed()),
              h
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.ng,
                this.og,
                this.start.Xb(t),
                this.end.Xb(t),
                t.fc * this.width,
                this.sg
              );
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              var t = this.width / 2;
              return new n.xc()
                .qc(this.start.Qb(t, t))
                .qc(this.start.Qb(-t, -t))
                .qc(this.end.Qb(t, t))
                .qc(this.end.Qb(-t, -t))
                .wc();
            }),
            (i.prototype.shape = function (t, e) {
              return this.og.u(t)
                ? new o.bd(this.start, this.end).stroke(
                    this.width + 2 * e,
                    1,
                    0
                  )
                : null;
            }),
            i
          );
        })(r.pg);
        i.tg = a;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbArc",
      ["require", "exports", "pcb/primitives/pcb/PcbShape"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e, i, r, n, s) {
            var o = t.call(this, "", e, i) || this;
            return (o.arc = r), (o.width = n), (o.sg = s), o;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.ng,
                this.og,
                this.arc.Xb(t),
                t.fc * this.width,
                this.sg
              );
            }),
            (i.prototype.eb = function () {
              return this.arc.eb();
            }),
            (i.prototype.shape = function (t, e) {
              return this.og.u(t)
                ? this.arc.stroke(this.width + 2 * e, 1, 0)
                : null;
            }),
            i
          );
        })(r.pg);
        i.ug = n;
      }
    ),
    i(
      "pcb/primitives/Rules",
      ["require", "exports", "utils/Check"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t() {}
          return t;
        })();
        i.vg = n;
        var s = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.wg = e), i;
          }
          return e(i, t), i;
        })(n);
        i.xg = s;
        var o = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.ng = e), i;
          }
          return e(i, t), i;
        })(n);
        i.yg = o;
        var a = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.id = e), i;
          }
          return e(i, t), i;
        })(n);
        i.zg = a;
        var h = (function (t) {
          function i() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return e(i, t), i;
        })(n);
        i.Ag = h;
        var u = (function () {
          function t(t) {
            this.selector = t;
          }
          return t;
        })();
        i.Bg = u;
        var c = (function (t) {
          function i(e, i) {
            var n = t.call(this, e) || this;
            return (n.Cg = r.J.N(i)), n;
          }
          return e(i, t), i;
        })(u);
        i.Dg = c;
        var p = (function (t) {
          function i(e, i) {
            var n = t.call(this, e) || this;
            return (n.width = r.J.O(i)), n;
          }
          return e(i, t), i;
        })(u);
        i.Eg = p;
      }
    ),
    i(
      "pcb/primitives/Font",
      ["require", "exports", "utils/Utils"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e, i, r, n) {
            void 0 === r && (r = !1),
              void 0 === n && (n = !1),
              (this.Fg = t),
              (this.size = e),
              (this.weight = i),
              (this.Gg = r),
              (this.bold = n);
          }
          return (
            (t.prototype.transform = function (e) {
              return new t(
                this.Fg,
                e.fc * this.size,
                e.fc * this.weight,
                this.Gg,
                this.bold
              );
            }),
            (t.prototype.$a = function () {
              return i.F.m(this.Fg) ^ this.size ^ this.weight;
            }),
            (t.prototype.u = function (e) {
              return (
                this === e ||
                (null !== e &&
                  void 0 !== e &&
                  e instanceof t &&
                  this.Fg === e.Fg &&
                  this.size === e.size &&
                  this.weight === e.weight &&
                  this.Gg === e.Gg &&
                  this.bold === e.bold)
              );
            }),
            t
          );
        })();
        e.Hg = r;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbString",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "geometry/Matrix3",
        "geometry/utils/Angle",
        "utils/Check"
      ],
      function (t, i, r, n, s, o, a) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var h = (function (t) {
          function i(e, i, r, n, s, o, h) {
            var u = t.call(this, "", e, i) || this;
            return (
              (u.location = r),
              (u.rotation = a.J.N(n)),
              (u.text = s),
              (u.font = o),
              (u.Ig = h),
              (u.jb = u.ed()),
              u
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.ng,
                this.og,
                this.location.Xb(t),
                o.Ub.ec(this.rotation, t),
                this.text,
                this.font.transform(t),
                this.Ig
              );
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              var t = (this.font.size * this.text.length) / 2,
                e = this.rotation;
              this.Ig && (e += 180);
              var i = this.location,
                r = this.location.Qb(t, this.font.size);
              if (e % 360 == 0) return new n.xc().qc(i).qc(r).wc();
              var o = this.location.Qb(t, 0),
                a = this.location.Qb(0, this.font.size),
                h = s.va.Vb(e).ta(this.location);
              return new n.xc()
                .qc(i.Xb(h))
                .qc(r.Xb(h))
                .qc(o.Xb(h))
                .qc(a.Xb(h))
                .wc();
            }),
            (i.prototype.shape = function (t, e) {
              return null;
            }),
            i
          );
        })(r.pg);
        i.Jg = h;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbComponent",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "pcb/primitives/pcb/PcbLayer",
        "pcb/primitives/pcb/PcbString",
        "utils/Check",
        "geometry/utils/Angle",
        "geometry/Vector2",
        "pcb/primitives/Font"
      ],
      function (t, i, r, n, s, o, a, h, u, c) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var p = new o.Jg("", s.mg.jg, u.Zb.oa, 0, "", new c.Hg("", 0, 0), !1),
          f = (function () {
            function t() {
              (this.og = null),
                (this.location = null),
                (this.orientation = Number.NaN),
                (this.pattern = null),
                (this.Kg = !1),
                (this.Lg = !1),
                (this.Mg = null),
                (this.Ng = null),
                (this.Og = []);
            }
            return (
              (t.prototype.clone = function (e) {
                var i = new t();
                (i.og = e.og),
                  (i.location = e.location),
                  (i.orientation = e.orientation),
                  (i.pattern = e.pattern),
                  (i.Kg = e.Kg),
                  (i.Lg = e.Lg),
                  (i.Mg = e.Mg),
                  (i.Ng = e.Ng);
                for (var r = 0, n = e.Og; r < n.length; r++) {
                  var s = n[r];
                  i.Og.push(s);
                }
                return i;
              }),
              (t.prototype.Pg = function () {
                return (
                  (this.orientation = 0),
                  (this.pattern = ""),
                  (this.Kg = !1),
                  (this.Lg = !1),
                  (this.Mg = p),
                  (this.Ng = p),
                  this
                );
              }),
              (t.prototype.wc = function () {
                return new l(this);
              }),
              t
            );
          })();
        i.Qg = f;
        var l = (function (t) {
          function i(e) {
            var i = t.call(this, "", "", a.J.R(e.og)) || this;
            if (
              ((i.location = a.J.R(e.location)),
              (i.orientation = a.J.N(e.orientation)),
              (i.pattern = a.J.R(e.pattern)),
              (i.Kg = e.Kg),
              (i.Lg = e.Lg),
              (i.Mg = a.J.R(e.Mg)),
              (i.Ng = a.J.R(e.Ng)),
              0 == e.Og.length)
            )
              throw new Error("no shape in component ");
            return (i.Og = e.Og.slice(0)), (i.jb = i.ed()), i;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              var e = new f();
              (e.og = this.og),
                (e.location = this.location.Xb(t)),
                (e.orientation = h.Ub.ec(this.orientation, t)),
                (e.pattern = this.pattern),
                (e.Kg = this.Kg),
                (e.Lg = this.Lg),
                (e.Mg = this.Mg.Xb(t)),
                (e.Ng = this.Ng.Xb(t));
              for (var i = 0, r = this.Og; i < r.length; i++) {
                var n = r[i];
                e.Og.push(n.Xb(t));
              }
              return e.wc();
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              for (var t = new n.xc(), e = 0, i = this.Og; e < i.length; e++) {
                var r = i[e];
                t.pc(r.eb());
              }
              return (
                this.Kg && t.pc(this.Mg.eb()),
                this.Lg && t.pc(this.Ng.eb()),
                t.wc()
              );
            }),
            (i.prototype.shape = function (t, e) {
              throw new Error("unsupported operation");
            }),
            i
          );
        })(r.pg);
        i.Rg = l;
      }
    ),
    i("pcb/primitives/BaseDocument", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e, i) {
          (this.Sg = t), (this.Tg = e), (this.scale = i);
        }
        return t;
      })();
      e.Ug = i;
    }),
    i(
      "utils/ListSet",
      ["require", "exports", "utils/Itor"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t() {
            this.inner = new Array();
          }
          return (
            (t.prototype.contains = function (t) {
              for (var e = 0, i = this.inner; e < i.length; e++) {
                if (i[e].u(t)) return !0;
              }
              return !1;
            }),
            (t.prototype.add = function (t) {
              this.contains(t) || this.inner.push(t);
            }),
            (t.prototype.Vg = function (t) {
              this.Wg(t.iterator());
            }),
            (t.prototype.Wg = function (t) {
              var e = this;
              i.Aa(t, function (t, i) {
                return e.add(i), !0;
              });
            }),
            (t.prototype.Xg = function () {
              return this.inner;
            }),
            (t.prototype.size = function () {
              return this.inner.length;
            }),
            (t.prototype.bb = function () {
              return 0 === this.inner.length;
            }),
            (t.prototype.iterator = function () {
              return i.Ea(this.inner);
            }),
            t
          );
        })();
        e.Yg = r;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbDocument",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbComponent",
        "utils/Check",
        "pcb/primitives/BaseDocument",
        "utils/ListSet",
        "utils/StringKit"
      ],
      function (t, i, r, n, s, o, a) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var h = (function () {
          function t() {
            (this.Sg = null),
              (this.Tg = null),
              (this.scale = Number.NaN),
              (this.rules = []),
              (this.Og = []),
              (this.Zg = new o.Yg());
          }
          return (
            (t.prototype.wc = function () {
              return new u(this);
            }),
            (t.prototype.$g = function () {
              for (var t = [], e = 0; e < arguments.length; e++)
                t[e] = arguments[e];
              if (null !== t)
                for (var i = 0; i < t.length; i++) {
                  var r = n.J.R(t[i]);
                  if (this.Zg.contains(r))
                    throw new Error(a.L.format("duplicate layer %s", r));
                  this.Zg.add(r);
                }
            }),
            t
          );
        })();
        i._g = h;
        var u = (function (t) {
          function i(e) {
            var i = t.call(this, n.J.R(e.Sg), n.J.R(e.Tg), e.scale) || this;
            return (
              (i.rules = e.rules.slice(0)),
              (i.Og = e.Og.slice(0)),
              (i.Zg = e.Zg.Xg().slice(0)),
              i
            );
          }
          return (
            e(i, t),
            (i.prototype.ah = function () {
              for (var t = {}, e = [], i = 0, n = this.Og; i < n.length; i++) {
                var s = n[i];
                s instanceof r.Rg &&
                  (s.pattern in t || ((t[s.pattern] = !0), e.push(s)));
              }
              return e;
            }),
            i
          );
        })(s.Ug);
        i.bh = u;
      }
    ),
    i(
      "geometry/polybool/EDASweepDebugger",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbLayer",
        "geometry/polybool/BooleanSweepEvent",
        "utils/Utils",
        "geometry/Polyline",
        "utils/StringKit",
        "geometry/Line",
        "pcb/primitives/pcb/PcbRegion",
        "pcb/primitives/pcb/PcbTrack",
        "geometry/Arc",
        "pcb/primitives/pcb/PcbArc",
        "pcb/primitives/pcb/PcbDocument"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p, f, l) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var v = new r.mg(5, 1),
          b = new r.mg(5, 2),
          y = new r.mg(5, 3),
          d = new r.mg(5, 4),
          g = new r.mg(5, 5),
          w = new r.mg(5, 6),
          m = (function (t) {
            function i(e) {
              var i = t.call(this) || this;
              return (i.Og = []), (i.debug = e), i;
            }
            return (
              e(i, t),
              (i.prototype.display = function () {
                var t = new l._g();
                return (
                  (t.Tg = ""),
                  (t.Sg = ""),
                  (t.scale = 10),
                  s.F.t(t.Og, this.Og),
                  t.wc()
                );
              }),
              (i.prototype.dh = function (t, e) {
                if (this.debug)
                  for (var i = 0, r = t.nb; i < r.length; i++) {
                    var n = r[i];
                    this.jf(g, e.toString(), n);
                  }
              }),
              (i.prototype.wf = function (t) {
                if ((this.debug, !1))
                  for (
                    var e = 0,
                      i = o.Zc.ld([t.Mc(), t.Kc(), t.Lc(), t.Nc(), t.Mc()]).jd;
                    e < i.length;
                    e++
                  ) {
                    var n = i[e];
                    this.if(r.mg.ag, "", n, 0.003);
                  }
              }),
              (i.prototype.Df = function (t, e, i, n, s, o) {
                if (this.debug) {
                  var u = a.L.format(
                    "SG (%d,%d,%d) : (%d,%d,%d) : %s : %s",
                    i.Ae,
                    i.Be,
                    e,
                    o.Ae,
                    o.Be,
                    s,
                    t,
                    n
                  );
                  this.if(r.mg.eg, u, new h.bd(t, n), 0.003);
                }
              }),
              (i.prototype.Cf = function (t, e, i) {
                if ((this.debug, !1)) {
                  var r = a.L.format(
                    "%d,%d:%d,%d:%s",
                    e.Ae,
                    e.Be,
                    i.Ae,
                    i.Be,
                    t
                  );
                  this.if(b, r, new h.bd(t.Qb(-0.01, 0), t.Qb(0.01, 0)), 0.01);
                }
              }),
              (i.prototype.xf = function (t) {
                this.debug && this.if(d, t.toString(), t.shape, 0.003);
              }),
              (i.prototype.yf = function (t) {
                this.debug && this.if(r.mg.dg, t.toString(), t.shape, 0.003);
              }),
              (i.prototype.zf = function (t) {
                this.debug && this.if(y, t.toString(), t.shape, 0.003);
              }),
              (i.prototype.Af = function (t) {
                this.debug && this.if(w, t.toString(), t.shape, 0.003);
              }),
              (i.prototype.Bf = function (t, e, i, r, n, s) {
                if ((this.debug, !1)) {
                  var o = a.L.format(
                    "SW (%d,%d,%d) : (%d,%d,%d) : %s : %s",
                    i.Ae,
                    i.Be,
                    e,
                    s.Ae,
                    s.Be,
                    n,
                    t,
                    r
                  );
                  this.if(v, o, new h.bd(t, r), 0.003);
                }
              }),
              (i.prototype.jf = function (t, e) {
                for (var i = [], r = 2; r < arguments.length; r++)
                  i[r - 2] = arguments[r];
                for (var n = 0, s = i; n < s.length; n++) {
                  var o = s[n];
                  this.Og.push(new u.rg(e, t, 0, o));
                }
              }),
              (i.prototype.if = function (t, e, i, r) {
                i instanceof h.bd
                  ? this.Og.push(new c.tg(e, t, i.start(), i.end(), r, !1))
                  : i instanceof p.ad
                  ? this.Og.push(new f.ug(e, t, i, r, !1))
                  : this.jf(t, e, i.stroke(r, 0, 0));
              }),
              i
            );
          })(n.Gf);
        i.eh = m;
      }
    ),
    i(
      "geometry/polybool/DefaultSweepEvent",
      ["require", "exports", "geometry/polybool/EDASweepDebugger"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e) {
            var i = t.call(this, e) || this;
            return (i.fh = new Array()), i;
          }
          return (
            e(i, t),
            (i.prototype.dh = function (e, i) {
              t.prototype.dh.call(this, e, i), this.fh.push(e);
            }),
            i
          );
        })(r.eh);
        i.gh = n;
      }
    ),
    i(
      "geometry/polybool/MultiLevelRule",
      ["require", "exports"],
      function (t, e) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var i = (function () {
          function t(t) {
            (this.cache = {}),
              (this.hh = t),
              (this.result = new Array(t)),
              (this.ih = new Array(t)),
              (this.jh = t - 1),
              (this.Of = this.kh.bind(this));
            for (var e = 1, i = 0; i < t; i++) (this.ih[i] = e), (e *= 50);
          }
          return (
            (t.prototype.weight = function (t) {
              return this.ih[t];
            }),
            (t.prototype.kh = function (t) {
              t = Math.abs(t);
              var e = this.cache[t];
              if (void 0 === e) {
                for (var i = t, r = this.jh; r >= 0; r--) {
                  var n = this.ih[r],
                    s = (t / n) | 0,
                    o = t % n;
                  o > ((n / 2) | 0) ? ((t = n - o), s++) : (t = o),
                    (this.result[r] = s > 0);
                }
                (e = this.lh(this.result)), (this.cache[i] = e);
              }
              return e;
            }),
            t
          );
        })();
        e.mh = i;
      }
    ),
    i(
      "geometry/polybool/Sweeper",
      ["require", "exports", "utils/DoubleKit"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e, i) {
            (this.X = new Array()),
              (this.nh = 0),
              (this.start = null),
              (this.Ka = null),
              (this.oh = null),
              (this.ph = null),
              (this.y = i),
              (this.Of = t),
              (this.ye = e),
              (this.event = e.event);
          }
          return (
            (t.prototype.qh = function (t) {
              this.rh(t),
                null === this.start
                  ? this.Of(this.nh)
                    ? this.sh(t)
                    : t.Ke(this.y)
                  : this.Of(this.nh)
                  ? t.Ke(this.y)
                  : this.th(t, this.start),
                null !== this.Ka && this.event.Ff(this.Ka, t, this.y),
                (this.Ka = t);
            }),
            (t.prototype.sh = function (t) {
              null != this.ph && this.uh(t, this.ph)
                ? ((this.start = this.oh),
                  (this.oh = null),
                  this.ph.He(this.y),
                  (this.ph = null))
                : ((this.start = t), this.start.Ie(this.y));
            }),
            (t.prototype.th = function (t, e) {
              this.uh(e, t)
                ? e.Ge(this.y)
                : (t.Je(this.y) > 0 &&
                    e.Ee(this.y) > 0 &&
                    (t.connect.push(e), e.connect.push(t)),
                  this.event.Ef(e, t, this.y),
                  this.X.push(e),
                  this.X.push(t),
                  (this.oh = e),
                  (this.ph = t)),
                (this.start = null);
            }),
            (t.prototype.uh = function (t, e) {
              return t.eb().Gc(e.eb()) && i.ca.W(t.Ne(this.y), e.Ne(this.y));
            }),
            (t.prototype.rh = function (t) {
              this.nh += t.weight;
              var e = t.Me(),
                i = t.Le();
              null != e &&
                t.weight === e.weight &&
                e.qe === this.y &&
                (this.nh -= t.weight),
                null != i &&
                  t.weight === i.weight &&
                  i.qe === this.y &&
                  (this.nh -= t.weight),
                (t.qe = this.y);
            }),
            t
          );
        })();
        e.vh = r;
      }
    ),
    i(
      "geometry/polybool/PolyIntersection",
      [
        "require",
        "exports",
        "geometry/BBox2",
        "geometry/polybool/MultiLevelRule",
        "geometry/polybool/BooleanSweepEvent",
        "utils/Logger",
        "geometry/polybool/SideLoader",
        "utils/Utils",
        "geometry/polybool/BooleanOperation",
        "geometry/polybool/Sweeper",
        "geometry/utils/Intersection"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var f = new Error(),
          l = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.lh = function (t) {
                return t[0] && t[1];
              }),
              i
            );
          })(n.mh))(2),
          v = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.dh = function (t, e) {
                throw f;
              }),
              (i.prototype.Df = function (t, e, i, r, n, s) {
                throw f;
              }),
              i
            );
          })(s.Gf))(),
          b = (function () {
            function t(t, e) {
              (this.wh = t), (this.level = e);
            }
            return t;
          })();
        i.xh = b;
        var y = (function (t) {
          function i(e) {
            return t.call(this, new a.$e(!1), l.Of, e, v) || this;
          }
          return (
            e(i, t),
            (i.Gc = function (t, e, r) {
              void 0 === r && (r = o.vf.uf);
              var n = new i(r),
                s = n.yh(t.nb),
                a = n.zh(e.nb);
              return n.Gc(s, a);
            }),
            (i.prototype.yh = function (t) {
              return this.Ah(t, 0);
            }),
            (i.prototype.zh = function (t) {
              return this.Ah(t, 1);
            }),
            (i.prototype.Ah = function (t, e) {
              for (var i = l.weight(e), r = 0, n = t; r < n.length; r++) {
                var s = n[r];
                this.Rf(s, i);
              }
              var o = this.Sf();
              return (this.Se.length = 0), new b(o, e);
            }),
            (i.prototype.Gc = function (t, e) {
              if (t.level !== e.level) {
                var i = t.wh.eb().Jc(e.wh.eb());
                if (null !== i) {
                  try {
                    this.ne(t, e);
                    var r = (i.fb + i.gb) / 2;
                    this.zd(t, e, r);
                  } catch (t) {
                    if (t === f) return !0;
                    throw t;
                  }
                  return !1;
                }
                return !1;
              }
              throw new Error("inersection detection should not in same group");
            }),
            (i.prototype.ne = function (t, e) {
              if (t.wh.size() > e.wh.size()) {
                var i = t;
                (t = e), (e = i);
              }
              for (var r = 0, n = t.wh.nb(); r < n.length; r++) {
                var s = n[r];
                s.qe = NaN;
                for (
                  var o = s.eb().Hc(1e-5), a = 0, h = e.wh.search(o);
                  a < h.length;
                  a++
                ) {
                  var u = h[a];
                  u.qe = NaN;
                  if (p.Pd(s.shape, u.shape) > 0) throw f;
                }
              }
            }),
            (i.prototype.zd = function (t, e, i) {
              var n = r.mb.lb(t.wh.eb(), e.wh.eb()).Hc(1e-5),
                s = new Array();
              this.Tf(s, t.wh.search(n), i),
                this.Tf(s, e.wh.search(n), i),
                h.j(
                  s,
                  function (t, e) {
                    return t.Ne(i) - e.Ne(i);
                  },
                  0,
                  s.length
                );
              for (
                var o = new c.vh(this.Of, this, i), a = 0, u = s;
                a < u.length;
                a++
              ) {
                var p = u[a];
                o.qh(p);
              }
            }),
            i
          );
        })(u.Yf);
        i.Bh = y;
      }
    ),
    i(
      "geometry/polybool/SideGroup",
      [
        "require",
        "exports",
        "utils/HashSet",
        "geometry/Polyline",
        "utils/Itor"
      ],
      function (t, e, i, r, n) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var s = (function () {
          function t(t) {
            (this.Se = new i.Lf()), (this.Ch = new i.Lf()), (this.id = t);
          }
          return (
            (t.prototype.add = function (t) {
              this.Se.add(t), (t.pe = this.id);
              for (var e = 0, i = t.connect; e < i.length; e++) {
                var r = i[e];
                this.Ch.add(r);
              }
            }),
            (t.prototype.Dh = function () {
              var t = new Array();
              return (
                n.ya(this.Se, function (e, i) {
                  return t.push(i.shape), !0;
                }),
                r.Zc.$c(t)
              );
            }),
            (t.prototype.$a = function () {
              return this.id;
            }),
            (t.prototype.u = function (e) {
              return null != e && e instanceof t && this.id === e.id;
            }),
            t
          );
        })();
        e.Eh = s;
      }
    ),
    i(
      "geometry/polybool/Simplify",
      [
        "require",
        "exports",
        "geometry/polybool/BooleanOperation",
        "geometry/polybool/SideGroup",
        "geometry/polybool/Side",
        "utils/Logger",
        "geometry/polybool/FillRule",
        "geometry/polybool/SideLoader",
        "utils/LinkedList",
        "utils/Utils",
        "utils/DoubleKit",
        "geometry/polybool/Sweeper",
        "geometry/Matrix3",
        "utils/LinkedHashMap",
        "geometry/utils/StaticRTree",
        "utils/HashSet",
        "utils/Itor",
        "geometry/PolylineGroup",
        "geometry/polybool/DefaultSweepEvent"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p, f, l, v, b, y, d, g, w) {
        function m(t) {
          return new Array();
        }
        function E(t, e) {
          for (
            var i = new w.gh(!1), r = new q(t, o.vf.uf, i), n = 0, s = e;
            n < s.length;
            n++
          ) {
            var a = s[n];
            r.Rf(a);
          }
          return r.Fh(), i.fh;
        }
        function O(t, e) {
          t = t.md();
          for (var i = E(a.Hf, [t]), r = [], n = 0, s = i; n < s.length; n++) {
            var o = s[n];
            c.F.t(r, o.nb);
          }
          if (e > 0) {
            for (var h = 0, u = t.jd; h < u.length; h++) {
              var p = u[h];
              r.push(p.stroke(2 * e, 1, 0));
            }
            return E(a.Hf, r);
          }
          if (e < 0) {
            e = -e;
            for (var f = 0, l = t.jd; f < l.length; f++) {
              var p = l[f];
              r.push(p.stroke(2 * e, 1, 1));
            }
            return E(a.If, r);
          }
          return i;
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var x = c.F.C(c.j),
          A = c.F.C(c.j),
          N = c.F.C(c.j);
        (i.Gh = E), (i.Hh = O);
        var q = (function (t) {
          function i(e, i, r) {
            var n = t.call(this, new h.$e(!1), e, i, r) || this;
            return (
              (n.Ih = new Array()),
              (n.Jh = {}),
              (n.Kh = new Array()),
              (n.Lh = 0),
              (n.Mh = -1),
              (n.Nh = 0),
              n
            );
          }
          return (
            e(i, t),
            (i.prototype.zd = function (t, e, i) {
              (this.Nh = 0), x(e, r.Yf.Pf, 0, e.length);
              var n = new u.Ta();
              this.Lh = 0;
              for (
                var s = Number.POSITIVE_INFINITY, o = 0, a = t;
                o < a.length;
                o++
              ) {
                var h = a[o];
                h > s && this.Oh(n, (s + h) / 2, e), (s = h);
              }
              this.Ph(i, e), this.Nf.hf("scan %s %d", i, this.Nh);
            }),
            (i.prototype.Fh = function () {
              this.Xf(),
                this.Wf(),
                this.zd(this.Uf(this.Se), this.Se, !1),
                this.Qh(),
                this.zd(this.Uf(this.Kh), this.Kh, !0),
                this.Rh(),
                this.Sh();
            }),
            (i.prototype.Rf = function (e, i) {
              void 0 === i && (i = 1), t.prototype.Rf.call(this, e, i);
            }),
            (i.prototype.Oh = function (t, e, i) {
              for (var r = !1, n = t.Sa(); n.za(); ) {
                var s = n.next(),
                  o = s.item;
                p.ca.Z(o.eb().gb, e) ? t.remove(s) : !r && o.Qe(e) && (r = !0);
              }
              for (; this.Lh < i.length; ) {
                var o = i[this.Lh];
                if (!p.ca.Z(o.eb().fb, e)) break;
                p.ca.aa(o.eb().gb, e) &&
                  (this.Th(t, o), !r && o.Qe(e) && (r = !0)),
                  this.Lh++;
              }
              if (r) {
                this.Nh++;
                for (
                  var a = new f.vh(this.Of, this, e), h = t.iterator();
                  h.za();

                ) {
                  var u = h.next();
                  a.qh(u);
                }
              }
            }),
            (i.prototype.Th = function (t, e) {
              for (
                var i = e.eb().hb,
                  r = e.eb().ib,
                  n = e.eb().fb,
                  s = e.eb().gb,
                  o = t.Sa();
                o.za();

              ) {
                var a = void 0,
                  h = o.next(),
                  u = h.item,
                  c = u.eb().hb,
                  p = u.eb().ib;
                if (r <= c) a = -1;
                else if (p <= i) a = 1;
                else {
                  var f = u.eb().fb,
                    l = u.eb().gb,
                    v = Math.max(n, f),
                    b = Math.min(s, l);
                  a = this.Uh(e, u, (v + b) / 2);
                }
                if (a < 0) return void t.insertBefore(h, e);
              }
              t.add(e);
            }),
            (i.prototype.Uh = function (t, e, i) {
              var r = t.Ne(i),
                n = e.Ne(i);
              return isFinite(r) && isFinite(n) ? r - n : 0;
            }),
            (i.prototype.Ph = function (t, e) {
              for (var i = 0, r = e; i < r.length; i++) {
                var n = r[i];
                if (0 === n.status && 0 != n.eb().height()) {
                  var o = n.Pe();
                  if (2 === o || 1 === o) {
                    n.status = o;
                    var a = n.reverse(o);
                    if (t) {
                      this.event.xf(a);
                      var h = a.shape.Xb(l.va.oc),
                        u = a.start.Xb(l.va.oc),
                        c = a.end.Xb(l.va.oc);
                      a = new s.Re(this, h, a.ze, u, c, a.Ae, a.Be);
                    }
                    this.Ih.push(a), this.event.xf(a);
                  }
                }
              }
            }),
            (i.prototype.Qh = function () {
              for (var t = 0, e = this.Se; t < e.length; t++) {
                var i = e[t];
                if (0 == i.Be) {
                  var r = null,
                    n = null;
                  do {
                    var o = i.shape.Xb(l.va.nc),
                      a = i.start.Xb(l.va.nc),
                      h = i.end.Xb(l.va.nc),
                      u = new s.Re(this, o, i.ze, a, h, i.Ae, i.Be);
                    if (
                      ((u.re = i.re),
                      (u.se = i.se),
                      (u.te = i.te),
                      (u.status = i.status),
                      null != r ? ((r.next = u), (u.oe = r)) : (n = u),
                      this.Kh.push(u),
                      this.event.zf(u),
                      (r = u),
                      null === i.next)
                    )
                      break;
                    i = i.next;
                  } while (0 != i.Be);
                  null != n && ((n.oe = r), (r.next = n));
                }
              }
            }),
            (i.prototype.Rh = function () {
              for (
                var t = new v.cb(), e = new b.yb(10), i = 0, r = this.Ih;
                i < r.length;
                i++
              ) {
                var n = r[i];
                t.ab(n.start, m).push(n), e.add(n.start);
              }
              for (
                var s = 0, o = new y.Lf(), a = new Array(), h = 0, c = this.Ih;
                h < c.length;
                h++
              ) {
                var p = c[h];
                if (!o.contains(p)) {
                  var f = new y.Lf(),
                    l = p.start,
                    d = new u.Ta();
                  d.add(p), o.add(p);
                  for (var g = p.end; d.size() > 0; ) {
                    if (this.Vh(l, g)) {
                      d.size() > 1 && this.Wh(d, s++);
                      break;
                    }
                    var w = t.get(g),
                      E = this.Xh(o, w);
                    if (
                      (null == E &&
                        null !== (g = this.Yh(g, f, e, 0.01)) &&
                        ((w = t.get(g)), (E = this.Xh(o, w))),
                      null != E)
                    )
                      d.add(E), o.add(E), (g = E.end);
                    else {
                      if (
                        (null != g
                          ? f.add(g)
                          : (0 == a.length &&
                              d.size() > 1 &&
                              this.Nf.nf("unable to connect at %s", d.Ra()),
                            a.push(d.Na())),
                        !(d.size() > 0))
                      )
                        break;
                      g = d.Ra().end;
                    }
                  }
                }
              }
            }),
            (i.prototype.Wh = function (t, e) {
              var i = new n.Eh(e);
              d.ya(t, function (t, e) {
                return i.add(e), !0;
              }),
                (this.Jh[i.id] = i);
            }),
            (i.prototype.Vh = function (t, e) {
              return t.Fb(e) <= 1e-4;
            }),
            (i.prototype.Xh = function (t, e) {
              if (null != e)
                for (var i = 0, r = e; i < r.length; i++) {
                  var n = r[i];
                  if (!t.contains(n)) return n;
                }
              return null;
            }),
            (i.prototype.Sh = function () {
              var t = 0,
                e = new v.cb();
              for (var i in this.Jh) {
                var n = this.Jh[i];
                d.ya(n.Se, function (t, i) {
                  return -2 != i.Ae && e.put(i, i), !0;
                });
              }
              var s = new y.Lf();
              for (var i in this.Jh) {
                var n = this.Jh[i];
                if (s.add(n)) {
                  var o = 0,
                    a = new Array();
                  a.push(n);
                  for (var h = this; o < a.length; )
                    !(function () {
                      var t = a[o],
                        i = new Array();
                      d.ya(t.Ch, function (t, r) {
                        var n = e.get(r);
                        return null != n && i.push(n.pe), !0;
                      }),
                        A(i, c.F.q, 0, i.length);
                      for (var r = t.id, n = 0, u = i; n < u.length; n++) {
                        var p = u[n];
                        if (p != r && p != t.id) {
                          var f = h.Jh[p];
                          s.add(f) && a.push(f), (r = p);
                        }
                      }
                      o++;
                    })();
                  for (var u = new Array(), p = 0, f = a; p < f.length; p++) {
                    var l = f[p];
                    u.push(l.Dh());
                  }
                  N(u, r.Yf.Qf, 0, u.length), this.event.dh(new g.Hd(u), t++);
                }
              }
            }),
            (i.prototype.Yh = function (t, e, i, r) {
              for (
                var n = r * r,
                  s = Number.MAX_VALUE,
                  o = null,
                  a = 0,
                  h = i.search(t.eb().Hc(r));
                a < h.length;
                a++
              ) {
                var u = h[a];
                if (!e.contains(u)) {
                  var c = t.Fb(u);
                  c < s && ((s = c), (o = u));
                }
              }
              return s < n ? o : null;
            }),
            i
          );
        })(r.Yf);
        i.Zh = q;
      }
    ),
    i(
      "geometry/polybool/SweepEndpoint",
      ["require", "exports", "geometry/Vector2"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e, r) {
            (this.weight = 0), (this.Jd = new i.Zb(t, e)), (this.$h = r);
          }
          return (
            (t._h = function (t, e) {
              var i = t.Jd.x,
                r = e.Jd.x;
              if (i < r) return -1;
              if (i > r) return 1;
              var n = t.$h.Ae,
                s = e.$h.Ae;
              if (n < s) return -1;
              if (n > s) return 1;
              var o = t.$h.Be,
                a = e.$h.Be;
              return o < a ? -1 : o > a ? 1 : 0;
            }),
            (t.prototype.toString = function () {
              return this.$h.toString() + "->" + this.weight;
            }),
            t
          );
        })();
        e.ai = r;
      }
    ),
    i(
      "geometry/polybool/Zoom",
      [
        "require",
        "exports",
        "geometry/Polyline",
        "geometry/Arc",
        "geometry/Line",
        "geometry/utils/Intersection",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var a = (function () {
          function t() {}
          return (
            (t.bi = function (t, e) {
              var r = new Array(),
                n = new Array(),
                s = new Array();
              return (
                this.ci(t, r, s, e),
                this.di(r, s),
                this.ei(r, s),
                this.fi(r, s, n, e),
                n.length > 0 ? i.Zc.$c(n) : null
              );
            }),
            (t.ci = function (t, e, i, r) {
              for (var n = t.jd, s = 0, o = n; s < o.length; s++) {
                var a = o[s],
                  h = this.Vc(a, r);
                void 0 !== h && (e.push(h), i.push(a));
              }
            }),
            (t.di = function (t, e) {
              for (var i = t.length, n = 0, o = 0; o < i; o++) {
                var a = e[o],
                  h = t[o],
                  u = o == i - 1 ? t[0] : t[o + 1];
                if (
                  (h instanceof r.ad && u instanceof r.ad) ||
                  this.gi(h.end(), u.start(), a.end())
                ) {
                  n = o;
                  break;
                }
                if (0 != s.Pd(h, u)) {
                  n = o == i - 1 ? 0 : o + 1;
                  break;
                }
              }
              var c = this.hi(e, n),
                p = this.hi(t, n);
              (e.length = 0),
                (t.length = 0),
                c.forEach(function (t) {
                  e.push(t);
                }),
                p.forEach(function (e) {
                  t.push(e);
                });
            }),
            (t.ei = function (t, e) {
              var i = t.length;
              if (i > 2) {
                var n = t[i - 1],
                  a = t[0],
                  h = e[i - 1];
                if (
                  !(
                    (n instanceof r.ad && a instanceof r.ad) ||
                    this.gi(n.end(), a.start(), h.end())
                  )
                )
                  for (var u = s.Pd(n, a), c = 0; c < u; c += 2) {
                    var p = new o.Zb(s.cache[c], s.cache[c + 1]);
                    (t[i - 1] = this.ii(n, n.start(), p)),
                      (t[0] = this.ii(a, p, a.end()));
                  }
              }
            }),
            (t.fi = function (t, e, i, n) {
              for (var s = t.length, o = 0; o < s; o++) {
                var a = e[o],
                  h = o === s - 1 ? e[0] : e[o + 1],
                  u = o == s - 1 ? 0 : o + 1,
                  c = u == s - 1 ? e[0] : e[u + 1],
                  p = t[o],
                  f = o == s - 1 ? t[0] : t[o + 1],
                  l = u == s - 1 ? t[0] : t[u + 1];
                if (
                  !(
                    (p instanceof r.ad && f instanceof r.ad) ||
                    this.gi(p.end(), f.start(), a.end())
                  )
                ) {
                  var v = this.add(t, i, o, p, f, 0);
                  v = this.update(t, i, o, f, v);
                  var b = this.ji(h, c, f, l, n);
                  if (
                    ((v = this.add(t, i, o, p, b, v)),
                    (v = this.update(t, i, o, b, v)) > 0)
                  )
                    continue;
                }
                i.push(p);
                var y = this.ji(a, h, p, f, n);
                void 0 !== y && i.push(y);
              }
            }),
            (t.ji = function (t, e, i, n, s) {
              if (s > 0) {
                var o = t.end(),
                  a = e.start(),
                  h = i.end(),
                  u = n.start();
                if (h.Fb(u) > 1e-8) {
                  if (o.u(a)) {
                    var c = h.Sb(o),
                      p = u.Sb(o);
                    return r.ad.$c(o, c, p, s, s, 0);
                  }
                  var f = h.Sb(o),
                    l = u.Sb(o),
                    v = h.Sb(a),
                    b = u.Sb(a),
                    y = r.ad.$c(o, f, l, s, s, 0),
                    d = r.ad.$c(a, v, b, s, s, 0);
                  return y.gd(y.Ad()).Yb(u) ? y : d.gd(d.Ad()).Yb(u) ? d : y;
                }
              }
            }),
            (t.ki = function (t, e, i, r) {
              t[e == t.length - 1 ? 0 : e + 1] = this.ii(i, r, i.end());
            }),
            (t.add = function (t, e, i, r, n, a) {
              if (a > 0) return a;
              if (void 0 != r && void 0 != n) {
                for (var h = s.Pd(r, n), u = 0; u < h; u += 2) {
                  var c = new o.Zb(s.cache[u], s.cache[u + 1]);
                  e.push(this.ii(r, r.start(), c)), this.ki(t, i, n, c);
                  break;
                }
                return h;
              }
              return 0;
            }),
            (t.update = function (t, e, i, r, n) {
              if (n > 0) return n;
              var a = e.length;
              if (a > 0 && void 0 != r) {
                for (var h = e[a - 1], u = s.Pd(h, r), c = 0; c < u; c += 2) {
                  var p = new o.Zb(s.cache[c], s.cache[c + 1]);
                  (e[a - 1] = this.ii(h, h.start(), p)), this.ki(t, i, r, p);
                }
                return u;
              }
              return 0;
            }),
            (t.ii = function (t, e, i) {
              if (t instanceof n.bd) return new n.bd(e, i);
              if (t instanceof r.ad) {
                var s = t,
                  o = e.Sb(s.Oc),
                  a = i.Sb(s.Oc);
                return r.ad.$c(s.Oc, o, a, s.rx, s.ry, s.zd());
              }
              throw new Error("not supported operation");
            }),
            (t.hi = function (t, e) {
              for (var i = t.length, r = new Array(), n = e; n < i; n++)
                r.push(t[n]);
              for (var n = 0; n < e; n++) r.push(t[n]);
              return r;
            }),
            (t.gi = function (t, e, i) {
              var r = new n.bd(i, t),
                s = new n.bd(i, e),
                o = r.end().x - r.start().x,
                a = r.end().y - r.start().y,
                h = s.end().x - s.start().x;
              return !(o * (s.end().y - s.start().y) - a * h > 0);
            }),
            (t.Vc = function (t, e) {
              if (t instanceof n.bd) {
                if (t.Wc()) return;
                var i = t.Vc(e);
                return i.length() > 1e-5 ? i : void 0;
              }
              if (t instanceof r.ad) {
                var s = t;
                if (s.ud > 0) {
                  if (s.rx - e <= 0 || s.ry - e <= 0) return;
                } else if (s.ud < 0 && (s.rx + e <= 0 || s.ry + e <= 0)) return;
                return (s = s.Vc(e)), s.start().Gb(s.end()) > 1e-5 ? s : void 0;
              }
              throw new Error("not supported operation");
            }),
            t
          );
        })();
        e.li = a;
      }
    ),
    i(
      "geometry/utils/HullPoint",
      ["require", "exports", "geometry/Vector2"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e, r) {
            var n = t.call(this, e.x, e.y) || this;
            return (n.origin = r), (n.mi = i.mi(r, e)), (n.ni = r.Fb(n)), n;
          }
          return (
            e(i, t),
            (i.mi = function (t, e) {
              var i = e.y - t.y;
              return (e.x - t.x) / i;
            }),
            (i.oi = function (t, e) {
              return e.mi - t.mi;
            }),
            i
          );
        })(r.Zb);
        i.pi = n;
      }
    ),
    i(
      "geometry/utils/Convex",
      [
        "require",
        "exports",
        "geometry/utils/HullPoint",
        "utils/Utils",
        "geometry/utils/Vector",
        "geometry/Triangle",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var a = (function () {
          function t() {}
          return (
            (t.reduce = function (t, e, i) {
              var r = [];
              r.push(t[e]);
              for (var n = t[e].mi, s = e + i, o = e + 1; o < s; o++) {
                var a = t[o];
                n !== a.mi && (r.push(a), (n = a.mi));
              }
              return r;
            }),
            (t.qi = function (e) {
              for (var s = null, o = 0, a = e; o < a.length; o++) {
                var h = a[o];
                null !== s
                  ? (s.y > h.y || (s.y === h.y && s.x > h.x)) && (s = h)
                  : (s = h);
              }
              if (null === s) throw new Error("bug");
              for (
                var u = new Array(e.length), c = 0, p = 0, f = e;
                p < f.length;
                p++
              ) {
                var h = f[p];
                h.u(s) || (u[c++] = new i.pi(h, s));
              }
              if (
                (r.j(u, i.pi.oi, 0, c), (u = t.reduce(u, 0, c)), 1 === u.length)
              )
                return [s, u[0]];
              var l = [];
              l.push(s), l.push(u[0]);
              for (var v = 1; v <= u.length; v++) {
                var b = void 0;
                for (b = v === u.length ? s : u[v]; ; ) {
                  var y = l.pop();
                  if (void 0 === y) break;
                  var d = l[l.length - 1];
                  if (n.Ib.Eb(d, y, b) > 0) {
                    l.push(y), l.push(b);
                    break;
                  }
                }
              }
              return l.pop(), l;
            }),
            (t.od = function (e) {
              if (0 === e.length) return null;
              var i = t.qi(e);
              if (1 === i.length) return i[0];
              if (2 === i.length) {
                var r = i[0].x + i[1].x,
                  n = i[0].y + i[1].y;
                return new o.Zb(r / 2, n / 2);
              }
              for (
                var r = 0, n = 0, a = 0, h = i[0], u = i[1], c = 2;
                c < i.length;
                c++
              ) {
                var p = i[c],
                  f = s.qd.od(h, u, p),
                  l = s.qd.Pc(h, u, p);
                (r += f.x * l), (n += f.y * l), (a += l), (u = p);
              }
              return new o.Zb(r / a, n / a);
            }),
            t
          );
        })();
        e.ri = a;
      }
    ),
    i(
      "geometry/utils/Bounding",
      [
        "require",
        "exports",
        "geometry/BBox2",
        "geometry/Matrix3",
        "geometry/utils/Convex"
      ],
      function (t, e, i, r, n) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var s = (function () {
          function t() {}
          return (
            (t.si = function (t) {
              for (
                var e = n.ri.qi(t),
                  s = e[0],
                  o = Number.POSITIVE_INFINITY,
                  a = null,
                  h = null,
                  u = 0,
                  c = 1;
                c <= e.length;
                c++
              ) {
                var p = e[c % e.length],
                  f = -p.angle(s),
                  l = r.va.rotate(f).ta(s),
                  v = new i.xc();
                v.qc(s);
                for (var b = 0; b < e.length; b++) {
                  var y = e[(b + c) % e.length];
                  v.qc(y.Xb(l));
                }
                var d = v.wc(),
                  g = d.width() * d.height();
                g < o && ((o = g), (a = d), (h = s), (u = f)), (s = p);
              }
              if (null === a || null === h) throw new Error("points is empty");
              u = -u;
              var l = r.va.rotate(u).ta(h),
                w = a.Mc(),
                m = a.Nc(),
                E = a.Lc(),
                O = a.Kc();
              return [w.Xb(l), m.Xb(l), E.Xb(l), O.Xb(l)];
            }),
            t
          );
        })();
        e.ti = s;
      }
    ),
    i(
      "geometry/utils/DynamicRTree",
      ["require", "exports", "utils/Check", "geometry/BBox2"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
            function t(t) {
              (this.ui = new Array()),
                (this.ed = null),
                (this.parent = null),
                (this.qb = t);
            }
            return (
              (t.prototype.eb = function () {
                return i.J.R(this.ed);
              }),
              (t.prototype.vi = function (e, i) {
                for (var r = 0, n = this.ui; r < n.length; r++) {
                  var s = n[r];
                  s instanceof t ? s.vi(e + 1, i) : i(s, e);
                }
              }),
              (t.prototype.debug = function (e) {
                for (var i = 0, r = this.ui; i < r.length; i++) {
                  var n = r[i];
                  n instanceof t && n.debug(e + " |--");
                }
              }),
              (t.prototype.wi = function (e) {
                for (var i = this.ui, n = e.eb(), s = 0; s < i.length; s++) {
                  var o = i[s];
                  if (o instanceof t && n.Ic(o.eb()))
                    return o.wi(e), void (this.ed = r.mb.lb(this.ed, n));
                }
                e instanceof t && (e.parent = this),
                  i.length <= this.qb ? i.push(e) : (i.push(e), this.xi()),
                  (this.ed = r.mb.lb(this.ed, n));
              }),
              (t.prototype.remove = function (e) {
                if (e instanceof t && e.ui.length > 0) throw new Error();
                for (
                  var i = this.ui, r = e.eb(), n = new Array(), s = 0;
                  s < i.length;
                  s++
                ) {
                  var o = i[s];
                  if (o === e)
                    return (
                      i.splice(s, 1),
                      i.length > 0
                        ? this.yi()
                        : null !== this.parent
                        ? this.parent.remove(this)
                        : (this.ed = null),
                      1
                    );
                  o instanceof t && r.Ic(o.eb()) && n.push(o);
                }
                if (e instanceof t) throw new Error();
                for (var a = 0, h = n; a < h.length; a++) {
                  var u = h[a],
                    c = u.remove(e);
                  if (1 === c) return 1;
                  if (0 !== c) throw new Error();
                }
                return 0;
              }),
              (t.prototype.yi = function () {
                for (
                  var t = new r.xc(), e = 0, i = this.ui;
                  e < i.length;
                  e++
                ) {
                  var n = i[e];
                  t.pc(n.eb());
                }
                this.ed = t.wc();
              }),
              (t.prototype.xi = function () {
                for (
                  var t = this.ui,
                    e = t.length,
                    i = -1,
                    n = -1,
                    s = Number.NEGATIVE_INFINITY,
                    o = 0;
                  o < e;
                  o++
                )
                  for (var a = t[o], h = o + 1; h < e; h++) {
                    var u = t[h],
                      c = r.mb.lb(a.eb(), u.eb()).Pc();
                    c > s && ((s = c), (i = o), (n = h));
                  }
                for (
                  var p = this.zi(t[i]), f = this.zi(t[n]), l = 0;
                  l < e;
                  l++
                )
                  if (l !== i && l !== n) {
                    var v = t[l],
                      b = v.eb(),
                      y = r.mb.lb(p.ed, b).Pc(),
                      d = r.mb.lb(f.ed, b).Pc();
                    y < d ? p.wi(v) : f.wi(v);
                  }
                t.length = 0;
                var g = this.parent;
                null !== g && g.ui.length < this.qb
                  ? ((p.parent = g),
                    (f.parent = g),
                    g.ui.push(p),
                    g.ui.push(f),
                    g.remove(this),
                    g.yi())
                  : ((p.parent = this),
                    (f.parent = this),
                    t.push(p),
                    t.push(f),
                    this.yi());
              }),
              (t.prototype.zi = function (e) {
                if (e instanceof t) return e;
                var i = new t(this.qb);
                return i.wi(e), i;
              }),
              t
            );
          })(),
          s = (function () {
            function t(t) {
              this.root = new n(t);
            }
            return (
              (t.prototype.vi = function (t) {
                this.root.vi(0, t);
              }),
              (t.prototype.search = function (t) {
                var e = [],
                  i = [];
                for (i.push(this.root); ; ) {
                  var r = i.shift();
                  if (void 0 === r) break;
                  for (var s = 0, o = r.ui; s < o.length; s++) {
                    var a = o[s];
                    t.vb(a.eb()) || (a instanceof n ? i.push(a) : e.push(a));
                  }
                }
                return e;
              }),
              (t.prototype.wi = function (t) {
                this.root.wi(t);
              }),
              (t.prototype.remove = function (t) {
                return this.root.remove(t);
              }),
              (t.prototype.eb = function () {
                return this.root.eb();
              }),
              (t.prototype.debug = function () {
                this.root.debug("");
              }),
              t
            );
          })();
        e.Ai = s;
      }
    ),
    i(
      "kitsune/3d/PolygonGeometry",
      ["require", "exports", "geometry/BBox3"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t) {
            (this.Bi = []),
              (this.buffer = null),
              (this.count = 0),
              (this.ed = void 0),
              (this.Bi = t);
          }
          return (
            (t.prototype.Ci = function (t) {
              if (null === this.buffer) {
                for (
                  var e = new Array(), i = 0, r = this.Bi;
                  i < r.length;
                  i++
                ) {
                  var n = r[i];
                  this.Di(n, e);
                }
                (this.count = e.length / 6),
                  this.count > 0 &&
                    ((this.buffer = t.createBuffer()),
                    t.bindBuffer(t.ARRAY_BUFFER, this.buffer),
                    t.bufferData(
                      t.ARRAY_BUFFER,
                      new Float32Array(e),
                      t.STATIC_DRAW
                    ));
              }
            }),
            (t.prototype.Di = function (t, e) {
              for (var i = 0; i < t.length - 2; i += 2) {
                var r = t[i],
                  n = t[i + 1],
                  s = t[i + 2];
                e.push(r.x, r.y, 0),
                  e.push(0, 0, 1),
                  e.push(n.x, n.y, 0),
                  e.push(0, 0, 1),
                  e.push(s.x, s.y, 0),
                  e.push(0, 0, 1),
                  t.push(r);
              }
              t.length = 0;
            }),
            (t.prototype.bb = function (t) {
              return this.Ci(t), 0 === this.count;
            }),
            (t.prototype.bindBuffer = function (t, e, i) {
              return (
                this.Ci(t),
                this.count > 0 &&
                  (t.bindBuffer(t.ARRAY_BUFFER, this.buffer),
                  t.vertexAttribPointer(e, 3, t.FLOAT, !1, 24, 0),
                  t.vertexAttribPointer(i, 3, t.FLOAT, !1, 24, 12)),
                this.count
              );
            }),
            (t.prototype.eb = function () {
              if (void 0 === this.ed) {
                for (var t = new i.Fd(), e = 0, r = this.Bi; e < r.length; e++)
                  for (var n = r[e], s = 0, o = n; s < o.length; s++) {
                    var a = o[s];
                    t.tc(a.x, a.y);
                  }
                t.Ed() ? (this.ed = t.wc()) : (this.ed = null);
              }
              return this.ed;
            }),
            t
          );
        })();
        e.Ei = r;
      }
    ),
    i("kitsune/3d/And2Geometry", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          (this.Fi = t), (this.Gi = e);
        }
        return (
          (t.prototype.eb = function () {
            return this.Gi.eb();
          }),
          t
        );
      })();
      e.Hi = i;
    }),
    i("kitsune/3d/And4Geometry", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e, i, r) {
          (this.Fi = t), (this.Gi = e), (this.Ii = i), (this.Ji = r);
        }
        return (
          (t.prototype.eb = function () {
            return this.Gi.eb();
          }),
          t
        );
      })();
      e.Ki = i;
    }),
    i(
      "kitsune/3d/Geometry",
      ["require", "exports", "geometry/Vector3", "geometry/BBox3"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.Li = new i.pa(0, 0, 1));
        var n = (function () {
          function t(t, e) {
            if (
              (void 0 === e && (e = []),
              (this.Mi = []),
              (this.Ni = []),
              (this.Oi = null),
              (this.Pi = null),
              (this.ed = null),
              t.length % 3 != 0)
            )
              throw new Error();
            if (t.length === e.length) (this.Mi = t), (this.Ni = e);
            else {
              for (
                var r = new Array(t.length), n = t.length - 2, s = 0;
                s < n;
                s += 3
              ) {
                var o = t[s],
                  a = t[s + 1],
                  h = t[s + 2],
                  u = i.pa.N(o, a, h);
                (r[s] = u), (r[s + 1] = u), (r[s + 2] = u);
              }
              (this.Mi = t), (this.Ni = r);
            }
          }
          return (
            (t.prototype.Qi = function (t) {
              for (
                var e = new Float32Array(3 * t.length), i = 0, r = 0, n = t;
                r < n.length;
                r++
              ) {
                var s = n[r];
                (e[i++] = s.x), (e[i++] = s.y), (e[i++] = s.z);
              }
              return e;
            }),
            (t.prototype.Ri = function (t, e) {
              if (null === this.Oi) {
                if (((this.Oi = t.createBuffer()), null === this.Oi))
                  throw new Error("faild to create buffer");
                t.bindBuffer(t.ARRAY_BUFFER, this.Oi),
                  t.bufferData(t.ARRAY_BUFFER, this.Qi(this.Mi), t.STATIC_DRAW);
              } else t.bindBuffer(t.ARRAY_BUFFER, this.Oi);
              t.vertexAttribPointer(e, 3, t.FLOAT, !1, 0, 0);
            }),
            (t.prototype.Si = function (t, e) {
              if (null === this.Pi) {
                if (((this.Pi = t.createBuffer()), null === this.Pi))
                  throw new Error("faild to create buffer");
                t.bindBuffer(t.ARRAY_BUFFER, this.Pi),
                  t.bufferData(t.ARRAY_BUFFER, this.Qi(this.Ni), t.STATIC_DRAW);
              } else t.bindBuffer(t.ARRAY_BUFFER, this.Pi);
              t.vertexAttribPointer(e, 3, t.FLOAT, !1, 0, 0);
            }),
            (t.prototype.eb = function () {
              if (null === this.ed) {
                for (
                  var t = new r.Fd(), e = 0, i = this.Mi;
                  e < i.length;
                  e++
                ) {
                  var n = i[e];
                  t.rc(n);
                }
                this.ed = t.wc();
              }
              return this.ed;
            }),
            t
          );
        })();
        e.Ti = n;
      }
    ),
    i(
      "kitsune/core/Color",
      ["require", "exports", "utils/Check"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e, r, n) {
            void 0 === n && (n = 1),
              (this.x = i.J.O(t)),
              (this.y = i.J.O(e)),
              (this.z = i.J.O(r)),
              (this.alpha = n);
          }
          return (
            (t.Ui = function (t) {
              return this.Vi((t >> 16) & 255, (t >> 8) & 255, 255 & t);
            }),
            (t.Vi = function (e, i, r, n) {
              return (
                void 0 === n && (n = 255),
                new t(e / 255, i / 255, r / 255, n / 255)
              );
            }),
            (t.Wi = function (e) {
              if ((e.startsWith("#") && (e = e.substr(1)), 3 == e.length))
                return new t(
                  parseInt(e[0], 16) / 15,
                  parseInt(e[1], 16) / 15,
                  parseInt(e[2], 16) / 15
                );
              if (6 == e.length)
                return new t(
                  parseInt(e.substr(0, 2), 16) / 255,
                  parseInt(e.substr(2, 2), 16) / 255,
                  parseInt(e.substr(4, 2), 16) / 255
                );
              throw new Error("invalid color string");
            }),
            (t.prototype.add = function (e, i, r, n) {
              return new t(
                Math.max(0, Math.min(1, this.x + e)),
                Math.max(0, Math.min(1, this.y + i)),
                Math.max(0, Math.min(1, this.z + r)),
                Math.max(0, Math.min(1, this.alpha + n))
              );
            }),
            (t.prototype.getData = function () {
              return [this.x, this.y, this.z, this.alpha];
            }),
            (t.Xi = new t(1, 1, 1, 1)),
            (t.Yi = new t(0, 0, 0, 1)),
            (t.Zi = new t(1, 0, 0, 1)),
            (t.$i = new t(0, 1, 0, 1)),
            (t._i = new t(0, 0, 1, 1)),
            t
          );
        })();
        e.aj = r;
      }
    ),
    i(
      "kitsune/3d/PhongMaterial",
      ["require", "exports", "kitsune/core/Color", "utils/Check"],
      function (t, e, i, r) {
        function n(t, e, r, n, o, a, h, u, c, p, f) {
          void 0 === f && (f = 1);
          var l = new i.aj(t, e, r),
            v = new i.aj(n, o, a),
            b = new i.aj(h, u, c);
          return new s(l, v, b, 5 * p, f);
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.bj = n);
        var s = (function () {
          function t(t, e, i, n, s) {
            if (s < 0 || s > 1) throw new Error("opacity must between 0 and 1");
            (this.cj = t),
              (this.dj = e),
              (this.ej = i),
              (this.fj = r.J.O(n)),
              (this.opacity = s);
          }
          return t;
        })();
        e.gj = s;
      }
    ),
    i(
      "kitsune/3d/Camera",
      ["require", "exports", "geometry/Matrix4", "geometry/Vector3"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = new r.pa(0, 1, 0),
          s = (function () {
            function t(t, e, s, o, a, h, u) {
              void 0 === h && (h = r.pa.oa),
                void 0 === u && (u = n),
                (this.hj = new i.wa()),
                (this.ij = new i.wa()),
                (this.jj = !1),
                (this.kj = t),
                (this.lj = e),
                (this.near = s),
                (this.mj = o),
                (this.position = a),
                (this.target = h),
                (this.nj = u),
                (this.offset = r.pa.oa),
                (this.scale = 1),
                (this.jj = !0),
                this.oj();
            }
            return (
              (t.prototype.pj = function () {
                return this.oj(), this.hj;
              }),
              (t.prototype.qj = function () {
                return this.kj;
              }),
              (t.prototype.rj = function (t) {
                (this.kj = t), (this.jj = !0);
              }),
              (t.prototype.sj = function () {
                return this.lj;
              }),
              (t.prototype.tj = function (t) {
                (this.lj = t), (this.jj = !0);
              }),
              (t.prototype.uj = function () {
                return this.oj(), this.ij;
              }),
              (t.prototype.vj = function () {
                return this.position;
              }),
              (t.prototype.setPosition = function (t) {
                (this.position = t), (this.jj = !0);
              }),
              (t.prototype.wj = function () {
                return this.target;
              }),
              (t.prototype.xj = function (t) {
                (this.target = t), (this.jj = !0);
              }),
              (t.prototype.yj = function () {
                return this.offset;
              }),
              (t.prototype.zj = function (t) {
                this.offset = t;
              }),
              (t.prototype.Aj = function () {
                return this.scale;
              }),
              (t.prototype.setScale = function (t) {
                this.scale = t;
              }),
              (t.prototype.oj = function () {
                this.jj && (this.Bj(), this.Cj(), (this.jj = !1));
              }),
              (t.prototype.Bj = function () {
                var t = this.position.sub(this.target).normalize(),
                  e = this.nj.la(t).normalize(),
                  r = t.la(e).normalize();
                this.ij = new i.wa([
                  e.x,
                  e.y,
                  e.z,
                  0,
                  r.x,
                  r.y,
                  r.z,
                  0,
                  t.x,
                  t.y,
                  t.z,
                  0,
                  this.position.x,
                  this.position.y,
                  this.position.z,
                  1
                ]);
              }),
              (t.prototype.Cj = function () {
                var t = Math.tan(0.5 * Math.PI - 0.5 * this.kj),
                  e = 1 / (this.near - this.mj);
                this.hj = new i.wa([
                  t / this.lj,
                  0,
                  0,
                  0,
                  0,
                  t,
                  0,
                  0,
                  0,
                  0,
                  (this.near + this.mj) * e,
                  -1,
                  0,
                  0,
                  this.near * this.mj * e * 2,
                  0
                ]);
              }),
              t
            );
          })();
        e.Dj = s;
      }
    ),
    i(
      "kitsune/3d/Light",
      ["require", "exports", "geometry/Vector3"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t) {
            this.color = t;
          }
          return t;
        })();
        e.Ej = r;
        var n = (function () {
          function t(t, e, r) {
            void 0 === r && (r = i.pa.oa),
              (this.color = t),
              (this.position = e),
              (this.target = r);
          }
          return (
            (t.prototype.direction = function () {
              return this.target.sub(this.position);
            }),
            t
          );
        })();
        e.Fj = n;
      }
    ),
    i(
      "kitsune/3d/Group",
      [
        "require",
        "exports",
        "kitsune/3d/Drawable",
        "utils/Utils",
        "geometry/BBox3"
      ],
      function (t, i, r, n, s) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var o = (function (t) {
          function i() {
            var e = (null !== t && t.apply(this, arguments)) || this;
            return (e.Gj = []), (e.ed = null), e;
          }
          return (
            e(i, t),
            (i.prototype.add = function (t) {
              this.Gj.push(t), (this.ed = null);
            }),
            (i.prototype.remove = function (t) {
              n.F.remove(this.Gj, t), (this.ed = null);
            }),
            (i.prototype.clear = function () {
              (this.Gj.length = 0), (this.ed = null);
            }),
            (i.prototype.Hj = function (t, e) {
              e = this.Ij().na(e);
              for (var i = 0, r = this.Gj; i < r.length; i++) {
                r[i].Hj(t, e);
              }
            }),
            (i.prototype.eb = function () {
              if (null === this.ed) {
                for (
                  var t = new s.Fd(), e = 0, i = this.Gj;
                  e < i.length;
                  e++
                ) {
                  var r = i[e],
                    n = r.eb();
                  null !== n && t.sc(n);
                }
                this.ed = t.wc();
              }
              return this.ed;
            }),
            i
          );
        })(r.Jj);
        i.Kj = o;
      }
    ),
    i(
      "kitsune/core/WebGLRender",
      ["require", "exports", "utils/Check"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e) {
            void 0 === e && (e = {}),
              (this.Lj = new Array()),
              (this.canvas = t),
              (this.attributes = Object.assign(
                {
                  depth: !1,
                  antialias: !1,
                  stencil: !1,
                  alpha: !1,
                  premultipliedAlpha: !1
                },
                e
              ));
            var i = t.getContext("webgl", this.attributes);
            if (null === i) throw new Error("faild to initial webgl");
            (this.Mj = i), this.Nj();
          }
          return (
            (t.prototype.Oj = function (t, e) {
              var i = this.Mj.getAttribLocation(t, e);
              if (i < 0)
                throw new Error("faild to get attribute " + e + " location");
              return i;
            }),
            (t.prototype.Pj = function (t, e) {
              var i = this.Mj.getUniformLocation(t, e);
              if (null === i)
                throw new Error("faild to get uniform " + e + " location");
              return i;
            }),
            (t.prototype.createShader = function (t, e) {
              var i = this.Mj.createShader(t);
              if (null === i) throw new Error("invalid shader type");
              if (
                (this.Mj.shaderSource(i, e),
                this.Mj.compileShader(i),
                !this.Mj.getShaderParameter(i, this.Mj.COMPILE_STATUS))
              ) {
                var r = this.Mj.getShaderInfoLog(i);
                throw new Error(r || "faild to compile shader");
              }
              return i;
            }),
            (t.prototype.linkProgram = function (t, e) {
              var i = this.Mj.createProgram();
              if (null === i) throw new Error("faild to create program");
              if (
                (this.Mj.attachShader(i, t),
                this.Mj.attachShader(i, e),
                this.Mj.linkProgram(i),
                !this.Mj.getProgramParameter(i, this.Mj.LINK_STATUS))
              )
                throw new Error("faild to link shaders");
              return i;
            }),
            (t.prototype.createProgram = function (t, e) {
              var i = this.createShader(this.Mj.VERTEX_SHADER, t),
                r = this.createShader(this.Mj.FRAGMENT_SHADER, e);
              return this.linkProgram(i, r);
            }),
            (t.prototype.createBuffer = function () {
              return i.J.R(this.Mj.createBuffer());
            }),
            (t.prototype.Qj = function (t, e) {
              var i = this.Mj,
                r = this.createBuffer();
              return (
                i.bindBuffer(i.ARRAY_BUFFER, r),
                i.bufferData(i.ARRAY_BUFFER, t, e),
                i.bindBuffer(i.ARRAY_BUFFER, null),
                r
              );
            }),
            (t.prototype.Rj = function (t, e) {
              var i = this.Mj,
                r = this.createBuffer();
              return (
                i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, r),
                i.bufferData(i.ELEMENT_ARRAY_BUFFER, t, e),
                i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, null),
                r
              );
            }),
            (t.prototype.Sj = function (t, e) {
              var i = this.Mj,
                r = this.createBuffer();
              return (
                i.bindBuffer(i.ARRAY_BUFFER, r),
                i.bufferData(i.ARRAY_BUFFER, t, e),
                i.bindBuffer(i.ARRAY_BUFFER, null),
                r
              );
            }),
            (t.prototype.bufferSubData = function (t, e, i) {
              var r = this.Mj;
              r.bindBuffer(r.ARRAY_BUFFER, t),
                r.bufferSubData(r.ARRAY_BUFFER, e, i),
                r.bindBuffer(r.ARRAY_BUFFER, null);
            }),
            (t.prototype.Tj = function (t, e, i) {
              var r = this.Mj;
              r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, t),
                r.bufferSubData(r.ELEMENT_ARRAY_BUFFER, e, i),
                r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, null);
            }),
            (t.prototype.Uj = function (t, e) {
              void 0 === e && (e = 1), this.Mj.clearColor(t.x, t.y, t.z, e);
            }),
            (t.prototype.Vj = function () {
              var t = this.Mj.getExtension("ANGLE_instanced_arrays");
              if (null === t) throw new Error("faild to initial webgl");
              return t;
            }),
            (t.prototype.width = function () {
              return this.canvas.width;
            }),
            (t.prototype.height = function () {
              return this.canvas.height;
            }),
            (t.prototype.Nj = function (t) {
              void 0 === t && (t = window.devicePixelRatio);
              var e = this.canvas.offsetWidth * t,
                i = this.canvas.offsetHeight * t;
              (this.canvas.width = e),
                (this.canvas.height = i),
                this.Mj.viewport(0, 0, e, i);
            }),
            (t.prototype.Wj = function (t) {
              this.Lj.push(t), this.Mj.bindFramebuffer(this.Mj.FRAMEBUFFER, t);
            }),
            (t.prototype.Xj = function () {
              this.Lj.pop();
              var t;
              (t = this.Lj.length > 0 ? this.Lj[this.Lj.length - 1] : null),
                this.Mj.bindFramebuffer(this.Mj.FRAMEBUFFER, t);
            }),
            (t.prototype.Yj = function (t, e, r, n, s, o) {
              var a = this.Mj,
                h = i.J.R(a.createTexture());
              return (
                a.bindTexture(a.TEXTURE_2D, h),
                a.texImage2D(
                  a.TEXTURE_2D,
                  0,
                  a.RGBA,
                  t,
                  e,
                  0,
                  a.RGBA,
                  a.UNSIGNED_BYTE,
                  null
                ),
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, r),
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, n),
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, s),
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, o),
                h
              );
            }),
            (t.prototype.Zj = function (t, e, r, n, s) {
              var o = this.Mj,
                a = i.J.R(o.createTexture());
              return (
                o.bindTexture(o.TEXTURE_2D, a),
                o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, e),
                o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, r),
                o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, n),
                o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, s),
                o.texImage2D(
                  o.TEXTURE_2D,
                  0,
                  o.RGBA,
                  o.RGBA,
                  o.UNSIGNED_BYTE,
                  t
                ),
                o.bindTexture(o.TEXTURE_2D, null),
                a
              );
            }),
            (t.prototype.$j = function (t, e, r, n) {
              var s = this.Mj,
                o = i.J.R(s.createFramebuffer());
              if (
                (this.Wj(o),
                s.framebufferTexture2D(
                  s.FRAMEBUFFER,
                  s.COLOR_ATTACHMENT0,
                  s.TEXTURE_2D,
                  t,
                  0
                ),
                n)
              ) {
                var a = i.J.R(s.createRenderbuffer());
                s.bindRenderbuffer(s.RENDERBUFFER, a),
                  s.renderbufferStorage(s.RENDERBUFFER, s.DEPTH_STENCIL, e, r),
                  s.framebufferRenderbuffer(
                    s.FRAMEBUFFER,
                    s.DEPTH_STENCIL_ATTACHMENT,
                    s.RENDERBUFFER,
                    a
                  );
              }
              return this.Xj(), o;
            }),
            t
          );
        })();
        e._j = r;
      }
    ),
    i("kitsune/3d/SubGeometry", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          (this.Fi = t), (this.Gi = e);
        }
        return (
          (t.prototype.eb = function () {
            return this.Gi.eb();
          }),
          t
        );
      })();
      e.ak = i;
    }),
    i(
      "kitsune/3d/Program",
      [
        "require",
        "exports",
        "kitsune/3d/Geometry",
        "kitsune/3d/PolygonGeometry",
        "kitsune/3d/And2Geometry",
        "kitsune/3d/SubGeometry",
        "kitsune/3d/And4Geometry"
      ],
      function (t, e, i, r, n, s, o) {
        function a(t) {
          return [t.x, t.y, t.z];
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var h =
            "\n    attribute vec4 a_position;\n    attribute vec3 a_normal;\n\n    uniform mediump int u_state; // 0 normal 1 no lighting\n    uniform mat4 u_MVmatrix;\n    uniform mat4 u_MVPmatrix;\n    uniform vec3 u_eyePosition;\n\n    varying vec3 v_normal;\n    varying vec3 v_eyeToSurface; \n\n    void main(){\n        if (u_state == 1) {\n            gl_Position = u_MVPmatrix * a_position;\n        } else {\n            gl_Position = u_MVPmatrix * a_position;\n            v_normal = mat3(u_MVmatrix) * a_normal;\n            vec3 position = vec3(u_MVmatrix * a_position);\n            v_eyeToSurface = u_eyePosition - position;\n        }\n    }\n",
          u =
            "\n    precision mediump float;\n\n    uniform int u_state; // 0 normal 1 no lighting\n    uniform vec3 u_ambientColor;\n    uniform vec3 u_diffuseColor;\n    uniform vec3 u_specularColor;\n    uniform float u_shininess;\n    uniform float u_alpha;\n\n    uniform vec3 u_ambientLight;\n    uniform vec3 u_directLight;\n    uniform vec3 u_lightToSurface;\n\n    varying vec3 v_normal;\n    varying vec3 v_eyeToSurface;\n    \n    void main() {\n        if (u_state == 1) {\n            gl_FragColor = vec4(1,1,1,1);\n        } else {\n            vec3 normal = normalize(v_normal);\n            vec3 lightToSurface = normalize(u_lightToSurface);\n            vec3 eyeToSurface = normalize(v_eyeToSurface);\n            float diffuse = abs(dot(normal , lightToSurface));\n            float specular = pow(abs(dot(normal, eyeToSurface)), 300.0) * u_shininess;\n            vec3 diff = vec3(u_diffuseColor * u_directLight) * diffuse;\n            vec3 ambient = vec3(u_ambientColor * u_ambientLight);\n            gl_FragColor.rgb = diff + ambient +  specular * u_specularColor;\n            gl_FragColor.a = u_alpha;\n        }\n    }\n",
          c = new Float32Array([
            -2e4,
            -2e4,
            0,
            0,
            0,
            1,
            2e4,
            -2e4,
            0,
            0,
            0,
            1,
            2e4,
            2e4,
            0,
            0,
            0,
            1,
            2e4,
            2e4,
            0,
            0,
            0,
            1,
            -2e4,
            2e4,
            0,
            0,
            0,
            1,
            -2e4,
            -2e4,
            0,
            0,
            0,
            1
          ]),
          p = (function () {
            function t(t) {
              (this.bk = t),
                (this.ck = t.createProgram(h, u)),
                (this.dk = t.Oj(this.ck, "a_position")),
                (this.ek = t.Oj(this.ck, "a_normal")),
                (this.fk = t.Pj(this.ck, "u_state")),
                (this.gk = t.Pj(this.ck, "u_MVmatrix")),
                (this.hk = t.Pj(this.ck, "u_MVPmatrix")),
                (this.ik = t.Pj(this.ck, "u_eyePosition")),
                (this.jk = t.Pj(this.ck, "u_ambientColor")),
                (this.kk = t.Pj(this.ck, "u_diffuseColor")),
                (this.lk = t.Pj(this.ck, "u_specularColor")),
                (this.mk = t.Pj(this.ck, "u_shininess")),
                (this.nk = t.Pj(this.ck, "u_alpha")),
                (this.pk = t.Pj(this.ck, "u_ambientLight")),
                (this.qk = t.Pj(this.ck, "u_directLight")),
                (this.rk = t.Pj(this.ck, "u_lightToSurface"));
              var e = t.Mj;
              (this.sk = t.createBuffer()),
                e.bindBuffer(e.ARRAY_BUFFER, this.sk),
                e.bufferData(e.ARRAY_BUFFER, c, e.STATIC_DRAW);
            }
            return (
              (t.prototype.tk = function (t, e, h, u, c) {
                var p = this.bk,
                  f = p.Mj,
                  l = t.uk;
                f.enableVertexAttribArray(this.dk),
                  f.enableVertexAttribArray(this.ek);
                var v = e
                    .na(l.uj().inverse())
                    .translate(l.yj())
                    .scale(l.Aj(), l.Aj(), 1),
                  b = v.na(t.uk.pj());
                f.uniformMatrix4fv(this.gk, !1, new Float32Array(v.data)),
                  f.uniformMatrix4fv(this.hk, !1, new Float32Array(b.data)),
                  f.uniform3fv(this.jk, a(u.cj)),
                  f.uniform3fv(this.kk, a(u.dj)),
                  f.uniform3fv(this.lk, a(u.ej)),
                  f.uniform1f(this.mk, u.fj),
                  f.uniform1f(this.nk, u.opacity),
                  h instanceof i.Ti
                    ? (f.uniform1i(this.fk, 0),
                      h.Ri(f, this.dk),
                      h.Si(f, this.ek),
                      f.drawArrays(f.TRIANGLES, 0, h.Mi.length))
                    : h instanceof r.Ei
                    ? this.vk(h, c)
                    : h instanceof n.Hi
                    ? this.wk(h.Fi, h.Gi, c)
                    : h instanceof o.Ki
                    ? this.xk(h.Fi, h.Gi, h.Ii, h.Ji, c)
                    : h instanceof s.ak && this.yk(h.Fi, h.Gi, c);
              }),
              (t.prototype.debug = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                for (var i = this.bk.Mj, r = 0, n = t; r < n.length; r++) {
                  var s = n[r],
                    o = s.bindBuffer(i, this.dk, this.ek);
                  i.drawArrays(i.LINE_STRIP, 0, o);
                }
              }),
              (t.prototype.vk = function (t, e) {
                var i = this.bk.Mj,
                  r = t.bindBuffer(i, this.dk, this.ek);
                r > 0 &&
                  (i.enable(i.STENCIL_TEST),
                  i.uniform1i(this.fk, 1),
                  i.clearStencil(0),
                  i.stencilMask(255),
                  i.clear(i.STENCIL_BUFFER_BIT),
                  i.disable(i.DEPTH_TEST),
                  e && i.depthMask(!1),
                  i.stencilFunc(i.ALWAYS, 0, 255),
                  i.colorMask(!1, !1, !1, !1),
                  i.stencilOpSeparate(
                    i.FRONT,
                    i.INCR_WRAP,
                    i.INCR_WRAP,
                    i.INCR_WRAP
                  ),
                  i.stencilOpSeparate(
                    i.BACK,
                    i.DECR_WRAP,
                    i.DECR_WRAP,
                    i.DECR_WRAP
                  ),
                  i.drawArrays(i.TRIANGLES, 0, r),
                  i.enable(i.DEPTH_TEST),
                  e && i.depthMask(!0),
                  i.stencilFunc(i.NOTEQUAL, 0, 255),
                  i.colorMask(!0, !0, !0, !0),
                  this.zk(),
                  i.uniform1i(this.fk, 0),
                  i.drawArrays(i.TRIANGLES, 0, 6),
                  i.disable(i.STENCIL_TEST),
                  i.stencilMask(0));
              }),
              (t.prototype.wk = function (t, e, i) {
                var r = this.bk.Mj;
                if (!t.bb(r) && !e.bb(r)) {
                  r.enable(r.STENCIL_TEST),
                    r.stencilMask(255),
                    r.uniform1i(this.fk, 1),
                    r.clearStencil(127),
                    r.clear(r.STENCIL_BUFFER_BIT),
                    r.disable(r.DEPTH_TEST),
                    i && r.depthMask(!1),
                    r.colorMask(!1, !1, !1, !1);
                  var n = t.bindBuffer(r, this.dk, this.ek);
                  r.stencilFunc(r.ALWAYS, 0, 255),
                    r.stencilOpSeparate(
                      r.FRONT,
                      r.INCR_WRAP,
                      r.INCR_WRAP,
                      r.INCR_WRAP
                    ),
                    r.stencilOpSeparate(
                      r.BACK,
                      r.DECR_WRAP,
                      r.DECR_WRAP,
                      r.DECR_WRAP
                    ),
                    r.drawArrays(r.TRIANGLES, 0, n),
                    this.zk(),
                    r.stencilFunc(r.NOTEQUAL, 127, 255),
                    r.stencilOp(r.ZERO, r.REPLACE, r.REPLACE),
                    r.drawArrays(r.TRIANGLES, 0, 6);
                  var s = e.bindBuffer(r, this.dk, this.ek);
                  r.stencilFunc(r.NOTEQUAL, 0, 255),
                    r.stencilOpSeparate(
                      r.FRONT,
                      r.KEEP,
                      r.INCR_WRAP,
                      r.INCR_WRAP
                    ),
                    r.stencilOpSeparate(
                      r.BACK,
                      r.KEEP,
                      r.DECR_WRAP,
                      r.DECR_WRAP
                    ),
                    r.drawArrays(r.TRIANGLES, 0, s),
                    this.zk(),
                    r.stencilFunc(r.EQUAL, 127, 255),
                    r.stencilOp(r.KEEP, r.ZERO, r.ZERO),
                    r.drawArrays(r.TRIANGLES, 0, 6),
                    r.uniform1i(this.fk, 0),
                    r.enable(r.DEPTH_TEST),
                    i && r.depthMask(!0),
                    r.stencilFunc(r.NOTEQUAL, 0, 255),
                    r.colorMask(!0, !0, !0, !0),
                    this.zk(),
                    r.drawArrays(r.TRIANGLES, 0, 6),
                    r.stencilMask(0),
                    r.disable(r.STENCIL_TEST);
                }
              }),
              (t.prototype.xk = function (t, e, i, r, n) {
                var s = this.bk.Mj;
                if (!(t.bb(s) || e.bb(s) || i.bb(s) || r.bb(s))) {
                  s.enable(s.STENCIL_TEST),
                    s.stencilMask(255),
                    s.uniform1i(this.fk, 1),
                    s.clearStencil(127),
                    s.clear(s.STENCIL_BUFFER_BIT),
                    s.disable(s.DEPTH_TEST),
                    n && s.depthMask(!1),
                    s.colorMask(!1, !1, !1, !1);
                  var o = t.bindBuffer(s, this.dk, this.ek);
                  s.stencilFunc(s.NOTEQUAL, 0, 255),
                    s.stencilOpSeparate(
                      s.FRONT,
                      s.KEEP,
                      s.INCR_WRAP,
                      s.INCR_WRAP
                    ),
                    s.stencilOpSeparate(
                      s.BACK,
                      s.KEEP,
                      s.DECR_WRAP,
                      s.DECR_WRAP
                    ),
                    s.drawArrays(s.TRIANGLES, 0, o),
                    this.zk(),
                    s.stencilFunc(s.EQUAL, 127, 255),
                    s.stencilOp(s.REPLACE, s.ZERO, s.ZERO),
                    s.drawArrays(s.TRIANGLES, 0, 6);
                  var a = e.bindBuffer(s, this.dk, this.ek);
                  s.stencilFunc(s.NOTEQUAL, 0, 255),
                    s.stencilOpSeparate(
                      s.FRONT,
                      s.KEEP,
                      s.INCR_WRAP,
                      s.INCR_WRAP
                    ),
                    s.stencilOpSeparate(
                      s.BACK,
                      s.KEEP,
                      s.DECR_WRAP,
                      s.DECR_WRAP
                    ),
                    s.drawArrays(s.TRIANGLES, 0, a),
                    this.Ak();
                  var h = i.bindBuffer(s, this.dk, this.ek);
                  s.stencilFunc(s.NOTEQUAL, 0, 255),
                    s.stencilOpSeparate(
                      s.FRONT,
                      s.KEEP,
                      s.INCR_WRAP,
                      s.INCR_WRAP
                    ),
                    s.stencilOpSeparate(
                      s.BACK,
                      s.KEEP,
                      s.DECR_WRAP,
                      s.DECR_WRAP
                    ),
                    s.drawArrays(s.TRIANGLES, 0, h),
                    this.Ak();
                  var u = r.bindBuffer(s, this.dk, this.ek);
                  s.stencilFunc(s.NOTEQUAL, 0, 255),
                    s.stencilOpSeparate(
                      s.FRONT,
                      s.KEEP,
                      s.INCR_WRAP,
                      s.INCR_WRAP
                    ),
                    s.stencilOpSeparate(
                      s.BACK,
                      s.KEEP,
                      s.DECR_WRAP,
                      s.DECR_WRAP
                    ),
                    s.drawArrays(s.TRIANGLES, 0, u),
                    this.zk(),
                    s.stencilFunc(s.EQUAL, 127, 255),
                    s.stencilOp(s.KEEP, s.ZERO, s.ZERO),
                    s.drawArrays(s.TRIANGLES, 0, 6),
                    s.uniform1i(this.fk, 0),
                    s.enable(s.DEPTH_TEST),
                    n && s.depthMask(!0),
                    s.stencilFunc(s.NOTEQUAL, 0, 255),
                    s.colorMask(!0, !0, !0, !0),
                    this.zk(),
                    s.drawArrays(s.TRIANGLES, 0, 6),
                    s.stencilMask(0),
                    s.disable(s.STENCIL_TEST);
                }
              }),
              (t.prototype.Ak = function () {
                var t = this.bk.Mj;
                this.zk(),
                  t.stencilFunc(t.EQUAL, 127, 255),
                  t.stencilOp(t.KEEP, t.ZERO, t.ZERO),
                  t.drawArrays(t.TRIANGLES, 0, 6),
                  t.stencilFunc(t.LEQUAL, 1, 255),
                  t.stencilOp(t.INVERT, t.REPLACE, t.REPLACE),
                  t.drawArrays(t.TRIANGLES, 0, 6),
                  t.stencilFunc(t.GREATER, 127, 255),
                  t.stencilOp(t.ZERO, t.REPLACE, t.REPLACE),
                  t.drawArrays(t.TRIANGLES, 0, 6);
              }),
              (t.prototype.yk = function (t, e, i) {
                var r = this.bk.Mj;
                if (!t.bb(r)) {
                  r.enable(r.STENCIL_TEST),
                    r.stencilMask(255),
                    r.uniform1i(this.fk, 1),
                    r.clearStencil(127),
                    r.clear(r.STENCIL_BUFFER_BIT),
                    r.disable(r.DEPTH_TEST),
                    i && r.depthMask(!1),
                    r.colorMask(!1, !1, !1, !1);
                  var n = t.bindBuffer(r, this.dk, this.ek);
                  r.stencilFunc(r.ALWAYS, 0, 255),
                    r.stencilOpSeparate(
                      r.FRONT,
                      r.INCR_WRAP,
                      r.INCR_WRAP,
                      r.INCR_WRAP
                    ),
                    r.stencilOpSeparate(
                      r.BACK,
                      r.DECR_WRAP,
                      r.DECR_WRAP,
                      r.DECR_WRAP
                    ),
                    r.drawArrays(r.TRIANGLES, 0, n),
                    this.zk(),
                    r.stencilFunc(r.NOTEQUAL, 127, 255),
                    r.stencilOp(r.KEEP, r.ZERO, r.ZERO),
                    r.drawArrays(r.TRIANGLES, 0, 6);
                  var s = e.bindBuffer(r, this.dk, this.ek);
                  s > 0 &&
                    (r.stencilFunc(r.NOTEQUAL, 127, 255),
                    r.stencilOpSeparate(
                      r.FRONT,
                      r.KEEP,
                      r.INCR_WRAP,
                      r.INCR_WRAP
                    ),
                    r.stencilOpSeparate(
                      r.BACK,
                      r.KEEP,
                      r.DECR_WRAP,
                      r.DECR_WRAP
                    ),
                    r.drawArrays(r.TRIANGLES, 0, s)),
                    r.uniform1i(this.fk, 0),
                    r.enable(r.DEPTH_TEST),
                    i && r.depthMask(!0),
                    r.stencilFunc(r.EQUAL, 0, 255),
                    r.colorMask(!0, !0, !0, !0),
                    this.zk(),
                    r.drawArrays(r.TRIANGLES, 0, 6),
                    r.stencilMask(0),
                    r.disable(r.STENCIL_TEST);
                }
              }),
              (t.prototype.zk = function () {
                var t = this.bk.Mj;
                t.bindBuffer(t.ARRAY_BUFFER, this.sk),
                  t.vertexAttribPointer(this.dk, 3, t.FLOAT, !1, 24, 0),
                  t.vertexAttribPointer(this.ek, 3, t.FLOAT, !1, 24, 12);
              }),
              t
            );
          })();
        e.Bk = p;
      }
    ),
    i(
      "kitsune/core/SSAA",
      ["require", "exports", "utils/Check"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r =
            "\n    attribute vec2 a_position;\n\n    varying vec2 v_uv;\n\n    void main() {\n        gl_Position = vec4(a_position, 0.0, 1.0);\n        v_uv = (a_position+1.0)*0.5;\n    }\n",
          n =
            "\n    precision mediump float;\n\n    uniform sampler2D u_texture;\n\n    varying vec2 v_uv;\n    \n    void main() {\n        gl_FragColor = texture2D(u_texture, v_uv);\n    }\n",
          s = new Float32Array([-1, -1, 1, -1, 1, 1, 1, 1, -1, 1, -1, -1]),
          o = (function () {
            function t(t, e) {
              (this.Ck = i.J.P(e)),
                (this.width = t.width()),
                (this.height = t.height()),
                (this.bk = t),
                (this.ck = t.createProgram(r, n)),
                (this.Dk = t.Oj(this.ck, "a_position")),
                (this.Ek = t.Pj(this.ck, "u_texture"));
              var o = t.Mj,
                a = this.width * e,
                h = this.height * e;
              (this.Fk = t.Yj(
                a,
                h,
                o.LINEAR,
                o.LINEAR,
                o.CLAMP_TO_EDGE,
                o.CLAMP_TO_EDGE
              )),
                (this.Gk = t.$j(this.Fk, a, h, !0));
              var u = t.createBuffer();
              o.bindBuffer(o.ARRAY_BUFFER, u),
                o.bufferData(o.ARRAY_BUFFER, s, o.STATIC_DRAW),
                (this.Oi = u);
            }
            return (
              (t.prototype.enable = function () {
                var t = this.bk.Mj;
                this.bk.Wj(this.Gk),
                  t.viewport(0, 0, this.width * this.Ck, this.height * this.Ck);
              }),
              (t.prototype.Hk = function () {
                var t = this.bk.Mj;
                t.viewport(0, 0, this.width, this.height),
                  this.bk.Xj(),
                  t.disable(t.DEPTH_TEST),
                  t.useProgram(this.ck),
                  t.activeTexture(t.TEXTURE0),
                  t.bindTexture(t.TEXTURE_2D, this.Fk),
                  t.bindBuffer(t.ARRAY_BUFFER, this.Oi),
                  t.vertexAttribPointer(this.Dk, 2, t.FLOAT, !1, 0, 0),
                  t.enableVertexAttribArray(this.Dk),
                  t.uniform1i(this.Ek, 0),
                  t.drawArrays(t.TRIANGLES, 0, 6);
              }),
              t
            );
          })();
        e.Ik = o;
      }
    ),
    i(
      "kitsune/3d/Scene",
      [
        "require",
        "exports",
        "kitsune/3d/Group",
        "geometry/Matrix4",
        "kitsune/3d/Program",
        "kitsune/core/SSAA"
      ],
      function (t, e, i, r, n, s) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = 2,
          a = (function () {
            function t(t, e, r, a) {
              (this.group = new i.Kj()),
                (this.Jk = new Array()),
                (this.antialias = !1),
                (this.bk = t),
                (this.uk = e),
                (this.Kk = r),
                (this.Lk = a),
                (this.ck = new n.Bk(t)),
                (this.Mk = new s.Ik(t, o));
            }
            return (
              (t.prototype.reset = function () {
                this.bk.Nj(),
                  (this.Mk = new s.Ik(this.bk, o)),
                  this.uk.tj(this.bk.width() / this.bk.height());
              }),
              (t.prototype.tk = function () {
                var t = this.bk.Mj,
                  e = this.ck,
                  i = this.uk,
                  n = this.Lk,
                  s = this.Kk,
                  o = i.vj(),
                  a = n.direction();
                this.antialias && this.Mk.enable(),
                  t.useProgram(e.ck),
                  t.uniform3fv(e.ik, [o.x, o.y, o.z]),
                  t.uniform3fv(e.pk, [s.color.x, s.color.y, s.color.z]),
                  t.uniform3fv(e.qk, [n.color.x, n.color.y, n.color.z]),
                  t.uniform3fv(e.rk, [a.x, a.y, a.z]),
                  t.depthMask(!0),
                  t.clear(
                    t.COLOR_BUFFER_BIT |
                      t.DEPTH_BUFFER_BIT |
                      t.STENCIL_BUFFER_BIT
                  ),
                  t.enable(t.DEPTH_TEST),
                  t.disable(t.BLEND),
                  this.group.Hj(this, new r.wa()),
                  t.enable(t.BLEND),
                  t.depthMask(!1),
                  t.blendEquation(t.FUNC_ADD),
                  t.blendFunc(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA);
                for (var h = 0, u = this.Jk; h < u.length; h++) {
                  var c = u[h];
                  c.Ok.Nk(this, c.Pk, !0);
                }
                (this.Jk.length = 0), this.antialias && this.Mk.Hk();
              }),
              t
            );
          })();
        e.Qk = a;
      }
    ),
    i(
      "kitsune/3d/Object3D",
      ["require", "exports", "geometry/Matrix4", "geometry/Vector3"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t() {
            (this.position = r.pa.oa),
              (this.scale = new r.pa(1, 1, 1)),
              (this.rotation = r.pa.oa),
              (this.Rk = new i.wa()),
              (this.Sk = !1),
              (this.matrix = new i.wa());
          }
          return (
            (t.prototype.vj = function () {
              return this.position;
            }),
            (t.prototype.setPosition = function (t) {
              return (this.position = t), (this.Sk = !0), this;
            }),
            (t.prototype.Aj = function () {
              return this.scale;
            }),
            (t.prototype.setScale = function (t) {
              return (this.scale = t), (this.Sk = !0), this;
            }),
            (t.prototype.Tk = function () {
              return this.rotation;
            }),
            (t.prototype.Uk = function (t) {
              return (this.rotation = t), (this.Sk = !0), this;
            }),
            (t.prototype.Vk = function () {
              return this.Rk;
            }),
            (t.prototype.Wk = function (t) {
              return (this.Rk = t), (this.Sk = !0), this;
            }),
            (t.prototype.Ij = function () {
              return (
                this.Sk &&
                  ((this.matrix = new i.wa()
                    .rotateX(this.rotation.x)
                    .rotateY(this.rotation.y)
                    .rotateZ(this.rotation.z)
                    .scale(this.scale.x, this.scale.y, this.scale.z)
                    .translate(this.position)
                    .na(this.Rk)),
                  (this.Sk = !1)),
                this.matrix
              );
            }),
            t
          );
        })();
        e.Xk = n;
      }
    ),
    i(
      "kitsune/3d/Drawable",
      ["require", "exports", "kitsune/3d/Object3D"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return e(i, t), i;
        })(r.Xk);
        i.Jj = n;
      }
    ),
    i(
      "kitsune/3d/Mesh",
      ["require", "exports", "kitsune/3d/Drawable", "kitsune/3d/BlendPass"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i) {
            var r = t.call(this) || this;
            return (r.Yk = e), (r.Zk = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Hj = function (t, e) {
              this.Nk(t, e, !1);
            }),
            (i.prototype.Nk = function (t, e, i) {
              this.Zk.opacity < 1 && !i
                ? t.Jk.push(new n.$k(e, this))
                : ((e = this.Ij().na(e)), t.ck.tk(t, e, this.Yk, this.Zk, i));
            }),
            (i.prototype.eb = function () {
              return this.Yk.eb();
            }),
            i
          );
        })(r.Jj);
        i._k = s;
      }
    ),
    i("kitsune/3d/BlendPass", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          if (e.Zk.opacity >= 1)
            throw new Error("only opacity < 1 is permitted at blend pass");
          (this.Pk = t), (this.Ok = e);
        }
        return t;
      })();
      e.$k = i;
    }),
    i(
      "kitsune/3d/Control",
      ["require", "exports", "geometry/Matrix4", "geometry/Vector3"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n;
        !(function (t) {
          (t[(t["LEFT"] = 0)] = "LEFT"),
            (t[(t["MID"] = 1)] = "MID"),
            (t[(t["RIGHT"] = 2)] = "RIGHT");
        })(n || (n = {}));
        var s = (function () {
          function t(t, e, i, r) {
            (this.al = !1),
              (this.bl = !1),
              (this.cl = !1),
              (this.dl = 0),
              (this.el = 0),
              (this.fl = 0),
              (this.gl = 0),
              (this.hl = 0),
              (this.il = 0),
              (this.jl = 0),
              (this.kl = 0),
              (this.ll = t),
              (this.ml = e),
              (this.uk = i),
              (this.nl = e.Vk()),
              (this.ol = i.yj()),
              (this.pl = i.Aj()),
              (this.ql = i.vj()),
              (this.rl = i.wj()),
              (this.sl = r);
          }
          return (
            (t.prototype.tl = function (t) {
              var e = this.uk,
                i = e.wj(),
                n = e.vj(),
                s = i.sub(n),
                o = t / s.length(),
                a = new r.pa(s.x * o, s.y * o, s.z * o);
              e.xj(i.add(a)), e.setPosition(n.add(a));
            }),
            (t.prototype.scale = function (t) {
              var e = this.uk,
                i = Math.max(1 + t, 0.001);
              e.setScale(Math.max(e.Aj() * i, 0.8));
            }),
            (t.prototype.ul = function (t) {
              (107 !== t.keyCode && 75 !== t.keyCode) || this.reset();
            }),
            (t.prototype.vl = function (t) {
              t.button === n.LEFT
                ? ((this.al = !0), (this.hl = t.clientX), (this.il = t.clientY))
                : t.button === n.MID
                ? ((this.bl = !0), (this.fl = t.clientX), (this.gl = t.clientY))
                : t.button === n.RIGHT &&
                  ((this.cl = !0),
                  (this.dl = t.clientX),
                  (this.el = t.clientY));
            }),
            (t.prototype.wl = function (t) {
              t.button === n.LEFT
                ? (this.al = !1)
                : t.button === n.MID
                ? (this.bl = !1)
                : t.button === n.RIGHT && (this.cl = !1);
            }),
            (t.prototype.xl = function (t) {
              var e = this.ll.offsetWidth,
                n = this.ll.offsetHeight,
                s = this.uk.Aj();
              if (this.al) {
                var o = t.clientX - this.hl,
                  a = t.clientY - this.il;
                if (0 !== o || 0 !== a) {
                  var h = (Math.PI * a) / n,
                    u = (Math.PI * o) / e;
                  (this.jl += h / s), (this.kl += u / s);
                  var c = this.nl
                    .na(i.wa.rotateY(this.kl))
                    .na(i.wa.rotateX(this.jl));
                  this.ml.Wk(c),
                    (this.hl = t.clientX),
                    (this.il = t.clientY),
                    this.sl();
                }
              }
              if (this.bl) {
                var a = t.clientY - this.gl,
                  p = (-a / n) * 20;
                this.tl(p / s),
                  (this.fl = t.clientX),
                  (this.gl = t.clientY),
                  this.sl();
              }
              if (this.cl) {
                var o = t.clientX - this.dl,
                  a = t.clientY - this.el,
                  f = new r.pa(o / 100 / s, -a / 100 / s, 0);
                this.uk.zj(this.uk.yj().add(f)),
                  (this.dl = t.clientX),
                  (this.el = t.clientY),
                  this.sl();
              }
            }),
            (t.prototype.yl = function (t) {
              t.deltaY < 0 ? this.scale(0.1) : this.scale(-0.1), this.sl();
            }),
            (t.prototype.reset = function () {
              (this.jl = 0),
                (this.kl = 0),
                this.ml.Wk(this.nl),
                this.uk.zj(this.ol),
                this.uk.setScale(this.pl),
                this.uk.setPosition(this.ql),
                this.uk.xj(this.rl),
                this.sl();
            }),
            (t.prototype.zl = function () {
              var t = this.ll;
              window.addEventListener("keydown", this.ul.bind(this), !1),
                t.addEventListener("mousedown", this.vl.bind(this), !1),
                t.addEventListener("mouseup", this.wl.bind(this), !1),
                t.addEventListener("mousemove", this.xl.bind(this), !1),
                t.addEventListener("wheel", this.yl.bind(this), !1),
                (t.oncontextmenu = function () {
                  return !1;
                });
            }),
            (t.prototype.Al = function () {}),
            t
          );
        })();
        e.Bl = s;
      }
    ),
    i(
      "kitsune/core/Control",
      ["require", "exports", "utils/Utils"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r;
        !(function (t) {
          (t[(t["LEFT"] = 0)] = "LEFT"),
            (t[(t["MID"] = 1)] = "MID"),
            (t[(t["RIGHT"] = 2)] = "RIGHT");
        })(r || (r = {}));
        var n = (function () {
          function t() {
            (this.Cl = 0),
              (this.Dl = 0),
              (this.deltaX = 0),
              (this.deltaY = 0),
              (this.keyCode = 0),
              (this.shiftKey = !1),
              (this.ctrlKey = !1),
              (this.altKey = !1);
          }
          return t;
        })();
        e.El = n;
        var s = (function () {
          function t() {}
          return (
            (t.prototype.Fl = function (t) {}),
            (t.prototype.ul = function (t) {
              return t;
            }),
            (t.prototype.Gl = function (t) {
              return t;
            }),
            (t.prototype.Hl = function (t) {
              return t;
            }),
            (t.prototype.Il = function (t) {
              return t;
            }),
            (t.prototype.Jl = function (t) {
              return t;
            }),
            (t.prototype.Kl = function (t) {
              return t;
            }),
            (t.prototype.Ll = function (t) {
              return t;
            }),
            (t.prototype.Ml = function (t) {
              return t;
            }),
            (t.prototype.xl = function (t) {
              return t;
            }),
            (t.prototype.yl = function (t) {
              return t;
            }),
            (t.prototype.Nl = function (t) {
              return t;
            }),
            (t.prototype.Ol = function (t) {
              return t;
            }),
            (t.prototype.Pl = function (t) {
              return t;
            }),
            t
          );
        })();
        e.Ql = s;
        var o = (function () {
          function t(t, e) {
            (this.Rl = new Array()),
              (this.Sl = {}),
              (this.canvas = t),
              (this.Tl = e);
          }
          return (
            (t.prototype.Ul = function (t) {
              this.Rl.push(t);
            }),
            (t.prototype.Vl = function (t) {
              for (var e = 0; e < this.Rl.length; e++)
                if (this.Rl[e] === t) {
                  this.Sl[e] = t;
                  break;
                }
            }),
            (t.prototype.Wl = function (t, e) {
              for (var r = 0; r < this.Rl.length; r++)
                if (!(r in this.Sl)) {
                  var n = this.Rl[r];
                  n.Fl(t);
                  var o = e(n);
                  if (null === o) break;
                  t = o;
                }
              for (var a in this.Sl) {
                var h = this.Sl[a];
                h instanceof s && i.F.remove(this.Rl, h);
              }
              this.Sl = {};
            }),
            (t.prototype.ul = function (t) {
              var e = this.Tl();
              (e.keyCode = t.keyCode),
                (e.shiftKey = t.shiftKey),
                (e.ctrlKey = t.ctrlKey),
                (e.altKey = t.altKey),
                this.Wl(e, function (t) {
                  return t.ul(e);
                });
            }),
            (t.prototype.Gl = function (t) {
              var e = this.Tl();
              (e.keyCode = t.keyCode),
                (e.shiftKey = t.shiftKey),
                (e.ctrlKey = t.ctrlKey),
                (e.altKey = t.altKey),
                this.Wl(e, function (t) {
                  return t.Gl(e);
                });
            }),
            (t.prototype.vl = function (t) {
              var e = this.Tl();
              (e.Cl = t.clientX),
                (e.Dl = t.clientY),
                t.button === r.LEFT
                  ? this.Wl(e, function (t) {
                      return t.Hl(e);
                    })
                  : t.button === r.MID
                  ? this.Wl(e, function (t) {
                      return t.Il(e);
                    })
                  : t.button === r.RIGHT &&
                    this.Wl(e, function (t) {
                      return t.Jl(e);
                    });
            }),
            (t.prototype.wl = function (t) {
              var e = this.Tl();
              (e.Cl = t.clientX),
                (e.Dl = t.clientY),
                t.button === r.LEFT
                  ? this.Wl(e, function (t) {
                      return t.Kl(e);
                    })
                  : t.button === r.MID
                  ? this.Wl(e, function (t) {
                      return t.Ll(e);
                    })
                  : t.button === r.RIGHT &&
                    this.Wl(e, function (t) {
                      return t.Ml(e);
                    });
            }),
            (t.prototype.xl = function (t) {
              var e = this.Tl();
              (e.Cl = t.clientX),
                (e.Dl = t.clientY),
                this.Wl(e, function (t) {
                  return t.xl(e);
                });
            }),
            (t.prototype.yl = function (t) {
              var e = this.Tl();
              (e.deltaX = t.deltaX),
                (e.deltaY = t.deltaY),
                (e.Cl = t.clientX),
                (e.Dl = t.clientY),
                this.Wl(e, function (t) {
                  return t.yl(e);
                });
            }),
            (t.prototype.Nl = function (t) {
              var e = this.Tl();
              (e.Cl = t.clientX),
                (e.Dl = t.clientY),
                this.Wl(e, function (t) {
                  return t.Nl(e);
                });
            }),
            (t.prototype.Ol = function () {
              var t = this.Tl();
              this.Wl(t, function (e) {
                return e.Ol(t);
              });
            }),
            (t.prototype.Pl = function (t) {
              if (t instanceof CustomEvent) {
                var e = this.Tl();
                (e.detail = t.detail),
                  this.Wl(e, function (t) {
                    return t.Pl(e);
                  });
              }
            }),
            (t.prototype.zl = function () {
              window.addEventListener("keydown", this.ul.bind(this), !1),
                window.addEventListener("keyup", this.Gl.bind(this), !1),
                this.canvas.addEventListener(
                  "mousedown",
                  this.vl.bind(this),
                  !1
                ),
                this.canvas.addEventListener("mouseup", this.wl.bind(this), !1),
                this.canvas.addEventListener(
                  "mousemove",
                  this.xl.bind(this),
                  !1
                ),
                this.canvas.addEventListener("wheel", this.yl.bind(this), !1),
                this.canvas.addEventListener(
                  "dblclick",
                  this.Nl.bind(this),
                  !1
                ),
                this.canvas.addEventListener("custom", this.Pl.bind(this), !1),
                window.addEventListener("resize", this.Ol.bind(this), !1),
                (this.canvas.oncontextmenu = function () {
                  return !1;
                });
            }),
            (t.prototype.Al = function () {}),
            t
          );
        })();
        e.Bl = o;
      }
    ),
    i(
      "kitsune/core/FXAA",
      ["require", "exports", "utils/Check"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r =
            "\n    void texcoords(vec2 fragCoord, vec2 resolution,\n        out vec2 v_rgbNW, out vec2 v_rgbNE,\n        out vec2 v_rgbSW, out vec2 v_rgbSE,\n        out vec2 v_rgbM) {\n        vec2 inverseVP = 1.0 / resolution.xy;\n        v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n        v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n        v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n        v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n        v_rgbM = vec2(fragCoord * inverseVP);\n    }\n\n    uniform mediump vec2 u_resolution;\n\n    attribute vec2 a_position;\n\n    varying vec2 v_uv;\n    varying vec2 v_rgbNW;\n    varying vec2 v_rgbNE;\n    varying vec2 v_rgbSW;\n    varying vec2 v_rgbSE;\n    varying vec2 v_rgbM;\n\n    void main() {\n        gl_Position = vec4(a_position, 0.0, 1.0);\n        v_uv = (a_position+1.0)*0.5;\n\n        vec2 fragCoord = v_uv * u_resolution;\n        texcoords(fragCoord, u_resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n    }\n",
          n =
            '\n    precision mediump float;\n\n    /**\n        Basic FXAA implementation based on the code on geeks3d.com with the\n        modification that the texture2DLod stuff was removed since it\'s\n        unsupported by WebGL.\n        --\n        From:\n        https://github.com/mitsuhiko/webgl-meincraft\n        Copyright (c) 2011 by Armin Ronacher.\n        Some rights reserved.\n        Redistribution and use in source and binary forms, with or without\n        modification, are permitted provided that the following conditions are\n        met:\n            * Redistributions of source code must retain the above copyright\n            notice, this list of conditions and the following disclaimer.\n            * Redistributions in binary form must reproduce the above\n            copyright notice, this list of conditions and the following\n            disclaimer in the documentation and/or other materials provided\n            with the distribution.\n            * The names of the contributors may not be used to endorse or\n            promote products derived from this software without specific\n            prior written permission.\n        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n        "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n        LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n        A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n        OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n        SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n        LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n        DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n        THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n        (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n        OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n    */\n\n    #ifndef FXAA_REDUCE_MIN\n        #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n    #endif\n    #ifndef FXAA_REDUCE_MUL\n        #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n    #endif\n    #ifndef FXAA_SPAN_MAX\n        #define FXAA_SPAN_MAX     8.0\n    #endif\n\n    //optimized version for mobile, where dependent \n    //texture reads can be a bottleneck\n    vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n                vec2 v_rgbNW, vec2 v_rgbNE, \n                vec2 v_rgbSW, vec2 v_rgbSE, \n                vec2 v_rgbM) {\n        vec4 color;\n        mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n        vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n        vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n        vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n        vec4 texColor = texture2D(tex, v_rgbM);\n        vec3 rgbM  = texColor.xyz;\n        vec3 luma = vec3(0.299, 0.587, 0.114);\n        float lumaNW = dot(rgbNW, luma);\n        float lumaNE = dot(rgbNE, luma);\n        float lumaSW = dot(rgbSW, luma);\n        float lumaSE = dot(rgbSE, luma);\n        float lumaM  = dot(rgbM,  luma);\n        float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n        float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n        \n        mediump vec2 dir;\n        dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n        dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n        \n        float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                            (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n        \n        float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n        dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n                max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * inverseVP;\n        \n        vec3 rgbA = 0.5 * (\n            texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n            texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n        vec3 rgbB = rgbA * 0.5 + 0.25 * (\n            texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n            texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n        float lumaB = dot(rgbB, luma);\n        if ((lumaB < lumaMin) || (lumaB > lumaMax))\n            color = vec4(rgbA, texColor.a);\n        else\n            color = vec4(rgbB, texColor.a);\n        return color;\n    }\n\n    uniform vec2 u_resolution;\n    uniform sampler2D u_texture;\n\n    varying vec2 v_uv;\n    varying vec2 v_rgbNW;\n    varying vec2 v_rgbNE;\n    varying vec2 v_rgbSW;\n    varying vec2 v_rgbSE;\n    varying vec2 v_rgbM;\n    \n    void main(){\n        vec2 fragCoord = v_uv * u_resolution; \n        gl_FragColor = fxaa(u_texture, fragCoord, u_resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n    }\n',
          s = new Float32Array([-1, -1, 1, -1, 1, 1, 1, 1, -1, 1, -1, -1]),
          o = (function () {
            function t(t) {
              (this.bk = t),
                (this.ck = t.createProgram(r, n)),
                (this.Dk = t.Oj(this.ck, "a_position")),
                (this.Xl = t.Pj(this.ck, "u_resolution")),
                (this.Ek = t.Pj(this.ck, "u_texture"));
              var e = t.Mj,
                o = t.width(),
                a = t.height(),
                h = i.J.R(e.createTexture());
              e.bindTexture(e.TEXTURE_2D, h),
                e.texImage2D(
                  e.TEXTURE_2D,
                  0,
                  e.RGBA,
                  o,
                  a,
                  0,
                  e.RGBA,
                  e.UNSIGNED_BYTE,
                  null
                ),
                e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR),
                e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR),
                e.texParameteri(
                  e.TEXTURE_2D,
                  e.TEXTURE_WRAP_S,
                  e.CLAMP_TO_EDGE
                ),
                e.texParameteri(
                  e.TEXTURE_2D,
                  e.TEXTURE_WRAP_T,
                  e.CLAMP_TO_EDGE
                ),
                (this.Fk = h),
                (this.Gk = i.J.R(e.createFramebuffer())),
                t.Wj(this.Gk),
                e.framebufferTexture2D(
                  e.FRAMEBUFFER,
                  e.COLOR_ATTACHMENT0,
                  e.TEXTURE_2D,
                  h,
                  0
                );
              var u = i.J.R(e.createRenderbuffer());
              e.bindRenderbuffer(e.RENDERBUFFER, u),
                e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, o, a),
                e.framebufferRenderbuffer(
                  e.FRAMEBUFFER,
                  e.DEPTH_STENCIL_ATTACHMENT,
                  e.RENDERBUFFER,
                  u
                );
              var c = t.createBuffer();
              e.bindBuffer(e.ARRAY_BUFFER, c),
                e.bufferData(e.ARRAY_BUFFER, s, e.STATIC_DRAW),
                (this.Oi = c),
                t.Xj();
            }
            return (
              (t.prototype.enable = function () {
                this.bk.Wj(this.Gk);
              }),
              (t.prototype.Hk = function () {
                var t = this.bk.Mj;
                this.bk.Xj(),
                  t.disable(t.DEPTH_TEST),
                  t.useProgram(this.ck),
                  t.activeTexture(t.TEXTURE0),
                  t.bindTexture(t.TEXTURE_2D, this.Fk),
                  t.bindBuffer(t.ARRAY_BUFFER, this.Oi),
                  t.vertexAttribPointer(this.Dk, 2, t.FLOAT, !1, 0, 0),
                  t.enableVertexAttribArray(this.Dk),
                  t.uniform1i(this.Ek, 0),
                  t.uniform2fv(this.Xl, [
                    2 * this.bk.width(),
                    2 * this.bk.height()
                  ]),
                  t.drawArrays(t.TRIANGLES, 0, 6);
              }),
              t
            );
          })();
        e.Yl = o;
      }
    ),
    i("kitsune/core/Offscreen", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e, i, r) {
          void 0 === r && (r = !0);
          var n = t.Mj;
          (this.Fk = t.Yj(
            e,
            i,
            n.NEAREST,
            n.NEAREST,
            n.CLAMP_TO_EDGE,
            n.CLAMP_TO_EDGE
          )),
            (this.Gk = t.$j(this.Fk, e, i, r));
        }
        return t;
      })();
      e.Zl = i;
    }),
    i(
      "page/3dviewer/Materials",
      ["require", "exports", "kitsune/3d/PhongMaterial"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.$l = i.bj(
            0.0215,
            0.1745,
            0.0215,
            0.07568,
            0.61424,
            0.07568,
            0.633,
            0.727811,
            0.633,
            0.6
          )),
          (e._l = i.bj(
            0.135,
            0.2225,
            0.1575,
            0.54,
            0.89,
            0.63,
            0.316228,
            0.316228,
            0.316228,
            0.1
          )),
          (e.am = i.bj(
            0.05375,
            0.05,
            0.06625,
            0.18275,
            0.17,
            0.22525,
            0.332741,
            0.328634,
            0.346435,
            0.3
          )),
          (e.bm = i.bj(
            0.25,
            0.20725,
            0.20725,
            1,
            0.829,
            0.829,
            0.296648,
            0.296648,
            0.296648,
            0.088
          )),
          (e.cm = i.bj(
            0.1745,
            0.01175,
            0.01175,
            0.61424,
            0.04136,
            0.04136,
            0.727811,
            0.626959,
            0.626959,
            0.6
          )),
          (e.dm = i.bj(
            0.1,
            0.18725,
            0.1745,
            0.396,
            0.74151,
            0.69102,
            0.297254,
            0.30829,
            0.306678,
            0.1
          )),
          (e.em = i.bj(
            0.329412,
            0.223529,
            0.027451,
            0.780392,
            0.568627,
            0.113725,
            0.992157,
            0.941176,
            0.807843,
            0.21794872
          )),
          (e.fm = i.bj(
            0.2125,
            0.1275,
            0.054,
            0.714,
            0.4284,
            0.18144,
            0.393548,
            0.271906,
            0.166721,
            0.2
          )),
          (e.chrome = i.bj(
            0.25,
            0.25,
            0.25,
            0.4,
            0.4,
            0.4,
            0.774597,
            0.774597,
            0.774597,
            0.6
          )),
          (e.gm = i.bj(
            0.19125,
            0.0735,
            0.0225,
            0.7038,
            0.27048,
            0.0828,
            0.256777,
            0.137622,
            0.086014,
            0.1
          )),
          (e.hm = i.bj(
            0.24725,
            0.1995,
            0.0745,
            0.75164,
            0.60648,
            0.22648,
            0.628281,
            0.555802,
            0.366065,
            0.4
          )),
          (e.im = i.bj(
            0.19225,
            0.19225,
            0.19225,
            0.50754,
            0.50754,
            0.50754,
            0.508273,
            0.508273,
            0.508273,
            0.4
          )),
          (e.jm = i.bj(0, 0, 0, 0.01, 0.01, 0.01, 0.5, 0.5, 0.5, 0.25)),
          (e.km = i.bj(
            0,
            0.1,
            0.06,
            0,
            0.50980392,
            0.50980392,
            0.50196078,
            0.50196078,
            0.50196078,
            0.25
          )),
          (e.lm = i.bj(0, 0, 0, 0.1, 0.35, 0.1, 0.45, 0.55, 0.45, 0.25)),
          (e.mm = i.bj(0, 0, 0, 0.5, 0, 0, 0.7, 0.6, 0.6, 0.25)),
          (e.nm = i.bj(0, 0, 0, 0.55, 0.55, 0.55, 0.7, 0.7, 0.7, 0.25)),
          (e.om = i.bj(0, 0, 0, 0.5, 0.5, 0, 0.6, 0.6, 0.5, 0.25)),
          (e.pm = i.bj(
            0.02,
            0.02,
            0.02,
            0.01,
            0.01,
            0.01,
            0.4,
            0.4,
            0.4,
            0.078125
          )),
          (e.qm = i.bj(0, 0.05, 0.05, 0.4, 0.5, 0.5, 0.04, 0.7, 0.7, 0.078125)),
          (e.rm = i.bj(0, 0.05, 0, 0.4, 0.5, 0.4, 0.04, 0.7, 0.04, 0.078125)),
          (e.sm = i.bj(0.05, 0, 0, 0.5, 0.4, 0.4, 0.7, 0.04, 0.04, 0.078125)),
          (e.tm = i.bj(
            0.05,
            0.05,
            0.05,
            0.5,
            0.5,
            0.5,
            0.7,
            0.7,
            0.7,
            0.078125
          )),
          (e.um = i.bj(0.05, 0.05, 0, 0.5, 0.5, 0.4, 0.7, 0.7, 0.04, 0.078125));
      }
    ),
    i(
      "page/3dviewer/Obj",
      [
        "require",
        "exports",
        "kitsune/3d/Group",
        "kitsune/3d/Geometry",
        "geometry/Vector3",
        "kitsune/3d/Mesh",
        "kitsune/3d/PhongMaterial"
      ],
      function (t, e, i, r, n, s, o) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var a = (function () {
            function t() {
              (this.Ca = new Array()),
                (this.vm = new Array()),
                (this.wm = new Array()),
                (this.xm = {}),
                (this.ym = 0);
            }
            return t;
          })(),
          h = (function () {
            function t(t) {
              (this.cj = null),
                (this.dj = null),
                (this.ej = null),
                (this.d = 0),
                (this.name = t);
            }
            return t;
          })(),
          u = new h("default");
        (u.cj = [0, 0, 0]), (u.dj = [0, 0, 0]), (u.ej = [0, 0, 0]), (u.d = 1);
        var c = (function () {
          function t(t) {
            (this.group = new i.Kj()),
              (this.zm = new Array()),
              (this.Am = new Array()),
              (this.Bm = {}),
              (this.Cm = new a()),
              (this.Zk = null),
              (this.Dm = null);
            for (var e = 0; ; ) {
              var r = t.indexOf("\n", e);
              if (!(r > -1)) break;
              var n = t.substring(e, r).replace(/^[\s\r\n]+|[\s\r\n]+$/, "");
              e = r + 1;
              var s = n.split(/\s+/);
              switch (s.shift()) {
                case "v":
                  this.Em(s);
                  break;
                case "vn":
                  this.Fm(s);
                  break;
                case "f":
                  this.Gm(s);
                  break;
                case "newmtl":
                  this.Hm(s);
                  break;
                case "Ka":
                  this.Im(s);
                  break;
                case "Kd":
                  this.Jm(s);
                  break;
                case "Ks":
                  this.Km(s);
                  break;
                case "d":
                  this.Lm(s);
                  break;
                case "endmtl":
                  this.Mm(s);
                  break;
                case "usemtl":
                  this.Nm(s);
              }
            }
            this.Cm.Ca.length > 0 &&
              (this.add(this.Dm || u, this.Cm), (this.Cm = new a()));
          }
          return (
            (t.prototype.Em = function (t) {
              for (var e = 0, i = t; e < i.length; e++) {
                var r = i[e];
                this.zm.push(parseFloat(r));
              }
            }),
            (t.prototype.Fm = function (t) {
              for (var e = 0, i = t; e < i.length; e++) {
                var r = i[e];
                this.Am.push(parseFloat(r));
              }
            }),
            (t.prototype.Gm = function (t) {
              for (var e = 0, i = 0, r = 0, n = 0, s = t; n < s.length; n++) {
                var o = s[n],
                  a = /(\d*)\/(\d*)\/(\d*)/.exec(o);
                if (null !== a) {
                  var h = 3 * (parseInt(a[1]) - 1),
                    u = 3 * (parseInt(a[3]) - 1),
                    c = this.zm[h],
                    p = this.zm[h + 1],
                    f = this.zm[h + 2],
                    l = this.Am[u],
                    v = this.Am[u + 1],
                    b = this.Am[u + 2];
                  (void 0 !== l && void 0 !== v && void 0 !== b) ||
                    (this.Cm.ym += 1);
                  var y = [h, l, v, b].join("|"),
                    d = this.Cm.xm[y];
                  "number" != typeof d &&
                    ((d = this.Cm.vm.length / 3),
                    (this.Cm.xm[y] = d),
                    this.Cm.vm.push(c, p, f),
                    this.Cm.wm.push(l, v, b)),
                    e >= 3 && (this.Cm.Ca.push(i), this.Cm.Ca.push(r)),
                    this.Cm.Ca.push(d),
                    0 === e && (i = d),
                    (r = d),
                    e++;
                }
              }
            }),
            (t.prototype.Hm = function (t) {
              this.Zk = new h(t.join(" "));
            }),
            (t.prototype.Im = function (t) {
              this.Zk &&
                (this.Zk.cj = [
                  parseFloat(t[0]),
                  parseFloat(t[1]),
                  parseFloat(t[2])
                ]);
            }),
            (t.prototype.Jm = function (t) {
              this.Zk &&
                (this.Zk.dj = [
                  parseFloat(t[0]),
                  parseFloat(t[1]),
                  parseFloat(t[2])
                ]);
            }),
            (t.prototype.Km = function (t) {
              this.Zk &&
                (this.Zk.ej = [
                  parseFloat(t[0]),
                  parseFloat(t[1]),
                  parseFloat(t[2])
                ]);
            }),
            (t.prototype.Lm = function (t) {
              this.Zk && (this.Zk.d = parseFloat(t[0]));
            }),
            (t.prototype.Mm = function (t) {
              this.Zk && ((this.Bm[this.Zk.name] = this.Zk), (this.Zk = null));
            }),
            (t.prototype.Nm = function (t) {
              this.Cm.Ca.length > 0 &&
                (this.add(this.Dm || u, this.Cm), (this.Cm = new a())),
                (this.Dm = this.Bm[t.join(" ")]);
            }),
            (t.prototype.add = function (t, e) {
              var i = t.cj,
                a = t.dj,
                h = t.ej;
              if (null !== i && null !== a && null !== h) {
                var u = void 0;
                if (e.ym > 0) {
                  for (
                    var c = new Array(), p = 0, f = e.Ca;
                    p < f.length;
                    p++
                  ) {
                    var l = f[p];
                    (l *= 3),
                      c.push(new n.pa(e.vm[l], e.vm[l + 1], e.vm[l + 2]));
                  }
                  u = new r.Ti(c);
                } else {
                  for (
                    var c = new Array(), v = new Array(), b = 0, y = e.Ca;
                    b < y.length;
                    b++
                  ) {
                    var l = y[b];
                    (l *= 3),
                      c.push(new n.pa(e.vm[l], e.vm[l + 1], e.vm[l + 2])),
                      v.push(new n.pa(e.wm[l], e.wm[l + 1], e.wm[l + 2]));
                  }
                  u = new r.Ti(c, v);
                }
                (i = a), 0 == h[0] && 0 == h[1] && 0 == h[2] && (h = a);
                var d = o.bj(
                    i[0],
                    i[1],
                    i[2],
                    a[0],
                    a[1],
                    a[2],
                    h[0],
                    h[1],
                    h[2],
                    1,
                    1
                  ),
                  g = new s._k(u, d);
                this.group.add(g);
              }
            }),
            t
          );
        })();
        e.Om = c;
      }
    ),
    i("page/3dviewer/Tasks", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          (this.type = t), (this.value = e);
        }
        return t;
      })();
      e.Pm = i;
      var r = (function () {
        function t(t, e) {
          (this.ni = t), (this.scale = e);
        }
        return t;
      })();
      e.Qm = r;
      var n = (function () {
        function t(t, e) {
          (this.og = t), (this.visible = e);
        }
        return t;
      })();
      e.Rm = n;
      var s = (function () {
        function t(t, e, i, r, n, s, o, a, h, u, c) {
          (this.id = t),
            (this.width = e),
            (this.height = i),
            (this.originX = r),
            (this.originY = n),
            (this.rx = s),
            (this.ry = o),
            (this.rz = a),
            (this.x = h),
            (this.y = u),
            (this.z = c);
        }
        return t;
      })();
      e.Sm = s;
      var o = (function () {
        function t() {}
        return t;
      })();
      e.Tm = o;
    }),
    i(
      "pcb/easyeda/OutlineDetection",
      [
        "require",
        "exports",
        "geometry/PolylineGroup",
        "geometry/polybool/MultiLevelRule",
        "geometry/utils/StaticRTree",
        "utils/Check",
        "geometry/Arc",
        "geometry/Line",
        "geometry/utils/Distance",
        "geometry/Polyline",
        "geometry/polybool/DefaultSweepEvent",
        "geometry/polybool/Simplify",
        "utils/Utils",
        "geometry/polybool/PolyIntersection",
        "utils/HashSet"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p, f, l, v, b) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var y = function (t, e) {
            return e.eb().Pc() - t.eb().Pc();
          },
          d = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.lh = function (t) {
                return !t[0] && t[1];
              }),
              i
            );
          })(n.mh))(2),
          g = (function () {
            function t(t, e, i, r, n) {
              (this.wh = new s.yb(20)),
                (this.cache = new Array(30)),
                (this.eb = t),
                (this.Um = o.J.P(e)),
                (this.Vm = o.J.P(i)),
                (this.Nf = r);
              for (var a = 0, h = n; a < h.length; a++) {
                var u = h[a];
                this.wh.add(u);
              }
            }
            return (
              (t.prototype.connect = function () {
                for (
                  var t = new Array(), e = new Array(), i = 0, r = this.wh.nb();
                  i < r.length;
                  i++
                ) {
                  var n = r[i];
                  if (
                    (t.push(n),
                    n instanceof a.ad && n.end().Gb(n.start()) <= this.Um)
                  )
                    t.push(new h.bd(n.start(), n.end()));
                  else {
                    for (
                      var s = 0, o = 0, c = 0, p = this.wh.search(n.eb());
                      c < p.length;
                      c++
                    ) {
                      var f = p[c];
                      if (
                        (n != f &&
                          ((n.start().u(f.start()) || n.start().u(f.end())) &&
                            s++,
                          (n.end().u(f.start()) || n.end().u(f.end())) && o++),
                        s > 0 && o > 0)
                      )
                        break;
                    }
                    (0 != s && 0 != o) || e.push(n);
                  }
                }
                for (var l = new b.Lf(), v = 0, y = e; v < y.length; v++)
                  for (
                    var n = y[v], d = 0, g = this.wh.search(n.eb().Hc(this.Um));
                    d < g.length;
                    d++
                  ) {
                    var f = g[d];
                    if (n != f) {
                      var w = new u.ce(n, f),
                        m = w.Nd();
                      if (this.Vm / 10 < m && m <= this.Um) {
                        var E = w.Od();
                        l.contains(E) || (t.push(E), l.add(E));
                      }
                    }
                  }
                return t;
              }),
              (t.prototype.Wm = function () {
                return new r.Hd([
                  c.Zc.Yc([
                    this.eb.hb,
                    this.eb.fb,
                    this.eb.hb,
                    this.eb.gb,
                    this.eb.ib,
                    this.eb.gb,
                    this.eb.ib,
                    this.eb.fb
                  ])
                ]);
              }),
              (t.prototype.Xm = function () {
                if (0 == this.wh.size()) return this.Wm();
                var t = this.connect();
                if (0 == t.length) return this.Wm();
                for (
                  var e = new p.gh(!1),
                    i = new f.Zh(d.Of, this.Nf, e),
                    n = 0,
                    s = t;
                  n < s.length;
                  n++
                ) {
                  var o = s[n];
                  i.Rf(o.stroke(this.Vm, 1, 0).md(), d.weight(0));
                }
                var a = this.eb.Hc(Math.max(this.eb.width(), this.eb.height()));
                i.Rf(
                  c.Zc.Yc([
                    a.hb,
                    a.fb,
                    a.hb,
                    a.gb,
                    a.ib,
                    a.gb,
                    a.ib,
                    a.fb,
                    a.hb,
                    a.fb
                  ]),
                  d.weight(1)
                ),
                  i.Fh(),
                  e.debug && e.display();
                var h = e.fh;
                if (h.length < 2) return this.Wm();
                l.j(h, y, 0, h.length);
                for (var u = {}, b = new Array(), g = 1; g < h.length; g++)
                  if (!(g in u)) {
                    l.F.t(b, h[g].nb);
                    for (
                      var w = new r.Hd([h[g].nb[0]]), m = g + 1;
                      m < h.length;
                      m++
                    )
                      if (!(m in u)) {
                        var E = new r.Hd([h[m].nb[0]]);
                        w.eb().Gc(E.eb()) && v.Bh.Gc(w, E) && (u[m] = !0);
                      }
                  }
                return new r.Hd(b);
              }),
              t
            );
          })();
        i.Ym = g;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbVia",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "pcb/primitives/pcb/PcbLayer",
        "utils/Check",
        "geometry/Polyline",
        "geometry/Arc"
      ],
      function (t, i, r, n, s, o, a, h) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var u = (function (t) {
          function i(e, i, r, n, a, h, u, c) {
            var p = t.call(this, e, i, s.mg._f) || this;
            return (
              (p.Oc = r),
              (p.Zm = o.J.N(n)),
              (p.$m = a),
              (p._m = o.J.N(h)),
              (p.an = u),
              (p.mask = c),
              (p.jb = p.ed()),
              p
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.id,
                this.ng,
                this.Oc.Xb(t),
                t.fc * this.Zm,
                t.fc * this.$m,
                t.fc * this._m,
                t.fc * this.an,
                this.mask
              );
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              for (
                var t = 0, e = 0, i = [this.Zm, this.$m, this._m, this.an];
                e < i.length;
                e++
              ) {
                var r = i[e];
                t < r && (t = r);
              }
              return (
                (t /= 2),
                new n.mb(
                  this.Oc.x - t,
                  this.Oc.x + t,
                  this.Oc.y - t,
                  this.Oc.y + t
                )
              );
            }),
            (i.prototype.shape = function (t, e) {
              return this.bn(this, t, e);
            }),
            (i.prototype.bn = function (t, e, i) {
              if (0 !== e.type) {
                if (!isNaN(t.$m) && e.u(s.mg.dg)) {
                  var r = t.$m / 2;
                  return a.Zc.$c([h.ad._c(t.Oc, 0, -360, r + i, r + i)]);
                }
                if (!isNaN(t.an) && e.u(s.mg.eg)) {
                  var r = t.an / 2;
                  return a.Zc.$c([h.ad._c(t.Oc, 0, -360, r + i, r + i)]);
                }
                if (!isNaN(t._m) && 5 === e.type) {
                  var r = t._m / 2;
                  return a.Zc.$c([h.ad._c(t.Oc, 0, -360, r + i, r + i)]);
                }
              } else if (t.Zm > 0) {
                var r = t.Zm / 2;
                return a.Zc.$c([h.ad._c(t.Oc, 0, -360, r, r)]);
              }
              return null;
            }),
            i
          );
        })(r.pg);
        i.cn = u;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbPad",
      [
        "require",
        "exports",
        "geometry/Matrix3",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "geometry/Polyline",
        "utils/Check",
        "utils/StringKit",
        "geometry/Line",
        "geometry/Arc",
        "geometry/utils/Angle",
        "geometry/polybool/Simplify"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p, f) {
        function l(t) {
          switch (t) {
            case 0:
              return "ROUND";
            case 1:
              return "RECTANGLE";
            case 2:
              return "ROUND_RECTANGLE";
            case 3:
              return "OCTAGONAL";
            case 4:
              return "POLYGON";
          }
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        }),
          (i.dn = l);
        var v = (function () {
          function t(t, e, i, r, n) {
            if (
              ((this.outline = 4 === t ? a.J.R(n) : a.J.S(n)),
              (this.type = t),
              (this.en = e),
              (this.fn = i),
              !(0 <= r && r <= 100))
            )
              throw new Error("cornerRadius is only allowed 0-100");
            this.gn = r;
          }
          return (
            (t.prototype.transform = function (e) {
              var i = null !== this.outline ? this.outline.Xb(e) : null;
              return new t(
                this.type,
                e.fc * this.en,
                e.fc * this.fn,
                this.gn,
                i
              );
            }),
            (t.prototype.u = function (e) {
              return (
                null !== e &&
                e instanceof t &&
                e.type === this.type &&
                e.en === this.en &&
                e.fn === this.fn &&
                e.gn === this.gn
              );
            }),
            t
          );
        })();
        i.hn = v;
        var b = (function () {
          function t(t, e, i, r, n, s) {
            0 === t.type
              ? (a.J.R(r), a.J.R(n), a.J.R(s))
              : 4 === t.type
              ? (a.J.R(r), a.J.S(n), a.J.S(s))
              : 7 === t.type
              ? (a.J.S(r), a.J.S(n), a.J.R(s))
              : (a.J.S(r), a.J.R(n), a.J.S(s)),
              (this.offsetX = a.J.N(e)),
              (this.offsetY = a.J.N(i)),
              (this.top = r),
              (this.inner = n),
              (this.in = s),
              (this.og = t);
          }
          return (
            (t.prototype.transform = function (e) {
              var i = null !== this.top ? this.top.transform(e) : null,
                r = null !== this.inner ? this.inner.transform(e) : null,
                n = null !== this.in ? this.in.transform(e) : null;
              return new t(
                this.og,
                e.fc * this.offsetX,
                e.fc * this.offsetY,
                i,
                r,
                n
              );
            }),
            t
          );
        })();
        i.jn = b;
        var y = (function () {
          function t(t, e, i, r) {
            if (i < e)
              throw new Error(
                h.L.format(
                  "hole size %f must less or eq than hole length %f",
                  e,
                  i
                )
              );
            (this.type = t),
              (this.size = a.J.O(e)),
              (this.length = a.J.O(i)),
              (this.rotation = r);
          }
          return (
            (t.prototype.transform = function (e) {
              return new t(
                this.type,
                e.fc * this.size,
                e.fc * this.length,
                this.rotation
              );
            }),
            t
          );
        })();
        i.kn = y;
        var d = (function (t) {
          function i(e, i, r, n, s, o, h, u, c, p, f) {
            var l = t.call(this, e, i, r) || this;
            return (
              (l.location = n),
              (l.rotation = s),
              (l.Og = o),
              (l.ln = h),
              (l.mn = a.J.N(u)),
              (l.nn = a.J.N(c)),
              (l.Mg = p),
              (l.on = f),
              (l.jb = l.ed()),
              l
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.id,
                this.ng,
                this.og,
                this.location.Xb(t),
                p.Ub.ec(this.rotation, t),
                this.Og.transform(t),
                this.ln.transform(t),
                this.mn * t.fc,
                this.nn * t.fc,
                this.Mg,
                this.on
              );
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              for (
                var t = new s.xc(),
                  e = 0,
                  i = 0,
                  n = 0,
                  o = [this.Og.top, this.Og.inner, this.Og.in];
                n < o.length;
                n++
              ) {
                var a = o[n];
                null !== a &&
                  (e < a.en && (e = a.en),
                  i < a.fn && (i = a.fn),
                  null !== a.outline && t.pc(a.outline.eb()));
              }
              (e /= 2), (i /= 2);
              var h = this.location.Qb(-e, i),
                u = this.location.Qb(e, -i),
                c = r.va
                  .Vb(this.rotation)
                  .ta(this.location)
                  .translate(this.Og.offsetX, this.Og.offsetY);
              return (
                t.qc(h.Xb(c)).qc(u.Xb(c)),
                0 === this.og.type &&
                  ((e = this.ln.size / 2),
                  (i = this.ln.length / 2),
                  (h = this.location.Qb(-e, i)),
                  (u = this.location.Qb(e, -i)),
                  (c = r.va
                    .Vb(this.rotation + this.ln.rotation)
                    .ta(this.location)),
                  t.qc(h.Xb(c)).qc(u.Xb(c))),
                t.wc()
              );
            }),
            (i.prototype.shape = function (t, e) {
              var i = r.va
                .translate(this.Og.offsetX, this.Og.offsetY)
                .Xb(r.va.Vb(this.rotation).ta(this.location));
              if (0 !== t.type)
                return null !== this.Og.top && 4 === t.type
                  ? this.pn(this, this.Og.top, e, i)
                  : null !== this.Og.in && 7 === t.type
                  ? this.pn(this, this.Og.in, e, i)
                  : null !== this.Og.inner && 5 === t.type
                  ? this.pn(this, this.Og.inner, e, i)
                  : null;
              if (this.ln.size > 0 && this.ln.length > 0) {
                var n = this.ln.size / 2,
                  s = this.ln.length / 2,
                  a = void 0;
                switch (this.ln.type) {
                  case 2:
                    a = new u.bd(
                      this.location.Qb(-s + n, 0),
                      this.location.Qb(s - n, 0)
                    ).stroke(this.ln.size, 1, 0);
                    break;
                  case 1:
                    a = new u.bd(
                      this.location.Qb(-n, 0),
                      this.location.Qb(n, 0)
                    ).stroke(this.ln.size, 0, 0);
                    break;
                  default:
                    a = o.Zc.$c([c.ad._c(this.location, 0, -360, n, n)]);
                }
                return a.Xb(
                  r.va.Vb(this.rotation + this.ln.rotation).ta(this.location)
                );
              }
              return null;
            }),
            (i.prototype.pn = function (t, e, i, r) {
              var n = 2 * i;
              switch (e.type) {
                case 3:
                  var s = void 0,
                    a = void 0;
                  if (e.en >= e.fn) {
                    var h = e.en - e.fn;
                    (a = e.fn),
                      (s = new u.bd(t.location.Qb(-h, 0), t.location.Qb(h, 0)));
                  } else {
                    var h = e.fn - e.en;
                    (a = e.en),
                      (s = new u.bd(t.location.Qb(0, -h), t.location.Qb(0, h)));
                  }
                  return (a += n), a > 0 ? s.stroke(a + n, 1, 0).Xb(r) : null;
                case 1:
                  if (i > 0) return this.qn(t, e, i).Xb(r);
                  var p = e.en / 2 + i,
                    l = e.fn + n;
                  return p > 0 && l > 0
                    ? new u.bd(t.location.Qb(-p, 0), t.location.Qb(p, 0))
                        .stroke(l, 0, 0)
                        .Xb(r)
                    : null;
                case 2:
                  var p = e.en / 2 + i,
                    l = e.fn + n;
                  return p > 0 && l > 0
                    ? new u.bd(t.location.Qb(-p, 0), t.location.Qb(p, 0))
                        .stroke(l, 0, 0)
                        .Xb(r)
                    : null;
                case 4:
                  if (0 !== i && null !== e.outline) {
                    var v = e.outline.eb();
                    return v.width() + n > 0 && v.height() + n > 0
                      ? f.Hh(e.outline, i)
                      : null;
                  }
                  return e.outline;
                default:
                  if (e.en + n > 0 && e.fn + n > 0) {
                    if (e.en === e.fn)
                      return o.Zc.$c([
                        c.ad._c(t.location, 0, -360, e.en / 2 + i, e.fn / 2 + i)
                      ]).Xb(r);
                    if (e.en < e.fn) {
                      var p = e.en + n,
                        l = (e.fn - e.en) / 2;
                      return new u.bd(t.location.Qb(0, -l), t.location.Qb(0, l))
                        .stroke(p, 1, 0)
                        .Xb(r);
                    }
                    var p = (e.en - e.fn) / 2,
                      l = e.fn + n;
                    return new u.bd(t.location.Qb(-p, 0), t.location.Qb(p, 0))
                      .stroke(l, 1, 0)
                      .Xb(r);
                  }
                  return null;
              }
            }),
            (i.prototype.qn = function (t, e, i) {
              return o.Zc.$c([
                new u.bd(
                  t.location.Qb(-e.en / 2, e.fn / 2 + i),
                  t.location.Qb(e.en / 2, e.fn / 2 + i)
                ),
                c.ad._c(t.location.Qb(e.en / 2, e.fn / 2), 90, -90, i, i),
                new u.bd(
                  t.location.Qb(e.en / 2 + i, e.fn / 2),
                  t.location.Qb(e.en / 2 + i, -e.fn / 2)
                ),
                c.ad._c(t.location.Qb(e.en / 2, -e.fn / 2), 0, -90, i, i),
                new u.bd(
                  t.location.Qb(e.en / 2, -e.fn / 2 - i),
                  t.location.Qb(-e.en / 2, -e.fn / 2 - i)
                ),
                c.ad._c(t.location.Qb(-e.en / 2, -e.fn / 2), -90, -90, i, i),
                new u.bd(
                  t.location.Qb(-e.en / 2 - i, -e.fn / 2),
                  t.location.Qb(-e.en / 2 - i, e.fn / 2)
                ),
                c.ad._c(t.location.Qb(-e.en / 2, e.fn / 2), -180, -90, i, i)
              ]);
            }),
            i
          );
        })(n.pg);
        i.rn = d;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbPolygonPour",
      [
        "require",
        "exports",
        "utils/Check",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "pcb/primitives/pcb/PcbLayer",
        "geometry/Line",
        "geometry/Arc",
        "geometry/Polyline"
      ],
      function (t, i, r, n, s, o, a, h, u) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var c = (function () {
          function t() {}
          return t;
        })();
        i.sn = c;
        var p = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.tn = r.J.O(e)), i;
          }
          return (
            e(i, t),
            (i.prototype.transform = function (t) {
              return new i(this.tn * t.fc);
            }),
            i
          );
        })(c);
        i.un = p;
        var f = (function (t) {
          function i(e, i) {
            var n = t.call(this) || this;
            return (n.vn = r.J.P(e)), (n.wn = r.J.P(i)), n;
          }
          return (
            e(i, t),
            (i.prototype.transform = function (t) {
              var e = t.fc;
              return new i(this.vn * e, this.wn * e);
            }),
            i
          );
        })(c);
        i.xn = f;
        var l = (function (t) {
          function i(e, i, n, s, o, u, c, p, f, l, v) {
            for (
              var b = t.call(this, e, i, n) || this, y = 0, d = l;
              y < d.length;
              y++
            ) {
              var g = d[y];
              if (!(g instanceof a.bd || g instanceof h.ad))
                throw new Error("invalid outlines, must be Line or Arc");
            }
            return (
              (b.method = s),
              (b.yn = r.J.N(o)),
              (b.Cg = r.J.P(u)),
              (b.zn = c),
              (b.An = p),
              (b.Bn = f),
              (b.qg = l),
              (b.Cn = v),
              (b.jb = b.ed()),
              b
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              for (
                var e = new Array(this.qg.length), r = 0;
                r < this.qg.length;
                r++
              )
                e[r] = this.qg[r].Xb(t);
              var n;
              if (null !== this.Cn) {
                n = new Array(this.Cn.length);
                for (var r = 0; r < this.Cn.length; r++)
                  n[r] = this.Cn[r].Xb(t);
              } else n = null;
              var s;
              return (
                (s = null == this.method ? null : this.method.transform(t)),
                new i(
                  this.id,
                  this.ng,
                  this.og,
                  s,
                  this.yn * t.fc,
                  this.Cg * t.fc,
                  this.zn,
                  this.An,
                  this.Bn,
                  e,
                  n
                )
              );
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              for (var t = new s.xc(), e = 0, i = this.qg; e < i.length; e++) {
                var r = i[e];
                t.pc(r.eb());
              }
              return t.wc();
            }),
            (i.prototype.shape = function (t, e) {
              return this.og.u(t) || this.og.u(o.mg._f)
                ? u.Zc.$c(this.qg)
                : null;
            }),
            i
          );
        })(n.pg);
        i.Dn = l;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbFill",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "pcb/primitives/pcb/PcbLayer",
        "utils/Check",
        "geometry/Matrix3",
        "geometry/utils/Angle",
        "geometry/Polyline"
      ],
      function (t, i, r, n, s, o, a, h, u) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var c = (function (t) {
          function i(e, i, r, n, s, a) {
            var h = t.call(this, "", e, i) || this;
            return (
              (h.En = r),
              (h.Fn = n),
              (h.rotation = o.J.N(s)),
              (h.sg = a),
              (h.jb = h.ed()),
              h
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              var e = new n.xc().qc(this.En).qc(this.Fn).wc(),
                r = e.Oc().Xb(t),
                s = (t.fc * e.width()) / 2,
                o = (t.gc * e.height()) / 2,
                a = r.Qb(-s, -o),
                u = r.Qb(s, o);
              return new i(
                this.ng,
                this.og,
                a,
                u,
                h.Ub.ec(this.rotation, t),
                this.sg
              );
            }),
            (i.prototype.eb = function () {
              return this.jb;
            }),
            (i.prototype.ed = function () {
              var t = a.va.Vb(this.rotation).ta(this.En);
              return new n.xc().qc(this.En).qc(this.Fn.Xb(t)).wc();
            }),
            (i.prototype.shape = function (t, e) {
              var i = this.jb.Hc(e);
              return this.og.u(t)
                ? u.Zc.ld([i.Mc(), i.Kc(), i.Lc(), i.Nc(), i.Mc()])
                : this.og.u(s.mg._f)
                ? u.Zc.ld([i.Mc(), i.Kc(), i.Lc(), i.Nc(), i.Mc()])
                : null;
            }),
            i
          );
        })(r.pg);
        i.Gn = c;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbModel",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "geometry/BBox2",
        "utils/Check",
        "geometry/Matrix3",
        "geometry/utils/Angle",
        "geometry/Vector3",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h, u) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var c = (function (t) {
          function i(e, i, r, n, o, a, h, u) {
            var c = t.call(this, "", "", s.J.R(e)) || this;
            return (
              (c.origin = i),
              (c.orientation = r),
              (c.position = s.J.R(n)),
              (c.rotation = s.J.R(o)),
              (c.width = s.J.P(a)),
              (c.height = s.J.P(h)),
              (c.uri = s.J.T(u)),
              (c.ed = c.jb()),
              c
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              var e = t.fc,
                r = this.position,
                n = new h.pa(r.x * e, r.y * e, r.z * e),
                s = this.origin.Xb(t),
                o = a.Ub.ec(this.orientation, t);
              return new i(
                this.og,
                s,
                o,
                n,
                this.rotation,
                this.width * e,
                this.height * e,
                this.uri
              );
            }),
            (i.prototype.eb = function () {
              return this.ed;
            }),
            (i.prototype.shape = function (t, e) {
              throw new Error("unspported");
            }),
            (i.prototype.jb = function () {
              var t = this.width / 2,
                e = this.height / 2,
                i = o.va.Vb(this.rotation.z);
              return (
                (i = i.translate(this.position.x, this.position.y)),
                (i = i.Vb(this.orientation)),
                (i = i.translate(this.origin.x, this.origin.y)),
                new n.xc()
                  .qc(new u.Zb(-t, -e).Xb(i))
                  .qc(new u.Zb(t, e).Xb(i))
                  .wc()
              );
            }),
            i
          );
        })(r.pg);
        i.Hn = c;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbPlaneZone",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbShape",
        "pcb/primitives/pcb/PcbLayer"
      ],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, r, n) {
            var s = t.call(this, "", e, i.In(r)) || this;
            return (s.outline = n), s;
          }
          return (
            e(i, t),
            (i.In = function (t) {
              if (6 === t.type) return t;
              throw new Error("plane zone must in plane layer");
            }),
            (i.prototype.Xb = function (t) {
              return new i(this.ng, this.og, this.outline.Xb(t));
            }),
            (i.prototype.eb = function () {
              return this.outline.eb();
            }),
            (i.prototype.shape = function (t, e) {
              return this.og.u(t)
                ? this.outline
                : this.og.u(n.mg._f)
                ? this.outline
                : null;
            }),
            i
          );
        })(r.pg);
        i.Jn = s;
      }
    ),
    i(
      "pcb/primitives/pcb/PcbImage",
      ["require", "exports", "pcb/primitives/pcb/PcbShape", "geometry/BBox2"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i, r, n) {
            var s = t.call(this, e, i, r) || this;
            return (s.Kn = n), s;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              for (var e = new Array(), r = 0, n = this.Kn; r < n.length; r++) {
                var s = n[r];
                e.push(s.Xb(t));
              }
              return new i(this.id, this.ng, this.og, e);
            }),
            (i.prototype.eb = function () {
              for (var t = new n.xc(), e = 0, i = this.Kn; e < i.length; e++) {
                var r = i[e];
                t.pc(r.eb());
              }
              return t.wc();
            }),
            (i.prototype.shape = function (t, e) {
              throw new Error("unsupported operation");
            }),
            i
          );
        })(r.pg);
        i.Ln = s;
      }
    ),
    i(
      "pcb/easyeda/ThreePcbEnc",
      [
        "require",
        "exports",
        "geometry/polybool/MultiLevelRule",
        "utils/Utils",
        "utils/LinkedHashMap",
        "pcb/primitives/pcb/PcbLayer",
        "geometry/Polyline",
        "pcb/primitives/pcb/PcbComponent",
        "geometry/Matrix3",
        "utils/StringKit",
        "geometry/polybool/DefaultSweepEvent",
        "geometry/Line",
        "geometry/PolylineGroup",
        "geometry/polybool/Simplify",
        "geometry/polybool/FillRule",
        "geometry/BBox2",
        "pcb/easyeda/OutlineDetection",
        "pcb/primitives/pcb/PcbTrack",
        "pcb/primitives/pcb/PcbArc",
        "pcb/primitives/pcb/PcbRegion",
        "pcb/primitives/pcb/PcbVia",
        "pcb/primitives/pcb/PcbPad",
        "pcb/primitives/pcb/PcbPolygonPour",
        "pcb/primitives/pcb/PcbFill",
        "pcb/primitives/pcb/PcbModel",
        "pcb/primitives/pcb/PcbPlaneZone",
        "pcb/primitives/pcb/PcbImage",
        "kitsune/3d/PolygonGeometry",
        "geometry/Vector2",
        "kitsune/3d/And2Geometry",
        "kitsune/3d/SubGeometry",
        "kitsune/3d/And4Geometry"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I,
        L
      ) {
        function P(t) {
          return new Array();
        }
        function _() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          for (var i = new Array(), r = 0, s = t; r < s.length; r++) {
            var o = s[r];
            null !== o && n.F.t(i, o);
          }
          return i;
        }
        function M(t) {
          var e = new Array();
          if (null !== t)
            for (var i = 0, r = t; i < r.length; i++) {
              for (
                var n = r[i], s = new Array(), o = null, a = 0, h = n.jd;
                a < h.length;
                a++
              )
                for (
                  var u = h[a], c = 0, p = u.points(0.1);
                  c < p.length;
                  c++
                ) {
                  var f = p[c];
                  (null !== o && o.u(f)) || s.push(new R.Zb(f.x, f.y)), (o = f);
                }
              e.push(s);
            }
          return e;
        }
        function C(t) {
          return new k.Ei(t);
        }
        function F(t) {
          return C(M(t));
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var j = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.lh = function (t) {
                return t[0] && !t[1];
              }),
              i
            );
          })(r.mh))(2),
          D = (function () {
            function t(t) {
              (this.Mn = !1),
                (this.Nn = !1),
                (this.On = !1),
                (this.Pn = !1),
                (this.Qn = !1),
                (this.Rn = !1),
                (this.Sn = !1),
                (this.Tn = !1),
                (this.Un = !1),
                (this.Vn = !1),
                (this.Nf = t);
            }
            return t;
          })();
        i.Wn = D;
        var B = (function () {
          function t(t, e) {
            (this.N = new s.cb()),
              (this._m = new s.cb()),
              (this.Xn = new s.cb()),
              (this.Yn = new Array()),
              (this.Zn = new Array()),
              (this.$n = new Array()),
              (this._n = t),
              (this.ao = e);
          }
          return (
            (t.prototype.bo = function () {
              for (
                var t = new Array(), e = new y.xc(), i = 0, r = this._n.Og;
                i < r.length;
                i++
              ) {
                var s = r[i];
                e.pc(s.eb());
              }
              if (e.valid()) {
                var a = e.wc(),
                  h = a.Oc();
                Math.abs(h.x) < 1e4 && Math.abs(h.y) < 1e4 && (h = R.Zb.oa);
                for (
                  var p = u.va.translate(-h.x, -h.y).scale(this._n.scale / 10),
                    f = 0,
                    l = this._n.Og;
                  f < l.length;
                  f++
                ) {
                  var s = l[f];
                  this.co(s.Xb(p));
                }
                a = a.transform(p);
                for (
                  var v = this.do(a).nb,
                    b = F(this.N.get(o.mg.ag)),
                    d = F(this.N.get(o.mg.cg)),
                    g = F(this.N.get(o.mg.bg)),
                    w = F(this.N.get(o.mg.dg)),
                    m = F(this.N.get(o.mg.eg)),
                    E = F(this.N.get(o.mg.gg)),
                    O = F(this.N.get(o.mg.fg)),
                    x = F(this.N.get(o.mg.hg)),
                    A = this.N.get(o.mg._f),
                    N = this.eo(this.ao.Qn, j, [v, A]),
                    q = new Array(),
                    T = 0,
                    k = N.fh;
                  T < k.length;
                  T++
                ) {
                  var P = k[T];
                  n.F.t(q, M(P.nb));
                }
                var D = C(q),
                  B = 1;
                this.write(t, "TopSilkLayer", "silk", new S.Hi(D, b)),
                  this.write(
                    t,
                    "TopSolderMaskLayer",
                    "solder-mask",
                    new I.ak(D, g)
                  ),
                  this.write(
                    t,
                    "TopPasteMaskLayer",
                    "paste",
                    new L.Ki(D, d, w, g)
                  ),
                  this.write(t, "TopLayer", "copper", new S.Hi(D, w)),
                  this.write(t, c.L.format("Substrate%d", B++), "substrate", D);
                for (var U = 0, Q = this._n.Zg; U < Q.length; U++) {
                  var X = Q[U],
                    Z = void 0;
                  if (5 === X.type) Z = this.N.get(X);
                  else {
                    if (6 !== X.type) continue;
                    Z = this.Xn.get(X);
                  }
                  var Y = "Inner" + X.order,
                    z = this._m.get(o.mg._f);
                  this.write(t, Y, "copper", new S.Hi(D, F(_(Z, z)))),
                    this.write(
                      t,
                      c.L.format("Substrate%d", B++),
                      "substrate",
                      D
                    );
                }
                this.write(t, "BottomLayer", "copper", new S.Hi(D, m)),
                  this.write(
                    t,
                    "BottomPasteMaskLayer",
                    "paste",
                    new L.Ki(D, O, m, E)
                  ),
                  this.write(
                    t,
                    "BottomSolderMaskLayer",
                    "solder-mask",
                    new I.ak(D, E)
                  ),
                  this.write(t, "BottomSilkLayer", "silk", new S.Hi(D, x)),
                  this.write(t, "Top", "3dmodel", this.Yn),
                  this.write(t, "Bottom", "3dmodel", this.Zn);
              }
              return t;
            }),
            (t.prototype.write = function (t, e, i, r) {
              t.push({
                name: e,
                Zk: i,
                data: r
              });
            }),
            (t.prototype.Qb = function (t, e, i) {
              for (var r = 0, n = i; r < n.length; r++)
                for (var s = n[r], o = 0, a = s.nb; o < a.length; o++) {
                  var h = a[o];
                  this.fo(t, e, h);
                }
            }),
            (t.prototype.fo = function (t, e, i) {
              t.ab(e, P).push(i);
            }),
            (t.prototype.ho = function (t, e, i) {
              null !== i &&
                (i instanceof a.Zc
                  ? this.fo(t, e, i)
                  : i instanceof l.Hd
                  ? this.Qb(t, e, [i])
                  : this.Qb(t, e, i));
            }),
            (t.prototype.eo = function (t, e, i) {
              var r = new p.gh(t);
              if (null != i) {
                for (
                  var n = new v.Zh(e.Of, this.ao.Nf, r), s = 0;
                  s < i.length;
                  s++
                ) {
                  var o = e.weight(s),
                    a = i[s];
                  if (null != a)
                    for (var h = 0, u = a; h < u.length; h++) {
                      var c = u[h];
                      n.Rf(c, o);
                    }
                }
                n.Fh();
              }
              return r;
            }),
            (t.prototype.Fh = function (t) {
              for (
                var e = new p.gh(!1),
                  i = new v.Zh(b.Hf, this.ao.Nf, e),
                  r = 0,
                  n = t;
                r < n.length;
                r++
              ) {
                var s = n[r];
                i.Rf(s);
              }
              return i.Fh(), e.fh;
            }),
            (t.prototype.do = function (t) {
              return new d.Ym(t, 2, 1.2, this.ao.Nf, this.$n).Xm();
            }),
            (t.prototype.co = function (t) {
              t instanceof g.tg
                ? this.io(t)
                : t instanceof w.ug
                ? this.jo(t)
                : t instanceof h.Rg
                ? this.ko(t)
                : t instanceof m.rg
                ? this.lo(t)
                : t instanceof E.cn
                ? this.mo(t)
                : t instanceof O.rn
                ? this.no(t)
                : t instanceof x.Dn
                ? this.oo(t)
                : t instanceof A.Gn
                ? this.po(t)
                : t instanceof N.Hn
                ? this.qo(t)
                : t instanceof q.Jn
                ? this.ro(t)
                : t instanceof T.Ln
                ? this.so(t)
                : this.ao.Nf.nf("shape %s is not suppored", t);
            }),
            (t.prototype.so = function (t) {
              this.Qb(this.N, t.og, this.Fh(t.Kn));
            }),
            (t.prototype.ro = function (t) {
              var e = t.shape(t.og, 0);
              null !== e && this.fo(this.Xn, t.og, e);
            }),
            (t.prototype.qo = function (t) {
              var e = t.og,
                i = {
                  id: t.uri,
                  originX: t.origin.x,
                  originY: t.origin.y,
                  originRotation: t.orientation,
                  x: t.position.x,
                  y: t.position.y,
                  z: t.position.z,
                  rx: t.rotation.x,
                  ry: t.rotation.y,
                  rz: t.rotation.z,
                  width: t.width,
                  height: t.height
                };
              o.mg.isTop(e.type)
                ? this.Yn.push(i)
                : o.mg.$f(e.type)
                ? this.Zn.push(i)
                : this.ao.Nf.nf("model on layer %s not suuport", e);
            }),
            (t.prototype.po = function (t) {
              var e = t.shape(t.og, 0);
              null !== e && this.fo(this.N, t.og, e);
            }),
            (t.prototype.oo = function (t) {
              if (null !== t.Cn)
                for (var e = 0, i = t.Cn; e < i.length; e++) {
                  var r = i[e];
                  this.Qb(this.N, t.og, [r]);
                }
            }),
            (t.prototype.no = function (t) {
              var e = t.shape(o.mg._f, 0);
              if ((this.ho(this.N, o.mg._f, e), null !== t.Og.top)) {
                var i = t.shape(o.mg.dg, 0);
                this.ho(this.N, o.mg.dg, i);
                var r = t.shape(o.mg.dg, t.nn);
                if ((this.ho(this.N, o.mg.bg, r), t.on)) {
                  var n = t.shape(o.mg.dg, t.mn);
                  this.ho(this.N, o.mg.cg, n);
                }
              }
              if (null !== t.Og.in) {
                var s = t.shape(o.mg.eg, 0);
                this.ho(this.N, o.mg.eg, s);
                var a = t.shape(o.mg.eg, t.nn);
                if ((this.ho(this.N, o.mg.gg, a), t.on)) {
                  var h = t.shape(o.mg.eg, t.mn);
                  this.ho(this.N, o.mg.fg, h);
                }
              }
              if (
                null !== t.Og.top &&
                null !== t.Og.in &&
                null !== t.Og.inner
              ) {
                var u = t.shape(new o.mg(5, 1), 0);
                this.ho(this._m, o.mg._f, u);
              }
            }),
            (t.prototype.mo = function (t) {
              var e = t.shape(o.mg._f, 0);
              if ((null !== e && this.fo(this.N, o.mg._f, e), !isNaN(t.$m))) {
                var i = t.shape(o.mg.dg, 0);
                if (null !== i && (this.fo(this.N, o.mg.dg, i), !t.mask)) {
                  var r = t.shape(o.mg.dg, 0.4);
                  null !== r &&
                    (this.fo(this.N, o.mg.bg, r), this.fo(this.N, o.mg.cg, r));
                }
              }
              if (!isNaN(t.an)) {
                var n = t.shape(o.mg.eg, 0);
                if (null !== n && (this.fo(this.N, o.mg.eg, n), !t.mask)) {
                  var s = t.shape(o.mg.eg, 0.4);
                  null !== s &&
                    (this.fo(this.N, o.mg.gg, s), this.fo(this.N, o.mg.fg, s));
                }
              }
              if (!isNaN(t._m)) {
                var a = t.shape(new o.mg(5, 1), 0);
                null !== a && this.fo(this._m, o.mg._f, a);
              }
            }),
            (t.prototype.lo = function (t) {
              if (1 == t.kind);
              else {
                var e = t.shape(t.og, 0);
                null !== e && this.Qb(this.N, t.og, this.Fh([e]));
              }
            }),
            (t.prototype.io = function (t) {
              if (t.og.u(o.mg.ig)) this.$n.push(new f.bd(t.start, t.end));
              else {
                var e = t.shape(t.og, 0);
                null !== e && this.fo(this.N, t.og, e);
              }
            }),
            (t.prototype.jo = function (t) {
              if (t.og.u(o.mg.ig)) this.$n.push(t.arc);
              else {
                var e = t.shape(t.og, 0);
                null !== e && this.fo(this.N, t.og, e);
              }
            }),
            (t.prototype.ko = function (t) {
              for (var e = 0, i = t.Og; e < i.length; e++) {
                var r = i[e];
                this.co(r);
              }
              t.Lg && this.co(t.Ng), t.Kg && this.co(t.Mg);
            }),
            t
          );
        })();
        i.to = B;
      }
    ),
    i("utils/NativeMap", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t() {
          this.ml = {};
        }
        return (
          (t.prototype.contains = function (t) {
            return t in this.ml;
          }),
          (t.prototype.bb = function () {
            for (var t in this.ml) return !1;
            return !0;
          }),
          (t.prototype.uo = function (t, e) {
            var i = this.ml[t];
            return void 0 === i ? e : i;
          }),
          (t.prototype.get = function (t) {
            return this.ml[t];
          }),
          (t.prototype.put = function (t, e) {
            var i = this.ml[t];
            return (this.ml[t] = e), i;
          }),
          (t.prototype.vo = function (t) {
            var e = this.ml[t];
            return delete this.ml[t], e;
          }),
          (t.prototype.ab = function (t, e) {
            var i = this.ml;
            if (t in i) return i[t];
            var r = e(t.toString());
            return (i[t] = r), r;
          }),
          (t.prototype.iterator = function (t) {
            var e = this.ml;
            for (var i in e) {
              if (!t(i, e[i])) break;
            }
          }),
          (t.prototype.origin = function () {
            return this.ml;
          }),
          (t.prototype.clear = function () {
            this.ml = {};
          }),
          t
        );
      })();
      e.wo = i;
    }),
    i(
      "page/3dviewer/Pcb",
      [
        "require",
        "exports",
        "kitsune/core/Color",
        "kitsune/3d/Group",
        "kitsune/3d/Scene",
        "kitsune/core/WebGLRender",
        "geometry/Vector3",
        "kitsune/3d/Camera",
        "kitsune/3d/Light",
        "page/3dviewer/Materials",
        "kitsune/3d/PhongMaterial",
        "kitsune/3d/Mesh",
        "kitsune/3d/Geometry",
        "kitsune/3d/Control",
        "utils/Utils",
        "page/3dviewer/Obj",
        "geometry/Matrix4",
        "geometry/utils/Angle",
        "page/3dviewer/Tasks",
        "geometry/BBox3",
        "utils/Check",
        "utils/NativeMap"
      ],
      function (
        t,
        e,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E
      ) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var O = {
          green: i.aj.Ui(1732404),
          red: i.aj.Ui(14882582),
          blue: i.aj.Ui(599383),
          yellow: i.aj.Ui(11583488),
          black: i.aj.Ui(0),
          purple: i.aj.Ui(6556786),
          white: i.aj.Ui(16765907),
          board: i.aj.Ui(10329437)
        };
        (e.xo = {
          "TopLayer": "attr-view-layer-1",
          "BottomLayer": "attr-view-layer-2",
          "TopSilkLayer": "attr-view-layer-3",
          "BottomSilkLayer": "attr-view-layer-4",
          "TopPasteMaskLayer": "attr-view-layer-5",
          "BottomPasteMaskLayer": "attr-view-layer-6",
          "TopSolderMaskLayer": "attr-view-layer-7",
          "BottomSolderMaskLayer": "attr-view-layer-8",
          "Ratlines": "attr-view-layer-9",
          "BoardOutline": "attr-view-layer-10",
          "Multi-Layer": "attr-view-layer-11",
          "Document": "attr-view-layer-12",
          "TopAssembly": "attr-view-layer-13",
          "BottomAssembly": "attr-view-layer-14",
          "Mechanical": "attr-view-layer-15",
          "3DModel": "attr-view-layer-19",
          "Inner1": "attr-view-layer-21",
          "Inner2": "attr-view-layer-22",
          "Inner3": "attr-view-layer-23",
          "Inner4": "attr-view-layer-24",
          "Inner5": "attr-view-layer-25",
          "Inner6": "attr-view-layer-26",
          "Inner7": "attr-view-layer-27",
          "Inner8": "attr-view-layer-28",
          "Inner9": "attr-view-layer-29",
          "Inner10": "attr-view-layer-30",
          "Inner11": "attr-view-layer-31",
          "Inner12": "attr-view-layer-32",
          "Inner13": "attr-view-layer-33",
          "Inner14": "attr-view-layer-34",
          "Inner15": "attr-view-layer-35",
          "Inner16": "attr-view-layer-36",
          "Inner17": "attr-view-layer-37",
          "Inner18": "attr-view-layer-38",
          "Inner19": "attr-view-layer-39",
          "Inner20": "attr-view-layer-40",
          "Inner21": "attr-view-layer-41",
          "Inner22": "attr-view-layer-42",
          "Inner23": "attr-view-layer-43",
          "Inner24": "attr-view-layer-44",
          "Inner25": "attr-view-layer-45",
          "Inner26": "attr-view-layer-46",
          "Inner27": "attr-view-layer-47",
          "Inner28": "attr-view-layer-48",
          "Inner29": "attr-view-layer-49",
          "Inner30": "attr-view-layer-50",
          "Inner31": "attr-view-layer-51",
          "Inner32": "attr-view-layer-52",
          "Substrate1": "attr-view-layer-53",
          "Substrate2": "attr-view-layer-54",
          "Substrate3": "attr-view-layer-55",
          "Substrate4": "attr-view-layer-56",
          "Substrate5": "attr-view-layer-57",
          "Substrate6": "attr-view-layer-58",
          "Substrate7": "attr-view-layer-59",
          "Substrate8": "attr-view-layer-60",
          "Substrate9": "attr-view-layer-61",
          "Substrate10": "attr-view-layer-62",
          "Substrate11": "attr-view-layer-63",
          "Substrate12": "attr-view-layer-64",
          "Substrate13": "attr-view-layer-65",
          "Substrate14": "attr-view-layer-66",
          "Substrate15": "attr-view-layer-67",
          "Substrate16": "attr-view-layer-68",
          "Substrate17": "attr-view-layer-69",
          "Substrate18": "attr-view-layer-70",
          "Substrate19": "attr-view-layer-71",
          "Substrate20": "attr-view-layer-72",
          "Substrate21": "attr-view-layer-73",
          "Substrate22": "attr-view-layer-74",
          "Substrate23": "attr-view-layer-75",
          "Substrate24": "attr-view-layer-76",
          "Substrate25": "attr-view-layer-77",
          "Substrate26": "attr-view-layer-78",
          "Substrate27": "attr-view-layer-79",
          "Substrate28": "attr-view-layer-80",
          "Substrate29": "attr-view-layer-81",
          "Substrate30": "attr-view-layer-82",
          "Substrate31": "attr-view-layer-83",
          "Substrate32": "attr-view-layer-84",
          "Substrate33": "attr-view-layer-85"
        }),
          (e.yo = {});
        for (var x in e.xo) e.yo[e.xo[x]] = x;
        var A = new c.gj(i.aj.Xi, i.aj.Xi, i.aj.Xi, 0.1, 1),
          N = new c.gj(i.aj.Yi, i.aj.Yi, i.aj.Yi, 0.1, 1),
          q = (function () {
            function t(t, e, u, c) {
              var p = this;
              (this.zo = new r.Kj()),
                (this.Ao = new r.Kj()),
                (this.Bo = new r.Kj()),
                (this.Co = new r.Kj()),
                (this.eb = new w.Fd()),
                (this.Do = new E.wo()),
                (this.Eo = null),
                (this.Fo = null),
                (this.Go = null),
                (this.zIndex = 0),
                (this.index = 0),
                (this.Ho = 0),
                (this.Io = 0),
                (this.Jo = 0),
                (this.Ko = null),
                (this.Lo = null),
                (this.Mo = !1),
                (this.No = u),
                (this.Oo = c),
                (this.bk = new s._j(e, {
                  stencil: !0,
                  depth: !0
                }));
              var f = this.bk.width(),
                v = this.bk.height(),
                b = new a.Dj(
                  Math.PI / 4,
                  f / v,
                  0.5,
                  100,
                  new o.pa(0, -10, 10)
                ),
                y = new h.Ej(new i.aj(0.5, 0.5, 0.5)),
                d = new h.Fj(new i.aj(0.8, 0.8, 0.8), new o.pa(0, 0, 10)),
                m = new n.Qk(this.bk, b, y, d);
              m.group.add(this.zo),
                m.group.add(this.Co),
                this.Co.add(this.Ao),
                this.Co.add(this.Bo);
              var O = new l.Bl(e, m.group, b, function () {
                p.Po();
              });
              O.zl(),
                (this.control = O),
                (this.Qo = m),
                window.addEventListener(
                  "resize",
                  function () {
                    p.Qo.reset(), p.Po();
                  },
                  !1
                ),
                c.push(function (t) {
                  if (t instanceof g.Pm) "fogColor" === t.type && p.Ro(t.value);
                  else if (t instanceof g.Rm)
                    "3DModel" === t.og && p.So(t.og, t.visible);
                  else if (t instanceof g.Sm) p.To(t);
                  else if (t instanceof g.Qm) {
                    if (null !== p.Lo && null !== p.Ko) {
                      var e = t.scale / 10 / Math.max(p.Ho, 1),
                        i = t.ni;
                      p.Bo.setPosition(new o.pa(0, 0, p.Ko * e - i * p.Lo));
                    }
                  } else t instanceof g.Tm && p.Qo.tk();
                }),
                this.Uo(t),
                this.tk();
            }
            return (
              (t.prototype.tk = function () {
                var t = performance.now();
                this.Mo && this.eb.Ed() && (this.Vo(), (this.Mo = !1)),
                  this.Io > 0 &&
                    ((this.Qo.antialias = !1),
                    this.Qo.tk(),
                    (this.Io = 0),
                    (this.Jo = t)),
                  !this.Qo.antialias &&
                    t - this.Jo > 1e3 &&
                    ((this.Qo.antialias = !0), this.Qo.tk()),
                  requestAnimationFrame(this.tk.bind(this));
              }),
              (t.prototype.Po = function () {
                this.Io++;
              }),
              (t.prototype.Ro = function (t) {
                this.bk.Uj(i.aj.Wi(t)), this.Po();
              }),
              (t.prototype.So = function (t, i) {
                var r = e.xo[t];
                i === ("visible" === this.No[r]) &&
                  (i
                    ? (this.Qo.group.add(this.Co), (this.No[r] = "visible"))
                    : (this.Qo.group.remove(this.Co),
                      (this.No[r] = "invisible"))),
                  this.Po();
              }),
              (t.prototype.To = function (t) {
                this.Ao.clear(),
                  this.Bo.clear(),
                  this.Wo(t.id, {
                    id: t.id,
                    width: t.width,
                    height: t.height,
                    isTop: !0,
                    originRotation: 0,
                    originX: t.originX,
                    originY: -t.originY,
                    rx: t.rx,
                    ry: t.ry,
                    rz: t.rz,
                    x: t.x,
                    y: t.y,
                    z: t.z,
                    zIndex: 0
                  });
              }),
              (t.prototype.Xo = function (t) {
                this.index++;
                var i = null,
                  r = this.zIndex;
                switch (t.Zk) {
                  case "silk":
                    (i = new p._k(t.data, A)), (this.zIndex -= 0.1);
                    break;
                  case "solder-mask":
                    i = new p._k(
                      t.data,
                      new c.gj(O.blue, O.blue, O.blue, 0.5, 0.9)
                    );
                    var n = new p._k(
                      i.Yk,
                      new c.gj(O.black, O.black, O.black, 0, 1)
                    );
                    "TopSolderMaskLayer" == t.name
                      ? (this.Fo = n.setPosition(new o.pa(0, 0, 0.05)))
                      : "BottomSolderMaskLayer" == t.name &&
                        ((this.Go = n.setPosition(new o.pa(0, 0, -10.05))),
                        null !== this.Eo && this.Eo.add(n)),
                      (this.zIndex -= 0.1);
                    break;
                  case "paste":
                    (i = new p._k(t.data, u.hm)), (this.zIndex -= 0.1);
                    break;
                  case "copper":
                    (i = new p._k(t.data, u.em)), (this.zIndex -= 0.1);
                    break;
                  case "substrate":
                    (i = this.Yo(
                      t.data,
                      new c.gj(O.board, O.board, O.board, 0.1, 1),
                      10
                    )),
                      null !== this.Fo && i.add(this.Fo),
                      (this.Eo = i),
                      (this.zIndex -= 10.1),
                      this.Ho++;
                    break;
                  case "3dmodel":
                    for (
                      var s = "Top" === t.name, a = 0, h = t.data;
                      a < h.length;
                      a++
                    ) {
                      var f = h[a];
                      (f.isTop = s), this.Wo(f.id, f);
                    }
                    null === this.Lo &&
                      null === this.Ko &&
                      ((this.Lo = this.index),
                      (this.Ko = this.zIndex + 0.1),
                      this.Bo.setPosition(new o.pa(0, 0, this.Ko))),
                      (this.No["attr-view-layer-19"] = "visible");
                }
                if (null !== i) {
                  var l = i.eb();
                  null !== l && this.eb.pc(l.hb, l.fb, r, l.ib, l.gb, r),
                    i.setPosition(new o.pa(0, 0, r)),
                    t.name in e.xo && (this.No[e.xo[t.name]] = "visible"),
                    this.Oo.push(this.Zo(t, i, r)),
                    this.zo.add(i);
                }
              }),
              (t.prototype.Zo = function (t, i, r) {
                var n = this.index,
                  s = this;
                return function (a) {
                  if (a instanceof g.Rm)
                    a.og == t.name &&
                      (a.visible
                        ? (null !== i && s.zo.add(i),
                          s.$o(t.name),
                          (s.No[e.xo[t.name]] = "visible"))
                        : (null !== i && s.zo.remove(i),
                          s._o(t.name),
                          (s.No[e.xo[t.name]] = "invisible")),
                      s.Po());
                  else if (a instanceof g.Qm) {
                    if (null !== i) {
                      a.ni > 0 ? s.ap(t.name) : s.bp(t.name);
                      var h = a.scale / 10 / s.Ho,
                        f = a.ni;
                      i.setScale(new o.pa(1, 1, h)),
                        i.setPosition(new o.pa(0, 0, r * h - f * n)),
                        s.Po();
                    }
                  } else if (a instanceof g.Pm)
                    if ("boardColor" === a.type) {
                      if (i instanceof p._k)
                        if ("solder-mask" == t.Zk) {
                          var l = O[a.value];
                          null != l &&
                            ((i.Zk = new c.gj(l, l, l, 0.5, i.Zk.opacity)),
                            s.Po());
                        } else
                          "silk" == t.Zk &&
                            ("white" == a.value
                              ? ((i.Zk = N), s.Po())
                              : ((i.Zk = A), s.Po()));
                    } else
                      "solderColor" === a.type &&
                        i instanceof p._k &&
                        "paste" == t.Zk &&
                        ("silver" == a.value
                          ? (i.Zk = u.im)
                          : "gold" == a.value && (i.Zk = u.hm),
                        s.Po());
                };
              }),
              (t.prototype.cp = function (t, e, i) {
                var r = y.wa.scale(e).na(i);
                return (
                  (t = t.transform(r)),
                  t.hb >= -1 && t.fb >= -1 && t.ib <= 1 && t.gb <= 1
                );
              }),
              (t.prototype.Vo = function () {
                var t = this.eb.wc(),
                  e = t.Oc(),
                  i = new o.pa(-e.x, -e.y, -e.z);
                t = t.transform(y.wa.qa(i));
                for (
                  var r = this.Qo.uk.uj().inverse().na(this.Qo.uk.pj()),
                    n = this.cp(t, 1, r) ? 1.1 : 0.9,
                    s = n,
                    a = 0;
                  a < 100;
                  a++
                ) {
                  if (s > 1 !== this.cp(t, s, r)) {
                    s > 1 && (s /= n);
                    break;
                  }
                  s *= n;
                }
                this.zo.setPosition(i),
                  this.Co.setPosition(i),
                  this.Qo.group.setScale(new o.pa(s, s, s)),
                  this.Po();
              }),
              (t.prototype.Uo = function (t) {
                if (null !== t) {
                  for (var e = 0, i = t; e < i.length; e++) {
                    var r = i[e];
                    this.Xo(r);
                  }
                  this.eb.Ed() && (this.Mo = !0);
                }
              }),
              (t.prototype.Yo = function (t, e, i) {
                m.J.P(i);
                var n = new r.Kj(),
                  s = -i,
                  a = new p._k(t, e);
                a.setPosition(new o.pa(0, 0, 0)), n.add(a);
                var h = new p._k(t, e);
                h.setPosition(new o.pa(0, 0, s)), n.add(h);
                for (var u = new Array(), c = 0, l = t.Bi; c < l.length; c++)
                  for (
                    var v = l[c], b = null, y = 0, d = v;
                    y < d.length;
                    y++
                  ) {
                    var g = d[y];
                    null !== b &&
                      (u.push(new o.pa(b.x, b.y, s)),
                      u.push(new o.pa(g.x, g.y, s)),
                      u.push(new o.pa(g.x, g.y, 0)),
                      u.push(new o.pa(g.x, g.y, 0)),
                      u.push(new o.pa(b.x, b.y, 0)),
                      u.push(new o.pa(b.x, b.y, s))),
                      (b = g);
                  }
                var w = new f.Ti(u);
                return n.add(new p._k(w, e)), n;
              }),
              (t.prototype.Wo = function (t, e) {
                var i = this.Do.get(t);
                void 0 !== i
                  ? Array.isArray(i)
                    ? i.push(e)
                    : this.dp(i, e)
                  : (this.Do.put(t, [e]),
                    $["ajax"]({
                      url: v.F.prefix() + "/api/3dmodel/" + t,
                      cache: !1,
                      contentType: !1,
                      processData: !1,
                      dataType: "text",
                      timeout: 3e4
                    }).then(this.ep(t), function () {}));
              }),
              (t.prototype.ep = function (t) {
                var e = this;
                return function (i) {
                  var r = e.Do.get(t);
                  if (Array.isArray(r)) {
                    var n = new b.Om(i).group;
                    for (e.Do.put(t, n); ; ) {
                      var s = r.shift();
                      if (void 0 === s) break;
                      e.dp(n, s);
                    }
                  }
                };
              }),
              (t.prototype.dp = function (t, e) {
                var i = new y.wa(),
                  n = t.eb();
                if (null !== n) {
                  var s = (n.ib + n.hb) / 2,
                    a = (n.gb + n.fb) / 2,
                    h = n.Cd;
                  i = i.translate(new o.pa(-s, -a, -h));
                  var u = d.Ub.Wb(e.rx),
                    c = d.Ub.Wb(e.ry),
                    p = d.Ub.Wb(e.rz);
                  i = i.rotateZ(p).rotateX(u).rotateY(c);
                  var f = e.width / (n.ib - n.hb),
                    l = e.height / (n.gb - n.fb),
                    v = Math.min(f, l);
                  (i = i.scale(v)),
                    (i = i.translate(new o.pa(e.x, e.y, e.z))),
                    e.isTop || (i = i.rotateY(Math.PI));
                  var b = d.Ub.Wb(e.originRotation);
                  (i = i.rotateZ(b)),
                    (i = i.translate(new o.pa(e.originX, e.originY, 0)));
                  var g = new r.Kj();
                  g.add(t),
                    g.Wk(i),
                    this.eb.sc(n.transform(i)),
                    (this.Mo = !0),
                    e.isTop ? this.Ao.add(g) : this.Bo.add(g),
                    this.Po();
                }
              }),
              (t.prototype.fp = function (t) {
                return "TopSolderMaskLayer" === t
                  ? this.Fo
                  : "BottomSolderMaskLayer" === t
                  ? this.Go
                  : null;
              }),
              (t.prototype._o = function (t) {
                var e = this.fp(t);
                if (null !== e) {
                  var i = e.vj();
                  e.setPosition(new o.pa(1e5, i.y, i.z));
                }
              }),
              (t.prototype.$o = function (t) {
                var e = this.fp(t);
                if (null !== e) {
                  var i = e.vj();
                  e.setPosition(new o.pa(0, i.y, i.z));
                }
              }),
              (t.prototype.ap = function (t) {
                var e = this.fp(t);
                if (null !== e) {
                  var i = e.vj();
                  e.setPosition(new o.pa(i.x, 1e5, i.z));
                }
              }),
              (t.prototype.bp = function (t) {
                var e = this.fp(t);
                if (null !== e) {
                  var i = e.vj();
                  e.setPosition(new o.pa(i.x, 0, i.z));
                }
              }),
              t
            );
          })();
        e.gp = q;
      }
    ),
    i(
      "pcb/ltspice/LTSpiceRawCompressor",
      ["require", "exports"],
      function (t, e) {
        function i(t) {
          a[0] = t;
          var e = btoa(String.fromCharCode(h[0], h[1], h[2], h[3])),
            i = /^(.*?)=*$/.exec(e);
          return null !== i ? i[1] : e;
        }
        function r(t) {
          return (
            (t = atob(t)),
            (h[0] = t.charCodeAt(0)),
            (h[1] = t.charCodeAt(1)),
            (h[2] = t.charCodeAt(2)),
            (h[3] = t.charCodeAt(3)),
            a[0]
          );
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = /^\d+\s+(\S+)$/,
          s = /^\s*(\S+)$/,
          o = new ArrayBuffer(4),
          a = new Float32Array(o),
          h = new Uint8Array(o),
          u = (function () {
            function t(t) {
              (this.hp = new Array()),
                (this.ip = !1),
                (this.values = new Array()),
                (this.data = t);
            }
            return (
              (t.prototype.jp = function () {
                this.values.length > 0 &&
                  (this.hp.push(this.values.join("")),
                  (this.values.length = 0));
              }),
              (t.prototype.kp = function (t) {
                var e = parseFloat(t);
                this.values.push(i(e));
              }),
              (t.prototype.lp = function () {
                for (
                  var t = this.data.split(/(?:\n|\r)+/), e = 0, i = t;
                  e < i.length;
                  e++
                ) {
                  var r = i[e];
                  if (this.ip) {
                    var o = n.exec(r);
                    if (null !== o) this.jp(), this.kp(o[1]);
                    else {
                      var a = s.exec(r);
                      null !== a && this.kp(a[1]);
                    }
                  } else this.hp.push(r), "Values:" === r && (this.ip = !0);
                }
                this.jp();
              }),
              (t.prototype.mp = function () {
                for (
                  var t = this.data.split(/(?:\n|\r)+/), e = 0, i = 0, n = t;
                  i < n.length;
                  i++
                ) {
                  var s = n[i];
                  if (this.ip) {
                    for (var o = [], a = 0; a < s.length - 5; a += 6)
                      o.push(r(s.substr(a, 6)));
                    this.hp.push(e + "\t" + o.join("\n\t").trimRight()), e++;
                  } else this.hp.push(s), "Values:" === s && (this.ip = !0);
                }
                this.jp();
              }),
              t
            );
          })();
        e.np = u;
      }
    ),
    i("utils/CharStateMachine", ["require", "exports"], function (t, e) {
      function i(t) {
        return 32 === t || 9 === t || 13 === t || 10 === t;
      }
      function r(t) {
        return 13 === t || 10 === t;
      }
      Object.defineProperty(e, "__esModule", {
        value: !0
      }),
        (e.op = i),
        (e.pp = r);
      var n = (function () {
        function t() {
          (this.qp = 1), (this.rp = 0);
        }
        return (
          (t.prototype.line = function () {
            return this.qp;
          }),
          (t.prototype.sp = function () {
            return this.rp;
          }),
          (t.prototype.tp = function (t) {
            return (
              10 === t ? ((this.rp = 0), this.qp++) : this.rp++, this.up(t)
            );
          }),
          (t.prototype.parse = function (t) {
            for (var e = t.length, i = 0; i < e; i++) {
              var r = t.charCodeAt(i);
              if (!this.tp(r)) return this;
            }
            return this.finish(), this;
          }),
          t
        );
      })();
      e.vp = n;
    }),
    i("utils/io/IO", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i("utils/io/StringWriteBuffer", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t() {
          this.buffer = new Array();
        }
        return (
          (t.prototype.toBlob = function () {
            return new Blob(this.buffer);
          }),
          (t.prototype.toString = function () {
            return this.buffer.join("");
          }),
          (t.prototype.wp = function () {
            return !1;
          }),
          (t.prototype.write = function (t) {
            return t.length > 0 && this.buffer.push(t), t.length;
          }),
          (t.prototype.xp = function (t) {
            return this.yp(t, 0, t.length);
          }),
          (t.prototype.yp = function (t, e, i) {
            for (var r = 0, n = Math.min(e + i, t.length), s = e; s < n; s++) {
              var o = t[s];
              o.length > 0 && (this.buffer.push(o), (r += o.length));
            }
            return r;
          }),
          (t.prototype.zp = function (t, e) {
            e(this.write(t));
          }),
          (t.prototype.Ap = function (t, e) {
            e(this.xp(t));
          }),
          (t.prototype.Bp = function (t, e, i, r) {
            r(this.yp(t, e, i));
          }),
          t
        );
      })();
      e.Cp = i;
    }),
    i("utils/io/UTF16WriteBuffer", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = String.fromCharCode,
        r = (function () {
          function t() {
            this.buffer = new Array();
          }
          return (
            (t.prototype.size = function () {
              return this.buffer.length;
            }),
            (t.prototype.wp = function () {
              return !1;
            }),
            (t.prototype.write = function (t) {
              return this.buffer.push(t), 1;
            }),
            (t.prototype.xp = function (t) {
              return this.yp(t, 0, t.length);
            }),
            (t.prototype.yp = function (t, e, i) {
              for (var r = this.buffer, n = 0, s = e; n < i; n++, s++)
                r.push(t[s]);
              return i;
            }),
            (t.prototype.zp = function (t, e) {
              e(this.write(t));
            }),
            (t.prototype.Ap = function (t, e) {
              e(this.xp(t));
            }),
            (t.prototype.Bp = function (t, e, i, r) {
              r(this.yp(t, e, i));
            }),
            (t.prototype.Dp = function (t) {
              for (var e = t.length, i = new Array(e), r = 0; r < e; r++)
                i[r] = t.charCodeAt(r);
              return this.xp(i);
            }),
            (t.prototype.clear = function () {
              this.buffer.length = 0;
            }),
            (t.prototype.toString = function () {
              var t = this.buffer,
                e = t.length;
              if (e <= 500) return i.apply(null, t);
              for (var r = new Array(), n = 0; n < t.length; n += 500) {
                var s = Math.min(e - n, 500),
                  o = i.apply(null, t.slice(n, n + s));
                r.push(o);
              }
              return r.join("");
            }),
            t
          );
        })();
      e.Ep = r;
    }),
    i(
      "utils/json/JObject",
      [
        "require",
        "exports",
        "utils/LinkedHashMap",
        "utils/io/StringWriteBuffer",
        "utils/Itor",
        "utils/StringKit",
        "utils/Utils",
        "utils/io/UTF16WriteBuffer"
      ],
      function (t, i, r, n, s, o, a, h) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var u = (function () {
          function t() {}
          return (
            (t.Fp = function (e) {
              if (e instanceof t) return e;
              if (null === e) return i.Gp;
              switch (typeof e) {
                case "number":
                  return new p(e);
                case "string":
                  return new c(e);
                case "boolean":
                  return e ? i.Hp : i.Ip;
                case "object":
                  if (Array.isArray(e)) {
                    for (var r = new b(), n = 0, s = e; n < s.length; n++) {
                      var o = s[n];
                      r.add(o);
                    }
                    return r;
                  }
                  var a = new l();
                  for (var h in e)
                    if (e.hasOwnProperty(h)) {
                      var u = e[h];
                      a.put(h, u);
                    }
                  return a;
                default:
                  return new c(e.toString());
              }
            }),
            (t.prototype.Jp = function (t) {
              void 0 === t && (t = 0);
              var e = new n.Cp();
              return this.Kp(e, t), e.toString();
            }),
            (t.prototype.Kp = function (t, e) {
              void 0 === e && (e = 0), this.Lp(t, 0, e);
            }),
            (t.prototype.Mp = function () {
              throw new Error("unsupported operation");
            }),
            (t.prototype.Np = function () {
              throw new Error("unsupported operation");
            }),
            (t.prototype.Op = function () {
              throw new Error("unsupported operation");
            }),
            (t.prototype.Pp = function () {
              throw new Error("unsupported operation");
            }),
            (t.prototype.Qp = function () {
              throw new Error("unsupported operation");
            }),
            (t.prototype.put = function (t, e) {
              throw new Error("unsupported operation");
            }),
            (t.prototype.remove = function (t) {
              throw new Error("unsupported operation");
            }),
            (t.prototype.add = function (t) {
              throw new Error("unsupported operation");
            }),
            t
          );
        })();
        i.Rp = u;
        var c = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.Sp = e), i;
          }
          return (
            e(i, t),
            (i.prototype.Mp = function () {
              return this.Sp;
            }),
            (i.prototype.Lp = function (t, e, i) {
              var r = this.Sp,
                n = r.length,
                s = new h.Ep();
              s.write(34);
              for (var a = 0; a < n; a++) {
                var u = r.charCodeAt(a);
                switch (u) {
                  case 13:
                    s.Dp("\\r");
                    break;
                  case 10:
                    s.Dp("\\n");
                    break;
                  case 9:
                    s.Dp("\\t");
                    break;
                  case 8:
                    s.Dp("\\b");
                    break;
                  case 12:
                    s.Dp("\\f");
                    break;
                  case 92:
                    s.Dp("\\\\");
                    break;
                  case 34:
                    s.Dp('\\"');
                    break;
                  default:
                    32 <= u && u <= 126
                      ? s.write(u)
                      : s.Dp(o.L.format("\\u%04x", u));
                }
              }
              s.write(34), t.write(s.toString());
            }),
            (i.prototype.$a = function () {
              return a.F.m(this.Sp);
            }),
            (i.prototype.u = function (t) {
              return t instanceof i && this.Sp === t.Sp;
            }),
            (i.prototype.toString = function () {
              return this.Sp;
            }),
            i
          );
        })(u);
        i.Tp = c;
        var p = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.value = e), i;
          }
          return (
            e(i, t),
            (i.prototype.Np = function () {
              return this.value;
            }),
            (i.prototype.Lp = function (t, e, i) {
              t.write(this.value.toString());
            }),
            (i.prototype.$a = function () {
              return this.value;
            }),
            (i.prototype.u = function (t) {
              return t instanceof i && this.value === t.value;
            }),
            (i.prototype.toString = function () {
              return this.value.toString();
            }),
            i
          );
        })(u);
        i.Up = p;
        var f = (function (t) {
          function i() {
            return t.call(this) || this;
          }
          return (
            e(i, t),
            (i.prototype.Lp = function (t, e, i) {
              t.write("null");
            }),
            (i.prototype.$a = function () {
              return 0;
            }),
            (i.prototype.u = function (t) {
              return this === t;
            }),
            (i.prototype.toString = function () {
              return "null";
            }),
            (i.Vp = new i()),
            i
          );
        })(u);
        (i.Vp = f), (i.Gp = f.Vp);
        var l = (function (t) {
          function i() {
            var e = t.call(this) || this;
            return (e.inner = new r.cb()), e;
          }
          return (
            e(i, t),
            (i.wc = function () {
              for (var t = [], e = 0; e < arguments.length; e++)
                t[e] = arguments[e];
              var r = t.length;
              if (r % 2 == 0) {
                for (var n = new i(), s = 0; s < r; s += 2)
                  n.put(t[s], t[s + 1]);
                return n;
              }
              throw new Error("unsupported operation");
            }),
            (i.prototype.put = function (t, e) {
              return this.inner.put(u.Fp(t), u.Fp(e));
            }),
            (i.prototype.get = function (t) {
              return this.inner.get(t);
            }),
            (i.prototype.remove = function (t) {
              return this.inner.remove(t);
            }),
            (i.prototype.Pp = function () {
              return this;
            }),
            (i.prototype.bb = function () {
              return this.inner.bb();
            }),
            (i.prototype.size = function () {
              return this.inner.size();
            }),
            (i.prototype.Lp = function (t, e, i) {
              var r = this.size();
              if (i > 0) {
                var n = "\r\n" + a.F.repeat(" ", (e + 1) * i);
                t.write("{"),
                  r > 0
                    ? (s.ya(this, function (s, o) {
                        return (
                          r--,
                          t.write(n),
                          o.key.Lp(t, e + 1, i),
                          t.write(": "),
                          o.value.Lp(t, e + 1, i),
                          r > 0 && t.write(","),
                          !0
                        );
                      }),
                      t.write("\r\n" + a.F.repeat(" ", e * i)),
                      t.write("}"))
                    : t.write("}");
              } else
                t.write("{"),
                  r > 0
                    ? (s.ya(this, function (n, s) {
                        return (
                          r--,
                          s.key.Lp(t, e + 1, i),
                          t.write(": "),
                          s.value.Lp(t, e + 1, i),
                          r > 0 && t.write(", "),
                          !0
                        );
                      }),
                      t.write("}"))
                    : t.write("}");
            }),
            (i.prototype.iterator = function () {
              return this.inner.entries();
            }),
            (i.prototype.$a = function () {
              var t = 1;
              return (
                s.Aa(this.inner.entries(), function (e, i) {
                  return (
                    (t = 31 * t + i.key.$a()), (t = 31 * t + i.value.$a()), !0
                  );
                }),
                t
              );
            }),
            (i.prototype.u = function (t) {
              if (t instanceof i && t.size() === this.size()) {
                for (
                  var e = this.inner.entries(), r = t.inner.entries();
                  e.za();

                ) {
                  var n = e.next(),
                    s = r.next();
                  if (!n.key.u(s.key)) return !1;
                  if (!n.value.u(s.value)) return !1;
                }
                return !0;
              }
              return !1;
            }),
            (i.prototype.toString = function () {
              return this.Jp();
            }),
            i
          );
        })(u);
        i.Wp = l;
        var v = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (
              (i.value = e),
              (i.display = e ? "true" : "false"),
              (i.Jb = e ? 1231 : 1237),
              i
            );
          }
          return (
            e(i, t),
            (i.prototype.Op = function () {
              return this.value;
            }),
            (i.prototype.Lp = function (t, e, i) {
              t.write(this.display);
            }),
            (i.prototype.$a = function () {
              return this.Jb;
            }),
            (i.prototype.u = function (t) {
              return this === t;
            }),
            (i.prototype.toString = function () {
              return this.display;
            }),
            (i.Hp = new i(!0)),
            (i.Ip = new i(!1)),
            i
          );
        })(u);
        (i.Xp = v), (i.Hp = v.Hp), (i.Ip = v.Ip);
        var b = (function (t) {
          function i() {
            var e = t.call(this) || this;
            return (e.inner = new Array()), e;
          }
          return (
            e(i, t),
            (i.wc = function () {
              for (var t = [], e = 0; e < arguments.length; e++)
                t[e] = arguments[e];
              for (var r = new i(), n = 0, s = t; n < s.length; n++) {
                var o = s[n];
                r.add(o);
              }
              return r;
            }),
            (i.prototype.add = function (t) {
              this.inner.push(u.Fp(t));
            }),
            (i.prototype.get = function (t) {
              var e = this.inner[t];
              if (void 0 === e) throw new Error("not found");
              return e;
            }),
            (i.prototype.Qp = function () {
              return this;
            }),
            (i.prototype.bb = function () {
              return (this.inner.length = 0);
            }),
            (i.prototype.size = function () {
              return this.inner.length;
            }),
            (i.prototype.Lp = function (t, e, i) {
              var r = this.inner.length;
              if (i > 0) {
                t.write("[");
                var n = "\r\n" + a.F.repeat(" ", (e + 1) * i);
                if (r > 0) {
                  for (var s = 0, o = this.inner; s < o.length; s++) {
                    var h = o[s];
                    r--, t.write(n), h.Lp(t, e + 1, i), r > 0 && t.write(",");
                  }
                  t.write("\r\n"),
                    t.write(a.F.repeat(" ", e * i)),
                    t.write("]");
                } else t.write("]");
              } else if ((t.write("["), r > 0)) {
                for (var u = 0, c = this.inner; u < c.length; u++) {
                  var h = c[u];
                  r--, h.Lp(t, e + 1, i), r > 0 && t.write(", ");
                }
                t.write("]");
              } else t.write("]");
            }),
            (i.prototype.iterator = function () {
              return s.Ea(this.inner);
            }),
            (i.prototype.$a = function () {
              for (var t = 1, e = 0, i = this.inner; e < i.length; e++) {
                t = 31 * t + i[e].$a();
              }
              return t;
            }),
            (i.prototype.u = function (t) {
              if (t instanceof i && t.size() === this.size()) {
                for (var e = this.size(), r = 0; r < e; r++)
                  if (!this.get(r).u(t.get(r))) return !1;
                return !0;
              }
              return !1;
            }),
            (i.prototype.toString = function () {
              return this.Jp();
            }),
            i
          );
        })(u);
        i.Yp = b;
      }
    ),
    i(
      "utils/json/AbstractJsonParser",
      [
        "require",
        "exports",
        "utils/CharStateMachine",
        "utils/json/JObject",
        "utils/io/UTF16WriteBuffer"
      ],
      function (t, i, r, n, s) {
        function o(t) {
          return (
            (48 <= t && t <= 57) ||
            (97 <= t && t <= 102) ||
            (65 <= t && t <= 70)
          );
        }
        function a(t) {
          return (
            (48 <= t && t <= 57) ||
            46 == t ||
            43 == t ||
            45 == t ||
            101 == t ||
            69 == t
          );
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var h = (function (t) {
          function i() {
            var e = t.call(this) || this;
            return (e.state = 0), (e.Zp = new Array()), (e.$p = null), e;
          }
          return (
            e(i, t),
            (i.prototype.finish = function () {
              this.up(0);
            }),
            (i.prototype.up = function (t) {
              switch (this.state) {
                case 0:
                  switch (t) {
                    case 34:
                      (this.state = 1), this._p();
                      break;
                    case 123:
                      return this.aq();
                    case 125:
                      return this.bq();
                    case 91:
                      return this.cq();
                    case 93:
                      return this.dq();
                    case 84:
                    case 116:
                      this.state = 5;
                      break;
                    case 70:
                    case 102:
                      this.state = 8;
                      break;
                    case 78:
                    case 110:
                      this.state = 12;
                      break;
                    case 32:
                    case 58:
                    case 44:
                    case 9:
                    case 13:
                    case 10:
                    case 0:
                      break;
                    default:
                      if (!((48 <= t && t <= 57) || 45 == t))
                        throw new Error("invalid json");
                      (this.state = 4), this._p(), this.eq(t);
                  }
                  break;
                case 1:
                  switch (t) {
                    case 34:
                      return (this.state = 0), this.fa(new n.Tp(this.fq()));
                    case 92:
                      this.state = 2;
                      break;
                    default:
                      this.eq(t);
                  }
                  break;
                case 2:
                  switch (t) {
                    case 98:
                      (this.state = 1), this.eq(8);
                      break;
                    case 102:
                      (this.state = 1), this.eq(12);
                      break;
                    case 114:
                      (this.state = 1), this.eq(13);
                      break;
                    case 110:
                      (this.state = 1), this.eq(10);
                      break;
                    case 116:
                      (this.state = 1), this.eq(9);
                      break;
                    case 117:
                      (this.state = 3), this._p();
                      break;
                    default:
                      (this.state = 1), this.eq(t);
                  }
                  break;
                case 3:
                  if (!o(t))
                    throw new Error("invalid unicode escape charactor");
                  if ((this.eq(t), 4 == this.gq().size())) {
                    var e = this.fq();
                    this.eq(parseInt(e, 16)), (this.state = 1);
                  }
                  break;
                case 4:
                  if (!a(t)) {
                    var i = parseFloat(this.fq());
                    return (
                      !!this.fa(new n.Up(i)) && ((this.state = 0), this.up(t))
                    );
                  }
                  this.eq(t);
                  break;
                case 5:
                  if (114 != t && 82 != t) throw new Error("invalid json");
                  this.state = 6;
                  break;
                case 6:
                  if (117 != t && 85 != t) throw new Error("invalid json");
                  this.state = 7;
                  break;
                case 7:
                  if (101 != t && 69 != t) throw new Error("invalid json");
                  (this.state = 0), this.fa(n.Hp);
                  break;
                case 8:
                  if (97 != t && 65 != t) throw new Error("invalid json");
                  this.state = 9;
                  break;
                case 9:
                  if (108 != t && 76 != t) throw new Error("invalid json");
                  this.state = 10;
                  break;
                case 10:
                  if (115 != t && 83 != t) throw new Error("invalid json");
                  this.state = 11;
                  break;
                case 11:
                  if (101 == t || 69 == t)
                    return (this.state = 0), this.fa(n.Ip);
                  throw new Error("invalid json");
                case 12:
                  if (117 != t && 85 != t) throw new Error("invalid json");
                  this.state = 13;
                  break;
                case 13:
                  if (108 != t && 76 != t) throw new Error("invalid json");
                  this.state = 14;
                  break;
                case 14:
                  if (108 == t || 76 == t)
                    return (this.state = 0), this.fa(n.Gp);
                  throw new Error("invalid json");
                default:
                  throw new Error("failed to parse JSON with bug.");
              }
              return !0;
            }),
            (i.prototype.fa = function (t) {
              return this.hq(t);
            }),
            (i.prototype._p = function () {
              var t = new s.Ep();
              this.Zp.push(t), (this.$p = t);
            }),
            (i.prototype.fq = function () {
              var t = this.Zp.pop();
              if (void 0 !== t) {
                var e = this.Zp[this.Zp.length - 1];
                return (this.$p = void 0 !== e ? e : null), t.toString();
              }
              throw new Error("invalid json");
            }),
            (i.prototype.eq = function (t) {
              if (null !== this.$p) return this.$p.write(t);
              throw new Error("invalid json");
            }),
            (i.prototype.gq = function () {
              var t = this.$p;
              if (null !== t) return t;
              throw new Error("invalid json");
            }),
            i
          );
        })(r.vp);
        i.iq = h;
      }
    ),
    i(
      "utils/json/JsonWalker",
      ["require", "exports", "utils/json/AbstractJsonParser"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (i.jq = new Array()), (i.kq = e), i;
          }
          return (
            e(i, t),
            (i.prototype.aq = function () {
              var t = this.jq,
                e = t.length - 1,
                i = t[e];
              return (
                "number" == typeof i && (t[e] = i + 1),
                this.jq.push(null),
                this.kq(this.jq, null)
              );
            }),
            (i.prototype.cq = function () {
              var t = this.jq,
                e = t.length - 1,
                i = t[e];
              return (
                "number" == typeof i && (t[e] = i + 1),
                this.jq.push(-1),
                this.kq(this.jq, null)
              );
            }),
            (i.prototype.bq = function () {
              var t = this.jq;
              if (null === t[t.length - 1]) {
                var e = this.kq(t, null);
                return this.lq(), e;
              }
              throw new Error("");
            }),
            (i.prototype.dq = function () {
              var t = this.jq;
              if ("number" == typeof t[t.length - 1]) {
                t[t.length - 1] = -1;
                var e = this.kq(t, null);
                return this.lq(), e;
              }
              throw new Error("");
            }),
            (i.prototype.hq = function (t) {
              var e = this.jq,
                i = e.length - 1,
                r = e[i];
              if (null === r) return (e[i] = t.toString()), !0;
              if ("number" == typeof r) return (e[i] = r + 1), this.kq(e, t);
              if ("string" == typeof r) {
                var n = this.kq(e, t);
                return (e[i] = null), n;
              }
              return this.kq(e, t);
            }),
            (i.prototype.lq = function () {
              var t = this.jq;
              t.pop(),
                "string" == typeof t[t.length - 1] && (t[t.length - 1] = null);
            }),
            i
          );
        })(r.iq);
        i.mq = n;
      }
    ),
    i("pcb/easyeda/EasyEDASetting", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          (this.nq = !1),
            (this.oq = !1),
            (this.pq = !1),
            (this.Sg = t),
            (this.Nf = e);
        }
        return t;
      })();
      e.qq = i;
    }),
    i("utils/UnitConverter", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          this.ratio = t / e;
        }
        return (
          (t.prototype.wrap = function (t) {
            return t * this.ratio;
          }),
          (t.rq = new t(1, 1)),
          t
        );
      })();
      e.sq = i;
    }),
    i(
      "pcb/primitives/Color",
      ["require", "exports", "utils/StringKit"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
          function t(t, e, i) {
            (this.tq = t),
              (this.uq = e),
              (this.vq = i),
              (this.Jb = 31 * (31 * t + e) + i);
          }
          return (
            (t.of = function (e) {
              return new t((e >> 16) & 255, (e >> 8) & 255, 255 & e);
            }),
            (t.prototype.toString = function () {
              return i.L.format("#%02X%02X%02X", this.tq, this.uq, this.vq);
            }),
            (t.prototype.$a = function () {
              return this.Jb;
            }),
            (t.prototype.u = function (e) {
              return (
                e instanceof t &&
                e.tq === this.tq &&
                e.uq === this.uq &&
                e.vq === this.vq
              );
            }),
            (t.Yi = t.of(0)),
            (t.Xi = t.of(16777215)),
            (t.Zi = t.of(16711680)),
            (t.$i = t.of(65280)),
            (t._i = t.of(255)),
            (t.wq = t.of(16776960)),
            t
          );
        })();
        e.aj = r;
      }
    ),
    i(
      "pcb/easyeda/AbstractDecoder",
      [
        "require",
        "exports",
        "utils/UnitConverter",
        "pcb/primitives/Color",
        "utils/Utils",
        "utils/StringKit",
        "utils/Check",
        "geometry/BBox2",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o, a, h) {
        function u(t) {
          return o.J.N(parseInt(t));
        }
        function c(t) {
          return o.J.N(parseFloat(t));
        }
        function p(t) {
          var e = v.exec(t);
          if (null !== e) {
            var i = e[1];
            if (3 === i.length) {
              var s = parseInt(n.F.repeat(i.charAt(0), 2), 16),
                o = parseInt(n.F.repeat(i.charAt(1), 2), 16),
                a = parseInt(n.F.repeat(i.charAt(2), 2), 16);
              return new r.aj(s, o, a);
            }
            if (6 === i.length) return r.aj.of(parseInt(i, 16));
            throw new Error("invalid color format");
          }
          return null;
        }
        function f(t) {
          return s.L.endsWith(t, "pt")
            ? b.wrap(c(t.substring(0, t.length - 2)))
            : c(s.L.endsWith(t, "px") ? t.substring(0, t.length - 2) : t);
        }
        function l(t, e) {
          return new h.Zb(c(t), -c(e));
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.xq = "EasyEDA"),
          (e.yq = /[^\-\d.]+/g);
        var v = /#([a-z0-9]{3,6})/i,
          b = new i.sq(13.88888888888889, 10);
        (e.zq = u), (e.Aq = c), (e.Bq = p), (e.Cq = f), (e.Dq = l);
        var y = (function () {
          function t(t, e, i) {
            (this.eb = new a.xc()), (this.Eq = t), (this.Sg = e), (this.Nf = i);
          }
          return (
            (t.prototype.Fq = function (t) {
              switch (t) {
                case "normal":
                case "lighter":
                  return 200;
                case "bold":
                case "bolder":
                  return 600;
                default:
                  try {
                    return c(t);
                  } catch (t) {
                    return this.Nf.qf(t.message), 200;
                  }
              }
            }),
            t
          );
        })();
        e.Gq = y;
      }
    ),
    i(
      "pcb/easyeda/LayerHelper",
      [
        "require",
        "exports",
        "pcb/primitives/pcb/PcbLayer",
        "utils/LinkedHashMap",
        "pcb/primitives/Color",
        "utils/Check"
      ],
      function (t, e, i, r, n, s) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = (function () {
          function t(t, e, i, r, n, s, o) {
            (this.id = t),
              (this.name = e),
              (this.color = i),
              (this.visible = r),
              (this.active = n),
              (this.Hq = s),
              (this.Iq = !0),
              (this.og = o);
          }
          return t;
        })();
        e.Jq = o;
        var a = (function () {
          function t(t, e) {
            (this.Kq = {}),
              (this.Lq = new r.cb()),
              this.define(1, "TopLayer", 16711680, !0, !0, !0, 4, 0),
              this.define(2, "BottomLayer", 255, !0, !1, !0, 7, 0),
              this.define(3, "TopSilkLayer", 16763904, !0, !1, !0, 1, 0),
              this.define(4, "BottomSilkLayer", 6736947, !0, !1, !0, 10, 0),
              this.define(5, "TopPasteMaskLayer", 8421504, !0, !1, !0, 3, 0),
              this.define(6, "BottomPasteMaskLayer", 8388608, !0, !1, !0, 8, 0),
              this.define(7, "TopSolderMaskLayer", 8388736, !0, !1, !0, 2, 0),
              this.define(
                8,
                "BottomSolderMaskLayer",
                11141375,
                !0,
                !1,
                !0,
                9,
                0
              ),
              this.define(9, "Ratlines", 6579455, !0, !1, !0, 14, 0),
              this.define(10, "BoardOutline", 16711935, !0, !1, !0, 11, 0),
              this.define(11, "Multi-Layer", 12632256, !0, !1, !0, 0, 0),
              this.define(12, "Document", 16777215, !0, !1, !0, 12, 0),
              this.define(13, "TopAssembly", 3394713, !0, !1, !0, 13, 1),
              this.define(14, "BottomAssembly", 5592575, !0, !1, !0, 13, 2),
              this.define(15, "Mechanical", 15737584, !1, !1, !1, 13, 3),
              this.define(19, "3DModel", 6737151, !1, !1, !1, 15, 0),
              this.define(21, "Inner1", 10066278, !1, !1, !1, 5, 1),
              this.define(22, "Inner2", 32768, !1, !1, !1, 5, 2),
              this.define(23, "Inner3", 65280, !1, !1, !1, 5, 3),
              this.define(24, "Inner4", 12357120, !1, !1, !1, 5, 4),
              this.define(25, "Inner5", 7396346, !1, !1, !1, 5, 5),
              this.define(26, "Inner6", 52326, !1, !1, !1, 5, 6),
              this.define(27, "Inner7", 10053375, !1, !1, !1, 5, 7),
              this.define(28, "Inner8", 8388736, !1, !1, !1, 5, 8),
              this.define(29, "Inner9", 32896, !1, !1, !1, 5, 9),
              this.define(30, "Inner10", 1413983, !1, !1, !1, 5, 10),
              this.define(31, "Inner11", 128, !1, !1, !1, 5, 11),
              this.define(32, "Inner12", 46080, !1, !1, !1, 5, 12),
              this.define(33, "Inner13", 3032918, !1, !1, !1, 5, 13),
              this.define(34, "Inner14", 10060847, !1, !1, !1, 5, 14),
              this.define(35, "Inner15", 16777130, !1, !1, !1, 5, 15),
              this.define(36, "Inner16", 10060847, !1, !1, !1, 5, 16),
              this.define(37, "Inner17", 3032918, !1, !1, !1, 5, 17),
              this.define(38, "Inner18", 3487231, !1, !1, !1, 5, 18),
              this.define(39, "Inner19", 8388796, !1, !1, !1, 5, 19),
              this.define(40, "Inner20", 4435551, !1, !1, !1, 5, 20),
              this.define(41, "Inner21", 12840142, !1, !1, !1, 5, 21),
              this.define(42, "Inner22", 7506296, !1, !1, !1, 5, 22),
              this.define(43, "Inner23", 3756095, !1, !1, !1, 5, 23),
              this.define(44, "Inner24", 815453, !1, !1, !1, 5, 24),
              this.define(45, "Inner25", 5933696, !1, !1, !1, 5, 25),
              this.define(46, "Inner26", 2855806, !1, !1, !1, 5, 26),
              this.define(47, "Inner27", 2333085, !1, !1, !1, 5, 27),
              this.define(48, "Inner28", 4568291, !1, !1, !1, 5, 28),
              this.define(49, "Inner29", 2186657, !1, !1, !1, 5, 29),
              this.define(50, "Inner30", 4547799, !1, !1, !1, 5, 30),
              this.define(51, "Inner31", 6908393, !1, !1, !1, 5, 31),
              this.define(52, "Inner32", 9464297, !1, !1, !1, 5, 32),
              this.define(99, "ComponentShapeLayer", 52428, !1, !1, !1, 13, 4),
              this.define(100, "LeadShapeLayer", 13408665, !1, !1, !1, 13, 5),
              (this.Nf = t),
              this.Mq(e);
          }
          return (
            (t.prototype.Mq = function (t) {
              var e = 20;
              if (null !== t && t.length > 0)
                for (var i = 0, r = t; i < r.length; i++) {
                  var n = r[i];
                  if (5 === n.type || 6 === n.type) {
                    e++;
                    var s = this.Kq[e];
                    (s.Iq = 5 === n.type),
                      this.Lq.put(n, s),
                      this.Nf.hf("alias %s to %s", n, s.og);
                  }
                }
            }),
            (t.prototype.mf = function (t) {
              return s.J.U(this.Kq[t]);
            }),
            (t.prototype.lf = function (t) {
              var e = this.Lq.get(t);
              if (null !== e) return e;
              switch (t.type) {
                case 0:
                  return this.Kq[11];
                case 14:
                  return this.Kq[9];
                case 7:
                  return this.Kq[2];
                case 8:
                  return this.Kq[6];
                case 10:
                  return this.Kq[4];
                case 9:
                  return this.Kq[8];
                case 12:
                  return this.Kq[12];
                case 5:
                  return this.mf(Math.min(20 + t.order, 52));
                case 6:
                  var i = this.mf(Math.min(20 + t.order, 52));
                  return (i.Iq = !1), i;
                case 13:
                  return this.Kq[15];
                case 11:
                  return this.Kq[10];
                case 15:
                  return this.Kq[19];
                case 4:
                  return this.Kq[1];
                case 3:
                  return this.Kq[5];
                case 1:
                  return this.Kq[3];
                case 2:
                  return this.Kq[7];
                default:
                  return (
                    this.Nf.nf(
                      "unsupported layer type %d, use Document instead",
                      t.type
                    ),
                    this.Kq[12]
                  );
              }
            }),
            (t.prototype.encode = function (t) {
              var e = this.Kq[t];
              return null === e
                ? (this.Nf.nf(
                    "unknown layer id %d, use Document layer instead",
                    t
                  ),
                  this.Kq[12].og)
                : 5 === e.og.type
                ? e.Iq
                  ? e.og
                  : new i.mg(6, e.og.order)
                : e.og;
            }),
            (t.prototype.define = function (t, e, r, s, a, h, u, c) {
              var p = new i.mg(u, c),
                f = new o(t, e, n.aj.of(r), s, a, h, p);
              (this.Kq[t] = f), this.Lq.put(p, f);
            }),
            (t.prototype.iterator = function () {
              return this.Lq.values();
            }),
            t
          );
        })();
        e.Nq = a;
      }
    ),
    i(
      "pcb/easyeda/CommandDecoder",
      ["require", "exports", "utils/Check", "utils/Utils"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t(t, e) {
            (this.index = 0), (this.src = i.J.T(t)), (this.Oq = i.J.T(e));
          }
          return (
            (t.prototype.next = function () {
              if (this.index >= this.src.length) return null;
              var t = this.src.indexOf(this.Oq, this.index),
                e = void 0;
              return (
                t < 0
                  ? ((e = this.src.substring(this.index)),
                    (this.index = this.src.length + this.Oq.length))
                  : ((e = this.src.substring(this.index, t)),
                    (this.index = t + this.Oq.length)),
                e
              );
            }),
            (t.prototype.Pq = function () {
              var t = this.next();
              if (null !== t) return t;
              throw new Error("invalid state");
            }),
            (t.prototype.Qq = function (t) {
              void 0 === t && (t = "");
              var e = this.next();
              return null === e ? t : ((e = e.trim()), i.J.I(e) ? t : r.F.s(e));
            }),
            t
          );
        })();
        e.Rq = n;
      }
    ),
    i(
      "utils/svg/PathDataDec",
      [
        "require",
        "exports",
        "utils/Itor",
        "geometry/Polyline",
        "geometry/Bezier",
        "geometry/Line",
        "utils/CharStateMachine",
        "utils/Logger",
        "geometry/Arc",
        "utils/io/UTF16WriteBuffer",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h, u, c, p) {
        function f(t) {
          return (97 <= t && t <= 122) || (65 <= t && t <= 90);
        }
        function l(t) {
          var e = parseFloat(t);
          if (isFinite(e)) return e;
          throw new Error("expect number");
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var v = (function (t) {
          function i(e, i) {
            void 0 === i && (i = h.vf.uf);
            var r = t.call(this) || this;
            return (
              (r.buffer = new c.Ep()),
              (r.group = new Array()),
              (r.Sq = p.Zb.oa),
              (r.Tq = p.Zb.oa),
              (r.Uq = 0),
              (r.Vq = 0),
              (r.Wq = !1),
              (r.Xq = !1),
              (r.x1 = Number.NaN),
              (r.y1 = Number.NaN),
              (r.x2 = Number.NaN),
              (r.y2 = Number.NaN),
              (r.x = Number.NaN),
              (r.y = Number.NaN),
              (r.rx = Number.NaN),
              (r.ry = Number.NaN),
              (r.rotation = Number.NaN),
              (r.zd = 1),
              (r.Nf = i),
              (r.Yq = e),
              r
            );
          }
          return (
            e(i, t),
            (i.prototype.fa = function (t) {
              return this.Yq(t);
            }),
            (i.prototype.up = function (t) {
              switch ((this.Nf.hf("%c|%s", t, this.Uq), this.Uq)) {
                case 0:
                  return (
                    !!a.op(t) ||
                    ((48 <= t && t <= 57) || 45 === t || 46 === t || 43 === t
                      ? (this.Zq(t), (this.Uq = 1), !0)
                      : f(t)
                      ? this.$q(String.fromCharCode(t))
                      : (this.Nf.nf("unknow letter %c", t), !0))
                  );
                case 1:
                  return (48 <= t && t <= 57) || 46 === t
                    ? (this.Zq(t), !0)
                    : 101 === t || 69 === t
                    ? (this.Zq(t), (this.Uq = 2), !0)
                    : !!this.$q(this._q()) && ((this.Uq = 0), this.up(t));
                case 2:
                  return 48 <= t && t <= 57
                    ? (this.Zq(t), !0)
                    : 45 === t || 43 === t
                    ? (this.Zq(t), (this.Uq = 3), !0)
                    : !!this.$q(this._q()) && ((this.Uq = 0), this.up(t));
                case 3:
                  return 48 <= t && t <= 57
                    ? (this.Zq(t), !0)
                    : !!this.$q(this._q()) && ((this.Uq = 0), this.up(t));
                default:
                  return !0;
              }
            }),
            (i.prototype.finish = function () {
              this.up(32), this.ar();
            }),
            (i.prototype.$q = function (t) {
              switch (
                (this.Nf.hf("%s|%s|%s|%s", t, this.Vq, this.Tq, this.Sq),
                this.Vq)
              ) {
                case 0:
                  switch (t) {
                    case "M":
                      (this.Wq = !0), (this.Vq = 1);
                      break;
                    case "m":
                      (this.Wq = !1), (this.Vq = 1);
                      break;
                    case "L":
                      (this.Wq = !0), (this.Vq = 3);
                      break;
                    case "l":
                      (this.Wq = !1), (this.Vq = 3);
                      break;
                    case "H":
                      (this.Wq = !0), (this.Vq = 5);
                      break;
                    case "h":
                      (this.Wq = !1), (this.Vq = 5);
                      break;
                    case "V":
                      (this.Wq = !0), (this.Vq = 6);
                      break;
                    case "v":
                      (this.Wq = !1), (this.Vq = 6);
                      break;
                    case "z":
                    case "Z":
                      this.group.push(new o.bd(this.Tq, this.Sq));
                      var e = this.ar();
                      return (this.Tq = this.Sq), e;
                    case "C":
                      (this.Wq = !0), (this.Vq = 7);
                      break;
                    case "c":
                      (this.Wq = !1), (this.Vq = 7);
                      break;
                    case "A":
                      (this.Wq = !0), (this.Vq = 13);
                      break;
                    case "a":
                      (this.Wq = !1), (this.Vq = 13);
                      break;
                    case "Q":
                      (this.Wq = !0), (this.Vq = 20);
                      break;
                    case "q":
                      (this.Wq = !1), (this.Vq = 20);
                      break;
                    default:
                      this.Nf.nf("unknow %s", t);
                  }
                  return !0;
                case 1:
                  var i = this.ar();
                  return (this.x = l(t)), (this.Vq = 2), i;
                case 2:
                  this.y = -l(t);
                  var r = void 0;
                  return (
                    (r = this.Wq
                      ? new p.Zb(this.x, this.y)
                      : this.Tq.Qb(this.x, this.y)),
                    (this.Tq = r),
                    (this.Sq = r),
                    (this.Vq = 3),
                    !0
                  );
                case 3:
                  return (
                    (this.x = parseFloat(t)),
                    isFinite(this.x)
                      ? ((this.Vq = 4), !0)
                      : ((this.Vq = 0), this.$q(t))
                  );
                case 4:
                  this.y = -l(t);
                  var r = void 0;
                  return (
                    (r = this.Wq
                      ? new p.Zb(this.x, this.y)
                      : this.Tq.Qb(this.x, this.y)),
                    this.group.push(new o.bd(this.Tq, r)),
                    (this.Tq = r),
                    (this.Vq = 3),
                    !0
                  );
                case 5:
                  if (((this.x = parseFloat(t)), isFinite(this.x))) {
                    var r = void 0;
                    return (
                      (r = this.Wq
                        ? new p.Zb(this.x, this.Tq.y)
                        : this.Tq.Qb(this.x, 0)),
                      this.group.push(new o.bd(this.Tq, r)),
                      (this.Tq = r),
                      !0
                    );
                  }
                  return (this.Vq = 0), this.$q(t);
                case 6:
                  if (((this.y = parseFloat(t)), isFinite(this.y))) {
                    this.y = -this.y;
                    var r = void 0;
                    return (
                      (r = this.Wq
                        ? new p.Zb(this.Tq.x, this.y)
                        : this.Tq.Qb(0, this.y)),
                      this.group.push(new o.bd(this.Tq, r)),
                      (this.Tq = r),
                      !0
                    );
                  }
                  return (this.Vq = 0), this.$q(t);
                case 7:
                  return (
                    (this.x1 = parseFloat(t)),
                    isFinite(this.x1)
                      ? ((this.Vq = 8), !0)
                      : ((this.Vq = 0), this.$q(t))
                  );
                case 8:
                  return (this.y1 = -l(t)), (this.Vq = 9), !0;
                case 9:
                  return (this.x2 = l(t)), (this.Vq = 10), !0;
                case 10:
                  return (this.y2 = -l(t)), (this.Vq = 11), !0;
                case 11:
                  return (this.x = l(t)), (this.Vq = 12), !0;
                case 12:
                  this.y = -l(t);
                  var n = void 0,
                    a = void 0,
                    h = void 0;
                  return (
                    this.Wq
                      ? ((n = new p.Zb(this.x1, this.y1)),
                        (a = new p.Zb(this.x2, this.y2)),
                        (h = new p.Zb(this.x, this.y)))
                      : ((n = this.Tq.Qb(this.x1, this.y1)),
                        (a = this.Tq.Qb(this.x2, this.y2)),
                        (h = this.Tq.Qb(this.x, this.y))),
                    this.group.push(new s.hd([this.Tq, n, a, h])),
                    (this.Tq = h),
                    (this.Vq = 7),
                    !0
                  );
                case 13:
                  return (
                    (this.rx = parseFloat(t)),
                    isFinite(this.rx)
                      ? ((this.Vq = 14), !0)
                      : ((this.Vq = 0), this.$q(t))
                  );
                case 14:
                  return (this.ry = l(t)), (this.Vq = 15), !0;
                case 15:
                  return (this.rotation = l(t)), (this.Vq = 16), !0;
                case 16:
                  return (this.Xq = 1 === l(t)), (this.Vq = 17), !0;
                case 17:
                  return (this.zd = 1 === l(t) ? 0 : 1), (this.Vq = 18), !0;
                case 18:
                  return (this.x = l(t)), (this.Vq = 19), !0;
                case 19:
                  this.y = -l(t);
                  var h = void 0;
                  return (
                    (h = this.Wq
                      ? new p.Zb(this.x, this.y)
                      : this.Tq.Qb(this.x, this.y)),
                    this.group.push(
                      u.ad.fd(this.Tq, h, this.rx, this.ry, this.Xq, this.zd)
                    ),
                    (this.Tq = h),
                    (this.Vq = 13),
                    !0
                  );
                case 20:
                  return (
                    (this.x1 = parseFloat(t)),
                    isFinite(this.x1)
                      ? ((this.Vq = 21), !0)
                      : ((this.Vq = 0), this.$q(t))
                  );
                case 21:
                  return (this.y1 = -l(t)), (this.Vq = 22), !0;
                case 22:
                  return (this.x = l(t)), (this.Vq = 23), !0;
                case 23:
                  this.y = -l(t);
                  var n = void 0,
                    h = void 0;
                  return (
                    this.Wq
                      ? ((n = new p.Zb(this.x1, this.y1)),
                        (h = new p.Zb(this.x, this.y)))
                      : ((n = this.Tq.Qb(this.x1, this.y1)),
                        (h = this.Tq.Qb(this.x, this.y))),
                    this.group.push(new s.hd([this.Tq, n, n, h])),
                    (this.Tq = h),
                    (this.Vq = 20),
                    !0
                  );
                default:
                  return this.Nf.nf("unsupported parse state %s", this.Vq), !0;
              }
            }),
            (i.prototype.Zq = function (t) {
              this.buffer.write(t);
            }),
            (i.prototype._q = function () {
              var t = this.buffer.toString();
              return this.buffer.clear(), t;
            }),
            (i.prototype.ar = function () {
              if (0 === this.group.length) return !0;
              var t = n.Zc.fd(r.Ea(this.group));
              return (this.group.length = 0), this.fa(t);
            }),
            (i.prototype.br = function (t) {
              throw t;
            }),
            i
          );
        })(a.vp);
        i.cr = v;
      }
    ),
    i("utils/Statistic", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t() {}
        return (
          (t.dr = function (e) {
            return t.er(e, 0, e.length);
          }),
          (t.er = function (e, i, r) {
            for (
              var n = i + r, s = t.gr(e, i, r), o = s / r, a = 0, h = i;
              h < n;
              h++
            )
              a += Math.abs(e[h] - o);
            return (a /= r);
          }),
          (t.hr = function (e) {
            return t.gr(e, 0, e.length);
          }),
          (t.gr = function (t, e, i) {
            for (var r = e + i, n = 0, s = e; s < r; s++) n += t[s];
            return n;
          }),
          t
        );
      })();
      e.ir = i;
    }),
    i(
      "pcb/easyeda/PcbDecoder",
      [
        "require",
        "exports",
        "pcb/easyeda/AbstractDecoder",
        "utils/Check",
        "pcb/primitives/pcb/PcbString",
        "pcb/easyeda/LayerHelper",
        "pcb/primitives/Rules",
        "pcb/easyeda/CommandDecoder",
        "pcb/primitives/pcb/PcbLayer",
        "utils/svg/PathDataDec",
        "pcb/primitives/pcb/PcbRegion",
        "pcb/primitives/pcb/PcbPlaneZone",
        "geometry/Matrix3",
        "geometry/utils/Angle",
        "pcb/primitives/pcb/PcbModel",
        "geometry/Polyline",
        "geometry/PolylineGroup",
        "pcb/primitives/pcb/PcbImage",
        "utils/StringKit",
        "pcb/primitives/pcb/PcbTrack",
        "pcb/primitives/Font",
        "utils/Utils",
        "pcb/primitives/pcb/PcbPad",
        "geometry/Line",
        "pcb/primitives/pcb/PcbVia",
        "pcb/primitives/pcb/PcbArc",
        "geometry/Arc",
        "pcb/primitives/pcb/PcbPolygonPour",
        "pcb/primitives/pcb/PcbFill",
        "utils/NativeMap",
        "geometry/utils/Bounding",
        "geometry/utils/Convex",
        "utils/Statistic",
        "pcb/primitives/pcb/PcbDocument",
        "pcb/primitives/pcb/PcbComponent",
        "geometry/BBox2",
        "geometry/Vector3",
        "geometry/Vector2"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I,
        L,
        P,
        _,
        M,
        C,
        F,
        j
      ) {
        function D(t) {
          return new S.wo();
        }
        function B() {
          return [];
        }
        function U(t, e) {
          return n.J.I(t) ? e : t.charAt(0);
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var Q = /(.*?`*)`|([^`]+)/g,
          X = (function (t) {
            function i(e, i, n) {
              var s = t.call(this, e, i.Sg, n) || this;
              return (
                (s._n = new _._g()),
                (s.jr = new Array()),
                (s.kr = new S.wo()),
                (s.lr = new S.wo()),
                (s.mr = null),
                (s.nr = null),
                (s.or = !1),
                (s.pr = !1),
                (s.qr = null),
                (s.rr = new o.Nq(n, [])),
                (s.ao = i),
                (s._n.Sg = s.Sg),
                (s._n.Tg = r.xq),
                (s._n.scale = 10),
                s
              );
            }
            return (
              e(i, t),
              (i.prototype.kq = function (t, e) {
                this.Nf.if(e);
                try {
                  if ("shape" === t[0]) this.jr.push(e.Mp());
                  else if ("layers" === t[0]) this.sr(e.Mp());
                  else if ("DRCRULE" === t[0]) {
                    var i = t[1],
                      r = t[2];
                    "string" == typeof i &&
                      "string" == typeof r &&
                      ("nets" === r
                        ? this.lr.ab(i, B).push(e.Mp())
                        : this.kr.ab(i, D).put(r, e.Np()));
                  }
                } catch (t) {
                  this.Nf.sf(t);
                }
                return !0;
              }),
              (i.prototype.finish = function () {
                for (var t = this, e = 0, i = this.jr; e < i.length; e++) {
                  var r = i[e];
                  this._n.Og.push.apply(this._n.Og, this.co(r));
                }
                if (
                  (this.kr.iterator(function (e, i) {
                    var r,
                      n = t.lr.get(e);
                    if (void 0 === n) r = new a.xg([]);
                    else if (1 === n.length) r = new a.yg(n[0]);
                    else {
                      for (
                        var s = new Array(), o = 0, h = n;
                        o < h.length;
                        o++
                      ) {
                        var u = h[o];
                        s.push(new a.yg(u));
                      }
                      r = new a.xg(s);
                    }
                    var c = i.get("clearance");
                    return (
                      void 0 !== c &&
                        ("Default" === e
                          ? t._n.rules.push(new a.Dg(new a.Ag(), c))
                          : t._n.rules.unshift(new a.Dg(r, c))),
                      !0
                    );
                  }),
                  this.ao.pq)
                ) {
                  for (
                    var n = new C.xc(), o = 0, h = this._n.Og;
                    o < h.length;
                    o++
                  ) {
                    var c = h[o];
                    n.pc(c.eb());
                  }
                  if (n.valid()) {
                    var p = n.wc(),
                      f = new M.Qg(),
                      l = this.Eq.c_para;
                    f.pattern = l.uo("package", "");
                    var v = l.uo("pre", "U?");
                    (f.Mg = new s.Jg(
                      "",
                      u.mg.ag,
                      p.Lc(),
                      0,
                      v,
                      new E.Hg("", 1, 0.1),
                      !1
                    )),
                      (f.Kg = !0),
                      (f.Ng = new s.Jg(
                        "",
                        u.mg.ag,
                        p.Nc(),
                        0,
                        this._n.Sg || "",
                        new E.Hg("", 1, 0.1),
                        !1
                      )),
                      (f.Lg = !0),
                      (f.location = p.Oc()),
                      (f.og = u.mg.dg),
                      (f.orientation = 0),
                      O.F.t(f.Og, this._n.Og),
                      (this._n.Og.length = 0),
                      this._n.Og.push(f.wc());
                  }
                }
                this.Eq.fa(this._n.wc());
              }),
              (i.prototype.sr = function (t) {
                var e = new h.Rq(t, "~"),
                  i = parseInt(e.Qq());
                if (!isFinite(i)) return [];
                var r = e.Qq(),
                  n = (e.Qq(), "true" === e.Qq("false").toLowerCase()),
                  s = "true" === e.Qq("false").toLowerCase(),
                  o = "true" === e.Qq("false").toLowerCase();
                e.Qq();
                var a = "plane" !== e.Qq("signal").toLowerCase(),
                  c = this.rr.mf(i);
                null !== c
                  ? (c.name !== r &&
                      this.Nf.nf("layer %s not matched name %s", t, c.name),
                    (c.visible = n),
                    (c.active = s),
                    (c.Hq = o),
                    (c.Iq = a),
                    c.Hq &&
                      (c.Iq
                        ? this._n.$g(c.og)
                        : this._n.$g(new u.mg(6, c.og.order))))
                  : this.Nf.nf("layer %s not supported", t);
              }),
              (i.prototype.co = function (t) {
                var e,
                  i = t.indexOf("~");
                e = i >= 0 ? t.substring(0, i) : t;
                try {
                  switch (e) {
                    case "TRACK":
                      return this.tr(t);
                    case "TEXT":
                      return this.ur(t);
                    case "LIB":
                      return this.vr(t);
                    case "PAD":
                      return this.wr(t);
                    case "VIA":
                      return this.xr(t);
                    case "HOLE":
                      return this.yr(t);
                    case "ARC":
                      return this.zr(t);
                    case "CIRCLE":
                      return this.Ar(t);
                    case "RECT":
                      return this.Br(t);
                    case "COPPERAREA":
                      return this.Cr(t);
                    case "SOLIDREGION":
                      return this.Dr(t);
                    case "SVGNODE":
                      return this.Er(t);
                    case "PLANEZONE":
                      return this.Fr(t);
                    case "DIMENSION":
                      return this.Gr(t);
                    case "PROTRACTOR":
                      return this.Hr(t);
                    default:
                      return this.Nf.pf("unsupported command " + e), [];
                  }
                } catch (t) {
                  return this.Nf.sf(t), [];
                }
              }),
              (i.prototype.Gr = function (t) {
                var e = new h.Rq(t, "~");
                e.next();
                var i = this.rr.encode(r.zq(e.Qq())),
                  s = e.next();
                e.Qq("");
                e.next(), e.next(), e.next();
                var o = r.Aq(e.Qq("0.4"));
                if (!n.J.I(s)) {
                  var a = new M.Qg().Pg(),
                    u = new C.xc();
                  return (
                    new c.cr(function (t) {
                      u.pc(t.eb());
                      for (var e = 0, r = t.jd; e < r.length; e++) {
                        var n = r[e];
                        n instanceof A.bd
                          ? a.Og.push(
                              new m.tg("", i, n.start(), n.end(), o, !1)
                            )
                          : n instanceof T.ad &&
                            a.Og.push(new q.ug("", i, n, o, !1));
                      }
                      return !0;
                    }).parse(s),
                    (a.og = i),
                    (a.location = u.wc().Oc()),
                    [a.wc()]
                  );
                }
                return [];
              }),
              (i.prototype.Hr = function (t) {
                var e = new h.Rq(t, "~");
                e.next();
                var i = this.rr.encode(r.zq(e.Qq())),
                  s = e.next(),
                  o = r.Aq(e.Qq("0.4"));
                if (!n.J.I(s)) {
                  var a = new M.Qg().Pg(),
                    u = new C.xc();
                  return (
                    new c.cr(function (t) {
                      u.pc(t.eb());
                      for (var e = 0, r = t.jd; e < r.length; e++) {
                        var n = r[e];
                        n instanceof A.bd
                          ? a.Og.push(
                              new m.tg("", i, n.start(), n.end(), o, !1)
                            )
                          : n instanceof T.ad &&
                            a.Og.push(new q.ug("", i, n, o, !1));
                      }
                      return !0;
                    }).parse(s),
                    (a.og = i),
                    (a.location = u.wc().Oc()),
                    [a.wc()]
                  );
                }
                return [];
              }),
              (i.prototype.Fr = function (t) {
                var e = new h.Rq(t, "#@$"),
                  i = new h.Rq(e.Pq(), "~");
                i.Qq();
                var s = this.rr.encode(r.zq(i.Qq())),
                  o = i.Qq(),
                  a = "none" === i.Qq("none").toLowerCase();
                (i = new h.Rq(e.Qq(), "~")), i.Qq();
                var u = new Array(),
                  l = i.Qq();
                return (
                  n.J.I(l) ||
                    (this.Nf.hf("plane zone in layer %s", s),
                    new c.cr(function (t) {
                      return (
                        a
                          ? u.push(new p.rg(o, s, 1, t))
                          : u.push(new f.Jn(o, s, t)),
                        !0
                      );
                    }).parse(l)),
                  u
                );
              }),
              (i.prototype.Er = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = JSON.parse(e.Qq());
                if (void 0 === i) throw new Error("invalid svgnode json");
                var n = i["attrs"],
                  s = this.rr.encode(r.zq(n["layerid"]));
                if (this.Ir(s) && 1 === i["nodeType"]) {
                  if ("outline3D" === n["c_etype"]) {
                    var o,
                      a,
                      c,
                      p = n["c_origin"].split(","),
                      f = r.Aq(p[0]),
                      y = -r.Aq(p[1]),
                      d = r.Aq(n["z"]),
                      g = n["c_rotation"].split(","),
                      w = r.Aq(g[0]),
                      m = r.Aq(g[1]),
                      E = r.Aq(g[2]),
                      O = r.Aq(n["c_width"]),
                      x = r.Aq(n["c_height"]);
                    if (null !== this.qr) {
                      if (
                        !this.qr.og ||
                        null === this.qr.location ||
                        null === this.qr.orientation
                      )
                        throw new Error("component is not inited correctly");
                      (a = this.qr.location),
                        (o = this.qr.og),
                        (c = this.qr.orientation);
                    } else (a = j.Zb.oa), (o = u.mg.dg), (c = 0);
                    var A = void 0;
                    7 === o.type
                      ? ((A = l.va.Vb(-c).Xb(l.va.mc)), (E -= 180))
                      : (A = l.va.Vb(-c));
                    var N = new j.Zb(f - a.x, y - a.y).Xb(A),
                      q = new F.pa(N.x, N.y, d),
                      T = new F.pa(w, m, v.Ub.ec(E, A));
                    return [new b.Hn(o, a, c, q, T, O, x, n["uuid"])];
                  }
                  var k = new Array();
                  if ((this.Jr(i, s, k), "childNodes" in i))
                    for (var R = 0, S = i["childNodes"]; R < S.length; R++) {
                      var I = S[R];
                      this.Jr(I, s, k);
                    }
                  return k;
                }
                return [];
              }),
              (i.prototype.Jr = function (t, e, i) {
                try {
                  var r = t["attrs"]["d"];
                  if (void 0 !== r) {
                    var n = new Array();
                    new c.cr(function (t) {
                      return n.push(t), !0;
                    }).parse(r),
                      n.length > 0 && i.push(new g.Ln("", "", e, n));
                  }
                } catch (t) {
                  this.Nf.pf(t);
                }
              }),
              (i.prototype.tr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                for (
                  var i = r.Aq(e.Qq()),
                    n = this.rr.encode(r.zq(e.Qq())),
                    s = e.Qq(),
                    o = w.L.split(r.yq, e.Qq()),
                    a = null,
                    u = new Array(),
                    c = 0;
                  c < o.length - 1;
                  c += 2
                ) {
                  var p = r.Dq(o[c + 0], o[c + 1]);
                  null !== a && u.push(new m.tg(s, n, a, p, i, 11 === n.type)),
                    (a = p);
                }
                return u;
              }),
              (i.prototype.ur = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = U(e.Qq(), "L"),
                  o = r.Dq(e.Qq(), e.Qq()),
                  a = r.Aq(e.Qq()),
                  p = r.Aq(e.Qq()),
                  f = "1" === e.Qq();
                f = !1;
                var v = this.rr.encode(r.zq(e.Qq()));
                u.mg.$f(v.type) && (f = !f);
                var b = e.Qq(),
                  y = r.Aq(e.Qq("45")),
                  d = e.Qq().split("\\n").join("\n").trim(),
                  w = e.Qq(),
                  O = "none" !== e.Qq();
                e.Qq();
                var x = e.Qq("Default");
                x = "Default" === x ? "" : x;
                var N = new E.Hg(x, y, a),
                  k = !n.J.I(x) || !/^[\x00-\x7F]*$/.test(d);
                if (!n.J.I(w) && this.Ir(v)) {
                  if (this.ao.nq) {
                    if (O) {
                      if (k) {
                        var R = new Array();
                        return (
                          new c.cr(function (t) {
                            return R.push(t), !0;
                          }).parse(w),
                          R.length > 0 ? [new g.Ln("", b, v, R)] : []
                        );
                      }
                      if (this.ao.oq) {
                        var S = new Array();
                        return (
                          new c.cr(function (t) {
                            for (var e = 0, i = t.jd; e < i.length; e++) {
                              var r = i[e],
                                n = r.stroke(N.weight, 1, 0);
                              S.push(n);
                            }
                            return !0;
                          }).parse(w),
                          S.length > 0 ? [new g.Ln("", b, v, S)] : []
                        );
                      }
                      var I = new M.Qg().Pg();
                      return (
                        (I.og = v),
                        (I.location = o),
                        new c.cr(function (t) {
                          for (var e = 0, i = t.jd; e < i.length; e++) {
                            var r = i[e];
                            r instanceof A.bd
                              ? I.Og.push(
                                  new m.tg(
                                    b,
                                    v,
                                    r.start(),
                                    r.end(),
                                    N.weight,
                                    !1
                                  )
                                )
                              : r instanceof T.ad &&
                                I.Og.push(new q.ug(b, v, r, N.weight, !1));
                          }
                          return !0;
                        }).parse(w),
                        [I.wc()]
                      );
                    }
                    return [];
                  }
                  p = this.Kr(w, d, o, N, f);
                }
                n.J.I(x) && (o = o.Qb(0, -y / 2).Xb(l.va.Vb(p).ta(o)));
                var L = new s.Jg(b, v, o, p, d, N, f);
                switch (i) {
                  case "P":
                    (this.mr = L), (this.or = O);
                    break;
                  case "N":
                    (this.nr = L), (this.pr = O);
                }
                return [L];
              }),
              (i.prototype.Kr = function (t, e, i, r, n) {
                var s = new Array();
                new c.cr(function (t) {
                  for (var e = 0, i = t.jd; e < i.length; e++) {
                    var r = i[e];
                    O.F.t(s, r.points(1));
                  }
                  return !0;
                }).parse(t);
                for (
                  var o = I.ti.si(s),
                    a = o[0],
                    h = o[1],
                    u = o[2],
                    p = o[3],
                    f = Number.POSITIVE_INFINITY,
                    l = null,
                    b = 0,
                    y = o;
                  b < y.length;
                  b++
                ) {
                  var d = y[b],
                    g = d.Fb(i);
                  g < f && ((l = d), (f = g));
                }
                if (null === l) throw new Error();
                var w;
                if (a.u(l)) w = p.Fb(a) > h.Fb(a) ? p.Sb(a) : h.Sb(a);
                else if (h.u(l)) w = a.Fb(h) > u.Fb(h) ? a.Sb(h) : u.Sb(h);
                else if (u.u(l)) w = p.Fb(u) > h.Fb(u) ? p.Sb(u) : h.Sb(u);
                else {
                  if (!p.u(l)) throw new Error();
                  w = a.Fb(p) > u.Fb(p) ? a.Sb(p) : u.Sb(p);
                }
                return (
                  n && (w -= 180),
                  e.length <= 1 && (w += 90),
                  (w = v.Ub.$b(Math.round(w)))
                );
              }),
              (i.prototype.vr = function (t) {
                try {
                  for (var e = new h.Rq(t, "#@$"); ; ) {
                    var i = e.next();
                    if (null === i || "" === i) break;
                    w.L.startsWith(i, "LIB")
                      ? ((this.qr = this.Lr(i)),
                        (this.mr = null),
                        (this.or = !0),
                        (this.nr = null),
                        (this.pr = !0))
                      : null !== this.qr && O.F.t(this.qr.Og, this.co(i));
                  }
                  if (null !== this.qr) {
                    var r = new s.Jg(
                      this.qr.pattern || "",
                      u.mg.jg,
                      this.qr.location || j.Zb.oa,
                      this.qr.orientation,
                      this.qr.pattern || "",
                      new E.Hg("", 1, 1),
                      !1
                    );
                    return (
                      null !== this.mr
                        ? ((this.qr.Kg = this.or),
                          (this.qr.Mg = this.mr),
                          O.F.remove(this.qr.Og, this.mr))
                        : ((this.qr.Kg = !1), (this.qr.Mg = r)),
                      null !== this.nr
                        ? ((this.qr.Lg = this.pr),
                          (this.qr.Ng = this.nr),
                          O.F.remove(this.qr.Og, this.nr))
                        : ((this.qr.Lg = !1), (this.qr.Ng = r)),
                      [this.qr.wc()]
                    );
                  }
                  return [];
                } finally {
                  this.qr = null;
                }
              }),
              (i.prototype.Lr = function (t) {
                var e = new M.Qg();
                e.Lg = !1;
                var i = new h.Rq(t, "~");
                i.Qq(), (e.location = r.Dq(i.Qq(), i.Qq()));
                for (var n = new S.wo(), s = null, o = i.Qq(); ; ) {
                  var a = Q.exec(o);
                  if (null === a) break;
                  var u = a[1];
                  null === u && (u = a[2]),
                    null === s ? (s = u) : (n.put(s, u), (s = null));
                }
                return (
                  (e.orientation = r.Aq(i.Qq("0"))),
                  i.Qq(),
                  i.Qq(),
                  (e.og = this.rr.encode(r.zq(i.Qq("1")))),
                  (e.pattern = n.get("package") || ""),
                  e
                );
              }),
              (i.prototype.Mr = function (t) {
                if (n.J.I(t)) return [];
                for (var e = new h.Rq(t, " "), i = new Array(), s = NaN; ; ) {
                  var o = e.Qq();
                  if (n.J.I(o)) break;
                  var a = r.Aq(o);
                  isNaN(s) ? (s = a) : (i.push(new j.Zb(s, -a)), (s = NaN));
                }
                return (
                  i.length >= 2 && !i[0].u(i[i.length - 1]) && i.push(i[0]), i
                );
              }),
              (i.prototype.wr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i,
                  s = e.Qq();
                switch (s) {
                  case "ELLIPSE":
                  case "OVAL":
                    i = 0;
                    break;
                  case "POLYGON":
                    i = 4;
                    break;
                  case "RECT":
                    i = 1;
                    break;
                  default:
                    this.Nf.nf("unkonw Pad out shape %s", s), (i = 0);
                }
                var o = r.Dq(e.Qq(), e.Qq()),
                  a = r.Aq(e.Qq()),
                  u = r.Aq(e.Qq()),
                  c = this.rr.encode(r.zq(e.Qq())),
                  p = e.Qq(),
                  f = e.Qq(),
                  l = 2 * r.Aq(e.Qq()),
                  b = e.Qq(""),
                  d = r.Aq(e.Qq()),
                  g = e.Qq(""),
                  w = r.Aq(e.Qq("0"));
                w < l && (w = l);
                var m;
                m = a < u ? 90 : 0;
                var E = w === l ? 0 : 2,
                  N = e.Qq(),
                  q = "N" !== e.Qq("N");
                e.Qq();
                var T = r.Aq(e.Qq("0.4")),
                  k = r.Aq(e.Qq("0.4")),
                  R = e.Qq().split(","),
                  S = R[0],
                  _ = R[1];
                n.J.I(S) || n.J.I(_) || (o = r.Dq(S, _));
                var M = this.Mr(N),
                  F = new C.xc().rc(M);
                F.valid() && (o = F.wc().Oc());
                var j = 0,
                  D = 0,
                  B = null,
                  U = this.Mr(b);
                if ("OVAL" === s && U.length >= 2) {
                  var Q = new A.bd(U[0], U[1]);
                  if (!Q.Wc()) {
                    var X = Math.min(a, u);
                    0 === X && (X = Math.max(a / 2, u / 2)), (U.length = 0);
                    for (
                      var Z = 0, Y = Q.stroke(X, 1, 0).md().jd;
                      Z < Y.length;
                      Z++
                    ) {
                      var z = Y[Z];
                      O.F.t(U, z.points(0.2));
                    }
                  }
                }
                var J = new C.xc().rc(U);
                if (J.valid() && J.wc().Pc() > 0) {
                  B = y.Zc.ld(U);
                  var W = n.J.R(L.ri.od(U));
                  (W = W.Vb(o, -d)), (j = W.x - o.x), (D = W.y - o.y);
                  for (
                    var V = 0,
                      G = Number.NEGATIVE_INFINITY,
                      H = Number.POSITIVE_INFINITY,
                      K = new Array(U.length - 2),
                      $ = 0;
                    $ < K.length;
                    $++
                  ) {
                    var tt = U[$],
                      et = U[$ + 1],
                      it = U[$ + 2],
                      rt = tt.angle(et),
                      nt = it.angle(et),
                      st = nt - rt;
                    st > Math.PI
                      ? (st -= v.Ub._b)
                      : st < -Math.PI && (st = v.Ub._b + st),
                      (K[$] = st);
                    var ot = tt.Gb(et);
                    ot < H && ((H = ot), rt), ot > G && ((G = ot), (V = rt));
                  }
                  var at = void 0;
                  if (
                    Math.abs(Math.abs(P.ir.hr(K)) - (K.length - 2) * Math.PI) <
                    0.01
                  )
                    if (Math.abs(P.ir.dr(K)) < 0.01)
                      if (4 == K.length)
                        (i = 1), (u = H), (a = G), (at = v.Ub.Tb(V));
                      else if (8 == K.length)
                        (i = 3), (u = 2 * H), (a = G + H), (at = v.Ub.Tb(V));
                      else {
                        i = 0;
                        var ht = I.ti.si(U);
                        (a = ht[0].Gb(ht[1])),
                          (u = ht[1].Gb(ht[2])),
                          (at = v.Ub.Tb(ht[0].angle(ht[1])));
                      }
                    else {
                      i = 0;
                      var ht = I.ti.si(U);
                      (a = ht[0].Gb(ht[1])),
                        (u = ht[1].Gb(ht[2])),
                        (at = v.Ub.Tb(ht[0].angle(ht[1])));
                    }
                  else if ("Polygon" === s)
                    (i = 4), (j = 0), (D = 0), (at = NaN);
                  else {
                    var ht = I.ti.si(U);
                    (a = ht[0].Gb(ht[1])),
                      (u = ht[1].Gb(ht[2])),
                      (at = v.Ub.Tb(ht[0].angle(ht[1])));
                  }
                  4 !== i && ((m = m + d - at), (d = at));
                } else 4 === i && (i = 0);
                var ut = new x.hn(i, a, u, 0, 4 === i ? B : null),
                  ct = null,
                  pt = null,
                  ft = null;
                0 === c.type
                  ? ((pt = ut), (ct = ut), (ft = ut))
                  : 4 === c.type
                  ? (pt = ut)
                  : 7 === c.type && (ft = ut);
                var lt = new x.jn(c, j, D, pt, ct, ft),
                  vt = new x.kn(E, l, w, m);
                return [new x.rn(g, p, c, o, d, lt, vt, T, k, f, q)];
              }),
              (i.prototype.xr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = r.Aq(e.Qq()),
                  s = e.Qq(),
                  o = 2 * r.Aq(e.Qq()),
                  a = e.Qq("");
                return [new N.cn(a, s, i, o, n, n, n, !0)];
              }),
              (i.prototype.yr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = 2 * r.Aq(e.Qq()),
                  s = new x.hn(0, n, n, 0, null),
                  o = new x.jn(u.mg._f, 0, 0, s, s, s),
                  a = new x.kn(0, n, n, 0);
                return [new x.rn("", "", u.mg._f, i, 0, o, a, 0, 0, "", !1)];
              }),
              (i.prototype.zr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = r.Aq(e.Qq()),
                  n = this.rr.encode(r.zq(e.Qq())),
                  s = e.Qq(),
                  o = e.Qq(),
                  a = new Array();
                return (
                  new c.cr(function (t) {
                    for (var e = 0, r = t.jd; e < r.length; e++) {
                      var o = r[e];
                      o instanceof T.ad &&
                        a.push(new q.ug(s, n, o, i, 11 === n.type));
                    }
                    return !0;
                  }).parse(o),
                  a
                );
              }),
              (i.prototype.Ar = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = r.Aq(e.Qq()),
                  s = r.Aq(e.Qq()),
                  o = this.rr.encode(r.zq(e.Qq()));
                e.Qq("");
                e.next();
                var a = e.Qq("");
                return [
                  new q.ug(a, o, T.ad._c(i, 0, 360, n, n), s, 11 === o.type)
                ];
              }),
              (i.prototype.Cr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq(), e.Qq();
                var i = this.rr.encode(r.zq(e.Qq())),
                  n = e.Qq(),
                  s = this.Nr(e.Qq("")),
                  o = r.Aq(e.Qq()),
                  u = e.Qq(""),
                  p = e.Qq(),
                  f = "spoke" === e.Qq(),
                  l = "yes" === e.Qq(),
                  v = null;
                if (this.ao.oq) e.next();
                else
                  try {
                    v = JSON.parse(e.Qq(""));
                  } catch (t) {}
                e.next(), e.next();
                var b = r.zq(e.Qq("0")),
                  y = r.Aq(e.Qq("0")),
                  g = r.Aq(e.Qq("0")),
                  w = r.Aq(e.Qq("0")),
                  m = "yes" === e.Qq("yes"),
                  E = m ? 0.8 : 0,
                  O = r.Aq(e.Qq("0"));
                this._n.rules.push(new a.Eg(new a.zg(p), O));
                var x;
                switch (u) {
                  case "solid":
                    x = new k.un(E);
                    break;
                  case "grid":
                    x = new k.xn(y, g);
                    break;
                  case "none":
                    x = null;
                    break;
                  default:
                    this.Nf.nf("unsupported fill style %s", u),
                      (x = new k.un(E));
                }
                var A = new Array();
                if (!this.ao.oq && null !== v)
                  for (var N = 0, q = v; N < q.length; N++) {
                    var T = q[N];
                    !(function (t) {
                      for (
                        var e = new Array(), i = 0, r = t;
                        i < r.length;
                        i++
                      ) {
                        var n = r[i];
                        new c.cr(function (t) {
                          if (x instanceof k.xn)
                            for (var i = 0, r = t.jd; i < r.length; i++) {
                              var n = r[i];
                              e.push(n.stroke(y, 1, 0));
                            }
                          else e.push(t);
                          return !0;
                        }).parse(n);
                      }
                      e.length > 0 && A.push(new d.Hd(e));
                    })(T);
                  }
                return [new k.Dn(p, n, i, x, w, o, f, l, b, s, A)];
              }),
              (i.prototype.Br = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = r.Aq(e.Qq()),
                  s = r.Aq(e.Qq()),
                  o = this.rr.encode(r.zq(e.Qq()));
                e.Qq(), e.Qq();
                var a = r.Aq(e.Qq("0"));
                e.Qq(), e.Qq();
                var u = e.Qq();
                if (a > 0) {
                  var c = i,
                    p = c.Qb(n, 0),
                    f = p.Qb(0, -s),
                    l = f.Qb(-n, 0);
                  return [
                    new m.tg(u, o, c, p, a, !1),
                    new m.tg(u, o, p, f, a, !1),
                    new m.tg(u, o, f, l, a, !1),
                    new m.tg(u, o, l, c, a, !1)
                  ];
                }
                return [new R.Gn(u, o, i, i.Qb(n, -s), 0, !1)];
              }),
              (i.prototype.Dr = function (t) {
                var e = new h.Rq(t, "~");
                e.Qq();
                var i = this.rr.encode(r.zq(e.Qq())),
                  n = e.Qq(),
                  s = this.Nr(e.Qq(""));
                if (s.length > 0) {
                  var o = e.Qq(),
                    a = void 0;
                  switch (o) {
                    case "npth":
                      a = 2;
                      break;
                    case "cutout":
                      a = 1;
                      break;
                    default:
                      a = 0;
                  }
                  return [new p.rg(n, i, a, y.Zc.$c(s))];
                }
                return this.Nf.pf("ignore empty SOLIDREGION"), [];
              }),
              (i.prototype.Nr = function (t) {
                var e = new Array();
                if (((t = t.trim()), "M" === t[0]))
                  new c.cr(function (t) {
                    return O.F.t(e, t.jd), !0;
                  }).parse(t);
                else {
                  var i = w.L.split(r.yq, t);
                  if (i.length >= 2) {
                    for (
                      var n = null, s = null, o = 0;
                      o < i.length - 1;
                      o += 2
                    ) {
                      var a = r.Dq(i[o], i[o + 1]);
                      null === s
                        ? ((s = a), (n = a))
                        : (e.push(new A.bd(s, a)), (s = a));
                    }
                    null === s ||
                      null === n ||
                      s.u(n) ||
                      e.push(new A.bd(s, n));
                  }
                }
                return e;
              }),
              (i.prototype.Ir = function (t) {
                if (!this.ao.oq) return !0;
                switch (t.type) {
                  case 7:
                  case 5:
                  case 0:
                  case 11:
                  case 6:
                  case 4:
                    return !0;
                  default:
                    return !1;
                }
              }),
              i
            );
          })(r.Gq);
        i.Or = X;
      }
    ),
    i("pcb/primitives/Aligment", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e) {
          (this.Pr = t), (this.vertical = e);
        }
        return (
          (t.Qr = new t(0, 0)),
          (t.Rr = new t(0, 1)),
          (t.Sr = new t(0, 2)),
          (t.Tr = new t(1, 0)),
          (t.Ur = new t(1, 1)),
          (t.Vr = new t(1, 2)),
          (t.Wr = new t(2, 0)),
          (t.Xr = new t(2, 1)),
          (t.Yr = new t(2, 2)),
          t
        );
      })();
      e.Zr = i;
    }),
    i("pcb/primitives/sch/SchShape", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t) {
          this.id = t;
        }
        return t;
      })();
      e.$r = i;
    }),
    i("pcb/primitives/Stroke", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e, i) {
          void 0 === i && (i = 0),
            (this.color = t),
            (this.width = Math.abs(e)),
            (this.style = i);
        }
        return (
          (t.prototype.transform = function (e) {
            return new t(this.color, e.fc * this.width, this.style);
          }),
          t
        );
      })();
      e._r = i;
    }),
    i(
      "pcb/primitives/sch/SchProperty",
      [
        "require",
        "exports",
        "geometry/Matrix3",
        "geometry/BBox2",
        "utils/Check",
        "geometry/utils/Angle"
      ],
      function (t, e, i, r, n, s) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = (function () {
          function t(t, e, i, r, s, o, a, h, u) {
            (this.name = t),
              (this.value = e),
              (this.location = i),
              (this.orientation = n.J.N(r)),
              (this.as = s),
              (this.display = o),
              (this.font = a),
              (this.color = h),
              (this.bs = u);
          }
          return (
            (t.prototype.Xb = function (e) {
              return new t(
                this.name,
                this.value,
                this.location.Xb(e),
                s.Ub.ec(this.orientation, e),
                this.as,
                this.display,
                this.font.transform(e),
                this.color,
                this.bs
              );
            }),
            (t.prototype.eb = function () {
              var t = (this.font.size * this.name.length) / 2,
                e = this.orientation,
                n = this.location,
                s = this.location.Qb(t, this.font.size);
              if (e % 360 == 0) return new r.xc().qc(n).qc(s).wc();
              var o = this.location.Qb(t, 0),
                a = this.location.Qb(0, this.font.size),
                h = i.va.Vb(e).ta(this.location);
              return new r.xc()
                .qc(n.Xb(h))
                .qc(s.Xb(h))
                .qc(o.Xb(h))
                .qc(a.Xb(h))
                .wc();
            }),
            t
          );
        })();
        e.cs = o;
      }
    ),
    i(
      "pcb/primitives/sch/SchComponent",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/BBox2",
        "utils/Check",
        "utils/NativeMap",
        "geometry/utils/Angle",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var u = (function () {
          function t() {
            (this.name = ""),
              (this.ds = ""),
              (this.location = h.Zb.oa),
              (this.orientation = 0),
              (this.es = !1),
              (this.prefix = null),
              (this.value = null),
              (this.fs = ""),
              (this.gs = ""),
              (this.hs = new Array()),
              (this.Og = new o.wo());
          }
          return (
            (t.prototype.js = function (t, e, i) {
              this.Og.ab(t, function () {
                return new o.wo();
              })
                .ab(e, function () {
                  return [];
                })
                .push(i);
            }),
            (t.prototype.ks = function () {
              if (this.Og.bb() && 0 === this.hs.length)
                throw new Error("sch component should not be empty");
              s.J.U(s.J.U(this.Og.get(this.fs)).get(this.gs));
            }),
            (t.prototype.wc = function () {
              return new c(this);
            }),
            t
          );
        })();
        i.ls = u;
        var c = (function (t) {
          function i(e) {
            var i = t.call(this, "") || this;
            e.ks(),
              (i.name = e.name),
              (i.ds = e.ds),
              (i.location = e.location),
              (i.orientation = s.J.N(e.orientation)),
              (i.es = e.es),
              (i.prefix = s.J.R(e.prefix)),
              (i.value = s.J.R(e.value)),
              (i.fs = e.fs),
              (i.gs = e.gs),
              (i.hs = e.hs);
            var r = {};
            return (
              e.Og.iterator(function (t, e) {
                return (r[t] = e.origin()), !0;
              }),
              (i.Og = r),
              i
            );
          }
          return (
            e(i, t),
            (i.prototype.ms = function () {
              var t = this.Og;
              for (var e in t) {
                var i = 0;
                for (var r in t[e]) if (++i > 1) return !0;
              }
              return !1;
            }),
            (i.prototype.ns = function (t) {
              for (var e = new Array(), i = 0, r = this.hs; i < r.length; i++) {
                var n = r[i];
                n.name === t && e.push(n);
              }
              return e;
            }),
            (i.prototype.Xb = function (t) {
              var e = new u();
              (e.name = this.name),
                (e.ds = this.ds),
                (e.location = this.location.Xb(t)),
                (e.orientation = a.Ub.ec(this.orientation, t)),
                (e.es = this.es),
                (e.prefix = this.prefix.Xb(t)),
                (e.value = this.value.Xb(t)),
                (e.fs = this.fs),
                (e.gs = this.gs),
                this.os(function (i, r, n) {
                  return e.js(i, r, n.Xb(t)), !0;
                });
              for (var i = 0, r = this.hs; i < r.length; i++) {
                var n = r[i];
                e.hs.push(n.Xb(t));
              }
              return e.wc();
            }),
            (i.prototype.eb = function () {
              var t = new n.xc();
              t.pc(this.prefix.eb()), t.pc(this.value.eb());
              for (var e = 0, i = this.hs; e < i.length; e++) {
                var r = i[e];
                t.pc(r.eb());
              }
              return (
                this.os(function (e, i, r) {
                  return t.pc(r.eb()), !0;
                }),
                t.wc()
              );
            }),
            (i.prototype.os = function (t) {
              for (var e in this.Og) {
                var i = this.Og[e];
                for (var r in i)
                  for (var n = 0, s = i[r]; n < s.length; n++) {
                    var o = s[n];
                    if (!t(e, r, o)) return;
                  }
              }
            }),
            i
          );
        })(r.$r);
        i.ps = c;
      }
    ),
    i(
      "pcb/primitives/sch/SchDocument",
      [
        "require",
        "exports",
        "pcb/primitives/BaseDocument",
        "pcb/primitives/sch/SchComponent",
        "utils/NativeMap"
      ],
      function (t, i, r, n, s) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var o = (function (t) {
          function i(e, i, r, n, s) {
            var o = t.call(this, e, i, r) || this;
            return (o.Og = n), (o.hs = s), o;
          }
          return (
            e(i, t),
            (i.prototype.ah = function () {
              for (
                var t = new s.wo(), e = new Array(), i = 0, r = this.Og;
                i < r.length;
                i++
              ) {
                var o = r[i];
                o instanceof n.ps && (t.put(o.name, !0) || e.push(o));
              }
              return e;
            }),
            i
          );
        })(r.Ug);
        i.qs = o;
      }
    ),
    i(
      "pcb/primitives/sch/SchAnnotation",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "pcb/primitives/Aligment",
        "geometry/Matrix3",
        "geometry/BBox2",
        "geometry/utils/Angle"
      ],
      function (t, i, r, n, s, o, a) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var h = (function (t) {
          function i(e, i, r, n, s, o, a, h) {
            var u = t.call(this, "") || this;
            return (
              (u.location = e),
              (u.font = i),
              (u.bs = r),
              (u.rs = n),
              (u.text = s),
              (u.orientation = o),
              (u.color = a),
              (u.Ig = h),
              u
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              var e, r;
              if (t.hc()) {
                switch (this.bs.vertical) {
                  case 0:
                    r = 2;
                    break;
                  case 2:
                    r = 0;
                    break;
                  default:
                    r = this.bs.vertical;
                }
                e = this.bs.Pr;
              } else (e = this.bs.Pr), (r = this.bs.vertical);
              var s = new n.Zr(e, r),
                o = this.location.Xb(t),
                h = this.font.transform(t),
                u = a.Ub.ec(this.orientation, t);
              return new i(o, h, s, this.rs, this.text, u, this.color, this.Ig);
            }),
            (i.prototype.eb = function () {
              var t = this.font.size,
                e = (t * this.text.length) / 2,
                i = this.orientation;
              this.Ig && (i += 180);
              var r = this.location,
                n = r.Qb(e, t);
              if (i % 360 == 0) return new o.xc().qc(r).qc(n).wc();
              var a = r.Qb(e, 0),
                h = r.Qb(0, t),
                u = s.va.Vb(i).ta(r);
              return new o.xc().qc(r).qc(n).qc(a).qc(h).wc().transform(u);
            }),
            i
          );
        })(r.$r);
        i.ss = h;
      }
    ),
    i(
      "pcb/primitives/sch/SchWire",
      ["require", "exports", "pcb/primitives/sch/SchShape", "geometry/BBox2"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.points = e), (r.stroke = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.points.map(function (e) {
                  return e.Xb(t);
                }),
                this.stroke.transform(t)
              );
            }),
            (i.prototype.eb = function () {
              return new n.xc()
                .rc(this.points)
                .vc(this.stroke.width / 2)
                .wc();
            }),
            i
          );
        })(r.$r);
        i.ts = s;
      }
    ),
    i(
      "pcb/primitives/sch/SchJunction",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/BBox2",
        "utils/Check"
      ],
      function (t, i, r, n, s) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var o = (function (t) {
          function i(e, i, r) {
            var n = t.call(this, "") || this;
            return (n.location = e), (n.size = s.J.N(i)), (n.fill = r), n;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.location.Xb(t), t.fc * this.size, this.fill);
            }),
            (i.prototype.eb = function () {
              return new n.xc()
                .qc(this.location)
                .vc(this.size / 2)
                .wc();
            }),
            i
          );
        })(r.$r);
        i.us = o;
      }
    ),
    i("pcb/primitives/Style", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t, e, i) {
          void 0 === i && (i = 1),
            (this.stroke = t),
            (this.fill = e),
            (this.vs = i);
        }
        return (
          (t.prototype.transform = function (e) {
            return new t(this.stroke.transform(e), this.fill, this.vs);
          }),
          t
        );
      })();
      e.ws = i;
    }),
    i(
      "pcb/primitives/sch/SchPolyline",
      ["require", "exports", "pcb/primitives/sch/SchShape"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.xs = e), (r.style = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.xs.Xb(t), this.style.transform(t));
            }),
            (i.prototype.eb = function () {
              return this.xs.eb().Hc(this.style.stroke.width / 2);
            }),
            i
          );
        })(r.$r);
        i.ys = n;
      }
    ),
    i(
      "pcb/primitives/sch/SchRectangle",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/BBox2",
        "utils/Check"
      ],
      function (t, i, r, n, s) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var o = (function (t) {
          function i(e, i, r, n, o) {
            var a = t.call(this, "") || this;
            return (
              (a.En = e),
              (a.Fn = i),
              (a.rx = s.J.N(r)),
              (a.ry = s.J.N(n)),
              (a.style = o),
              a
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.En.Xb(t),
                this.Fn.Xb(t),
                t.fc * this.rx,
                t.gc * this.ry,
                this.style.transform(t)
              );
            }),
            (i.prototype.eb = function () {
              return new n.xc().qc(this.En).qc(this.Fn).wc();
            }),
            i
          );
        })(r.$r);
        i.zs = o;
      }
    ),
    i(
      "pcb/primitives/sch/SchPin",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/Matrix3",
        "geometry/BBox2",
        "geometry/utils/Angle"
      ],
      function (t, i, r, n, s, o) {
        function a(t) {
          switch (t) {
            case 0:
              return "INPUT";
            case 1:
              return "IO";
            case 2:
              return "OUTPUT";
            case 3:
              return "OPEN_COLLECTOR";
            case 4:
              return "PASSIVE";
            case 5:
              return "HIZ";
            case 6:
              return "EMITTER";
            case 7:
              return "POWER";
          }
        }
        function h(t) {
          switch (t) {
            case 0:
              return "POSTPONED_OUTPUT";
            case 1:
              return "OPEN_COLLECTOR";
            case 2:
              return "HIZ";
            case 3:
              return "HIGH_CURRENT";
            case 4:
              return "PULSE";
            case 5:
              return "SCHMITT";
            case 6:
              return "OPEN_COLLECTOR_PULL_UP";
            case 7:
              return "OPEN_EMITTER";
            case 8:
              return "OPEN_EMITTER_PULL_UP";
            case 9:
              return "SHIFT_LEFT";
            case 10:
              return "OPEN_OUTPUT";
            case 11:
              return "CLOCK";
            case 12:
              return "DOT";
            case 13:
              return "ACTIVE_LOW_INPUT";
            case 14:
              return "ACTIVE_LOW_OUTPUT";
            case 15:
              return "RIGHT_LEFT_SIGNAL_FLOW";
            case 16:
              return "ANALOG_SIGNAL_IN";
            case 17:
              return "NOT_LOGIC_CONNECTION";
            case 18:
              return "DIGITAL_SIGNAL_IN";
            case 19:
              return "LEFT_RIGHT_SIGNAL_FLOW";
            case 20:
              return "BIDIRECTIONAL_SIGNAL_FLOW";
          }
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        }),
          (i.As = a),
          (i.Bs = h);
        var u = (function (t) {
          function i(e, i, r, n, s, a, h, u, c, p, f) {
            var l = t.call(this, "") || this;
            return (
              (l.location = e),
              (l.orientation = o.Ub.$b(i)),
              (l.color = r),
              (l.length = n),
              (l.visible = s),
              (l.name = a),
              (l.Cs = h),
              (l.number = u),
              (l.Ds = c),
              (l.Es = p),
              (l.Fs = f),
              l
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.location.Xb(t),
                o.Ub.ec(this.orientation, t),
                this.color,
                t.fc * this.length,
                this.visible,
                this.name.Xb(t),
                this.Cs,
                this.number.Xb(t),
                this.Ds,
                this.Es,
                this.Fs
              );
            }),
            (i.prototype.eb = function () {
              var t = this.location,
                e = n.va.Vb(this.orientation).ta(t);
              return new s.xc().qc(t).qc(t.Qb(this.length, 0).Xb(e)).wc();
            }),
            i
          );
        })(r.$r);
        i.Gs = u;
      }
    ),
    i(
      "pcb/primitives/sch/SchPie",
      ["require", "exports", "pcb/primitives/sch/SchShape"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.arc = e), (r.style = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.arc.Xb(t), this.style.transform(t));
            }),
            (i.prototype.eb = function () {
              return this.arc.eb().Hc(this.style.stroke.width / 2);
            }),
            i
          );
        })(r.$r);
        i.Hs = n;
      }
    ),
    i(
      "pcb/primitives/sch/SchArc",
      ["require", "exports", "pcb/primitives/sch/SchShape"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.arc = e), (r.style = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.arc.Xb(t), this.style.transform(t));
            }),
            (i.prototype.eb = function () {
              return this.arc.eb().Hc(this.style.stroke.width / 2);
            }),
            i
          );
        })(r.$r);
        i.Is = n;
      }
    ),
    i(
      "pcb/primitives/sch/SchBezier",
      ["require", "exports", "pcb/primitives/sch/SchShape"],
      function (t, i, r) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var n = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.Js = e), (r.style = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.Js.Xb(t), this.style.transform(t));
            }),
            (i.prototype.eb = function () {
              return this.Js.eb().Hc(this.style.stroke.width / 2);
            }),
            i
          );
        })(r.$r);
        i.Ks = n;
      }
    ),
    i(
      "pcb/primitives/sch/SchEllipse",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/BBox2",
        "geometry/utils/Angle"
      ],
      function (t, i, r, n, s) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var o = (function (t) {
          function i(e, i, r, n) {
            var s = t.call(this, "") || this;
            return (s.Oc = e), (s.rx = i), (s.ry = r), (s.style = n), s;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              var e,
                r,
                n = s.Ub.ec(0, t);
              return (
                n % 180 == 90
                  ? ((e = this.ry), (r = this.rx))
                  : ((e = this.rx), (r = this.ry)),
                new i(
                  this.Oc.Xb(t),
                  t.fc * e,
                  t.fc * r,
                  this.style.transform(t)
                )
              );
            }),
            (i.prototype.eb = function () {
              var t = this.Oc.x,
                e = this.Oc.y,
                i = this.rx / 2,
                r = this.ry / 2,
                s = this.style.stroke.width / 2;
              return new n.xc()
                .uc(t - i, e - r)
                .uc(t + i, e + r)
                .vc(s)
                .wc();
            }),
            i
          );
        })(r.$r);
        i.Ls = o;
      }
    ),
    i("pcb/easyeda/DefaultSize", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      }),
        (e.Ms = 5),
        (e.Ns = 3),
        (e.Os = 5),
        (e.Ps = 1),
        (e.Qs = 6),
        (e.Rs = 2),
        (e.Ss = 12),
        (e.Ts = e.Ss - e.Rs),
        (e.Us = 6),
        (e.Vs = 22),
        (e.Ws = e.Vs - e.Rs);
    }),
    i(
      "pcb/primitives/sch/SchPort",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/Matrix3",
        "geometry/BBox2",
        "geometry/utils/Angle"
      ],
      function (t, i, r, n, s, o) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var a = (function (t) {
          function i(e, i, r, n, s, o, a, h, u) {
            var c = t.call(this, "") || this;
            return (
              (c.name = e),
              (c.Xs = i),
              (c.Ys = r),
              (c.width = n),
              (c.Zs = s),
              (c.$s = o),
              (c.location = a),
              (c.orientation = h),
              (c._s = u),
              c
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.name.Xb(t),
                this.Xs,
                this.Ys,
                t.fc * this.width,
                this.Zs,
                this.$s,
                this.location.Xb(t),
                o.Ub.ec(this.orientation, t),
                this._s
              );
            }),
            (i.prototype.eb = function () {
              var t = this.location,
                e = n.va.Vb(this.orientation).ta(t);
              return new s.xc().qc(t).qc(t.Qb(this.width, 0).Xb(e)).wc();
            }),
            i
          );
        })(r.$r);
        i.at = a;
      }
    ),
    i(
      "pcb/primitives/sch/SchPowerPort",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/utils/Angle"
      ],
      function (t, i, r, n) {
        function s(t) {
          switch (t) {
            case 0:
              return "CIRCLE";
            case 1:
              return "ARROW";
            case 2:
              return "BAR";
            case 3:
              return "WAVE";
            case 4:
              return "POWER_GROUND";
            case 5:
              return "SIGNAL_GROUND";
            case 6:
              return "EARTH";
          }
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        }),
          (i.bt = s);
        var o = (function (t) {
          function i(e, i, r, n, s, o) {
            var a = t.call(this, "") || this;
            return (
              (a.ng = e),
              (a.type = i),
              (a.ct = r),
              (a.location = n),
              (a.color = s),
              (a.orientation = o),
              a
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.ng.Xb(t),
                this.type,
                this.ct,
                this.location.Xb(t),
                this.color,
                n.Ub.ec(this.orientation, t)
              );
            }),
            (i.prototype.eb = function () {
              return this.ng.eb();
            }),
            i
          );
        })(r.$r);
        i.dt = o;
      }
    ),
    i(
      "pcb/primitives/sch/SchNetLabel",
      [
        "require",
        "exports",
        "pcb/primitives/sch/SchShape",
        "geometry/BBox2",
        "geometry/Matrix3",
        "utils/Check",
        "geometry/utils/Angle"
      ],
      function (t, i, r, n, s, o, a) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var h = (function (t) {
          function i(e, i, r, n, s) {
            var a = t.call(this, "") || this;
            return (
              (a.location = e),
              (a.orientation = o.J.N(i)),
              (a.ng = r),
              (a.font = n),
              (a.color = s),
              a
            );
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.location.Xb(t),
                a.Ub.ec(this.orientation, t),
                this.ng,
                this.font.transform(t),
                this.color
              );
            }),
            (i.prototype.eb = function () {
              var t = this.location,
                e = this.font.size,
                i = (e * this.ng.length) / 2,
                r = s.va.Vb(this.orientation).ta(t);
              return new n.xc().qc(t).qc(t.Qb(i, e)).wc().transform(r);
            }),
            i
          );
        })(r.$r);
        i.et = h;
      }
    ),
    i(
      "pcb/primitives/sch/SchBus",
      ["require", "exports", "pcb/primitives/sch/SchShape", "geometry/BBox2"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.points = e), (r.stroke = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.points.map(function (e) {
                  return e.Xb(t);
                }),
                this.stroke.transform(t)
              );
            }),
            (i.prototype.eb = function () {
              return new n.xc()
                .rc(this.points)
                .vc(this.stroke.width / 2)
                .wc();
            }),
            i
          );
        })(r.$r);
        i.ft = s;
      }
    ),
    i(
      "pcb/primitives/sch/SchBusEntry",
      ["require", "exports", "pcb/primitives/sch/SchShape", "geometry/BBox2"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i, r) {
            var n = t.call(this, "") || this;
            return (n.En = e), (n.Fn = i), (n.stroke = r), n;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(
                this.En.Xb(t),
                this.Fn.Xb(t),
                this.stroke.transform(t)
              );
            }),
            (i.prototype.eb = function () {
              return new n.xc()
                .qc(this.En)
                .qc(this.Fn)
                .vc(this.stroke.width / 2)
                .wc();
            }),
            i
          );
        })(r.$r);
        i.gt = s;
      }
    ),
    i(
      "pcb/primitives/sch/SchNoERC",
      ["require", "exports", "pcb/primitives/sch/SchShape", "geometry/BBox2"],
      function (t, i, r, n) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var s = (function (t) {
          function i(e, i) {
            var r = t.call(this, "") || this;
            return (r.location = e), (r.color = i), r;
          }
          return (
            e(i, t),
            (i.prototype.Xb = function (t) {
              return new i(this.location.Xb(t), this.color);
            }),
            (i.prototype.eb = function () {
              var t = this.location.x,
                e = this.location.y;
              return new n.mb(t, t, e, e);
            }),
            i
          );
        })(r.$r);
        i.ht = s;
      }
    ),
    i(
      "pcb/easyeda/SchDecoder",
      [
        "require",
        "exports",
        "pcb/easyeda/AbstractDecoder",
        "utils/json/JObject",
        "pcb/primitives/Font",
        "pcb/primitives/Aligment",
        "pcb/easyeda/CommandDecoder",
        "pcb/primitives/Stroke",
        "utils/Check",
        "pcb/primitives/sch/SchDocument",
        "utils/Utils",
        "pcb/primitives/sch/SchComponent",
        "pcb/primitives/sch/SchAnnotation",
        "pcb/primitives/sch/SchProperty",
        "pcb/primitives/Color",
        "utils/StringKit",
        "pcb/primitives/sch/SchWire",
        "pcb/primitives/sch/SchJunction",
        "geometry/utils/Angle",
        "geometry/Matrix3",
        "pcb/primitives/sch/SchPolyline",
        "geometry/Polyline",
        "pcb/primitives/Style",
        "pcb/primitives/sch/SchRectangle",
        "pcb/primitives/sch/SchPin",
        "utils/svg/PathDataDec",
        "geometry/Line",
        "geometry/Bezier",
        "geometry/Arc",
        "pcb/primitives/sch/SchPie",
        "pcb/primitives/sch/SchArc",
        "pcb/primitives/sch/SchBezier",
        "pcb/primitives/sch/SchEllipse",
        "pcb/easyeda/DefaultSize",
        "pcb/primitives/sch/SchPort",
        "pcb/primitives/sch/SchPowerPort",
        "pcb/primitives/sch/SchNetLabel",
        "pcb/primitives/sch/SchBus",
        "pcb/primitives/sch/SchBusEntry",
        "pcb/primitives/sch/SchNoERC",
        "geometry/BBox2",
        "geometry/Vector2"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I,
        L,
        P,
        _,
        M,
        C,
        F,
        j,
        D,
        B,
        U,
        Q
      ) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var X = /^(.*?)(?:\.(\d+))?$/,
          Z = new s.Hg("Verdana", 9, 1, !1, !1),
          Y = new o.Zr(0, 2),
          z = (function (t) {
            function i(e, i, r) {
              var n = t.call(this, e, i.Sg, r) || this;
              return (
                (n.Og = new Array()),
                (n.it = null),
                (n.jt = null),
                (n.ao = i),
                n
              );
            }
            return (
              e(i, t),
              (i.prototype.kq = function (t, e) {
                if ("shape" === t[0] && e instanceof n.Tp) {
                  var i = e.Mp();
                  p.F.t(this.Og, this.co(i));
                }
                return !0;
              }),
              (i.prototype.finish = function () {
                if (this.ao.pq) {
                  for (
                    var t = new U.xc(), e = 0, i = this.Og;
                    e < i.length;
                    e++
                  ) {
                    var n = i[e];
                    t.pc(n.eb());
                  }
                  if (t.valid()) {
                    var s = t.wc(),
                      a = new f.ls(),
                      h = this.Eq.c_para;
                    (a.fs = h.uo("package", "")),
                      (a.location = s.Oc()),
                      (a.orientation = 0),
                      (a.es = !1),
                      (a.gs = "1"),
                      (a.name = h.uo("name", this.Sg));
                    var u = h.uo("pre", "");
                    a.prefix = new v.cs(
                      "Designator",
                      u,
                      s.Lc(),
                      0,
                      !1,
                      !0,
                      Z,
                      b.aj._i,
                      o.Zr.Sr
                    );
                    var p = h.uo("Value", "");
                    a.value = new v.cs(
                      "Value",
                      p,
                      s.Lc().add(s.Kc()).ea(0.5),
                      0,
                      !1,
                      !0,
                      Z,
                      b.aj._i,
                      o.Zr.Rr
                    );
                    for (var l = 0, y = this.Og; l < y.length; l++) {
                      var n = y[l];
                      a.js(a.fs, "1", n);
                    }
                    (this.Og.length = 0), this.Og.push(a.wc());
                  }
                }
                var d = new c.qs(this.Sg, r.xq, 10, this.Og, []);
                this.Eq.fa(d);
              }),
              (i.prototype.co = function (t) {
                var e,
                  i = t.indexOf("~");
                e = i >= 0 ? t.substring(0, i) : t;
                try {
                  switch (e) {
                    case "LIB":
                      return this.vr(t);
                    case "W":
                      return this.kt(t);
                    case "J":
                      return this.lt(t);
                    case "T":
                      return this.nt(t);
                    case "PL":
                      return this.ot(t);
                    case "R":
                      return this.Br(t);
                    case "P":
                      return this.pt(t);
                    case "PT":
                      return this.qt(t);
                    case "PG":
                      return this.rt(t);
                    case "A":
                      return this.qt(t);
                    case "E":
                      return this.st(t);
                    case "F":
                      return this.tt(t);
                    case "N":
                      return this.ut(t);
                    case "B":
                      return this.vt(t);
                    case "BE":
                      return this.wt(t);
                    case "O":
                      return this.xt(t);
                    default:
                      return this.Nf.qf("unknow command " + e), [];
                  }
                } catch (t) {
                  return this.Nf.sf(t), [];
                }
              }),
              (i.prototype.yt = function (t) {
                var e,
                  i = u.J.R(r.Bq(t.Qq())),
                  n = r.Aq(t.Qq()),
                  s = r.zq(t.Qq());
                switch (s) {
                  case 0:
                    e = 0;
                    break;
                  case 1:
                    e = 1;
                    break;
                  case 2:
                    e = 2;
                    break;
                  default:
                    this.Nf.nf(
                      "unknow stroke style code %d, use 1(Solid) instead",
                      s
                    ),
                      (e = 0);
                }
                return new h._r(i, n, e);
              }),
              (i.prototype.zt = function (t) {
                for (
                  var e = y.L.split(r.yq, t), i = new Array(), n = 0;
                  n < e.length - 1;
                  n += 2
                )
                  i.push(r.Dq(e[n], e[n + 1]));
                return i;
              }),
              (i.prototype.vr = function (t) {
                var e = new f.ls();
                e.gs = "1";
                for (var i = null, n = new a.Rq(t, "#@$"); ; ) {
                  var s = n.next();
                  if (u.J.I(s)) break;
                  if (s.startsWith("LIB")) i = s;
                  else
                    for (var o = 0, h = this.co(s); o < h.length; o++) {
                      var c = h[o];
                      if (
                        c instanceof l.ss &&
                        null !== this.it &&
                        null !== this.jt
                      )
                        switch (this.it) {
                          case "N":
                            (e.value = new v.cs(
                              "Value",
                              c.text,
                              c.location,
                              c.orientation,
                              !1,
                              this.jt,
                              c.font,
                              c.color,
                              c.bs
                            )),
                              (e.name = c.text);
                            break;
                          case "P":
                            var p = X.exec(c.text),
                              y = void 0;
                            (y = null !== p ? p[1] : c.text),
                              (e.ds = y),
                              (e.prefix = new v.cs(
                                "Designator",
                                y,
                                c.location,
                                c.orientation,
                                !1,
                                this.jt,
                                c.font,
                                c.color,
                                c.bs
                              ));
                            break;
                          default:
                            e.js("0", "1", c);
                        }
                      else e.js("0", "1", c);
                    }
                }
                if (null === i) return this.Nf.qf("incorrect LIB format"), [];
                var d = new a.Rq(i, "~");
                d.Qq();
                var g = r.Dq(d.Qq(), d.Qq()),
                  w = d.Qq().split("`"),
                  m = r.Aq(d.Qq("0"));
                d.Qq();
                var E = d.Qq("");
                if (E.startsWith("frame_lib_"))
                  return this.Nf.kf("ignore %s", E), [];
                (e.location = g), (e.orientation = m), (e.es = !1);
                for (var O = "", x = null, A = 0, N = w; A < N.length; A++) {
                  var q = N[A];
                  if (null == x) x = q;
                  else {
                    if ("package" === x) O = q;
                    else {
                      var T = new v.cs(x, q, g, 0, !1, !1, Z, b.aj.Yi, Y);
                      e.hs.push(T);
                    }
                    x = null;
                  }
                }
                var k = u.J.U(e.Og.vo("0"));
                (e.fs = O), e.Og.put(O, k);
                try {
                  return [e.wc()];
                } catch (t) {
                  return this.Nf.sf(t), [];
                }
              }),
              (i.prototype.kt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = this.zt(e.Qq()),
                  r = this.yt(e);
                return [new d.ts(i, r)];
              }),
              (i.prototype.lt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = r.Aq(e.Qq()),
                  s = u.J.R(r.Bq(e.Qq()));
                return [new g.us(i, n, s)];
              }),
              (i.prototype.nt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq(), (this.it = e.Qq().toUpperCase());
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = w.Ub.$b(-r.Aq(e.Qq()));
                180 === n && (n = 0);
                var h,
                  c = u.J.R(r.Bq(e.Qq())),
                  p = e.Qq("Verdana"),
                  f = r.Cq(e.Qq("7pt")),
                  v = this.Fq(e.Qq("normal")),
                  b = "italic" === e.Qq("").toLowerCase(),
                  y = e.Qq("").toLowerCase();
                switch (y) {
                  case "":
                  case "baseline":
                    h = 2;
                    var d = new Q.Zb(0, 0.3 * -f).Xb(m.va.Vb(n));
                    i = i.Qb(d.x, d.y);
                    break;
                  case "text-before-edge":
                    h = 0;
                    break;
                  case "middle":
                    h = 1;
                    break;
                  case "text-after-edge":
                    h = 2;
                    break;
                  default:
                    u.J.I(y) || this.Nf.qf("unsupported vertical " + y),
                      (h = 2);
                }
                e.Qq();
                var g = e.Qq().replace(/\\n/g, "\n");
                this.jt = "1" === e.Qq();
                var E,
                  O = e.Qq().toLowerCase();
                switch (O) {
                  case "start":
                    E = 0;
                    break;
                  case "middle":
                    E = 1;
                    break;
                  case "end":
                    E = 2;
                    break;
                  default:
                    this.Nf.qf("unknow horizontal " + O), (E = 0);
                }
                var x = new s.Hg(p, f, v, b, !1),
                  A = new o.Zr(E, h);
                return [new l.ss(i, x, A, 0, g, n, c, !1)];
              }),
              (i.prototype.ot = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = this.zt(e.Qq()),
                  r = this.yt(e);
                return [new E.ys(O.Zc.ld(i), new x.ws(r, null))];
              }),
              (i.prototype.Br = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i,
                  n = r.Dq(e.Qq(), e.Qq()),
                  s = r.Aq(e.Qq("0")),
                  o = r.Aq(e.Qq("0")),
                  h = r.Aq(e.Qq()),
                  u = r.Aq(e.Qq()),
                  c = this.yt(e),
                  p = e.Qq("none");
                return (
                  (i = "none" === p.toLowerCase() ? null : r.Bq(p)),
                  [new A.zs(n, n.Qb(h, -u), s, o, new x.ws(c, i))]
                );
              }),
              (i.prototype.pt = function (t) {
                var e,
                  i = new a.Rq(t, "^^"),
                  n = new Array();
                (e = new a.Rq(i.next(), "~")), e.Qq(), e.Qq();
                var h,
                  c = r.zq(e.Qq("0"));
                switch (c) {
                  case 0:
                    h = 4;
                    break;
                  case 1:
                    h = 0;
                    break;
                  case 2:
                    h = 2;
                    break;
                  case 3:
                    h = 1;
                    break;
                  case 4:
                    h = 7;
                    break;
                  default:
                    this.Nf.nf("unknow pin electrical code %d", c), (h = 4);
                }
                (h = 4), e.Qq(), e.Qq(), e.Qq();
                var f = r.Aq(e.Qq("0"));
                e.Qq(), (e = new a.Rq(i.next(), "~"));
                var v = r.Dq(e.Qq(), e.Qq());
                e = new a.Rq(i.next(), "~");
                var y,
                  d = e.Qq(""),
                  g = Array();
                new q.cr(function (t) {
                  return p.F.t(g, t.jd), !0;
                }).parse(d);
                var E = g[0];
                if (1 == g.length && E instanceof T.bd) {
                  y = E.length();
                  f =
                    E.start().Fb(v) > E.end().Fb(v)
                      ? w.Ub.$b(Math.round(v.Sb(E.start())))
                      : w.Ub.$b(Math.round(v.Sb(E.end())));
                } else this.Nf.qf("invalid pin polyline " + d), (y = 20);
                var O = u.J.R(r.Bq(e.Qq()));
                e = new a.Rq(i.next(), "~");
                var x,
                  A = "1" === e.Qq(),
                  k = r.Dq(e.Qq(), e.Qq()),
                  R = r.Aq(e.Qq()),
                  S = e.Qq(),
                  I = e.Qq("").toUpperCase();
                switch (I.toUpperCase()) {
                  case "START":
                    x = 0;
                    break;
                  case "END":
                    x = 2;
                    break;
                  default:
                    this.Nf.nf("unknown pin name anchor %s", I), (x = 0);
                }
                var L = e.Qq("Verdana"),
                  P = r.Cq(e.Qq("7pt"));
                e = new a.Rq(i.next(), "~");
                var _ = "1" === e.Qq(),
                  M = r.Dq(e.Qq(), e.Qq()),
                  C = r.Aq(e.Qq()),
                  F = e.Qq(),
                  j = e.Qq();
                switch (j) {
                  case "START":
                    0;
                    break;
                  case "END":
                    2;
                    break;
                  default:
                    this.Nf.nf("unknown pin number anchor %s", j), 0;
                }
                e.Qq("Verdana"), r.Cq(e.Qq("7pt"));
                (e = new a.Rq(i.next(), "~")),
                  "1" === e.Qq() && ((y += 6), n.push(12)),
                  e.Qq(),
                  (e = new a.Rq(i.next(), "~")),
                  "1" === e.Qq() && n.push(11),
                  e.Qq();
                var D = new s.Hg(L, P, 1, !1, !1),
                  B = new o.Zr(x, 2),
                  U = new l.ss(k, D, B, 0, S, R, b.aj._i, !1),
                  Q = new l.ss(M, D, B, 0, F, C, b.aj._i, !1),
                  X = v.Qb(-y, 0).Xb(m.va.Vb(f).ta(v));
                return [new N.Gs(X, f, O, y, !0, U, A, Q, _, h, n)];
              }),
              (i.prototype.qt = function (t) {
                var e = new a.Rq(t, "~"),
                  i = e.Qq(),
                  n = new Array(),
                  s = new Array();
                new q.cr(function (t) {
                  return s.push(t), !0;
                }).parse(e.Qq()),
                  "A" === i && e.Qq();
                for (
                  var o = this.yt(e),
                    h = r.Bq(e.Qq()),
                    u = new x.ws(o, h),
                    c = 0,
                    p = s;
                  c < p.length;
                  c++
                ) {
                  var f = p[c],
                    l = f.jd.length;
                  if (0 == l);
                  else {
                    for (var v = !1, b = 0; b < l; b++) {
                      var y = f.jd[b];
                      y instanceof k.hd && (v = !0);
                    }
                    var d = f.jd[0],
                      g = f.jd[1],
                      w = f.jd[2];
                    if (
                      3 == l &&
                      d instanceof T.bd &&
                      g instanceof R.ad &&
                      w instanceof T.bd
                    ) {
                      var m = d.length(),
                        O = w.length();
                      d.start().u(w.end()) && Math.abs(m - O) < 0.01
                        ? n.push(new S.Hs(g, u))
                        : n.push(new E.ys(f, u));
                    } else if (v || 1 == l)
                      for (var A = !0, N = 0, P = f.jd; N < P.length; N++) {
                        var y = P[N];
                        y instanceof R.ad
                          ? (n.push(new I.Is(y, u)), (A = !1))
                          : y instanceof k.hd &&
                            (n.push(new L.Ks(y, u)), (A = !1)),
                          A && n.push(new E.ys(f, u));
                      }
                    else n.push(new E.ys(f, u));
                  }
                }
                return n;
              }),
              (i.prototype.rt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = this.zt(e.Qq()),
                  n = this.yt(e),
                  s = r.Bq(e.Qq()),
                  o = new x.ws(n, s);
                return [new E.ys(O.Zc.ld(i).md(), o)];
              }),
              (i.prototype.st = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = r.Aq(e.Qq()),
                  s = r.Aq(e.Qq()),
                  o = this.yt(e),
                  h = r.Bq(e.Qq()),
                  u = new x.ws(o, h);
                return [new P.Ls(i, n, s, u)];
              }),
              (i.prototype.tt = function (t) {
                var e,
                  i = new a.Rq(t, "^^");
                (e = new a.Rq(i.next(), "~")), e.Qq();
                var n = (e.Qq(), r.Dq(e.Qq(), e.Qq())),
                  h = r.Aq(e.Qq());
                (e = new a.Rq(i.next(), "~")), (e = new a.Rq(i.next(), "~"));
                var c = e.Qq(),
                  p = u.J.R(r.Bq(e.Qq())),
                  f = r.Dq(e.Qq(), e.Qq());
                r.Aq(e.Qq()), e.Qq();
                for (
                  var v = "1" === e.Qq(),
                    d = e.Qq("Verdana"),
                    g = r.Cq(e.Qq("7pt")),
                    O = new s.Hg(d, g, 1, !1, !1),
                    x = new Array(),
                    N = !1;
                  ;

                ) {
                  var q = i.next();
                  if (u.J.I(q)) break;
                  for (var k = 0, R = this.co(q); k < R.length; k++) {
                    var S = R[k];
                    if (S instanceof E.ys)
                      for (var I = 0, L = S.xs.jd; I < L.length; I++) {
                        var F = L[I];
                        if (F instanceof T.bd) x.push(F);
                        else
                          for (
                            var j = null, D = 0, B = F.points(0.2);
                            D < B.length;
                            D++
                          ) {
                            var Q = B[D];
                            null !== j
                              ? (x.push(new T.bd(j, Q)), (j = null))
                              : (j = Q);
                          }
                      }
                    else
                      S instanceof A.zs
                        ? x.push(new T.bd(S.En, S.Fn))
                        : S instanceof P.Ls
                        ? (x.push(
                            new T.bd(S.Oc.Qb(-S.rx, -S.ry), S.Oc.Qb(S.rx, S.ry))
                          ),
                          (N = !0))
                        : this.Nf.nf("unanalyzed shape %s in Netflag", S);
                  }
                }
                for (
                  var X = new Array(),
                    Z = new U.xc(),
                    Y = n,
                    z = 0,
                    J = 0,
                    W = x;
                  J < W.length;
                  J++
                ) {
                  var V = W[J],
                    G = V.eb();
                  Z.pc(G);
                  var H = G.Oc(),
                    K = V.start().Fb(V.end()),
                    $ = H.y - Y.y,
                    tt = H.x - Y.x,
                    et = K / (K + z);
                  (Y = Y.Qb(tt * et, $ * et)), (z += K);
                }
                if (Z.valid()) {
                  var it = Z.wc(),
                    H = it.Oc();
                  (h = w.Ub.Tb(Y.angle(H))),
                    (h = 90 * Math.floor((h + 45) / 90)),
                    (h = w.Ub.$b(h));
                  for (
                    var rt = m.va.Vb(h),
                      nt = m.va.Vb(-h).ta(H),
                      st = 0,
                      ot = 0,
                      at = 0,
                      ht = 0,
                      ut = H,
                      ct = 0,
                      pt = x;
                    ct < pt.length;
                    ct++
                  ) {
                    var V = pt[ct];
                    (V = V.Xb(nt)),
                      V.start().x < ut.x && (ut = V.start()),
                      V.end().x < ut.x && (ut = V.end());
                    var ft = w.Ub.$b(V.end().Sb(V.start()));
                    (ft = 45 * Math.floor((ft + 22.5) / 45)),
                      0 == ft || 180 == ft
                        ? st++
                        : 90 == ft || 270 == ft
                        ? ot++
                        : (ft > 0 && ft < 90) || (ft > 180 && ft < 270)
                        ? at++
                        : ht++;
                  }
                  (ut = ut.Xb(rt.ta(H))), (rt = rt.ta(ut));
                  var lt = y.L.format("h%dv%ds%db%d", st, ot, at, ht);
                  if ("h2v1s1b1" === lt) {
                    var vt = void 0,
                      bt = void 0,
                      yt = void 0;
                    (f = ut.Qb(_.Vs, 0.7 * -g).Xb(rt)),
                      180 == h
                        ? ((yt = 0), (vt = 2), (bt = 0))
                        : ((yt = h), (vt = 0), (bt = 2));
                    var dt = new o.Zr(vt, bt);
                    (f = ut.Qb(_.Vs, 0.7 * -g).Xb(rt)),
                      180 == h
                        ? ((yt = 0), (vt = 2), (bt = 0))
                        : ((yt = h), (vt = 0), (bt = 2));
                    var gt = new l.ss(f, O, dt, 0, c, yt, p, !1),
                      wt = new M.at(
                        gt,
                        b.aj.Xi,
                        p,
                        8 * c.length,
                        !0,
                        !1,
                        ut,
                        h,
                        2
                      );
                    X.push(wt);
                  } else {
                    var vt = void 0,
                      bt = void 0,
                      yt = void 0;
                    (f = ut.Qb(_.Ss, 0).Xb(rt)),
                      0 == h
                        ? ((yt = 90), (f = f.Qb(g / 2 + _.Rs, 0)))
                        : 90 == h
                        ? (yt = 0)
                        : 180 == h
                        ? (yt = 90)
                        : ((yt = 0), (f = f.Qb(0, -g / 2 - _.Rs))),
                      (vt = 1),
                      (bt = 2);
                    var dt = new o.Zr(vt, bt),
                      gt = new l.ss(f, O, dt, 0, c, yt, p, !1),
                      mt = void 0;
                    switch (lt) {
                      case "h1v1s1b1":
                        mt = 5;
                        break;
                      case "h1v4s0b0":
                        mt = 4;
                        break;
                      case "h1v2s0b3":
                        mt = 6;
                        break;
                      case "h1v1s0b0":
                        mt = 2;
                        break;
                      default:
                        mt = N ? 0 : 2;
                    }
                    var Et = new C.dt(gt, mt, v, ut, p, h);
                    X.push(Et);
                  }
                }
                return X;
              }),
              (i.prototype.ut = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = -r.Aq(e.Qq()),
                  o = u.J.R(r.Bq(e.Qq())),
                  h = e.Qq();
                e.Qq(), "end" === e.Qq() && (n += 180), r.Dq(e.Qq(), e.Qq());
                var c = e.Qq("Verdana"),
                  p = r.Cq(e.Qq("7pt")),
                  f = new s.Hg(c, p, 1, !1, !1);
                return [new F.et(i, n, h, f, o)];
              }),
              (i.prototype.vt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = this.zt(e.Qq()),
                  r = this.yt(e);
                return [new j.ft(i, r)];
              }),
              (i.prototype.wt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq(), r.Aq(e.Qq());
                var i = r.Dq(e.Qq(), e.Qq()),
                  n = r.Dq(e.Qq(), e.Qq());
                return [new D.gt(i, n, new h._r(b.aj.$i, 2))];
              }),
              (i.prototype.xt = function (t) {
                var e = new a.Rq(t, "~");
                e.Qq();
                var i = r.Dq(e.Qq(), e.Qq());
                e.Qq(), e.Qq();
                var n = u.J.R(p.F.D(r.Bq(e.Qq()), b.aj.Zi));
                return [new B.ht(i, n)];
              }),
              i
            );
          })(r.Gq);
        i.At = z;
      }
    ),
    i(
      "pcb/easyeda/SchGroupDecoder",
      [
        "require",
        "exports",
        "pcb/easyeda/AbstractDecoder",
        "pcb/easyeda/SchDecoder",
        "utils/json/JsonWalker",
        "utils/json/JObject",
        "utils/Utils",
        "utils/Check",
        "pcb/easyeda/EasyEDASetting"
      ],
      function (t, i, r, n, s, o, a, h, u) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var c = (function (t) {
          function i(e, i, r) {
            var n = t.call(this, e, i.Sg, r) || this;
            return (n.title = null), (n.Bt = null), (n.Ct = null), n;
          }
          return (
            e(i, t),
            (i.prototype.kq = function (t, e) {
              var i = t[1],
                r = t[2];
              if (
                "schematics" === t[0] &&
                "number" == typeof i &&
                "string" == typeof r
              )
                if (
                  (i !== this.Ct &&
                    (null !== this.Bt && this.Bt.finish(),
                    (this.Bt = null),
                    (this.title = null),
                    (this.Ct = i)),
                  "dataStr" === r)
                ) {
                  if (null === this.Bt) {
                    var c = h.J.R(a.F.D(this.title, this.Sg)),
                      p = new u.qq(c, this.Nf);
                    this.Bt = new n.At(this.Eq, p, this.Nf);
                  }
                  var f = this.Bt;
                  3 === t.length && e instanceof o.Tp
                    ? new s.mq(function (t, e) {
                        return null === e || f.kq(t, e);
                      }).parse(e.Mp())
                    : this.Bt.kq(t.slice(3), e);
                } else "title" === r && (this.title = e.Mp());
              return !0;
            }),
            (i.prototype.finish = function () {
              null !== this.Bt && (this.Bt.finish(), (this.Bt = null));
            }),
            i
          );
        })(r.Gq);
        i.Dt = c;
      }
    ),
    i(
      "pcb/easyeda/Decoder",
      [
        "require",
        "exports",
        "utils/json/JsonWalker",
        "utils/json/JObject",
        "utils/CharStateMachine",
        "utils/StringKit",
        "pcb/easyeda/PcbDecoder",
        "pcb/easyeda/SchDecoder",
        "pcb/easyeda/SchGroupDecoder",
        "utils/NativeMap"
      ],
      function (t, i, r, n, s, o, a, h, u, c) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var p = (function (t) {
          function i(e) {
            var i = t.call(this) || this;
            return (
              (i.Et = []),
              (i.Ft = ""),
              (i.Eq = null),
              (i.c_para = new c.wo()),
              (i.wb = new r.mq(i.kq.bind(i))),
              (i.ao = e),
              (i.Nf = e.Nf.wrap(function (t, e) {
                return o.L.format("%s %s", i.Ft, e);
              })),
              i
            );
          }
          return (
            e(i, t),
            (i.prototype.kq = function (t, e) {
              this.Ft = t.join("|");
              try {
                if (null !== e) {
                  if ("c_para" === t[1] && "head" === t[0]) {
                    var i = t[2];
                    "string" == typeof i && this.c_para.put(i, e.Mp());
                  }
                  if (null !== this.Eq) return this.Eq.kq(t, e);
                  if (
                    ("head" === t[0] && "docType" === t[1]) ||
                    "docType" === t[0]
                  ) {
                    var r = void 0;
                    if (e instanceof n.Tp) r = parseInt(e.Mp());
                    else {
                      if (!(e instanceof n.Up))
                        throw new Error(
                          o.L.format("docType %d is not valid", e.Jp())
                        );
                      r = e.Np();
                    }
                    switch (r) {
                      case 3:
                      case 14:
                        this.Eq = new a.Or(this, this.ao, this.Nf);
                        break;
                      case 4:
                        (this.ao.pq = !0),
                          (this.Eq = new a.Or(this, this.ao, this.Nf));
                        break;
                      case 1:
                      case 13:
                        this.Eq = new h.At(this, this.ao, this.Nf);
                        break;
                      case 2:
                      case 6:
                      case 7:
                        (this.ao.pq = !0),
                          (this.Eq = new h.At(this, this.ao, this.Nf));
                        break;
                      case 5:
                        this.Eq = new u.Dt(this, this.ao, this.Nf);
                        break;
                      default:
                        throw new Error(
                          o.L.format("docType %d is not supported", r)
                        );
                    }
                  }
                }
                return !0;
              } catch (t) {
                throw (this.Nf.sf(t.stack), t);
              }
            }),
            (i.prototype.finish = function () {
              (this.Ft = ""), null !== this.Eq && this.Eq.finish();
            }),
            (i.prototype.up = function (t) {
              return this.wb.up(t);
            }),
            (i.prototype.fa = function (t) {
              return this.Et.push(t), !0;
            }),
            (i.prototype.Gt = function () {
              return this.Et;
            }),
            i
          );
        })(s.vp);
        i.Ht = p;
      }
    ),
    i(
      "pcb/altium/AbstractEncoder",
      ["require", "exports", "utils/Check"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.It = "\r"),
          (e.Jt = "\r\n");
        var r = (function () {
          function t(t) {
            (this.Kt = new Array()), (this.Nf = t);
          }
          return (
            (t.prototype.Lt = function () {
              var t = this.Kt.join("");
              return (this.Kt.length = 0), t;
            }),
            (t.prototype.Mt = function (t) {
              return i.J.N(t), (0 | t) === t ? t.toString() : t.toFixed(4);
            }),
            (t.prototype.Nt = function (t) {
              this.Kt.push(t);
            }),
            (t.prototype.item = function (t, e) {
              var i = e.toString();
              /^[\x20-\x7e]*$/m.test(i) || (t = "%UTF8%" + t),
                this.Nt("|"),
                this.Nt(t),
                this.Nt("="),
                this.Nt(i.replace(/\|/g, ""));
            }),
            t
          );
        })();
        e.Ot = r;
      }
    ),
    i(
      "pcb/altium/LayerInfo",
      ["require", "exports", "pcb/primitives/pcb/PcbLayer", "utils/StringKit"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t(t, e, i) {
            (this.next = null), (this.id = t), (this.og = e), (this.name = i);
          }
          return (
            (t.prototype.toString = function () {
              return r.L.format(
                "LayerNode%d %s alias %s next %d",
                this.id,
                this.og,
                this.name,
                null == this.next ? -1 : this.next.id
              );
            }),
            t
          );
        })();
        e.Pt = n;
        var s = (function () {
          function t() {
            this.Qt = [];
            var t = 1;
            this.add(i.mg.dg, "Top Layer", t++);
            for (var e = 1; e <= 30; e++)
              this.add(new i.mg(5, e), r.L.format("Mid-Layer %d", e), t++);
            this.add(i.mg.eg, "Bottom Layer", t++),
              this.add(i.mg.ag, "Top Overlay", t++),
              this.add(i.mg.hg, "Bottom Overlay", t++),
              this.add(i.mg.cg, "Top Paste", t++),
              this.add(i.mg.fg, "Bottom Paste", t++),
              this.add(i.mg.bg, "Top Solder", t++),
              this.add(i.mg.gg, "Bottom Solder", t++);
            for (var e = 1; e <= 16; e++)
              this.add(new i.mg(6, e), r.L.format("Internal Plane %d", e), t++);
            this.add(i.mg.lg, "Drill Guide", t++),
              this.add(i.mg.ig, "Keep-Out Layer", t++);
            for (var e = 1; e <= 16; e++)
              15 === e
                ? this.add(i.mg.jg, "Document", t++)
                : 16 === e
                ? this.add(i.mg.lg, "Other", t++)
                : this.add(
                    new i.mg(13, e),
                    r.L.format("Mechanical %d", e),
                    t++
                  );
            this.add(i.mg.lg, "Drill Drawing", t++),
              this.add(i.mg._f, "Multi-Layer", t++),
              this.add(i.mg.lg, "Connections", t++),
              this.add(i.mg.lg, "Background", t++),
              this.add(i.mg.lg, "DRC Error Markers", t++),
              this.add(i.mg.lg, "Selections", t++),
              this.add(i.mg.lg, "Visible Grid 1", t++),
              this.add(i.mg.lg, "Visible Grid 2", t++),
              this.add(i.mg.lg, "Pad Holes", t++),
              this.add(i.mg.lg, "Via Holes", t++);
          }
          return (
            (t.prototype.layers = function () {
              return this.Qt;
            }),
            (t.prototype.add = function (t, e, i) {
              this.Qt.push(new n(i, t, e));
            }),
            t
          );
        })();
        e.Jq = s;
      }
    ),
    i(
      "pcb/altium/PcbEncoder",
      [
        "require",
        "exports",
        "pcb/altium/AbstractEncoder",
        "pcb/primitives/pcb/PcbComponent",
        "utils/ListSet",
        "pcb/primitives/pcb/PcbLayer",
        "pcb/primitives/pcb/PcbPad",
        "geometry/Matrix3",
        "pcb/primitives/pcb/PcbTrack",
        "pcb/altium/LayerInfo",
        "utils/StringKit",
        "pcb/primitives/pcb/PcbString",
        "pcb/primitives/pcb/PcbPolygonPour",
        "pcb/primitives/pcb/PcbVia",
        "pcb/primitives/pcb/PcbArc",
        "pcb/primitives/pcb/PcbRegion",
        "pcb/primitives/pcb/PcbFill",
        "pcb/primitives/pcb/PcbPlaneZone",
        "utils/Check",
        "geometry/Line",
        "geometry/Arc",
        "geometry/utils/Angle",
        "utils/NativeMap",
        "pcb/primitives/pcb/PcbImage",
        "pcb/primitives/Font",
        "geometry/polybool/Simplify",
        "geometry/polybool/FillRule",
        "geometry/polybool/DefaultSweepEvent",
        "utils/Utils",
        "geometry/BBox2",
        "geometry/Vector2"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I
      ) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var L = new I.Zb(1500, 1500),
          P = new a.hn(0, 0, 0, 0, null),
          _ = (function (t) {
            function i(e, i) {
              var r = t.call(this, i) || this;
              return (
                (r.Rt = -1),
                (r.St = 0),
                (r.Tt = -1),
                (r.Ut = null),
                (r.Vt = new x.wo()),
                (r.Wt = new s.Yg()),
                (r._n = e),
                r
              );
            }
            return (
              e(i, t),
              (i.prototype.ng = function (t) {
                var e = this;
                if (!w.J.I(t)) {
                  var i = this.Vt.ab(t, function () {
                    return e.St++;
                  });
                  this.item("NET", i);
                }
              }),
              (i.prototype.Xt = function (t) {
                switch (t) {
                  case 0:
                    return "ROUND";
                  case 1:
                    return "RECTANGLE";
                  case 3:
                    return "OCTAGONAL";
                  case 2:
                    return "ROUNDEDRECTANGLE";
                  default:
                    return this.Nf.nf("unknow pad out shape %s", t), "ROUND";
                }
              }),
              (i.prototype.Yt = function (t) {
                switch ((this.Wt.add(t), t.type)) {
                  case 4:
                    return "TOP";
                  case 3:
                    return "TOPPASTE";
                  case 1:
                    return "TOPOVERLAY";
                  case 2:
                    return "TOPSOLDER";
                  case 7:
                    return "BOTTOM";
                  case 8:
                    return "BOTTOMPASTE";
                  case 10:
                    return "BOTTOMOVERLAY";
                  case 9:
                    return "BOTTOMSOLDER";
                  case 6:
                    return "PLANE" + t.order;
                  case 5:
                    return "MID" + t.order;
                  case 13:
                    return "MECHANICAL" + t.order;
                  case 0:
                    return "MULTILAYER";
                  case 16:
                    return "MECHANICAL16";
                  case 11:
                    return "KEEPOUT";
                  case 12:
                    return "MECHANICAL15";
                  default:
                    return (
                      this.Nf.nf(
                        "unknow layer type %d use mechanical instead",
                        o.Zf(t.type)
                      ),
                      "MECHANICAL16"
                    );
                }
              }),
              (i.prototype.Zt = function (t) {
                return this.Mt(t) + "mil";
              }),
              (i.prototype.bo = function () {
                for (
                  var t = this, e = new S.xc(), i = 0, s = this._n.Og;
                  i < s.length;
                  i++
                ) {
                  var a = s[i];
                  e.pc(a.eb());
                }
                if (e.valid()) {
                  for (
                    var f = e.wc(),
                      l = h.va
                        .translate(-f.hb, -f.fb)
                        .scale(this._n.scale)
                        .qa(L),
                      v = new Array(),
                      b = new Array(),
                      y = 0,
                      d = this._n.Og;
                    y < d.length;
                    y++
                  )
                    for (
                      var a = d[y],
                        g = a instanceof n.Rg,
                        w = 0,
                        m = this.co(a.Xb(l));
                      w < m.length;
                      w++
                    ) {
                      var E = m[w];
                      g ? ((g = !1), v.push(E)) : b.push(E);
                    }
                  if (((f = f.transform(l)), !this.Wt.contains(o.mg.jg))) {
                    var O = new u.tg(
                      "",
                      o.mg.jg,
                      f.Oc().Qb(-1, -1),
                      f.Oc().Qb(1, 1),
                      0.1,
                      !1
                    );
                    b.push(this.$t(O)[0]);
                  }
                  var x = new Array();
                  this.item("RECORD", "Board"),
                    this.item("KIND", "Protel_Advanced_PCB"),
                    this.item("VERSION", "5.00");
                  for (
                    var A = [
                        f.Nc().Qb(500, -500),
                        f.Mc().Qb(-500, -500),
                        f.Kc().Qb(-500, 500),
                        f.Lc().Qb(500, 500),
                        f.Nc().Qb(500, -500)
                      ],
                      N = 0;
                    N < A.length;
                    N++
                  ) {
                    var q = A[N];
                    this.item("KIND" + N, this.Mt(0)),
                      this.item("VX" + N, this.Zt(q.x)),
                      this.item("VY" + N, this.Zt(q.y)),
                      this.item("CX" + N, this.Zt(0)),
                      this.item("CY" + N, this.Zt(0)),
                      this.item("SA" + N, this.Mt(0)),
                      this.item("EA" + N, this.Mt(0)),
                      this.item("R" + N, this.Zt(0));
                  }
                  x.push(this.Lt());
                  for (var T = 0, k = new c.Jq().layers(); T < k.length; T++) {
                    var E = k[T];
                    E.id % 5 == 1 &&
                      (x.push(this.Lt()), this.item("RECORD", "Board"));
                    var R = p.L.format("LAYER%d", E.id);
                    this.item(R + "NAME", E.name);
                    var I = void 0;
                    switch (E.name) {
                      case "Top Layer":
                        I = 32;
                        break;
                      case "Top Overlay":
                      case "Top Paste":
                      case "Top Solder":
                        I = 1;
                        break;
                      default:
                        I = 0;
                    }
                    if (p.L.startsWith(E.name, "Mechanical")) {
                      var P = parseInt(E.name.substring("Mechanical ".length));
                      (this.Wt.contains(new o.mg(13, P)) ||
                        (15 === P && this.Wt.contains(o.mg.jg)) ||
                        (16 === P && this.Wt.contains(o.mg.lg))) &&
                        this.item(R + "MECHENABLED", "TRUE");
                    }
                    this.item(R + "NEXT", I),
                      this.item(R + "DIELTYPE", "0"),
                      this.item(R + "DIELCONST", "4.800"),
                      this.item(R + "DIELHEIGHT", "12.6mil"),
                      this.item(R + "DIELMATERIAL", "FR-4");
                  }
                  x.push(this.Lt());
                  var _ = new Array();
                  this.Vt.iterator(function (e, i) {
                    return (
                      t.item("RECORD", "Net"),
                      t.item("ID", i),
                      t.item("NAME", e),
                      t.item("VISIBLE", "FALSE"),
                      t.item("JUMPERSVISIBLE", "FALSE"),
                      _.push(t.Lt()),
                      !0
                    );
                  });
                  for (
                    var M = !0, C = new Array(), F = 0, j = x;
                    F < j.length;
                    F++
                  ) {
                    var D = j[F];
                    D.length > 0 && (M ? (M = !1) : C.push(r.It), C.push(D));
                  }
                  for (var B = 0, U = _; B < U.length; B++) {
                    var D = U[B];
                    C.push(r.Jt), C.push(D);
                  }
                  for (var Q = 0, X = v; Q < X.length; Q++) {
                    var D = X[Q];
                    C.push(r.Jt), C.push(D);
                  }
                  for (var Z = 0, Y = b; Z < Y.length; Z++) {
                    var D = Y[Z];
                    C.push(r.Jt), C.push(D);
                  }
                  return C.push(r.Jt), C;
                }
                return null;
              }),
              (i.prototype.co = function (t) {
                return t instanceof u.tg
                  ? this.$t(t)
                  : t instanceof f.Jg
                  ? this._t(t)
                  : t instanceof l.Dn
                  ? this.au(t)
                  : t instanceof v.cn
                  ? this.bu(t)
                  : t instanceof a.rn
                  ? this.cu(t)
                  : t instanceof n.Rg
                  ? this.du(t)
                  : t instanceof b.ug
                  ? this.eu(t)
                  : t instanceof y.rg
                  ? this.fu(t)
                  : t instanceof d.Gn
                  ? this.gu(t)
                  : t instanceof g.Jn
                  ? this.hu(t)
                  : t instanceof A.Ln
                  ? this.iu(t)
                  : (this.Nf.nf("%s is not supported", t), []);
              }),
              (i.prototype.iu = function (t) {
                if (null === this.Ut) {
                  var e = new n.Qg();
                  return (
                    (e.location = t.eb().Kc()),
                    (e.pattern = "IMPORTED_IMAGE"),
                    (e.Ng = new f.Jg(
                      t.ng,
                      t.og,
                      e.location,
                      0,
                      e.pattern,
                      new N.Hg("", 1, 1),
                      !1
                    )),
                    (e.Lg = !1),
                    (e.Mg = e.Ng),
                    (e.Kg = !1),
                    (e.og = t.og),
                    (e.orientation = 0),
                    e.Og.push(t),
                    this.du(e.wc())
                  );
                }
                for (
                  var i = new k.gh(!1),
                    r = new q.Zh(T.Kf, this.Nf, i),
                    s = 0,
                    o = t.Kn;
                  s < o.length;
                  s++
                ) {
                  var a = o[s];
                  r.Rf(a);
                }
                r.Fh();
                for (var h = new Array(), u = 0, c = i.fh; u < c.length; u++) {
                  var p = c[u];
                  h.push(this.ju(t, p));
                }
                return h;
              }),
              (i.prototype.ju = function (t, e) {
                this.item("RECORD", "Region"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.item("POLYGONOUTLINE", "FALSE"),
                  this.item("ISSHAPEBASED", "TRUE"),
                  this.item("KIND", "0");
                for (var i = e.nb, r = 0; r < i.length; r++) {
                  var n = i[r];
                  if (0 === r)
                    if (0 === n.jd.length)
                      this.item("MAINCONTOURVERTEXCOUNT", this.Mt(0));
                    else {
                      var s = n.jd,
                        o = n.closed() ? s.length + 1 : s.length + 2;
                      this.item("MAINCONTOURVERTEXCOUNT", this.Mt(o)),
                        this.ku(s);
                    }
                  else
                    1 === r && this.item("HOLECOUNT", this.Mt(i.length - 1)),
                      this.lu(n, r - 1);
                }
                return this.Lt();
              }),
              (i.prototype.hu = function (t) {
                return (
                  this.item("RECORD", "Polygon"),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.item("POLYGONTYPE", "Split Plane"),
                  this.item("POLYGONOUTLINE", "FALSE"),
                  this.ku(t.outline.jd),
                  [this.Lt()]
                );
              }),
              (i.prototype.$t = function (t) {
                return (
                  this.item("RECORD", "Track"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.item("POLYGONOUTLINE", t.sg ? "TRUE" : "FALSE"),
                  this.item("X1", this.Zt(t.start.x)),
                  this.item("Y1", this.Zt(t.start.y)),
                  this.item("X2", this.Zt(t.end.x)),
                  this.item("Y2", this.Zt(t.end.y)),
                  this.item("WIDTH", this.Zt(t.width)),
                  [this.Lt()]
                );
              }),
              (i.prototype._t = function (t) {
                this.item("RECORD", "Text"),
                  null !== this.Ut &&
                    (this.item("COMPONENT", this.Mt(this.Rt)),
                    t === this.Ut.Mg && this.item("DESIGNATOR", "True"),
                    t === this.Ut.Ng && this.item("COMMENT", "True")),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  w.J.I(t.font.Fg)
                    ? (this.item("FONTNAME", "Arial"),
                      this.item("USETTFONTS", "FALSE"))
                    : (this.item("FONTNAME", t.font.Fg),
                      this.item("USETTFONTS", "TRUE"));
                for (var e = new Array(), i = 0; i < t.text.length; i++) {
                  var r = t.text.charCodeAt(i);
                  e.push(r.toString());
                }
                return (
                  this.item("WIDESTRING", e.join(",")),
                  t.text.indexOf("\n") >= 0 && this.item("MULTILINE", "TRUE"),
                  this.item("WIDTH", this.Zt(t.font.weight)),
                  this.item("HEIGHT", this.Zt(t.font.size)),
                  this.item("ROTATION", this.Mt(t.rotation)),
                  this.item("MIRROR", t.Ig ? "TRUE" : "FALSE"),
                  this.item("X", this.Zt(t.location.x)),
                  this.item("Y", this.Zt(t.location.y)),
                  [this.Lt()]
                );
              }),
              (i.prototype.au = function (t) {
                return (
                  this.item("RECORD", "Polygon"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("ID", this.Mt(++this.Tt)),
                  this.item("POLYGONTYPE", "Polygon"),
                  this.item("POUROVERSTYLE", this.Mt(1)),
                  this.item("HATCHSTYLE", "Solid"),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.ku(t.qg),
                  [this.Lt()]
                );
              }),
              (i.prototype.lu = function (t, e) {
                for (
                  var i = new Array(), r = 0, n = t.md().jd;
                  r < n.length;
                  r++
                )
                  for (
                    var s = n[r], o = 0, a = s.points(1);
                    o < a.length;
                    o++
                  ) {
                    var h = a[o];
                    i.push(h);
                  }
                this.item("HOLE" + e + "VERTEXCOUNT", this.Mt(i.length));
                for (var u = "H" + e, c = 0; c < i.length; c++) {
                  var h = i[c];
                  this.item(u + "VX" + c, this.Mt(1e4 * h.x)),
                    this.item(u + "VY" + c, this.Mt(1e4 * h.y));
                }
              }),
              (i.prototype.ku = function (t) {
                for (
                  var e = null, i = null, r = 0, n = 0, s = t;
                  n < s.length;
                  n++
                ) {
                  var o = s[n];
                  o instanceof m.bd
                    ? (null === e && (e = o.start()),
                      (i = o.end()),
                      this.mu(o.start(), r++))
                    : o instanceof E.ad &&
                      (null === e && (e = o.start()),
                      (i = o.end()),
                      this.nu(o, r++));
                }
                null !== i && this.mu(i, r++),
                  null === e || e.u(i) || this.mu(e, r);
              }),
              (i.prototype.nu = function (t, e) {
                this.item("KIND" + e, this.Mt(1)),
                  this.item("VX" + e, this.Zt(t.start().x)),
                  this.item("VY" + e, this.Zt(t.start().y)),
                  0 === t.zd() && (t = t.nd()),
                  this.item("CX" + e, this.Zt(t.Oc.x)),
                  this.item("CY" + e, this.Zt(t.Oc.y)),
                  this.item("SA" + e, this.Mt(t.td)),
                  this.item("EA" + e, this.Mt(t.Ad())),
                  this.item("R" + e, this.Mt(t.rx));
              }),
              (i.prototype.mu = function (t, e) {
                this.item("KIND" + e, this.Mt(0)),
                  this.item("VX" + e, this.Zt(t.x)),
                  this.item("VY" + e, this.Zt(t.y)),
                  this.item("CX" + e, this.Zt(0)),
                  this.item("CY" + e, this.Zt(0)),
                  this.item("SA" + e, this.Mt(0)),
                  this.item("EA" + e, this.Mt(0)),
                  this.item("R" + e, this.Zt(0));
              }),
              (i.prototype.bu = function (t) {
                return (
                  this.item("RECORD", "Via"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  isNaN(t.$m)
                    ? isNaN(t.an)
                      ? this.item("STARTLAYER", "MIDLAYER1")
                      : this.item("STARTLAYER", "BOTTOM")
                    : this.item("STARTLAYER", "TOP"),
                  isNaN(t.an)
                    ? isNaN(t.$m)
                      ? this.item("ENDLAYER", "MIDLAYER1")
                      : this.item("ENDLAYER", "TOP")
                    : this.item("ENDLAYER", "BOTTOM"),
                  this.item("LOCKED", "FALSE"),
                  this.item("X", this.Zt(t.Oc.x)),
                  this.item("Y", this.Zt(t.Oc.y)),
                  this.item("HOLESIZE", this.Mt(t.Zm)),
                  this.item("PADMODE", this.Mt(0)),
                  this.item("TOPLAYERSIZE", this.Zt(t.$m)),
                  this.item("MIDLAYER1SIZE", this.Zt(t._m)),
                  this.item("BOTTOMLAYERSIZE", this.Zt(t.an)),
                  this.item("DIAMETER", this.Mt(t._m)),
                  [this.Lt()]
                );
              }),
              (i.prototype.cu = function (t) {
                var e = new Array(),
                  i = new Array(),
                  r = t.Og,
                  n = r.top,
                  s = r.inner,
                  a = r.in;
                if (null !== n && null !== n.outline) {
                  var h = n.outline;
                  i.push(new y.rg(t.ng, o.mg.dg, 0, h)),
                    t.on && i.push(new y.rg(t.ng, o.mg.cg, 0, h)),
                    i.push(new y.rg(t.ng, o.mg.bg, 0, h)),
                    (n = P);
                }
                if (null !== a && null !== a.outline) {
                  var h = a.outline;
                  i.push(new y.rg(t.ng, o.mg.eg, 0, h)),
                    t.on && i.push(new y.rg(t.ng, o.mg.fg, 0, h)),
                    i.push(new y.rg(t.ng, o.mg.gg, 0, h)),
                    (a = P);
                }
                if (null !== s && null !== s.outline) {
                  for (
                    var h = s.outline, u = 0, c = this._n.Zg;
                    u < c.length;
                    u++
                  ) {
                    var p = c[u];
                    5 === p.type && i.push(new y.rg(t.ng, p, 0, h));
                  }
                  s = P;
                }
                for (var f = 0, l = i; f < l.length; f++) {
                  var v = l[f];
                  R.F.t(e, this.fu(v));
                }
                switch (
                  (this.item("RECORD", "Pad"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.item("ROTATION", this.Mt(O.Ub.$b(t.rotation))),
                  this.item("NAME", t.Mg),
                  this.item("HOLEWIDTH", this.Mt(t.ln.length)),
                  this.item("PLATED", t.on ? "TRUE" : "FALSE"),
                  t.ln.type)
                ) {
                  case 0:
                    this.item("HOLETYPE", this.Mt(0));
                    break;
                  case 1:
                    this.item("HOLETYPE", this.Mt(1));
                    break;
                  case 2:
                    this.item("HOLETYPE", this.Mt(2));
                    break;
                  default:
                    this.Nf.nf("unknow hole shape %s", t.ln.type),
                      this.item("HOLETYPE", this.Mt(0));
                }
                this.item("HOLESIZE", this.Zt(t.ln.size)),
                  this.item("HOLEROTATION", this.Mt(O.Ub.$b(t.ln.rotation))),
                  this.item("PADXOFFSET0", this.Zt(r.offsetX)),
                  this.item("PADYOFFSET0", this.Zt(r.offsetY)),
                  this.item("X", this.Zt(t.location.x)),
                  this.item("Y", this.Zt(t.location.y)),
                  this.item("PADMODE", this.Mt(0));
                var b;
                return (
                  null !== n && null !== a
                    ? (this.item("TOPSHAPE", this.Xt(n.type)),
                      this.item("TOPXSIZE", this.Zt(n.en)),
                      this.item("TOPYSIZE", this.Zt(n.fn)),
                      this.item("TOPLAYERCRPCT", this.Mt(n.gn)),
                      this.item("BOTSHAPE", this.Xt(a.type)),
                      this.item("BOTXSIZE", this.Zt(a.en)),
                      this.item("BOTYSIZE", this.Zt(a.fn)),
                      this.item("BOTTOMLAYERCRPCT", this.Mt(a.gn)),
                      (b = w.J.R(s)))
                    : null !== n
                    ? ((b = n), this.item("TOPLAYERCRPCT", this.Mt(n.gn)))
                    : null !== a
                    ? ((b = a), this.item("BOTTOMLAYERCRPCT", this.Mt(a.gn)))
                    : (b = w.J.R(t.Og.inner)),
                  this.item("SHAPE", this.Xt(b.type)),
                  this.item("XSIZE", this.Zt(b.en)),
                  this.item("YSIZE", this.Zt(b.fn)),
                  this.item("MIDLAYER1CRPCT", this.Mt(b.gn)),
                  e.push(this.Lt()),
                  e
                );
              }),
              (i.prototype.du = function (t) {
                var e = new Array();
                this.Rt++,
                  this.item("RECORD", "Component"),
                  this.item("ID", this.Mt(this.Rt)),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("X", this.Zt(t.location.x)),
                  this.item("Y", this.Zt(t.location.y)),
                  this.item("ROTATION", this.Mt(t.orientation)),
                  this.item("PATTERN", t.pattern),
                  this.item("SOURCEDESIGNATOR", t.Mg.text),
                  this.item("NAMEON", t.Kg ? "TRUE" : "FALSE"),
                  this.item("COMMENTON", t.Lg ? "TRUE" : "FALSE"),
                  e.push(this.Lt()),
                  (this.Ut = t),
                  R.F.t(e, this._t(t.Mg)),
                  R.F.t(e, this._t(t.Ng));
                for (var i = 0, r = t.Og; i < r.length; i++) {
                  var n = r[i];
                  R.F.t(e, this.co(n));
                }
                return (this.Ut = null), e;
              }),
              (i.prototype.eu = function (t) {
                var e = t.arc,
                  i = e.start(),
                  r = e.end();
                if (i.Fb(r) > 1e-4 || e.yd()) {
                  this.item("RECORD", "Arc"),
                    null === this.Ut ||
                      this.item("COMPONENT", this.Mt(this.Rt));
                  var n = t.arc;
                  return (
                    0 === n.zd() && (n = n.nd()),
                    this.ng(t.ng),
                    this.item("SELECTION", "FALSE"),
                    this.item("LAYER", this.Yt(t.og)),
                    this.item("LOCKED", "FALSE"),
                    this.item("WIDTH", this.Mt(t.width)),
                    this.item("LOCATION.X", this.Zt(n.Oc.x)),
                    this.item("LOCATION.Y", this.Zt(n.Oc.y)),
                    this.item("STARTANGLE", this.Mt(n.td)),
                    this.item("ENDANGLE", this.Mt(n.Ad())),
                    this.item("RADIUS", this.Zt(n.rx)),
                    this.item("SECONDARYRADIUS", this.Zt(n.ry)),
                    this.item("KEEPOUT", t.sg ? "TRUE" : "FALSE"),
                    [this.Lt()]
                  );
                }
                return this.$t(new u.tg(t.ng, t.og, i, r, t.width, t.sg));
              }),
              (i.prototype.fu = function (t) {
                switch (
                  (this.item("RECORD", "Region"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.item("POLYGONOUTLINE", "FALSE"),
                  this.item("ISSHAPEBASED", "TRUE"),
                  t.kind)
                ) {
                  case 2:
                    this.item("KIND", "0"), this.item("ISBOARDCUTOUT", "TRUE");
                    break;
                  case 1:
                    this.item("KIND", "1");
                    break;
                  case 0:
                    this.item("KIND", "0");
                    break;
                  default:
                    this.Nf.nf("unknow region kind %s", t.kind),
                      this.item("KIND", "0");
                }
                if (0 === t.qg.jd.length)
                  this.item("MAINCONTOURVERTEXCOUNT", this.Mt(0));
                else {
                  var e = t.qg.jd,
                    i = t.qg.closed() ? e.length : e.length + 1;
                  this.item("MAINCONTOURVERTEXCOUNT", this.Mt(i)), this.ku(e);
                }
                return this.item("HOLECOUNT", this.Mt(0)), [this.Lt()];
              }),
              (i.prototype.gu = function (t) {
                return (
                  this.item("RECORD", "Fill"),
                  null !== this.Ut && this.item("COMPONENT", this.Mt(this.Rt)),
                  this.ng(t.ng),
                  this.item("SELECTION", "FALSE"),
                  this.item("LAYER", this.Yt(t.og)),
                  this.item("LOCKED", "FALSE"),
                  this.item("ROTATION", this.Mt(t.rotation)),
                  this.item("X1", this.Zt(t.En.x)),
                  this.item("Y1", this.Zt(t.En.y)),
                  this.item("X2", this.Zt(t.Fn.x)),
                  this.item("Y2", this.Zt(t.Fn.y)),
                  this.item("KEEPOUT", t.sg ? "TRUE" : "FALSE"),
                  [this.Lt()]
                );
              }),
              i
            );
          })(r.Ot);
        i.ou = _;
      }
    ),
    i(
      "pcb/altium/AbstractDecoder",
      ["require", "exports", "pcb/primitives/Color"],
      function (t, e, i) {
        function r(t) {
          var e = parseInt(t),
            r = 255 & e,
            n = (e >> 8) & 255,
            s = (e >> 16) & 255;
          return new i.aj(r, n, s);
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.xq = "Altium"),
          (e.Bq = r);
        var n = (function () {
          function t(t) {
            (this.qp = 0),
              (this.pu = 0),
              (this.Eq = t),
              (this.Nf = t.Nf),
              (this.qu = t.qu);
          }
          return (
            (t.prototype.fa = function (t) {
              this.Eq.fa(t);
            }),
            (t.prototype.up = function (t, e, i) {
              (this.qp = e), (this.pu = i), this.kq(t);
            }),
            (t.prototype.line = function () {
              return this.qp;
            }),
            (t.prototype.index = function () {
              return this.pu;
            }),
            t
          );
        })();
        e.Gq = n;
      }
    ),
    i(
      "pcb/altium/PcbDecoder",
      [
        "require",
        "exports",
        "pcb/altium/AbstractDecoder",
        "utils/NativeMap",
        "pcb/altium/LayerInfo",
        "utils/Check",
        "pcb/primitives/pcb/PcbLayer",
        "pcb/primitives/pcb/PcbString",
        "geometry/Line",
        "geometry/Arc",
        "utils/StringKit",
        "pcb/primitives/Font",
        "pcb/primitives/pcb/PcbArc",
        "pcb/primitives/pcb/PcbPad",
        "pcb/primitives/pcb/PcbVia",
        "utils/io/UTF16WriteBuffer",
        "pcb/primitives/pcb/PcbRegion",
        "geometry/Polyline",
        "pcb/primitives/pcb/PcbPolygonPour",
        "pcb/primitives/pcb/PcbPlaneZone",
        "pcb/primitives/pcb/PcbFill",
        "pcb/primitives/pcb/PcbTrack",
        "pcb/primitives/pcb/PcbDocument",
        "pcb/primitives/pcb/PcbComponent",
        "geometry/Vector2",
        "pcb/primitives/pcb/PcbImage"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q
      ) {
        function T(t) {
          return (
            (t = o.J.T(t)),
            t.endsWith("mil") && (t = t.substring(0, t.length - 3)),
            parseInt(t)
          );
        }
        function k(t) {
          return (
            (t = o.J.T(t)),
            t.endsWith("mil") && (t = t.substring(0, t.length - 3)),
            parseFloat(t)
          );
        }
        function R(t, e) {
          return new N.Zb(k(t), k(e));
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var S = (function (t) {
          function i(e) {
            var i = t.call(this, e) || this;
            (i.ru = new n.wo()),
              (i.Vt = new n.wo()),
              (i.su = new Array()),
              (i.tu = new s.Jq()),
              (i.uu = !1),
              (i.data = new n.wo());
            var o = new x._g();
            return (o.Sg = e.Sg), (o.Tg = r.xq), (o.scale = 1), (i._n = o), i;
          }
          return (
            e(i, t),
            (i.prototype.kq = function (t) {
              this.data = t;
              var e = t.get("RECORD");
              if (!o.J.I(e) && !t.contains("POLYGON"))
                try {
                  switch (e) {
                    case "Board":
                      this.vu();
                      break;
                    case "Component":
                      this.wu();
                      break;
                    case "Arc":
                      this.xu();
                      break;
                    case "Pad":
                      this.wr();
                      break;
                    case "Via":
                      this.xr();
                      break;
                    case "Track":
                      this.tr();
                      break;
                    case "Text":
                      this.ur();
                      break;
                    case "Region":
                      this.yu();
                      break;
                    case "Fill":
                      this.zu();
                      break;
                    case "Polygon":
                      this.rt();
                      break;
                    case "Net":
                      this.Au();
                      break;
                    default:
                      this.Nf.nf("unrecognized RECORD name %s", e);
                  }
                } catch (t) {
                  this.Nf.sf(t);
                }
              return !0;
            }),
            (i.prototype.finish = function () {
              var t = this._n,
                e = this.tu.layers();
              t.$g(e[0].og);
              for (var i = e[0].next; null != i; )
                this.Nf.if(i), t.$g(i.og), (i = i.next);
              this.qu ||
                this.uu ||
                t.Og.push(new d.rg("", a.mg.ig, 2, g.Zc.$c(this.su))),
                this.ru.iterator(function (e, i) {
                  return i.Og.length > 0 && t.Og.push(i.wc()), !0;
                }),
                this.fa(t.wc());
            }),
            (i.prototype.ng = function (t) {
              if (void 0 === t) return "";
              var e = this.Vt.get(t);
              return o.J.I(e) ? "" : e;
            }),
            (i.prototype.og = function (t) {
              t = o.J.T(t);
              var e,
                i = 0;
              switch (t) {
                case "BOTTOM":
                  e = 7;
                  break;
                case "TOP":
                  e = 4;
                  break;
                case "TOPPASTE":
                  e = 3;
                  break;
                case "BOTTOMPASTE":
                  e = 8;
                  break;
                case "BOTTOMOVERLAY":
                  e = 10;
                  break;
                case "TOPOVERLAY":
                  e = 1;
                  break;
                case "TOPSOLDER":
                  e = 2;
                  break;
                case "BOTTOMSOLDER":
                  e = 9;
                  break;
                case "KEEPOUT":
                  e = 11;
                  break;
                case "MULTILAYER":
                  e = 0;
                  break;
                default:
                  t.startsWith("MID")
                    ? ((e = 5), (i = T(t.substring("MID".length))))
                    : t.startsWith("MECHANICAL")
                    ? ((e = 13), (i = T(t.substring("MECHANICAL".length))))
                    : t.startsWith("PLANE")
                    ? ((e = 6), (i = T(t.substring("PLANE".length))))
                    : (this.Nf.nf("unknow layer type %s", t), (e = 16));
              }
              return new a.mg(e, i);
            }),
            (i.prototype.Bu = function (t) {
              var e = this.data;
              if (e.contains("COMPONENT")) {
                var i = o.J.T(e.get("COMPONENT")),
                  r = this.ru.get(i);
                void 0 === r
                  ? (this.Nf.nf("component %s not found", i),
                    this._n.Og.push(t))
                  : t instanceof h.Jg
                  ? "True" === e.uo("DESIGNATOR", "False")
                    ? this.qu
                      ? (r.Mg = new h.Jg(
                          t.ng,
                          t.og,
                          t.location,
                          t.rotation,
                          t.text.replace(/^(\D*)\d+/, "$1?"),
                          t.font,
                          t.Ig
                        ))
                      : (r.Mg = t)
                    : "True" === e.uo("COMMENT", "False")
                    ? (r.Ng = t)
                    : r.Og.push(t)
                  : r.Og.push(t);
              } else this._n.Og.push(t);
            }),
            (i.prototype.vu = function () {
              var t = this.data;
              if (1 === this.line())
                for (var e = 0, i = null; ; ) {
                  var r = t.get("KIND" + e);
                  if (o.J.I(r)) break;
                  var n = T(r);
                  if (0 == n || 1 == n) {
                    var s = R(t.get("VX" + e), t.get("VY" + e));
                    if (
                      (null == i
                        ? (i = s)
                        : (this.su.push(new u.bd(i, s)), (i = s)),
                      1 == n)
                    ) {
                      var a = R(t.get("CX" + e), t.get("CY" + e)),
                        h = k(t.get("SA" + e)),
                        f = k(t.get("EA" + e)),
                        l = k(t.get("R" + e)),
                        v = c.ad.$c(a, h, f, l, l, 1);
                      v.start().Fb(s) > v.vd.Fb(s) && (v = v.nd()),
                        this.su.push(v),
                        (i = null);
                    }
                  } else this.Nf.nf("unkonwn kind %d", n);
                  e++;
                }
              else
                for (var b = this.tu.layers(), e = 1; e <= b.length; e++) {
                  var y = p.L.format("LAYER%dNEXT", e),
                    d = T(t.uo(y, "0"));
                  if (d > 0) {
                    var g = b[e - 1],
                      w = b[d - 1];
                    g.next = w;
                  }
                }
            }),
            (i.prototype.wu = function () {
              var t = this.data,
                e = new A.Qg();
              (e.og = this.og(t.get("LAYER"))),
                (e.location = R(t.uo("X", "0"), t.uo("Y", "0"))),
                (e.orientation = k(t.uo("ROTATION", "0"))),
                (e.pattern = t.uo("PATTERN", "")),
                (e.Kg = "TRUE" === t.get("NAMEON")),
                (e.Lg = "TRUE" === t.get("COMMENTON")),
                (e.Mg = new h.Jg(
                  "U?",
                  a.mg.jg,
                  e.location,
                  e.orientation,
                  e.pattern,
                  new f.Hg("", 1, 0.1),
                  !1
                )),
                (e.Ng = e.Mg),
                this.ru.put(o.J.T(t.get("ID")), e),
                this.Nf.kf("detected PCB component %s", e.pattern);
            }),
            (i.prototype.xu = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = Math.max(k(t.get("WIDTH")), 0.5),
                r = R(t.get("LOCATION.X"), t.get("LOCATION.Y")),
                n = k(t.uo("STARTANGLE", "0")),
                s = k(t.uo("ENDANGLE", "0")),
                a = Math.max(k(t.get("RADIUS")), 0.01),
                h = Math.max(
                  k(t.uo("SECONDARYRADIUS", o.J.T(t.get("RADIUS")))),
                  0.01
                ),
                u = "TRUE" === t.uo("KEEPOUT", "FALSE"),
                p = this.og(t.get("LAYER"));
              11 === p.type && u && (this.uu = !0);
              var f = c.ad.$c(r, n, s, a, h, 1);
              this.Bu(new l.ug(e, p, f, i, u));
            }),
            (i.prototype.Cu = function (t) {
              switch ((t = o.J.T(t))) {
                case "ROUND":
                  return 0;
                case "RECTANGLE":
                  return 1;
                case "OCTAGONAL":
                  return 3;
                case "ROUNDEDRECTANGLE":
                  return 2;
                default:
                  return this.Nf.nf("unknow shape %s", t), 0;
              }
            }),
            (i.prototype.Du = function (t, e, i, r, n) {
              var s = this.data,
                o = this.Cu(s.uo(t + "SHAPE", i)),
                a = Math.max(k(s.uo(t + "XSIZE", r)), 0.5),
                h = Math.max(k(s.uo(t + "YSIZE", n)), 0.5),
                u = k(s.uo(e + "CRPCT", "50"));
              return new v.hn(o, a, h, u, null);
            }),
            (i.prototype.wr = function () {
              var t,
                e = this.data,
                i = this.ng(e.get("NET")),
                r = this.og(e.get("LAYER")),
                n = k(e.get("ROTATION")),
                s = e.uo("NAME", ""),
                o = Math.max(k(e.get("HOLESIZE")), 0),
                a = "TRUE" === e.uo("PLATED", "FALSE"),
                h = T(e.uo("HOLETYPE", "0"));
              switch (h) {
                case 0:
                  t = 0;
                  break;
                case 1:
                  t = 1;
                  break;
                case 2:
                  t = 2;
                  break;
                default:
                  this.Nf.nf("unknow hole type %d", h), (t = 0);
              }
              var u;
              (u = 2 !== t ? o : k(e.uo("HOLEWIDTH", "0"))),
                (u = Math.max(u, 0));
              var c = k(e.uo("HOLEROTATION", "0")),
                p = k(e.uo("PADXOFFSET0", "0")),
                f = k(e.uo("PADYOFFSET0", "0")),
                l = R(e.get("X"), e.get("Y")),
                b = e.uo("SHAPE", ""),
                y = e.uo("XSIZE", ""),
                d = e.uo("YSIZE", ""),
                g = this.Du("TOP", "TOPLAYER", b, y, d),
                w = this.Du("MID", "MIDLAYER1", b, y, d),
                m = this.Du("BOT", "BOTTOMLAYER", b, y, d);
              0 === r.type ||
                (4 === r.type
                  ? ((m = null), (w = null))
                  : 7 === r.type
                  ? ((g = null), (w = null))
                  : ((g = null), (m = null)));
              var E = new v.jn(r, p, f, g, w, m),
                O = new v.kn(t, o, u, c),
                x = new v.rn("", i, r, l, n, E, O, 4, 4, s, a);
              this.Bu(x);
            }),
            (i.prototype.xr = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = k(t.get("HOLESIZE")),
                r = R(t.get("X"), t.get("Y")),
                n = t.get("STARTLAYER"),
                s = t.get("ENDLAYER"),
                a = o.J.T(t.get("DIAMETER")),
                h = k(t.uo("TOPLAYERSIZE", a)),
                u = k(t.uo("MIDLAYER1SIZE", a)),
                c = k(t.uo("BOTTOMLAYERSIZE", a));
              "TOP" !== n && (h = Number.NaN),
                "BOTTOM" !== s && (c = Number.NaN);
              var p = new b.cn("", e, r, i, h, u, c, !1);
              this.Bu(p);
            }),
            (i.prototype.tr = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = this.og(t.get("LAYER")),
                r = Math.max(k(t.get("WIDTH")), 0.5),
                n = R(t.get("X1"), t.get("Y1")),
                s = R(t.get("X2"), t.get("Y2")),
                o = "TRUE" === t.uo("KEEPOUT", "FALSE");
              11 == i.type && o && (this.uu = !0),
                this.Bu(new O.tg(e, i, n, s, r, o));
            }),
            (i.prototype.ur = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = this.og(t.get("LAYER")),
                r = t.uo("FONTNAME", ""),
                n = t.get("WIDESTRING");
              if (o.J.I(n)) n = t.uo("TEXT", "");
              else {
                for (
                  var s = new y.Ep(), a = 0, u = n.split(",");
                  a < u.length;
                  a++
                ) {
                  var c = u[a];
                  s.write(parseInt(c));
                }
                n = s.toString();
              }
              var p = Math.max(k(t.uo("WIDTH", "0")), 0.5),
                l = Math.max(k(t.uo("HEIGHT", "0")), 0.5),
                v = k(t.uo("ROTATION", "0")),
                b = "TRUE" === t.uo("MIRROR", "FALSE"),
                d = R(t.uo("X", "0"), t.uo("Y", "0")),
                g = "TRUE" === t.uo("USETTFONTS", "FALSE");
              this.Bu(new h.Jg(e, i, d, v, n, new f.Hg(g ? r : "", l, p), b));
            }),
            (i.prototype.Eu = function () {
              for (
                var t = this.data, e = new Array(), i = null, r = 0;
                r < 1e4;
                r++
              ) {
                var n = r.toString(),
                  s = T(t.uo("KIND" + n, "-1"));
                if (0 === s || 1 === s) {
                  var o = R(t.get("VX" + n), t.get("VY" + n));
                  if (
                    (null == i ? (i = o) : (e.push(new u.bd(i, o)), (i = o)),
                    1 == s)
                  ) {
                    var a = R(t.get("CX" + n), t.get("CY" + n)),
                      h = k(t.get("SA" + n)),
                      p = k(t.get("EA" + n)),
                      f = k(t.get("R" + n)),
                      l = c.ad.$c(a, h, p, f, f, 1);
                    l.start().Fb(o) > l.vd.Fb(o) && (l = l.nd()),
                      e.push(l),
                      (i = null);
                  }
                } else {
                  if (3 !== s) break;
                  var o = new N.Zb(
                    k(t.get("MVX" + n)) / 1e4,
                    k(t.get("MVY" + n)) / 1e4
                  );
                  null == i ? (i = o) : (e.push(new u.bd(i, o)), (i = o));
                }
              }
              if (e.length > 0) {
                var v = e[0],
                  b = e[e.length - 1],
                  y = v.start(),
                  d = void 0;
                (d = b instanceof c.ad ? b.vd : b.end()),
                  e.push(new u.bd(d, y));
              }
              return e;
            }),
            (i.prototype.Fu = function (t) {
              for (
                var e = this.data,
                  i = T(e.uo("HOLE" + t + "VERTEXCOUNT", "0")),
                  r = "H" + t,
                  n = new Array(),
                  s = null,
                  o = 0;
                o < i;
                o++
              ) {
                var a = e.uo(r + "VX" + o, "0"),
                  h = e.uo(r + "VY" + o, "0"),
                  c = new N.Zb(1e-4 * k(a), 1e-4 * k(h));
                null == s ? (s = c) : (n.push(new u.bd(s, c)), (s = c));
              }
              return n;
            }),
            (i.prototype.yu = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = this.og(t.get("LAYER")),
                r = this.Eu();
              if (0 === r.length) this.Nf.qf("ignore Region without outline");
              else {
                var n = void 0,
                  s = T(t.get("KIND"));
                switch (s) {
                  case 0:
                    "TRUE" === t.uo("ISBOARDCUTOUT", "FALSE")
                      ? ((n = 2), (i = new a.mg(0, 0)))
                      : (n = 0);
                    break;
                  case 1:
                    n = 1;
                    break;
                  default:
                    (n = 0), this.Nf.nf("unknown region kind %d", s);
                }
                var o = new Array();
                o.push(g.Zc.$c(r));
                for (var h = 0; h < 1e3; h++) {
                  var u = this.Fu(h);
                  if (!(u.length > 0)) break;
                  o.push(g.Zc.$c(u));
                }
                1 === o.length
                  ? this.Bu(new d.rg(e, i, n, o[0]))
                  : this.Bu(new q.Ln("", e, i, o));
              }
            }),
            (i.prototype.rt = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = this.og(t.get("LAYER")),
                r = this.Eu(),
                n = g.Zc.$c(r),
                s = T(t.uo("POURINDEX", "0"));
              switch (t.uo("POLYGONTYPE", "").trim().toUpperCase()) {
                case "POLYGON":
                  this.Bu(
                    new w.Dn(
                      "",
                      e,
                      i,
                      new w.un(10),
                      10,
                      10,
                      !1,
                      !0,
                      s,
                      n.jd,
                      null
                    )
                  );
                  break;
                case "Split Plane":
                  this.Bu(new m.Jn(e, i, n));
                  break;
                default:
                  6 == i.type
                    ? this.Bu(new m.Jn(e, i, n))
                    : this.Bu(
                        new w.Dn(
                          "",
                          e,
                          i,
                          new w.un(10),
                          10,
                          10,
                          !1,
                          !0,
                          s,
                          n.jd,
                          null
                        )
                      );
              }
            }),
            (i.prototype.zu = function () {
              var t = this.data,
                e = this.ng(t.get("NET")),
                i = this.og(t.get("LAYER")),
                r = k(t.get("ROTATION")),
                n = R(t.get("X1"), t.get("Y1")),
                s = R(t.get("X2"), t.get("Y2")),
                o = "TRUE" === t.uo("KEEPOUT", "FALSE");
              this.Bu(new E.Gn(e, i, n, s, r, o));
            }),
            (i.prototype.Au = function () {
              var t = this.data;
              this.Vt.put(o.J.T(t.get("ID")), o.J.T(t.get("NAME")));
            }),
            i
          );
        })(r.Gq);
        i.Or = S;
      }
    ),
    i(
      "pcb/altium/SchDecoder",
      [
        "require",
        "exports",
        "pcb/altium/AbstractDecoder",
        "pcb/primitives/sch/SchComponent",
        "pcb/primitives/sch/SchProperty",
        "utils/NativeMap",
        "pcb/primitives/Font",
        "utils/Check",
        "pcb/primitives/Color",
        "pcb/primitives/Aligment",
        "geometry/Matrix3",
        "utils/StringKit",
        "pcb/primitives/Stroke",
        "pcb/primitives/sch/SchPin",
        "pcb/primitives/sch/SchAnnotation",
        "pcb/primitives/sch/SchBezier",
        "geometry/Bezier",
        "pcb/primitives/Style",
        "pcb/primitives/sch/SchPolyline",
        "geometry/Polyline",
        "pcb/primitives/sch/SchEllipse",
        "pcb/primitives/sch/SchPie",
        "geometry/Arc",
        "pcb/primitives/sch/SchRectangle",
        "pcb/primitives/sch/SchArc",
        "pcb/primitives/sch/SchWire",
        "pcb/primitives/sch/SchBus",
        "pcb/primitives/sch/SchBusEntry",
        "pcb/primitives/sch/SchPowerPort",
        "pcb/primitives/sch/SchPort",
        "pcb/primitives/sch/SchNetLabel",
        "pcb/primitives/sch/SchJunction",
        "pcb/primitives/sch/SchNoERC",
        "pcb/primitives/sch/SchDocument",
        "utils/HashSet",
        "utils/Types",
        "geometry/BBox2",
        "geometry/Vector2"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I,
        L,
        P,
        _,
        M,
        C,
        F,
        j
      ) {
        function D(t) {
          return parseInt(t);
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var B = /^(.*?)(\d+)(.*)$/,
          U = new a.Hg("Arial", 1, 0.1),
          Q = (function (t) {
            function i(e) {
              var i = t.call(this, e) || this;
              return (
                (i.Og = new Array()),
                (i.hs = new Array()),
                (i.ru = new o.wo()),
                (i.Gu = new o.wo()),
                (i.Hu = new o.wo()),
                (i.fonts = new o.wo()),
                (i.Iu = null),
                (i.data = new o.wo()),
                (i.Sg = e.Sg),
                i
              );
            }
            return (
              e(i, t),
              (i.prototype.kq = function (t) {
                this.data = t;
                var e = D(t.uo("RECORD", "-1"));
                try {
                  switch (e) {
                    case 1:
                      this.wu();
                      break;
                    case 2:
                      this.pt();
                      break;
                    case 3:
                      this.Nf.qf("IEEE Symbol is not supported");
                      break;
                    case 4:
                      this.nt();
                      break;
                    case 5:
                      this.Ju();
                      break;
                    case 6:
                      this.ot();
                      break;
                    case 7:
                      this.rt();
                      break;
                    case 8:
                      this.st();
                      break;
                    case 9:
                      this.Ku();
                      break;
                    case 10:
                      this.Lu();
                      break;
                    case 11:
                    case 12:
                      this.Mu();
                      break;
                    case 13:
                      this.Nu();
                      break;
                    case 14:
                      this.Lu();
                      break;
                    case 17:
                      this.Ou();
                      break;
                    case 18:
                      this.Pu();
                      break;
                    case 22:
                      this.xt();
                      break;
                    case 25:
                      this.ut();
                      break;
                    case 26:
                      this.vt();
                      break;
                    case 27:
                      this.kt();
                      break;
                    case 28:
                      this.Qu();
                      break;
                    case 29:
                      this.lt();
                      break;
                    case 31:
                      this.Ru();
                      break;
                    case 34:
                      this.Su();
                      break;
                    case 37:
                      this.wt();
                      break;
                    case 41:
                      this.Su();
                      break;
                    case 44:
                      this.Tu();
                      break;
                    case 45:
                      this.Uu();
                      break;
                    default:
                      -1 == e || this.Nf.nf("unrecognized RECORD code %d", e);
                  }
                } catch (t) {
                  this.Nf.sf(t);
                }
                return !0;
              }),
              (i.prototype.finish = function () {
                var t = this,
                  e = 1;
                this.Gu.iterator(function (i, r) {
                  try {
                    if (null == r.prefix) {
                      var n = "U" + e++;
                      (r.prefix = new s.cs(
                        "",
                        n,
                        r.location,
                        r.orientation,
                        !1,
                        !1,
                        U,
                        u.aj.Yi,
                        c.Zr.Sr
                      )),
                        (r.ds = "U?");
                    }
                    null == r.value &&
                      (r.value = new s.cs(
                        "",
                        r.name,
                        r.location,
                        r.orientation,
                        !1,
                        !1,
                        U,
                        u.aj.Yi,
                        c.Zr.Sr
                      ));
                    var o = t.Hu.get(i);
                    if (void 0 !== o) {
                      var a = {};
                      r.Og.iterator(function (t, e) {
                        var i = parseInt(t),
                          n = o[i];
                        return (
                          void 0 !== n &&
                            (r.fs === t && (r.fs = n), (a[n] = e)),
                          !0
                        );
                      }),
                        r.Og.clear();
                      for (var h in a) r.Og.put(h, a[h]);
                    }
                    if (t.qu) {
                      var f = p.va
                        .translate(r.location.x, r.location.y)
                        .Vb(-r.orientation);
                      t.Og.push(r.wc().Xb(f));
                    } else t.Og.push(r.wc());
                  } catch (e) {
                    t.Nf.sf(e);
                  }
                  return !0;
                });
                var i = this.Vu();
                this.fa(new _.qs(this.Sg, r.xq, 10, i, this.hs));
              }),
              (i.prototype.Wu = function (t, e) {
                e instanceof q.ts
                  ? (t.add(e.points[0]), t.add(e.points[e.points.length - 1]))
                  : e instanceof v.Gs && t.add(e.location);
              }),
              (i.prototype.Vu = function () {
                for (
                  var t = this, e = new M.Lf(), i = 0, r = this.Og;
                  i < r.length;
                  i++
                ) {
                  var s = r[i];
                  s instanceof n.ps
                    ? s.os(function (i, r, n) {
                        return t.Wu(e, n), !0;
                      })
                    : this.Wu(e, s);
                }
                for (
                  var o = new Array(), a = 0, h = this.Og;
                  a < h.length;
                  a++
                ) {
                  var s = h[a];
                  if (s instanceof S.at) {
                    var u = s.location,
                      c = u.Qb(s.width, 0).Xb(p.va.Vb(s.orientation).ta(u));
                    c = new j.Zb(
                      Math.round(1e4 * c.x) / 1e4,
                      Math.round(1e4 * c.y) / 1e4
                    );
                    var f = e.contains(u),
                      l = e.contains(c),
                      v = !(f || l),
                      b = !0,
                      y = !0;
                    switch (s._s) {
                      case 0:
                        (b = s.Zs && !v), (y = s.$s || v);
                        break;
                      case 1:
                        (b = !f && !v), (y = !l || v);
                        break;
                      case 2:
                        (b = f), (y = l || v);
                        break;
                      case 3:
                        (b = !0), (y = !0);
                        break;
                      default:
                        C.xa(s._s);
                    }
                    var d = new S.at(
                      s.name,
                      s.Xs,
                      s.Ys,
                      s.width,
                      b,
                      y,
                      s.location,
                      s.orientation,
                      s._s
                    );
                    o.push(d);
                  } else o.push(s);
                }
                return o;
              }),
              (i.prototype.Dq = function (t, e) {
                return new j.Zb(this.Aq(t), this.Aq(e));
              }),
              (i.prototype.zt = function (t) {
                for (
                  var e = new Array(), i = null, r = 0, n = t;
                  r < n.length;
                  r++
                ) {
                  var s = n[r];
                  null === i ? (i = s) : (e.push(this.Dq(i, s)), (i = null));
                }
                return e;
              }),
              (i.prototype.Aq = function (t, e) {
                void 0 === e && (e = 0);
                var i = this.data,
                  r = i.get(t),
                  n = i.get(t + "_FRAC");
                return h.J.I(r) && h.J.I(n)
                  ? e
                  : (h.J.I(r) && (r = "0"),
                    r.indexOf(".") >= 0
                      ? parseFloat(r)
                      : (h.J.I(n) && (n = "0"),
                        n.startsWith("-") && (n = n.substring(1)),
                        parseFloat(r + "." + n)));
              }),
              (i.prototype.Xu = function (t) {
                return this.fonts.get(t) || h.J.R(this.Iu);
              }),
              (i.prototype.Yu = function () {
                switch (D(this.data.uo("LINESTYLE", "0"))) {
                  case 0:
                    return 0;
                  case 1:
                    return 1;
                  case 2:
                    return 2;
                  default:
                    return this.Nf.nf("unknow linestyle"), 0;
                }
              }),
              (i.prototype.yt = function () {
                var t = r.Bq(this.data.uo("COLOR", "0")),
                  e = Math.max(0.5, this.Aq("LINEWIDTH", 0)),
                  i = this.Yu();
                return new l._r(t, e, i);
              }),
              (i.prototype.Bu = function (t) {
                var e = this.data,
                  i = e.uo("OWNERINDEX", "0"),
                  r = this.ru.get(i),
                  n = e.uo("OWNERPARTID", "1"),
                  s = e.uo("OWNERPARTDISPLAYMODE", "0");
                void 0 === r || D(n) < 0
                  ? this.qu || this.Og.push(t)
                  : r.js(s, n, t);
              }),
              (i.prototype.Zu = function () {
                for (
                  var t = this.data,
                    e = D(t.uo("LOCATIONCOUNT", "0")),
                    i = new Array(e + e),
                    r = 1,
                    n = 0;
                  r <= e;
                  r++
                )
                  (i[n++] = f.L.format("X%d", r)),
                    (i[n++] = f.L.format("Y%d", r));
                return this.zt(i);
              }),
              (i.prototype.wu = function () {
                var t = this.data,
                  e = new n.ls();
                (e.location = this.Dq("LOCATION.X", "LOCATION.Y")),
                  (e.orientation = 90 * D(t.uo("ORIENTATION", "0"))),
                  (e.name = t.uo("LIBREFERENCE", "")),
                  (e.name = this.$u(e.name));
                t.uo("COMPONENTDESCRIPTION", ""),
                  r.Bq(t.uo("AREACOLOR", "0")),
                  r.Bq(t.uo("COLOR", "0")),
                  r.Bq(t.uo("PINCOLOR", "0")),
                  t.uo("SHOWHIDDENPINS", "F");
                (e.es = "T" === t.uo("ISMIRRORED", "F")),
                  (e.gs = t.uo("CURRENTPARTID", "0")),
                  (e.fs = t.uo("DISPLAYMODE", "0")),
                  this.Nf.kf("detected SCH component %s", e.name),
                  this.ru.put(this.index() - 2, e);
              }),
              (i.prototype.Tu = function () {
                var t = this.data.uo("OWNERINDEX", "0"),
                  e = this.ru.get(t);
                void 0 !== e
                  ? (this.ru.put(this.index() - 2, e),
                    this.Gu.put(this.index() - 2, e))
                  : this.Nf.pf("can not find start library");
              }),
              (i.prototype.Uu = function () {
                var t = this.data,
                  e = t.uo("MODELNAME", "");
                e = this.$u(e);
                var i = t.uo("MODELTYPE", "").toUpperCase(),
                  r = t.uo("ISCURRENT", "").toUpperCase();
                if ("PCBLIB" === i) {
                  var n = t.uo("OWNERINDEX", "0");
                  this.Nf.hf("pid %s model %s", n, e);
                  var s = this.Hu.ab(n, function () {
                    return [];
                  });
                  "T" == r ? s.unshift(e) : s.push(e);
                }
              }),
              (i.prototype.pt = function () {
                var t,
                  e = this.data,
                  i = D(e.uo("ELECTRICAL", "0"));
                switch (i) {
                  case 0:
                    t = 0;
                    break;
                  case 1:
                    t = 1;
                    break;
                  case 2:
                    t = 2;
                    break;
                  case 3:
                    t = 3;
                    break;
                  case 4:
                    t = 4;
                    break;
                  case 5:
                    t = 5;
                    break;
                  case 6:
                    t = 6;
                    break;
                  case 7:
                    t = 7;
                    break;
                  default:
                    this.Nf.nf("unknow electrical type %d", i), (t = 1);
                }
                var n = new Array(),
                  s = D(e.uo("SYMBOL_INNER", "0"));
                switch (s) {
                  case 0:
                  case 3:
                    break;
                  case 8:
                    n.push(0);
                    break;
                  case 9:
                    n.push(1);
                    break;
                  case 10:
                    n.push(2);
                    break;
                  case 11:
                    n.push(3);
                    break;
                  case 12:
                    n.push(4);
                    break;
                  case 13:
                    n.push(5);
                    break;
                  case 22:
                    n.push(6);
                    break;
                  case 23:
                    n.push(7);
                    break;
                  case 24:
                    n.push(8);
                    break;
                  case 30:
                    n.push(9);
                    break;
                  case 32:
                    n.push(10);
                    break;
                  default:
                    this.Nf.nf("unknow inside %d", s);
                }
                switch (D(e.uo("SYMBOL_INNEREDGE", "0"))) {
                  case 0:
                    break;
                  case 3:
                    n.push(11);
                    break;
                  default:
                    this.Nf.nf("unknow insideEdge %d", s);
                }
                var o = D(e.uo("SYMBOL_OUTER", "0"));
                switch (o) {
                  case 0:
                    break;
                  case 2:
                    n.push(15);
                    break;
                  case 5:
                    n.push(16);
                    break;
                  case 6:
                    n.push(17);
                    break;
                  case 25:
                    n.push(18);
                    break;
                  case 33:
                    n.push(19);
                    break;
                  case 34:
                    n.push(20);
                    break;
                  default:
                    this.Nf.nf("unknow outside %d", o);
                }
                var a = D(e.uo("SYMBOL_OUTEREDGE", "0"));
                switch (a) {
                  case 0:
                    break;
                  case 1:
                    n.push(12);
                    break;
                  case 4:
                    n.push(13);
                    break;
                  case 17:
                    n.push(14);
                    break;
                  default:
                    this.Nf.nf("unknow outsideEdge %d", a);
                }
                var u = r.Bq(e.uo("COLOR", "0")),
                  f = h.J.R(this.Iu),
                  l = e.uo("DESIGNATOR", ""),
                  y = e.uo("NAME", ""),
                  d = D(e.uo("PINCONGLOMERATE", "0")),
                  g = 90 * (3 & d),
                  w = (8 & d) > 0,
                  m = (16 & d) > 0,
                  E = 0 == (4 & d),
                  O = this.Dq("LOCATION.X", "LOCATION.Y"),
                  x = this.Aq("PINLENGTH", 0),
                  A = p.va.Vb(g).ta(O),
                  N = O.Qb(5, 0).Xb(A),
                  q = g % 180,
                  T = 0 == q ? N.Qb(0, 2) : N.Qb(-2, 0),
                  k = O.Qb(-8, 0).Xb(A),
                  R = new c.Zr(g >= 180 ? 0 : 2, 1),
                  S = new c.Zr(g >= 180 ? 2 : 0, 2),
                  I = new b.ss(k, f, R, 0, y, q, u, !1),
                  L = new b.ss(T, f, S, 0, l, q, u, !1),
                  P = new v.Gs(O, g, u, x, E, I, w, L, m, t, n);
                this.Bu(P);
              }),
              (i.prototype.nt = function () {
                var t,
                  e,
                  i = this.data,
                  n = r.Bq(i.uo("COLOR", "0")),
                  s = this.Xu(D(i.uo("FONTID", "0"))),
                  o = this.Dq("LOCATION.X", "LOCATION.Y"),
                  a = "T" === i.uo("ISMIRRORED", "F"),
                  h = 90 * D(i.uo("ORIENTATION", "0")),
                  u = i.uo("TEXT", ""),
                  p = D(i.uo("JUSTIFICATION", "0"));
                switch (p % 3) {
                  case 0:
                    t = 0;
                    break;
                  case 1:
                    t = 1;
                    break;
                  case 2:
                    t = 2;
                    break;
                  default:
                    this.Nf.nf("unknow justification value %d", p), (t = 0);
                }
                switch (p / 3) {
                  case 0:
                    e = 2;
                    break;
                  case 1:
                    e = 1;
                    break;
                  case 2:
                    e = 0;
                    break;
                  default:
                    this.Nf.nf("unknow justification value %d", p), (e = 2);
                }
                var f = new b.ss(o, s, new c.Zr(t, e), 0, u, h, n, a);
                this.Bu(f);
              }),
              (i.prototype.Ju = function () {
                var t = this.Zu(),
                  e = this.yt();
                4 == t.length
                  ? this.Bu(new y.Ks(new d.hd(t), new g.ws(e, null)))
                  : this.Nf.nf("locations not enough of bezier");
              }),
              (i.prototype.Nu = function () {
                var t = this.zt([
                  "LOCATION.X",
                  "LOCATION.Y",
                  "CORNER.X",
                  "CORNER.Y"
                ]);
                if (!(t.length < 2)) {
                  var e = this.yt();
                  this.Bu(new w.ys(m.Zc.ld(t), new g.ws(e, null)));
                }
              }),
              (i.prototype.ot = function () {
                var t = this.Zu();
                if (!(t.length < 2)) {
                  var e = this.yt();
                  this.Bu(new w.ys(m.Zc.ld(t), new g.ws(e, null)));
                }
              }),
              (i.prototype.rt = function () {
                var t = this.data,
                  e = this.Zu();
                if (!(e.length < 2)) {
                  var i = this.yt(),
                    n =
                      "T" === t.uo("ISSOLID", "F")
                        ? r.Bq(t.uo("AREACOLOR", "0"))
                        : null;
                  this.Bu(new w.ys(m.Zc.ld(e), new g.ws(i, n)));
                }
              }),
              (i.prototype.st = function () {
                var t = this.data,
                  e = this.Dq("LOCATION.X", "LOCATION.Y"),
                  i = Math.abs(this.Aq("RADIUS", 0)),
                  n = Math.abs(this.Aq("SECONDARYRADIUS", 0)),
                  s =
                    "T" === t.uo("ISSOLID", "F")
                      ? r.Bq(t.uo("AREACOLOR", "0"))
                      : null,
                  o = "T" === t.uo("TRANSPARENT", "F") ? 0.5 : 1;
                this.Bu(new E.Ls(e, i, n, new g.ws(this.yt(), s, o)));
              }),
              (i.prototype.Ku = function () {
                var t = this.data,
                  e = this.Dq("LOCATION.X", "LOCATION.Y"),
                  i = this.Aq("RADIUS", 0),
                  n = this.Aq("STARTANGLE", 0),
                  s = this.Aq("ENDANGLE", 0);
                i < 0 && ((i = -i), (n += 180), (s += 180));
                var o =
                    "T" === t.uo("ISSOLID", "F")
                      ? r.Bq(t.uo("AREACOLOR", "0"))
                      : null,
                  a = x.ad.$c(e, n, s, i, i, 1);
                this.Bu(new O.Hs(a, new g.ws(this.yt(), o)));
              }),
              (i.prototype.Lu = function () {
                var t = this.data,
                  e =
                    "T" === t.uo("ISSOLID", "F")
                      ? r.Bq(t.uo("AREACOLOR", "0"))
                      : null,
                  i = this.Dq("LOCATION.X", "LOCATION.Y"),
                  n = this.Dq("CORNER.X", "CORNER.Y"),
                  s = this.Aq("CORNERXRADIUS", 0),
                  o = this.Aq("CORNERYRADIUS", 0),
                  a = "T" === t.uo("TRANSPARENT", "F") ? 0.5 : 1;
                this.Bu(new A.zs(i, n, s, o, new g.ws(this.yt(), e, a)));
              }),
              (i.prototype.Mu = function () {
                var t = this.Dq("LOCATION.X", "LOCATION.Y"),
                  e = this.Aq("STARTANGLE", 0),
                  i = this.Aq("ENDANGLE", 0),
                  r = Math.abs(this.Aq("RADIUS", 0)),
                  n = Math.abs(this.Aq("SECONDARYRADIUS", r));
                if (r > 0 && n > 0) {
                  var s = x.ad.$c(t, e, i, r, n, 1);
                  this.Bu(new N.Is(s, new g.ws(this.yt(), null)));
                }
              }),
              (i.prototype.kt = function () {
                this.Bu(new q.ts(this.Zu(), this.yt()));
              }),
              (i.prototype.Qu = function () {
                var t = this,
                  e = this.data,
                  i = r.Bq(e.uo("TEXTCOLOR", "0")),
                  n = this.Xu(D(e.uo("FONTID", "0"))),
                  s = this.Dq("LOCATION.X", "LOCATION.Y"),
                  o = this.Dq("CORNER.X", "CORNER.Y"),
                  a = new F.xc().qc(s).qc(o).wc(),
                  h = e.uo("TEXT", "").replace(/~~|~\d/g, function (e) {
                    return "~~" === e
                      ? "~"
                      : "~1" === e
                      ? "\n"
                      : (t.Nf.nf("unknown Text Frame mode %s", e), e);
                  }),
                  u = new c.Zr(0, 0),
                  p = new b.ss(a.Kc(), n, u, 0, h, 0, i, !0);
                this.Bu(p);
              }),
              (i.prototype.vt = function () {
                this.Bu(new T.ft(this.Zu(), this.yt()));
              }),
              (i.prototype.wt = function () {
                var t = this.Dq("LOCATION.X", "LOCATION.Y"),
                  e = this.Dq("CORNER.X", "CORNER.Y");
                this.Bu(new k.gt(t, e, this.yt()));
              }),
              (i.prototype.Ou = function () {
                var t,
                  e,
                  i = this.data,
                  n = i.uo("TEXT", ""),
                  s = "T" === i.uo("SHOWNETNAME", "F"),
                  o = this.Dq("LOCATION.X", "LOCATION.Y"),
                  a = 90 * D(i.uo("ORIENTATION", "0")),
                  u = r.Bq(i.uo("COLOR", "0")),
                  p = h.J.R(this.Iu),
                  f = D(i.uo("STYLE", "0"));
                switch (f) {
                  case 0:
                    (t = 0), (e = 10);
                    break;
                  case 1:
                    (t = 1), (e = 10);
                    break;
                  case 2:
                    (t = 2), (e = 10);
                    break;
                  case 3:
                    (t = 3), (e = 10);
                    break;
                  case 4:
                    (t = 4), (e = 20);
                    break;
                  case 5:
                    (t = 5), (e = 20);
                    break;
                  case 6:
                    (t = 6), (e = 20);
                    break;
                  default:
                    this.Nf.nf("unknow Power Port style %d", f),
                      (t = 2),
                      (e = 10);
                }
                var l, v;
                switch (a) {
                  case 0:
                    (l = o.Qb(e, -p.size / 2)), (v = 0);
                    break;
                  case 90:
                    (l = o.Qb(0, e)), (v = 1);
                    break;
                  case 180:
                    (l = o.Qb(-e, -p.size / 2)), (v = 2);
                    break;
                  case 270:
                    (l = o.Qb(0, -e - p.size)), (v = 1);
                    break;
                  default:
                    this.Nf.nf("unsupported PowerPort orientation %f", a),
                      (l = o.Qb(0, -e - p.size)),
                      (v = 1);
                }
                var y = new c.Zr(v, 2),
                  d = new b.ss(l, p, y, 0, n, 0, u, !1),
                  g = new R.dt(d, t, s, o, u, a);
                this.Bu(g);
              }),
              (i.prototype.Pu = function () {
                var t,
                  e = this.data,
                  i = e.uo("NAME", ""),
                  n = r.Bq(e.uo("COLOR", "0")),
                  s = r.Bq(e.uo("AREACOLOR", "0")),
                  o = r.Bq(e.uo("TEXTCOLOR", "0")),
                  a = this.Aq("WIDTH", 0),
                  u = D(e.uo("IOTYPE", "0"));
                switch (u) {
                  case 0:
                    t = 0;
                    break;
                  case 1:
                    t = 1;
                    break;
                  case 2:
                    t = 2;
                    break;
                  case 3:
                    t = 3;
                    break;
                  default:
                    (t = 0), this.Nf.nf("unknow IOType %d of Port", u);
                }
                var f,
                  l,
                  v,
                  y = this.Dq("LOCATION.X", "LOCATION.Y"),
                  d = D(e.uo("STYLE", "0"));
                switch (d) {
                  case 0:
                    (v = 0), (f = !1), (l = !1);
                    break;
                  case 1:
                    (v = 0), (f = !0), (l = !1);
                    break;
                  case 2:
                    (v = 0), (f = !1), (l = !0);
                    break;
                  case 3:
                    (v = 0), (f = !0), (l = !0);
                    break;
                  case 4:
                    (y = y.Qb(0, a)), (v = 270), (f = !1), (l = !1);
                    break;
                  case 5:
                    (y = y.Qb(0, a)), (v = 270), (f = !0), (l = !1);
                    break;
                  case 6:
                    (y = y.Qb(0, a)), (v = 270), (f = !1), (l = !0);
                    break;
                  case 7:
                    (y = y.Qb(0, a)), (v = 270), (f = !0), (l = !0);
                    break;
                  default:
                    (v = 0),
                      (f = !1),
                      (l = !1),
                      this.Nf.nf("unknow style %d of Port", d);
                }
                var g,
                  w,
                  m = h.J.R(this.Iu),
                  E = -m.size / 2,
                  O = D(e.uo("ALIGNMENT", "0")),
                  x = p.va.Vb(v).ta(y);
                switch (O) {
                  case 0:
                    (w = 1), (g = y.Qb(a / 2, E).Xb(x));
                    break;
                  case 1:
                    (w = 0), (g = y.Qb(5, E).Xb(x));
                    break;
                  case 2:
                    (w = 2), (g = y.Qb(a - 5, E).Xb(x));
                    break;
                  default:
                    (w = 0),
                      (g = y.Qb(5, E).Xb(x)),
                      this.Nf.nf("unknow aligment %d of Port", O);
                }
                var A = new c.Zr(w, 2),
                  N = new b.ss(g, m, A, 0, i, v, o, !1),
                  q = new S.at(N, s, n, a, f, l, y, v, t);
                this.Bu(q);
              }),
              (i.prototype.ut = function () {
                var t = this.data,
                  e = this.Dq("LOCATION.X", "LOCATION.Y"),
                  i = r.Bq(t.uo("COLOR", "0")),
                  n = 90 * D(t.uo("ORIENTATION", "0")),
                  s = this.Xu(D(t.uo("FONTID", "0"))),
                  o = t.uo("TEXT", "");
                this.Bu(new I.et(e, n, o, s, i));
              }),
              (i.prototype.lt = function () {
                var t,
                  e = this.data,
                  i = this.Dq("LOCATION.X", "LOCATION.Y"),
                  n = r.Bq(e.uo("COLOR", "0")),
                  s = D(e.uo("SIZE", "0"));
                switch (s) {
                  case 0:
                    t = 2;
                    break;
                  case 1:
                    t = 3;
                    break;
                  case 2:
                    t = 5;
                    break;
                  case 3:
                    t = 10;
                    break;
                  default:
                    this.Nf.nf("unsupported junction size %d", s), (t = 2);
                }
                this.Bu(new L.us(i, t, n));
              }),
              (i.prototype.xt = function () {
                var t = this.Dq("LOCATION.X", "LOCATION.Y"),
                  e = r.Bq(this.data.uo("COLOR", "0"));
                this.Bu(new P.ht(t, e));
              }),
              (i.prototype.Su = function () {
                var t,
                  e,
                  i = this.data,
                  n = this.Dq("LOCATION.X", "LOCATION.Y"),
                  o = r.Bq(i.uo("COLOR", "0")),
                  a = this.Xu(D(i.uo("FONTID", "0"))),
                  h = i.uo("NAME", ""),
                  u = i.uo("TEXT", ""),
                  p = "T" === i.uo("SHOWNAME", "F"),
                  f = "F" === i.uo("ISHIDDEN", "F"),
                  l = 90 * D(i.uo("ORIENTATION", "0")),
                  v = D(i.uo("JUSTIFICATION", "0"));
                switch (v % 3) {
                  case 0:
                    t = 0;
                    break;
                  case 1:
                    t = 1;
                    break;
                  case 2:
                    t = 2;
                    break;
                  default:
                    this.Nf.nf("unknow justification value %d", v), (t = 0);
                }
                switch (v / 3) {
                  case 0:
                    e = 2;
                    break;
                  case 1:
                    e = 1;
                    break;
                  case 2:
                    e = 0;
                    break;
                  default:
                    this.Nf.nf("unknow justification value %d", v), (e = 2);
                }
                var b = new c.Zr(t, e),
                  y = new s.cs(h, u, n, l, p, f, a, o, b),
                  d = D(i.uo("OWNERINDEX", "0")),
                  g = this.ru.get(d);
                if (void 0 !== g)
                  if ("Designator" === h) {
                    g.prefix = y;
                    var w = B.exec(u);
                    g.ds =
                      null !== w
                        ? w[1] + "?" + w[3]
                        : u.indexOf("?") >= 0
                        ? u
                        : u + "?";
                  } else
                    "Value" === h
                      ? (g.value = y)
                      : "Comment" === h && null == g.value
                      ? (g.value = y)
                      : g.hs.push(y);
                else this.Nf.qf("parent component not found");
              }),
              (i.prototype.Ru = function () {
                for (
                  var t = this.data, e = D(t.uo("FONTIDCOUNT", "0")), i = 1;
                  i <= e;
                  i++
                ) {
                  var r = t.uo(f.L.format("FONTNAME%d", i), ""),
                    n = D(t.uo(f.L.format("SIZE%d", i), "0"));
                  (n -= 1),
                    (this.Iu = new a.Hg(r, n, 5, !1, !1)),
                    this.fonts.put(i, this.Iu);
                }
                this.Iu = this.fonts.get(D(t.uo("SYSTEMFONT", "1"))) || this.Iu;
              }),
              (i.prototype.$u = function (t) {
                return t ? t.replace(/[^\x00-\x7F]/g, "_") : t;
              }),
              i
            );
          })(r.Gq);
        i.At = Q;
      }
    ),
    i(
      "pcb/altium/Decoder",
      [
        "require",
        "exports",
        "utils/CharStateMachine",
        "utils/NativeMap",
        "utils/io/UTF16WriteBuffer",
        "utils/json/JObject",
        "pcb/altium/PcbDecoder",
        "utils/Check",
        "utils/StringKit",
        "pcb/altium/SchDecoder"
      ],
      function (t, i, r, n, s, o, a, h, u, c) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var p = (function (t) {
          function i(e, i, r) {
            var o = t.call(this) || this;
            return (
              (o.Et = new Array()),
              (o._u = new s.Ep()),
              (o.av = new s.Ep()),
              (o.state = 0),
              (o.bv = !1),
              (o.index = 0),
              (o.data = new n.wo()),
              (o.Eq = null),
              (o.cv = ""),
              (o.Sg = e),
              (o.Nf = i.wrap(o.format.bind(o))),
              (o.qu = r),
              o
            );
          }
          return (
            e(i, t),
            (i.prototype.finish = function () {
              null !== this.Eq && this.Eq.finish();
            }),
            (i.prototype.up = function (t) {
              switch (this.state) {
                case 0:
                  switch (t) {
                    case 61:
                      this.bv ? (this.bv = !1) : this.dv(t);
                      break;
                    case 13:
                      this.state = 2;
                      break;
                    case 10:
                      this.state = 1;
                      break;
                    case 124:
                      this.ev();
                      break;
                    case 142:
                      this.dv(124);
                      break;
                    case 0:
                      this.ev(), this.fv();
                      break;
                    default:
                      this.dv(t);
                  }
                  break;
                case 2:
                  10 === t
                    ? (this.state = 1)
                    : 0 === t
                    ? (this.ev(), this.fv())
                    : ((this.state = 1), this.up(t));
                  break;
                case 1:
                  124 == t || "TEXT" !== this._u.toString() || 0 === t
                    ? (this.ev(), this.fv(), 124 !== t && this.dv(t))
                    : this.dv(t),
                    (this.state = 0);
                  break;
                default:
                  throw new Error("bug");
              }
              return !0;
            }),
            (i.prototype.fa = function (t) {
              return this.Et.push(t), !0;
            }),
            (i.prototype.Gt = function () {
              return this.Et;
            }),
            (i.prototype.ev = function () {
              if (((this.bv = !0), this._u.size() > 0)) {
                var t = this._u.toString().toUpperCase();
                this._u.clear();
                var e = this.av.toString();
                this.av.clear(),
                  t.startsWith("%UTF8%")
                    ? (this.data.put(t, e), this.data.put(t.substring(6), e))
                    : this.data.contains("%UTF8%" + t) || this.data.put(t, e);
              } else this.av.clear();
            }),
            (i.prototype.dv = function (t) {
              this.bv ? this._u.write(t) : this.av.write(t);
            }),
            (i.prototype.fv = function () {
              if (
                (this.Nf.ef(0) && this.Nf.jf(o.Rp.Fp(this.data).Jp(4)),
                this.index++,
                !this.data.bb())
              ) {
                if (null === this.Eq) {
                  if (this.data.contains("HEADER")) this.Eq = new c.At(this);
                  else {
                    if (!this.data.contains("RECORD"))
                      throw new Error("unsupported file format");
                    this.Eq = new a.Or(this);
                  }
                  h.J.R(this.Eq).up(this.data, this.line(), this.index);
                } else {
                  var t = this.Eq;
                  this.data.contains("RECORD")
                    ? (t instanceof a.Or
                        ? (this.cv = this.data.uo("COMPONENT", ""))
                        : (this.cv = this.data.uo("OWNERINDEX", "")),
                      t.up(this.data, this.line(), this.index),
                      (this.cv = ""))
                    : this.Nf.qf("RECORD not found");
                }
                this.data = new n.wo();
              }
            }),
            (i.prototype.format = function (t, e) {
              return h.J.I(this.cv)
                ? u.L.format(
                    "(line %d)(index %d) %s",
                    this.line(),
                    this.index,
                    e
                  )
                : u.L.format(
                    "(line %d)(index %d)(lib %s) %s",
                    this.line(),
                    this.index,
                    this.cv,
                    e
                  );
            }),
            i
          );
        })(r.vp);
        i.Ht = p;
      }
    ),
    i(
      "pcb/easyeda/AbstractEncoder",
      [
        "require",
        "exports",
        "utils/UnitConverter",
        "utils/io/StringWriteBuffer",
        "utils/Check",
        "utils/StringKit",
        "utils/Utils"
      ],
      function (t, e, i, r, n, s, o) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.gv = /\r\n|\r|\n/g),
          (e.hv = new i.sq(1, 10)),
          (e.iv = new i.sq(10, 13.88888888888889));
        var a = s.L.K,
          h = (function () {
            function t() {
              (this.jv = new r.Cp()), (this.separator = ""), (this.kv = !1);
            }
            return (
              (t.prototype.lv = function (t, e) {
                (this.separator = t), (this.kv = e);
              }),
              (t.prototype.mv = function () {
                return this.kv ? ((this.kv = !1), "") : this.separator;
              }),
              t
            );
          })(),
          u = (function () {
            function t(t) {
              (this.outputBuffer = new Array()), (this.qu = !1), (this.Nf = t);
            }
            return (
              (t.prototype.nv = function () {
                this.outputBuffer.push(new h());
              }),
              (t.prototype.Lt = function () {
                var t = n.J.R(this.outputBuffer.pop()).jv.toString();
                return this.Nf.jf(t), t;
              }),
              (t.prototype.Nt = function (t) {
                for (var e = [], i = 1; i < arguments.length; i++)
                  e[i - 1] = arguments[i];
                0 === e.length
                  ? this.$p().jv.write(t)
                  : this.$p().jv.write(s.L.G(t, e));
              }),
              (t.prototype.ov = function (t, e) {
                this.$p().lv(t, e);
              }),
              (t.prototype.pv = function () {
                this.Nt(this.$p().mv());
              }),
              (t.prototype.qv = function (t) {
                this.pv(), this.Nt(a(t.x)), this.pv(), this.Nt(a(-t.y));
              }),
              (t.prototype.rv = function (t) {
                this.pv(), this.Nt(a(t));
              }),
              (t.prototype.sv = function (t) {
                this.pv(), null !== t && this.Nt(t.toString());
              }),
              (t.prototype.tv = function (t) {
                this.pv(), this.Nt(t ? "1" : "0");
              }),
              (t.prototype.uv = function (t, e, i) {
                if (
                  (void 0 === e && (e = !0),
                  void 0 === i && (i = !0),
                  this.pv(),
                  null !== t && void 0 !== t)
                ) {
                  var r = t.toString();
                  i && (r = r.replace(/~/g, "")),
                    e && (r = o.F.s(r)),
                    (r = this.vv(r)),
                    this.Nt(r);
                }
              }),
              (t.prototype.wv = function (t) {
                return t.indexOf("?") >= 0 ? t : t + "?";
              }),
              (t.prototype.$p = function () {
                var t = this.outputBuffer;
                return n.J.R(t[t.length - 1]);
              }),
              (t.prototype.vv = function (t, e) {
                return t ? t.replace(/\ufffd/g, e || "_") : "";
              }),
              t
            );
          })();
        e.Ot = u;
      }
    ),
    i(
      "utils/svg/PathDataEnc",
      [
        "require",
        "exports",
        "utils/StringKit",
        "geometry/Line",
        "geometry/Arc"
      ],
      function (t, e, i, r, n) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var s = i.L.K,
          o = (function () {
            function t() {
              (this.state = 0), (this.Fa = null), (this.buffer = new Array());
            }
            return (
              (t.prototype.xv = function (t) {
                for (var e = 0, i = t.jd; e < i.length; e++) {
                  var r = i[e];
                  this.yv(r);
                }
              }),
              (t.prototype.yv = function (t) {
                if (t instanceof r.bd) this.zv(t);
                else {
                  if (!(t instanceof n.ad)) throw new Error("");
                  this.Av(t);
                }
              }),
              (t.prototype.Av = function (t) {
                var e = t.vd;
                0 === this.state
                  ? this.th(
                      "M %s %s A %s %s %s %d %d %s %s ",
                      s(t.start().x),
                      s(-t.start().y),
                      s(t.rx),
                      s(t.ry),
                      0,
                      t.yd() ? 1 : 0,
                      1 === t.zd() ? 0 : 1,
                      s(e.x),
                      s(-e.y)
                    )
                  : t.start().u(this.Fa)
                  ? 2 !== this.state
                    ? this.th(
                        "A %s %s %s %d %d %s %s ",
                        s(t.rx),
                        s(t.ry),
                        0,
                        t.yd() ? 1 : 0,
                        1 === t.zd() ? 0 : 1,
                        s(e.x),
                        s(-e.y)
                      )
                    : this.th(
                        "%s %s %s %d %d %s %s ",
                        s(t.rx),
                        s(t.ry),
                        0,
                        t.yd() ? 1 : 0,
                        1 === t.zd() ? 0 : 1,
                        s(e.x),
                        s(-e.y)
                      )
                  : this.th(
                      "L %s %s A %s %s %s %d %d %s %s ",
                      s(t.start().x),
                      s(-t.start().y),
                      t.rx,
                      t.ry,
                      0,
                      t.yd() ? 1 : 0,
                      1 === t.zd() ? 0 : 1,
                      s(e.x),
                      s(-e.y)
                    ),
                  (this.Fa = e),
                  (this.state = 2);
              }),
              (t.prototype.zv = function (t) {
                this.Bv(t.start(), t.end());
              }),
              (t.prototype.Bv = function (t, e) {
                0 === this.state
                  ? this.th(
                      "M %s %s L %s %s ",
                      s(t.x),
                      s(-t.y),
                      s(e.x),
                      s(-e.y)
                    )
                  : (1 !== this.state && this.th("L "),
                    t.u(this.Fa)
                      ? this.th("%s %s ", s(e.x), s(-e.y))
                      : this.th(
                          "%s %s %s %s ",
                          s(t.x),
                          s(-t.y),
                          s(e.x),
                          s(-e.y)
                        )),
                  (this.Fa = e),
                  (this.state = 1);
              }),
              (t.prototype.close = function (t) {
                0 !== this.state &&
                  (t && this.th("Z "), (this.state = 0), (this.Fa = null));
              }),
              (t.prototype.toString = function () {
                return this.buffer.join("");
              }),
              (t.prototype.th = function (t) {
                for (var e = [], r = 1; r < arguments.length; r++)
                  e[r - 1] = arguments[r];
                0 === e.length
                  ? this.buffer.push(t)
                  : this.buffer.push(i.L.format.apply(i.L, [t].concat(e)));
              }),
              t
            );
          })();
        e.Cv = o;
      }
    ),
    i("pcb/easyeda/DocType", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i(
      "pcb/easyeda/PcbEncoder",
      [
        "require",
        "exports",
        "pcb/easyeda/AbstractEncoder",
        "pcb/easyeda/LayerHelper",
        "pcb/primitives/pcb/PcbLayer",
        "pcb/primitives/pcb/PcbPolygonPour",
        "pcb/primitives/pcb/PcbArc",
        "pcb/primitives/pcb/PcbString",
        "pcb/primitives/pcb/PcbPad",
        "pcb/primitives/pcb/PcbFill",
        "pcb/primitives/pcb/PcbRegion",
        "pcb/primitives/pcb/PcbTrack",
        "pcb/primitives/pcb/PcbVia",
        "pcb/primitives/pcb/PcbPlaneZone",
        "pcb/primitives/pcb/PcbComponent",
        "utils/svg/PathDataEnc",
        "geometry/Polyline",
        "geometry/Matrix3",
        "geometry/utils/Angle",
        "utils/Check",
        "geometry/Arc",
        "geometry/Line",
        "utils/Utils",
        "utils/Itor",
        "geometry/BBox2",
        "geometry/Vector2",
        "pcb/primitives/pcb/PcbImage"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T
      ) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var k = new q.Zb(400, -300),
          R = (function (t) {
            function i(e, i) {
              var r = t.call(this, i) || this;
              return (r.Dv = !1), (r._n = e), (r.rr = new n.Nq(i, e.Zg)), r;
            }
            return (
              e(i, t),
              (i.prototype.bo = function (t) {
                void 0 === t && (t = x.F.uuid());
                var e = this._n;
                this.qu = !1;
                for (
                  var i = g.va.scale(e.scale * r.hv.ratio),
                    n = new Array(),
                    s = new N.xc(),
                    o = 0,
                    a = e.Og;
                  o < a.length;
                  o++
                ) {
                  var h = a[o];
                  (h = h.Xb(i)), s.pc(h.eb()), x.F.t(n, this.co(h));
                }
                var u = {};
                this.nv();
                var c = {
                  docType: 3
                };
                if (
                  (m.J.I(e.Tg) || (c["importedFrom"] = e.Tg),
                  (u["head"] = c),
                  this.ov("~", !0),
                  this.uv("CA"),
                  this.rv(1e3),
                  this.rv(1e3),
                  this.uv("#000000"),
                  this.uv("yes"),
                  this.uv("#FFFFFF"),
                  this.rv(10),
                  this.rv(1e3),
                  this.rv(1e3),
                  this.uv("line"),
                  this.rv(1),
                  this.uv("mil"),
                  this.rv(1),
                  this.rv(45),
                  this.uv("visible"),
                  this.rv(0.5),
                  this.rv(0),
                  this.rv(0),
                  (u["canvas"] = this.Lt()),
                  (u["systemColor"] =
                    "#000000~#FFFFFF~#FFFFFF~#222222~#FFFFFF"),
                  (u["shape"] = n),
                  (u["layers"] = this.Ev()),
                  s.valid())
                )
                  u["BBox"] = {
                    x: 300,
                    y: 400,
                    width: 1e3,
                    height: 1e3
                  };
                else {
                  var p = s.wc();
                  u["BBox"] = {
                    x: p.hb,
                    y: -p.gb,
                    width: p.width(),
                    height: p.height()
                  };
                }
                return (
                  (u["DRCRULE"] = {
                    trackWidth: 0.6,
                    track2Track: 0.6,
                    pad2Pad: 0.6,
                    track2Pad: 0.6,
                    hole2Hole: 1,
                    holeSize: 1.2,
                    isRealtime: !0
                  }),
                  {
                    uuid: t,
                    docType: 3,
                    title: e.Sg,
                    dataStr: u
                  }
                );
              }),
              (i.prototype.Fv = function (t, e) {
                void 0 === e && (e = x.F.uuid()), (this.qu = !0);
                var i = new Array(),
                  n = 7 == t.og.type,
                  s = new g.va();
                (s = s.translate(-t.location.x, -t.location.y)),
                  (s = s.Vb(-t.orientation)),
                  (s = s.scale(this._n.scale * r.hv.ratio)),
                  n && (s = s.Xb(g.va.lc)),
                  (s = s.translate(k.x, k.y));
                for (var o = new N.xc(), a = 0, h = t.Og; a < h.length; a++) {
                  var u = h[a];
                  n && (u = m.J.R(this.Gv(u))),
                    (u = u.Xb(s)),
                    o.pc(u.eb()),
                    x.F.t(i, this.co(u));
                }
                var c = o.wc(),
                  p = {};
                this.nv();
                var f = {
                    package: this.vv(t.pattern.toUpperCase()),
                    pre: this.vv(this.wv(t.Mg.text))
                  },
                  l = {
                    docType: 4,
                    x: k.x,
                    y: -k.y,
                    c_para: f
                  };
                return (
                  m.J.I(this._n.Tg) || (l["importedFrom"] = this._n.Tg),
                  (p["head"] = l),
                  this.ov("~", !0),
                  this.uv("CA"),
                  this.rv(1e3),
                  this.rv(1e3),
                  this.uv("#000000"),
                  this.uv("yes"),
                  this.uv("#FFFFFF"),
                  this.rv(1),
                  this.rv(c.width()),
                  this.rv(c.height()),
                  this.uv("line"),
                  this.rv(1),
                  this.uv("mil"),
                  this.rv(1),
                  this.rv(45),
                  this.uv("visible"),
                  this.rv(0.1),
                  this.qv(k),
                  (p["canvas"] = this.Lt()),
                  (p["systemColor"] =
                    "#000000~#FFFFFF~#FFFFFF~#222222~#FFFFFF"),
                  (p["shape"] = i),
                  (p["layers"] = this.Ev()),
                  (p["BBox"] = {
                    x: c.hb,
                    y: -c.gb,
                    width: c.width(),
                    height: c.height()
                  }),
                  {
                    uuid: e,
                    title: this.vv(t.pattern),
                    docType: 4,
                    dataStr: p
                  }
                );
              }),
              (i.prototype.Ev = function () {
                var t = this,
                  e = new Array();
                return (
                  A.ya(this.rr, function (i, r) {
                    return (
                      t.nv(),
                      t.ov("~", !0),
                      t.uv(r.id),
                      t.uv(r.name),
                      t.sv(r.color),
                      t.uv(r.visible ? "true" : "false"),
                      t.uv(r.active ? "true" : "false"),
                      t.uv(r.Hq ? "true" : "false"),
                      t.uv(""),
                      (5 != r.og.type && 6 != r.og.type) ||
                        t.uv(r.Iq ? "Signal" : "Plane"),
                      e.push(t.Lt()),
                      !0
                    );
                  }),
                  e
                );
              }),
              (i.prototype.ng = function (t) {
                return this.qu ? "" : t.toUpperCase();
              }),
              (i.prototype.Hv = function (t) {
                this.pv(), this.Nt("%d", this.rr.lf(t).id);
              }),
              (i.prototype.Iv = function (t) {
                t instanceof o.un
                  ? this.uv("solid")
                  : t instanceof o.xn
                  ? this.uv("grid")
                  : this.uv("none");
              }),
              (i.prototype.Jv = function (t) {
                var e = this.rr.lf(t);
                (e.visible = !0), (e.Hq = !0);
              }),
              (i.prototype.Kv = function (t, e) {
                return 0 === t.type
                  ? (this.Nf.nf(
                      "Multi layer of %s is not supported, Document instead",
                      e
                    ),
                    s.mg.jg)
                  : t;
              }),
              (i.prototype.Lv = function (t) {
                switch (t.type) {
                  case 4:
                    return s.mg.eg;
                  case 3:
                    return s.mg.fg;
                  case 1:
                    return s.mg.hg;
                  case 2:
                    return s.mg.gg;
                  case 7:
                    return s.mg.dg;
                  case 8:
                    return s.mg.cg;
                  case 10:
                    return s.mg.ag;
                  case 9:
                    return s.mg.bg;
                  default:
                    return t;
                }
              }),
              (i.prototype.Gv = function (t) {
                var e = this.Lv(t.og);
                if (t instanceof a.ug)
                  return new a.ug(t.ng, e, t.arc, t.width, t.sg);
                if (t instanceof h.Jg)
                  return new h.Jg(
                    t.ng,
                    e,
                    t.location,
                    t.rotation,
                    t.text,
                    t.font,
                    t.Ig
                  );
                if (t instanceof u.rn) {
                  var i = new u.jn(
                    e,
                    t.Og.offsetX,
                    t.Og.offsetY,
                    t.Og.in,
                    t.Og.inner,
                    t.Og.top
                  );
                  return new u.rn(
                    t.id,
                    t.ng,
                    e,
                    t.location,
                    t.rotation,
                    i,
                    t.ln,
                    t.mn,
                    t.nn,
                    t.Mg,
                    t.on
                  );
                }
                return t instanceof c.Gn
                  ? new c.Gn(t.ng, e, t.En, t.Fn, t.rotation, t.sg)
                  : t instanceof p.rg
                  ? new p.rg(t.ng, e, t.kind, t.qg)
                  : t instanceof f.tg
                  ? new f.tg(t.ng, e, t.start, t.end, t.width, t.sg)
                  : t instanceof l.cn
                  ? new l.cn(t.id, t.ng, t.Oc, t.Zm, t.an, t._m, t.$m, t.mask)
                  : t instanceof o.Dn
                  ? new o.Dn(
                      t.id,
                      t.ng,
                      e,
                      t.method,
                      t.yn,
                      t.Cg,
                      t.zn,
                      t.An,
                      t.Bn,
                      t.qg,
                      t.Cn
                    )
                  : t instanceof v.Jn
                  ? new v.Jn(t.ng, e, t.outline)
                  : (this.Nf.nf("unsupported shape %s", t), null);
              }),
              (i.prototype.co = function (t) {
                return t instanceof a.ug
                  ? this.Mv(t)
                  : t instanceof h.Jg
                  ? this.Nv(t, "L", !0)
                  : t instanceof u.rn
                  ? this.Ov(t)
                  : t instanceof c.Gn
                  ? this.Pv(t)
                  : t instanceof p.rg
                  ? this.Qv(t)
                  : t instanceof f.tg
                  ? this.Rv(t)
                  : t instanceof l.cn
                  ? this.Sv(t)
                  : t instanceof b.Rg
                  ? this.Tv(t)
                  : t instanceof o.Dn
                  ? this.Uv(t)
                  : t instanceof v.Jn
                  ? this.Vv(t)
                  : t instanceof T.Ln
                  ? this.iu(t)
                  : (this.Nf.nf("unsupported shape %s", t), []);
              }),
              (i.prototype.iu = function (t) {
                var e = new y.Cv();
                try {
                  for (var i = 0, r = t.Kn; i < r.length; i++) {
                    for (var n = r[i], s = 0, o = n.jd; s < o.length; s++) {
                      var a = o[s];
                      a instanceof O.bd
                        ? e.zv(a)
                        : a instanceof E.ad && e.Av(a);
                    }
                    e.close(!0);
                  }
                } catch (t) {
                  this.Nf.pf(t);
                }
                var h = {
                  nodeName: "path",
                  nodeType: 1,
                  layerid: this.rr.lf(t.og).id,
                  attrs: {
                    d: e.toString(),
                    stroke: "none",
                    layerid: this.rr.lf(t.og).id.toString()
                  }
                };
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("SVGNODE"),
                  this.uv(JSON.stringify(h)),
                  [this.Lt()]
                );
              }),
              (i.prototype.Vv = function (t) {
                this.nv(),
                  this.ov("~", !0),
                  this.uv("PLANEZONE"),
                  this.Hv(t.og),
                  this.uv(t.ng),
                  this.uv("solid"),
                  this.uv(""),
                  this.Nt("#@$"),
                  this.ov("~", !0),
                  this.uv("");
                var e = new y.Cv();
                try {
                  for (var i = null, r = 0, n = t.outline.jd; r < n.length; r++)
                    for (
                      var s = n[r], o = 0, a = s.points(0.1);
                      o < a.length;
                      o++
                    ) {
                      var h = a[o];
                      (h = new q.Zb(h.x, -h.y)),
                        null !== i && e.Bv(i, h),
                        (i = h);
                    }
                  e.close(!0);
                } catch (t) {
                  this.Nf.pf(t);
                }
                return [this.Lt()];
              }),
              (i.prototype.Mv = function (t) {
                var e = this.Kv(t.og, "Arc");
                t.sg && this.Nf.qf("Arc is not support keepout"), this.nv();
                var i,
                  r = t.arc,
                  n = r.yd() ? 1 : 0;
                switch (r.zd()) {
                  case 1:
                    i = 0;
                    break;
                  case 0:
                    i = 1;
                    break;
                  default:
                    throw new Error("unsupported operation");
                }
                return (
                  this.ov("~", !0),
                  this.uv("ARC"),
                  11 === e.type ? this.rv(1) : this.rv(t.width),
                  this.Hv(e),
                  this.uv(this.ng(t.ng)),
                  this.Nt("~"),
                  this.ov(" ", !0),
                  this.uv("M"),
                  this.qv(r.start()),
                  this.uv("A"),
                  this.rv(r.rx),
                  this.rv(r.ry),
                  this.rv(0),
                  this.rv(n),
                  this.rv(i),
                  this.qv(r.vd),
                  this.ov("~", !1),
                  this.uv(""),
                  this.uv(""),
                  this.Jv(e),
                  [this.Lt()]
                );
              }),
              (i.prototype.Nv = function (t, e, i) {
                var n,
                  o,
                  a = this.Kv(t.og, "String");
                s.mg.$f(t.og.type)
                  ? t.Ig
                    ? ((o = t.rotation),
                      (n = t.location
                        .Qb(0, -t.font.size / 2)
                        .Xb(g.va.Vb(t.rotation + 180).ta(t.location))))
                    : (this.Nf.qf(
                        "Text witout mirror in bottom layer will invert"
                      ),
                      (o = t.rotation + 180),
                      (n = t.location
                        .Qb(0, t.font.size / 2)
                        .Xb(g.va.Vb(t.rotation).ta(t.location))))
                  : t.Ig
                  ? (this.Nf.qf(
                      "Text with mirror not in bottom layer will not invert"
                    ),
                    (o = t.rotation + 180),
                    (n = t.location
                      .Qb(0, -t.font.size / 2)
                      .Xb(g.va.Vb(o).ta(t.location))))
                  : ((o = t.rotation),
                    (n = t.location
                      .Qb(0, t.font.size / 2)
                      .Xb(g.va.Vb(o).ta(t.location)))),
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("TEXT");
                var h = t.text.replace(r.gv, "\\\\n");
                return (
                  this.uv(e),
                  this.qv(n),
                  this.rv(t.font.weight),
                  this.rv(o),
                  this.tv(!1),
                  i || "L" !== e ? this.Hv(a) : this.Hv(s.mg.jg),
                  this.uv(t.ng),
                  this.rv(t.font.size),
                  this.uv(h, !1, !0),
                  this.uv(""),
                  i || "L" === e ? this.uv("") : this.uv("none"),
                  this.uv(""),
                  this.uv(""),
                  this.Jv(a),
                  [this.Lt()]
                );
              }),
              (i.prototype.Wv = function (t, e) {
                if (0 !== t.Og.offsetX || 0 !== t.Og.offsetY) return !0;
                if (0 === t.og.type) {
                  var i = w.Ub.$b(t.ln.rotation) % 180;
                  return e.en < e.fn ? 90 !== i : 0 !== i;
                }
                return !1;
              }),
              (i.prototype.Ov = function (t) {
                0 === t.og.type &&
                  1 === t.ln.type &&
                  this.Nf.qf("Square Hole is not supported, use Round instead");
                var e, i;
                switch (t.og.type) {
                  case 0:
                    (e = s.mg._f), (i = m.J.R(t.Og.top));
                    for (
                      var r = 0, n = [t.Og.top, t.Og.in];
                      r < n.length;
                      r++
                    ) {
                      var o = n[r];
                      null !== o && i.en * i.fn < o.en * o.fn && (i = o);
                    }
                    break;
                  case 4:
                    (e = s.mg.dg), (i = t.Og.top);
                    break;
                  case 7:
                    (e = s.mg.eg), (i = t.Og.in);
                    break;
                  default:
                    if (s.mg.isTop(t.og.type))
                      this.Nf.nf(
                        "PAD layer %s is not supported, use %s instead",
                        s.Zf(t.og.type),
                        s.Zf(4)
                      ),
                        (e = s.mg.dg),
                        (i = t.Og.inner);
                    else {
                      if (!s.mg.$f(t.og.type))
                        return (
                          this.Nf.nf(
                            "PAD layer %s is not supported",
                            s.Zf(t.og.type)
                          ),
                          []
                        );
                      this.Nf.nf(
                        "PAD layer %s is not supported, use %s instead",
                        s.Zf(t.og.type),
                        s.Zf(7)
                      ),
                        (e = s.mg.eg),
                        (i = t.Og.inner);
                    }
                }
                i = m.J.R(i);
                var a;
                if (this.Wv(t, i)) a = "POLYGON";
                else
                  switch (i.type) {
                    case 0:
                      a = i.en === i.fn ? "ELLIPSE" : "OVAL";
                      break;
                    case 3:
                      a = "POLYGON";
                      break;
                    case 1:
                      a = "RECT";
                      break;
                    case 2:
                      a = "POLYGON";
                      break;
                    default:
                      this.Nf.nf(
                        "Pad out shape %s not supported, use Ellipse instead",
                        u.dn(i.type)
                      ),
                        (a = "ELLIPSE");
                  }
                if (
                  (this.nv(),
                  this.ov("~", !0),
                  m.J.I(t.ng) &&
                    !t.on &&
                    t.og === s.mg._f &&
                    0 === i.type &&
                    0 === t.ln.type &&
                    i.en <= t.ln.size)
                )
                  this.uv("HOLE"),
                    this.qv(t.location),
                    this.rv(t.ln.size / 2),
                    this.uv("");
                else {
                  if (
                    (this.uv("PAD"),
                    this.uv(a),
                    this.qv(t.location),
                    "POLYGON" === a
                      ? (this.rv(0), this.rv(0))
                      : (this.rv(i.en), this.rv(i.fn)),
                    this.Hv(e),
                    this.uv(this.ng(t.ng)),
                    this.uv(t.Mg),
                    this.rv(t.ln.size / 2),
                    this.pv(),
                    this.ov(" ", !0),
                    "POLYGON" === a && i.en > 0 && i.fn > 0)
                  ) {
                    var h = g.va
                        .translate(t.Og.offsetX, t.Og.offsetY)
                        .Vb(t.rotation),
                      c = new Array(),
                      p = 0.1;
                    switch (i.type) {
                      case 0:
                        i.en < i.fn && (h = g.va.nc.Xb(h));
                        var f = Math.abs(i.en - i.fn) / 2,
                          l = Math.min(i.en, i.fn) / 2;
                        c.push(E.ad._c(t.location.Qb(-f, 0), 270, -180, l, l)),
                          c.push(E.ad._c(t.location.Qb(f, 0), 90, -180, l, l));
                        break;
                      case 3:
                        var v = void 0,
                          b = void 0,
                          y = void 0,
                          d = void 0,
                          x = void 0;
                        if (i.en <= i.fn) {
                          (v = i.en / 2), (b = 22.5), (y = -157.5);
                          var A = (i.fn - i.en) / 2;
                          (d = t.location.Qb(0, A)), (x = t.location.Qb(0, -A));
                        } else {
                          (v = i.fn / 2), (b = 112.5), (y = -67.5);
                          var A = (i.en - i.fn) / 2;
                          (d = t.location.Qb(-A, 0)), (x = t.location.Qb(A, 0));
                        }
                        c.push(E.ad._c(d, b, 135, v, v)),
                          c.push(E.ad._c(x, y, 135, v, v)),
                          (p = (2 * Math.PI * v) / 8);
                        break;
                      case 1:
                        var f = i.en / 2,
                          l = i.fn / 2;
                        c.push(
                          new O.bd(t.location.Qb(-f, l), t.location.Qb(f, l))
                        ),
                          c.push(
                            new O.bd(
                              t.location.Qb(f, -l),
                              t.location.Qb(-f, -l)
                            )
                          );
                        break;
                      case 2:
                        if (i.gn > 0) {
                          var v = ((Math.min(i.en, i.fn) / 2) * i.gn) / 100,
                            f = i.en / 2 - v,
                            l = i.fn / 2 - v;
                          c.push(E.ad._c(t.location.Qb(-f, l), 180, -90, v, v)),
                            c.push(E.ad._c(t.location.Qb(f, l), 90, -90, v, v)),
                            c.push(E.ad._c(t.location.Qb(f, -l), 0, -90, v, v)),
                            c.push(
                              E.ad._c(t.location.Qb(-f, -l), -90, -90, v, v)
                            );
                        } else {
                          var f = i.en / 2,
                            l = i.fn / 2;
                          c.push(
                            new O.bd(t.location.Qb(-f, l), t.location.Qb(f, l))
                          ),
                            c.push(
                              new O.bd(
                                t.location.Qb(f, -l),
                                t.location.Qb(-f, -l)
                              )
                            );
                        }
                    }
                    h = h.ta(t.location);
                    for (var N = 0, q = c; N < q.length; N++)
                      for (
                        var T = q[N], k = 0, R = T.Xb(h).points(p);
                        k < R.length;
                        k++
                      ) {
                        var S = R[k];
                        this.qv(S);
                      }
                  }
                  this.ov("~", !1),
                    this.rv(
                      w.Ub.$b(
                        "POLYGON" === a
                          ? t.rotation + t.ln.rotation
                          : t.rotation
                      )
                    ),
                    this.uv(""),
                    this.rv(t.ln.length),
                    this.uv(""),
                    this.uv(t.on ? "Y" : "N");
                }
                return this.Jv(e), [this.Lt()];
              }),
              (i.prototype.Pv = function (t) {
                var e = new N.xc().qc(t.En).qc(t.Fn).wc();
                if (
                  (this.Jv(t.og), this.qu || this.Dv || t.rotation % 360 != 0)
                ) {
                  var i = e.Oc(),
                    r = g.va.Vb(t.rotation).ta(i),
                    n = e.Mc().Xb(r),
                    s = e.Nc().Xb(r),
                    o = e.Lc().Xb(r),
                    a = e.Kc().Xb(r),
                    h = [
                      new O.bd(n, s),
                      new O.bd(s, o),
                      new O.bd(o, a),
                      new O.bd(a, n)
                    ];
                  return this.Qv(new p.rg(this.ng(t.ng), t.og, 0, d.Zc.$c(h)));
                }
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("RECT"),
                  this.qv(e.Kc()),
                  this.rv(e.width()),
                  this.rv(e.height()),
                  this.Hv(t.og),
                  this.uv(""),
                  this.uv(""),
                  this.uv(""),
                  this.uv(""),
                  this.uv(""),
                  this.uv(t.ng),
                  [this.Lt()]
                );
              }),
              (i.prototype.Qv = function (t) {
                var e, i;
                switch (t.kind) {
                  case 1:
                    0 === t.og.type
                      ? (this.Nf.qf(
                          "Multi Layer of Region in Polygon Cutout mode is not supported, use Document Layer instead"
                        ),
                        (i = s.mg.jg))
                      : (i = t.og),
                      (e = "cutout");
                    break;
                  case 2:
                    (i = t.og), (e = "npth");
                    break;
                  default:
                    0 === t.og.type
                      ? (this.Nf.qf(
                          "Multi Layer of Region is not supported, use Document Layer instead"
                        ),
                        (i = s.mg.jg))
                      : (i = t.og),
                      (e = "solid");
                }
                this.nv(),
                  this.ov("~", !0),
                  this.uv("SOLIDREGION"),
                  this.Hv(i),
                  this.uv(this.ng(t.ng)),
                  this.Nt("~"),
                  this.ov(" ", !0);
                for (var r = 0, n = t.qg.jd; r < n.length; r++)
                  for (
                    var o = n[r], a = 0, h = o.points(1);
                    a < h.length;
                    a++
                  ) {
                    var u = h[a];
                    this.qv(u);
                  }
                return (
                  this.ov("~", !1),
                  this.uv(e),
                  this.uv(""),
                  this.uv(""),
                  this.Jv(i),
                  [this.Lt()]
                );
              }),
              (i.prototype.Uv = function (t) {
                var e;
                (e = m.J.I(t.ng) ? "GND" : t.ng),
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("COPPERAREA"),
                  this.rv(2),
                  this.Hv(t.og),
                  this.uv(this.ng(e)),
                  this.Nt("~"),
                  this.ov(" ", !0);
                for (var i = 0, r = t.qg; i < r.length; i++)
                  for (
                    var n = r[i], s = 0, a = n.points(1);
                    s < a.length;
                    s++
                  ) {
                    var h = a[s];
                    this.qv(h);
                  }
                return (
                  this.ov("~", !1),
                  this.rv(1),
                  this.Iv(t.method),
                  this.uv(""),
                  this.uv(t.zn ? "spoke" : "direct"),
                  this.uv(t.An ? "yes" : "none"),
                  this.uv(""),
                  this.uv(""),
                  this.uv(""),
                  this.rv(t.Bn),
                  t.method instanceof o.xn
                    ? (this.rv(t.method.vn), this.rv(t.method.wn))
                    : (this.uv("1"), this.uv("1")),
                  this.rv(t.yn),
                  t.method instanceof o.un
                    ? this.uv(t.method.tn > 0 ? "yes" : "none")
                    : this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.Rv = function (t) {
                var e = this.Kv(t.og, "Track");
                return (
                  t.sg && this.Nf.qf("Track is not support keepout"),
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("TRACK"),
                  11 === e.type ? this.rv(1) : this.rv(t.width),
                  this.Hv(e),
                  this.uv(this.ng(t.ng)),
                  this.Nt("~"),
                  this.ov(" ", !0),
                  this.qv(t.start),
                  this.qv(t.end),
                  this.ov("~", !1),
                  this.uv(""),
                  this.Jv(e),
                  [this.Lt()]
                );
              }),
              (i.prototype.Sv = function (t) {
                var e;
                return (
                  !isNaN(t.$m) && isNaN(t.an)
                    ? (e = s.mg.dg)
                    : !isNaN(t.an) && isNaN(t.$m)
                    ? (e = s.mg.eg)
                    : (isNaN(t.$m) &&
                        isNaN(t.an) &&
                        this.Nf.qf("Buried hole is not supported"),
                      (e = s.mg._f)),
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("VIA"),
                  this.qv(t.Oc),
                  this.rv(t._m),
                  this.uv(this.ng(t.ng)),
                  this.rv(t.Zm / 2),
                  this.uv(""),
                  this.Jv(e),
                  [this.Lt()]
                );
              }),
              (i.prototype.Tv = function (t) {
                this.Dv = !0;
                try {
                  this.nv(),
                    this.ov("~", !0),
                    this.uv("LIB"),
                    this.qv(t.location),
                    this.Nt("~"),
                    this.ov("`", !0),
                    this.uv("package"),
                    this.uv(t.pattern.toUpperCase()),
                    this.uv("value"),
                    this.uv(t.Ng.text),
                    this.ov("~", !1),
                    this.rv(t.orientation),
                    this.uv(""),
                    this.uv(""),
                    this.Hv(t.og),
                    this.ov("#@$", !1);
                  var e = t.Kg,
                    i = t.Mg;
                  m.J.I(t.Mg.text) &&
                    ((i = new h.Jg(
                      i.ng,
                      i.og,
                      i.location,
                      i.rotation,
                      "U?",
                      i.font,
                      i.Ig
                    )),
                    (e = !1)),
                    this.uv(this.Nv(i, "P", e)[0], !1, !1),
                    this.uv(this.Nv(t.Ng, "N", t.Lg)[0], !1, !1);
                  for (
                    var r = new Array(), n = 0, s = t.Og;
                    n < s.length;
                    n++
                  ) {
                    var o = s[n];
                    if (o instanceof T.Ln) r.push(o);
                    else
                      for (var a = 0, u = this.co(o); a < u.length; a++) {
                        var c = u[a];
                        this.uv(c, !1, !1);
                      }
                  }
                  if (0 === r.length) return [this.Lt()];
                  var p = new Array();
                  p.push(this.Lt());
                  for (var f = 0, l = r; f < l.length; f++)
                    for (
                      var v = l[f], b = 0, y = this.co(v);
                      b < y.length;
                      b++
                    ) {
                      var o = y[b];
                      p.push(o);
                    }
                  return p;
                } finally {
                  this.Dv = !1;
                }
              }),
              i
            );
          })(r.Ot);
        i.ou = R;
      }
    ),
    i(
      "pcb/easyeda/SchEncoder",
      [
        "require",
        "exports",
        "pcb/easyeda/AbstractEncoder",
        "pcb/primitives/sch/SchPin",
        "pcb/primitives/Stroke",
        "pcb/primitives/sch/SchBezier",
        "pcb/primitives/sch/SchBus",
        "pcb/primitives/sch/SchEllipse",
        "pcb/primitives/sch/SchArc",
        "pcb/primitives/sch/SchAnnotation",
        "pcb/primitives/sch/SchPolyline",
        "pcb/primitives/sch/SchPie",
        "pcb/primitives/sch/SchRectangle",
        "pcb/primitives/sch/SchWire",
        "pcb/primitives/sch/SchBusEntry",
        "pcb/primitives/sch/SchPowerPort",
        "pcb/primitives/sch/SchNetLabel",
        "pcb/primitives/sch/SchJunction",
        "pcb/primitives/sch/SchNoERC",
        "pcb/primitives/sch/SchPort",
        "pcb/primitives/sch/SchComponent",
        "geometry/utils/Angle",
        "geometry/Matrix3",
        "utils/StringKit",
        "geometry/Polyline",
        "pcb/primitives/Style",
        "geometry/Arc",
        "geometry/Bezier",
        "pcb/primitives/Color",
        "utils/Utils",
        "utils/Check",
        "pcb/easyeda/DefaultSize",
        "geometry/BBox2",
        "geometry/Vector2"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I,
        L,
        P,
        _
      ) {
        function M(t) {
          return r.iv.wrap(t).toFixed(1).toString() + "pt";
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var C = new _.Zb(3e3, -4e3),
          F = (function (t) {
            function i(e, i) {
              var r = t.call(this, i) || this;
              return (r._n = e), r;
            }
            return (
              e(i, t),
              (i.prototype.bo = function (t) {
                void 0 === t && (t = S.F.uuid()), (this.qu = !1);
                for (
                  var e = x.va.scale(this._n.scale * r.hv.ratio),
                    i = new Array(),
                    n = new P.xc(),
                    s = new Array(),
                    o = 0,
                    a = this._n.Og;
                  o < a.length;
                  o++
                ) {
                  var h = a[o];
                  (h = h.Xb(e)),
                    n.pc(h.eb()),
                    h instanceof g.us ? s.push(h) : S.F.t(i, this.co(h));
                }
                for (var u = 0, c = s; u < c.length; u++) {
                  var p = c[u];
                  S.F.t(i, this.Xv(p));
                }
                n.valid() || n.uc(0, 0);
                var f = n.wc(),
                  l = {};
                this.nv();
                var v = {
                  docType: 1
                };
                return (
                  I.J.I(this._n.Tg) || (v["importedFrom"] = this._n.Tg),
                  (l["head"] = v),
                  this.ov("~", !0),
                  this.uv("CA"),
                  this.qv(f.Kc()),
                  this.uv("#FFFFFF"),
                  this.uv("yes"),
                  this.uv("#CCCCCC"),
                  this.rv(5),
                  this.rv(f.width()),
                  this.rv(f.height()),
                  this.uv("line"),
                  this.rv(5),
                  this.uv("pixel"),
                  this.rv(5),
                  this.rv(45),
                  this.uv("visible"),
                  this.rv(0.5),
                  this.qv(new _.Zb(0, 0)),
                  (l["canvas"] = this.Lt()),
                  (l["shape"] = i),
                  (l["BBox"] = {
                    x: f.hb,
                    y: -f.gb,
                    width: f.width(),
                    height: f.height()
                  }),
                  {
                    uuid: t,
                    docType: 1,
                    title: this._n.Sg,
                    dataStr: l
                  }
                );
              }),
              (i.prototype.Fv = function (t, e) {
                void 0 === e && (e = S.F.uuid());
                var i = new Array();
                for (var r in t.Og) {
                  var n = t.Og[r];
                  for (var s in n) {
                    var o = this.Yv(t, r, s);
                    i.push({
                      uuid: e,
                      title: A.L.format("%s.%s", t.name, s),
                      docType: 6,
                      dataStr: o
                    });
                  }
                  break;
                }
                if (1 == i.length) {
                  var a = i[0];
                  return (
                    (a["title"] = t.name),
                    (a["docType"] = 2),
                    (a["dataStr"]["head"]["docType"] = 2),
                    (a["dataStr"]["head"]["c_para"]["pre"] = t.ds),
                    a
                  );
                }
                var h = JSON.parse(JSON.stringify(i[0]));
                return (
                  (h["title"] = t.name),
                  (h["docType"] = 2),
                  (h["uuid"] = e),
                  (h["dataStr"]["head"]["c_para"]["pre"] = t.ds),
                  (h["subpart"] = i),
                  h
                );
              }),
              (i.prototype.Yv = function (t, e, i) {
                this.qu = !0;
                for (
                  var s = x.va.scale(this._n.scale * r.hv.ratio),
                    o = null,
                    a = new P.xc(),
                    h = t.Og[e][i],
                    u = 0,
                    c = h;
                  u < c.length;
                  u++
                ) {
                  var p = c[u];
                  a.pc(p.eb()),
                    null == o && p instanceof n.Gs && (o = p.location);
                }
                var f;
                (f = a.valid() ? a.wc() : new P.mb(0, 0, 0, 0)),
                  null == o && (o = _.Zb.oa);
                var l = f.Oc();
                (o = o.Xb(s)), (l = l.Xb(s));
                var v = o.x - 5 * Math.round(o.x / 5),
                  b = o.y - 5 * Math.round(o.y / 5);
                (l = new _.Zb(0 | l.x, 0 | l.y)),
                  (s = s.translate(-l.x + v, -l.y + b).qa(C)),
                  (f = f.transform(s));
                for (var y = new Array(), d = 0, g = h; d < g.length; d++) {
                  var p = g[d];
                  S.F.t(y, this.co(p.Xb(s)));
                }
                var w,
                  m,
                  E,
                  O = {},
                  N = {
                    name: t.name,
                    package: e,
                    pre: A.L.format("%s.%s", t.ds, i)
                  };
                if (t.hs && t.hs.length > 0)
                  for (var q = 0; q < t.hs.length; q++)
                    (E = t.hs[q]),
                      (w = this.vv(E && E.name)),
                      (m = this.vv(E && E.value)),
                      w && m && (N.hasOwnProperty(w) || (N[w] = m));
                var T = {
                  docType: 6,
                  c_para: N
                };
                return (
                  I.J.I(this._n.Tg) || (T["importedFrom"] = this._n.Tg),
                  (O["head"] = T),
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("CA"),
                  this.rv(1e3),
                  this.rv(1e3),
                  this.uv("#FFFFFF"),
                  this.uv("yes"),
                  this.uv("#CCCCCC"),
                  this.rv(5),
                  this.rv(f.width()),
                  this.rv(f.height()),
                  this.uv("line"),
                  this.rv(5),
                  this.uv("pixel"),
                  this.rv(5),
                  this.qv(C),
                  (O["canvas"] = this.Lt()),
                  (O["shape"] = y),
                  (O["BBox"] = {
                    x: f.hb,
                    y: -f.gb,
                    width: f.width(),
                    height: f.height()
                  }),
                  O
                );
              }),
              (i.prototype.Zv = function (t) {
                if ((this.pv(), null != t))
                  switch (t) {
                    case 0:
                      this.Nt("1");
                      break;
                    case 2:
                      this.Nt("2");
                      break;
                    case 1:
                      this.Nt("3");
                      break;
                    case 7:
                      this.Nt("4");
                      break;
                    default:
                      this.Nf.nf("Pin Electrical %s is not supported", n.As(t));
                  }
              }),
              (i.prototype.$v = function (t) {
                if ((this.pv(), null == t)) this.Nt("0");
                else
                  switch (t) {
                    case 0:
                      this.Nt("0");
                      break;
                    case 1:
                      this.Nt("1");
                      break;
                    case 2:
                      this.Nt("2");
                  }
              }),
              (i.prototype._v = function (t) {
                if ((this.pv(), null != t))
                  switch (t) {
                    case 0:
                      this.Nt("text-before-edge");
                      break;
                    case 1:
                      this.Nt("middle");
                      break;
                    case 2:
                      this.Nt("text-after-edge");
                  }
              }),
              (i.prototype.aw = function (t) {
                if ((this.pv(), null != t))
                  switch (t) {
                    case 0:
                      this.Nt("start");
                      break;
                    case 1:
                      this.Nt("middle");
                      break;
                    case 2:
                      this.Nt("end");
                  }
              }),
              (i.prototype.co = function (t) {
                return t instanceof o.Ks
                  ? this.bw(t)
                  : t instanceof a.ft
                  ? this.cw(t)
                  : t instanceof h.Ls
                  ? this.dw(t)
                  : t instanceof u.Is
                  ? this.Mv(t)
                  : t instanceof c.ss
                  ? this.ew(t, "L", !0)
                  : t instanceof p.ys
                  ? this.fw(t)
                  : t instanceof f.Hs
                  ? this.gw(t)
                  : t instanceof n.Gs
                  ? this.hw(t)
                  : t instanceof l.zs
                  ? this.iw(t)
                  : t instanceof v.ts
                  ? this.jw(t)
                  : t instanceof b.gt
                  ? this.kw(t)
                  : t instanceof y.dt
                  ? this.lw(t)
                  : t instanceof d.et
                  ? this.mw(t)
                  : t instanceof g.us
                  ? this.Xv(t)
                  : t instanceof w.ht
                  ? this.nw(t)
                  : t instanceof E.ps
                  ? this.Tv(t)
                  : t instanceof m.at
                  ? this.ow(t)
                  : (this.Nf.nf("unsupported shape %s", t), []);
              }),
              (i.prototype.bw = function (t) {
                var e = t.style,
                  i = t.Js.dd;
                if (i.length <= 4) {
                  var r = void 0,
                    n = void 0,
                    s = void 0,
                    o = void 0;
                  switch (((r = t.Js.start()), (o = t.Js.end()), i.length)) {
                    case 2:
                      (n = r), (s = o);
                      break;
                    case 3:
                      (n = i[1]), (s = n);
                      break;
                    default:
                      (n = i[1]), (s = i[2]);
                  }
                  return (
                    this.nv(),
                    this.Nt("PT~"),
                    this.ov(" ", !0),
                    this.uv("M"),
                    this.qv(r),
                    this.uv("C"),
                    this.qv(n),
                    this.qv(s),
                    this.qv(o),
                    this.ov("~", !1),
                    this.sv(e.stroke.color),
                    this.rv(e.stroke.width),
                    this.$v(e.stroke.style),
                    this.uv(""),
                    this.uv(""),
                    [this.Lt()]
                  );
                }
                return (
                  this.Nf.nf("Bezier endpoints more than 4 is not supported"),
                  []
                );
              }),
              (i.prototype.cw = function (t) {
                this.nv(), this.Nt("B~"), this.ov(" ", !0);
                for (var e = 0, i = t.points; e < i.length; e++) {
                  var r = i[e];
                  this.qv(r);
                }
                return (
                  this.ov("~", !1),
                  this.sv(t.stroke.color),
                  this.rv(t.stroke.width),
                  this.$v(t.stroke.style),
                  this.uv(""),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.dw = function (t) {
                var e = t.style,
                  i = e.stroke;
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("E"),
                  this.qv(t.Oc),
                  this.rv(t.rx),
                  this.rv(t.ry),
                  this.sv(i.color),
                  this.rv(i.width),
                  this.$v(i.style),
                  null !== e.fill && 1 === e.vs && this.sv(e.fill),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.Mv = function (t) {
                var e,
                  i = t.style,
                  r = i.stroke,
                  n = t.arc,
                  s = n.yd() ? 1 : 0;
                switch (n.zd()) {
                  case 1:
                    e = 0;
                    break;
                  case 0:
                    e = 1;
                    break;
                  default:
                    throw new Error("unsupported sweep");
                }
                return (
                  this.nv(),
                  this.Nt("A~"),
                  this.ov(" ", !0),
                  this.uv("M"),
                  this.qv(n.start()),
                  this.uv("A"),
                  this.rv(n.rx),
                  this.rv(n.ry),
                  this.rv(0),
                  this.rv(s),
                  this.rv(e),
                  this.qv(n.vd),
                  this.ov("~", !1),
                  this.uv(""),
                  this.sv(r.color),
                  this.rv(Math.max(r.width, 1)),
                  this.$v(r.style),
                  this.sv(i.fill),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.ew = function (t, e, i) {
                var n,
                  s,
                  o = O.Ub.$b(-t.orientation);
                if (o > 90 && o < 270) {
                  switch (
                    (this.Nf.qf(
                      "orientation 180 of Annotation will not inverted"
                    ),
                    (o = 0),
                    t.bs.Pr)
                  ) {
                    case 0:
                      n = 2;
                      break;
                    case 1:
                      n = 1;
                      break;
                    case 2:
                      n = 0;
                      break;
                    default:
                      this.Nf.qf("bug in processing text horizontal"), (n = 2);
                  }
                  switch (t.bs.vertical) {
                    case 0:
                      s = 2;
                      break;
                    case 1:
                      s = 1;
                      break;
                    case 2:
                      s = 0;
                      break;
                    default:
                      this.Nf.qf("bug in processing text vertical"), (s = 0);
                  }
                } else (n = t.bs.Pr), (s = t.bs.vertical);
                var a;
                if (2 === t.rs) {
                  for (var h = 1; null !== t.text.match(r.gv); ) h++;
                  var u = r.iv.wrap(t.font.size);
                  a =
                    h > 1
                      ? t.location
                          .Qb(0, u * (h - 1))
                          .Xb(x.va.Vb(-o).ta(t.location))
                      : t.location;
                } else a = t.location;
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("T"),
                  this.uv(e),
                  this.qv(a),
                  this.rv(o),
                  this.sv(t.color),
                  this.uv(t.font.Fg),
                  this.uv(M(t.font.size)),
                  this.rv(t.font.weight),
                  this.uv(t.font.Gg ? "Italic" : ""),
                  this._v(s),
                  this.uv("comment"),
                  this.uv(t.text.replace(r.gv, "\\n"), !1, !0),
                  this.rv(i ? 1 : 0),
                  this.aw(n),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.fw = function (t) {
                var e = this,
                  i = t.style,
                  r = i.stroke;
                return null !== i.fill && 1 === i.vs
                  ? (this.nv(),
                    this.Nt("PG~"),
                    this.ov(" ", !0),
                    t.xs.points(1, function (t) {
                      e.qv(t);
                    }),
                    this.ov("~", !1),
                    this.sv(r.color),
                    this.rv(r.width),
                    this.$v(r.style),
                    1 === i.vs && this.sv(i.fill),
                    [this.Lt()])
                  : (this.nv(),
                    this.Nt("PL~"),
                    this.ov(" ", !0),
                    t.xs.points(1, function (t) {
                      e.qv(t);
                    }),
                    this.ov("~", !1),
                    this.sv(r.color),
                    this.rv(Math.max(r.width, 1)),
                    this.$v(r.style),
                    this.uv(""),
                    this.uv(""),
                    [this.Lt()]);
              }),
              (i.prototype.gw = function (t) {
                var e = t.style,
                  i = e.stroke,
                  r = t.arc,
                  n = t.arc.yd() ? 1 : 0;
                return (
                  this.nv(),
                  this.Nt("PI~"),
                  this.ov(" ", !0),
                  this.uv("M"),
                  this.qv(r.Oc),
                  this.uv("L"),
                  this.qv(r.start()),
                  this.uv("A"),
                  this.rv(r.rx),
                  this.rv(r.ry),
                  this.rv(0),
                  this.rv(n),
                  this.rv(0),
                  this.qv(r.vd),
                  this.uv("Z"),
                  this.ov("~", !1),
                  this.uv(""),
                  this.sv(i.color),
                  this.rv(i.width),
                  this.$v(i.style),
                  this.sv(e.fill),
                  [this.Lt()]
                );
              }),
              (i.prototype.hw = function (t) {
                for (var e = !1, i = !1, r = 0, n = t.Fs; r < n.length; r++) {
                  var s = n[r];
                  switch (s) {
                    case 11:
                      e = !0;
                      break;
                    case 12:
                      i = !0;
                      break;
                    default:
                      this.Nf.nf("Pin Shape %s is not supported", s);
                  }
                }
                var o;
                t.name.text.indexOf("\\") >= 0
                  ? (this.Nf.nf(
                      "Pin Display Name is not support \\ placeholder"
                    ),
                    (o = t.name.text.replace(/\\/g, "")))
                  : (o = t.name.text);
                var a,
                  h,
                  u = t.location.x,
                  c = t.location.y,
                  p = t.length,
                  f = O.Ub.dc(t.orientation);
                switch (f) {
                  case 0:
                    (h = !1), (a = (i ? L.Qs : 0) - p), (u += p);
                    break;
                  case 180:
                    (h = !1), (a = p - (i ? L.Qs : 0)), (u -= p);
                    break;
                  case 270:
                    (h = !0), (a = (i ? L.Qs : 0) - p), (c -= p);
                    break;
                  case 90:
                    (h = !0), (a = p - (i ? L.Qs : 0)), (c += p);
                    break;
                  default:
                    throw new Error(
                      A.L.format("pin orientation %f -> %d", t.orientation, f)
                    );
                }
                var l;
                switch (t.name.bs.vertical) {
                  case 1:
                    l = -t.name.font.size / 2;
                    break;
                  case 0:
                    l = -t.name.font.size;
                    break;
                  default:
                    l = 0;
                }
                var v,
                  b = t.name.location
                    .Qb(0, l)
                    .Xb(x.va.Vb(t.name.orientation).ta(t.name.location));
                switch (t.number.bs.vertical) {
                  case 1:
                    v = -t.number.font.size / 2;
                    break;
                  case 0:
                    v = -t.number.font.size;
                    break;
                  default:
                    v = 0;
                }
                var y = t.number.location
                    .Qb(0, v)
                    .Xb(x.va.Vb(t.number.orientation).ta(t.number.location)),
                  d = new _.Zb(u, c);
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("P"),
                  this.uv(t.visible ? "show" : "none"),
                  this.Zv(t.Es),
                  this.uv(t.number.text),
                  this.qv(d),
                  this.rv(t.orientation),
                  this.uv(""),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.qv(d),
                  this.Nt("^^"),
                  this.ov(" ", !0),
                  this.uv("M"),
                  this.qv(d),
                  this.uv(h ? "v" : "h"),
                  this.rv(a),
                  this.Nt("~"),
                  this.ov(" ", !0),
                  this.sv(t.color),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.tv(t.Cs),
                  this.qv(b),
                  this.rv(O.Ub.$b(-t.name.orientation)),
                  this.uv(o),
                  this.aw(t.name.bs.Pr),
                  this.uv(t.name.font.Fg),
                  this.uv(M(t.name.font.size)),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.tv(t.Ds),
                  this.qv(y),
                  this.rv(O.Ub.$b(-t.number.orientation)),
                  this.uv(t.number.text),
                  this.aw(t.number.bs.Pr),
                  this.uv(t.number.font.Fg),
                  this.uv(M(t.number.font.size)),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.tv(i),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.tv(e),
                  [this.Lt()]
                );
              }),
              (i.prototype.iw = function (t) {
                var e = t.style,
                  i = e.stroke;
                this.nv();
                var r = new P.xc().qc(t.En).qc(t.Fn).wc();
                return (
                  this.ov("~", !0),
                  this.uv("R"),
                  this.qv(r.Kc()),
                  this.rv(t.rx),
                  this.rv(t.ry),
                  this.rv(r.width()),
                  this.rv(r.height()),
                  this.sv(i.color),
                  this.rv(i.width),
                  this.$v(i.style),
                  1 === e.vs && this.sv(e.fill),
                  [this.Lt()]
                );
              }),
              (i.prototype.jw = function (t) {
                this.nv(), this.Nt("W~"), this.ov(" ", !0);
                for (var e = 0, i = t.points; e < i.length; e++) {
                  var r = i[e];
                  this.qv(r);
                }
                return (
                  this.ov("~", !1),
                  this.sv(t.stroke.color),
                  this.rv(Math.max(t.stroke.width, 1)),
                  this.$v(t.stroke.style),
                  this.uv(""),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.lw = function (t) {
                var e = new Array(),
                  i = x.va.Vb(t.orientation).ta(t.location),
                  r = new q.ws(new s._r(t.color, 1), null),
                  n = new q.ws(new s._r(t.color, 0.1), null);
                switch (t.type) {
                  case 1:
                    var a = t.location.Qb(L.Ts - L.Us, 0),
                      h = t.location.Qb(L.Ts - L.Us, L.Us / 2),
                      c = t.location.Qb(L.Ts - L.Us, -L.Us / 2),
                      f = t.location.Qb(L.Ts, 0),
                      l = N.Zc.ld([t.location, a, h, f, c, a]).Xb(i);
                    e.push(new p.ys(l, r));
                    break;
                  case 2:
                    var a = t.location.Qb(L.Ts, 0),
                      h = t.location.Qb(L.Ts, L.Ts / 2),
                      c = t.location.Qb(L.Ts, -L.Ts / 2),
                      v = N.Zc.ld([t.location, a]).Xb(i),
                      b = N.Zc.ld([h, c]).Xb(i);
                    e.push(new p.ys(v, r)), e.push(new p.ys(b, r));
                    break;
                  case 0:
                    var a = t.location.Qb(L.Ts - L.Us, 0),
                      h = t.location.Qb(L.Ts - L.Us / 2, 0),
                      l = N.Zc.ld([t.location, a]).Xb(i);
                    e.push(new p.ys(l, r));
                    var d = L.Us / 2,
                      g = L.Us / 2,
                      w = T.ad.$c(h, 0, 360, d, g, 1).Xb(i);
                    e.push(new u.Is(w, n));
                    break;
                  case 3:
                    var a = t.location.Qb(L.Ts - L.Us / 2, 0),
                      h = t.location.Qb(L.Ts - L.Us, L.Us / 2),
                      c = t.location.Qb(L.Ts, L.Us / 4).Xb(i),
                      f = t.location.Qb(L.Ts - L.Us, -L.Us / 4),
                      m = t.location.Qb(L.Ts, -L.Us / 2),
                      l = N.Zc.ld([t.location, a]).Xb(i);
                    e.push(new p.ys(l, r));
                    var E = new k.hd([h, c, f, m]).Xb(i);
                    e.push(new o.Ks(E, n));
                    break;
                  case 4:
                    var a = t.location.Qb(L.Ts, 0),
                      v = N.Zc.ld([t.location, a]).Xb(i);
                    e.push(new p.ys(v, r));
                    var h = t.location.Qb(L.Ts, L.Ws / 2),
                      c = t.location.Qb(L.Ts, -L.Ws / 2),
                      b = N.Zc.ld([h, c]).Xb(i);
                    e.push(new p.ys(b, r));
                    var f = t.location.Qb(L.Ts + 3, L.Ws / 2 - 3),
                      m = t.location.Qb(L.Ts + 3, -(L.Ws / 2 - 3)),
                      A = N.Zc.ld([f, m]).Xb(i);
                    e.push(new p.ys(A, r));
                    var R = t.location.Qb(L.Ts + 6, L.Ws / 2 - 6),
                      S = t.location.Qb(L.Ts + 6, -(L.Ws / 2 - 6)),
                      I = N.Zc.ld([R, S]).Xb(i);
                    e.push(new p.ys(I, r));
                    var P = t.location.Qb(L.Ts + 9, L.Ws / 2 - 9),
                      _ = t.location.Qb(L.Ts + 9, -(L.Ws / 2 - 9)),
                      C = N.Zc.ld([P, _]).Xb(i);
                    e.push(new p.ys(C, r));
                    break;
                  case 5:
                    var a = t.location.Qb(L.Ts, 0),
                      h = t.location.Qb(L.Ts, L.Ws / 2),
                      c = t.location.Qb(L.Ts, -L.Ws / 2),
                      f = t.location.Qb(L.Ws, 0),
                      l = N.Zc.ld([t.location, a, h, f, c, a]).Xb(i);
                    e.push(new p.ys(l, r));
                    break;
                  case 6:
                    var a = t.location.Qb(L.Ts, 0),
                      h = t.location.Qb(L.Ts, L.Ws / 2),
                      c = t.location.Qb(L.Ts, -L.Ws / 2),
                      f = t.location.Qb(L.Ws, L.Ws / 2 - 3),
                      m = t.location.Qb(L.Ws, -3),
                      R = t.location.Qb(L.Ws, -(L.Ws / 2 + 3)),
                      v = N.Zc.ld([t.location, a, m]).Xb(i);
                    e.push(new p.ys(v, r));
                    var b = N.Zc.ld([f, h, c, R]).Xb(i);
                    e.push(new p.ys(b, r));
                }
                var F,
                  j = x.va.Vb(t.ng.orientation).ta(t.ng.location);
                switch (t.ng.bs.vertical) {
                  case 1:
                    F = t.ng.location.Qb(0, -t.ng.font.size / 2).Xb(j);
                    break;
                  case 0:
                    F = t.ng.location.Qb(0, -t.ng.font.size).Xb(j);
                    break;
                  case 2:
                    F = t.ng.location.Qb(0, 0.2 * t.ng.font.size).Xb(j);
                    break;
                  default:
                    F = t.ng.location;
                }
                this.nv(),
                  this.ov("~", !0),
                  this.uv("F"),
                  this.uv("part_netLabel_" + y.bt(t.type).toLowerCase()),
                  this.qv(t.location),
                  this.rv(0),
                  this.uv(""),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.qv(t.location),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.uv(t.ng.text),
                  this.sv(t.color),
                  this.qv(F),
                  this.rv(O.Ub.$b(-t.ng.orientation)),
                  this.aw(t.ng.bs.Pr),
                  this.tv(t.ct),
                  this.uv(t.ng.font.Fg),
                  this.uv(M(t.ng.font.size)),
                  this.ov("^^", !1);
                for (var D = 0, B = e; D < B.length; D++)
                  for (var U = B[D], Q = 0, X = this.co(U); Q < X.length; Q++) {
                    var Z = X[Q];
                    this.uv(Z, !1, !1);
                  }
                return [this.Lt()];
              }),
              (i.prototype.kw = function (t) {
                return (
                  t.stroke.color !== R.aj.$i &&
                    this.Nf.nf(
                      "BusEntry Color %s is not supported",
                      t.stroke.color.toString()
                    ),
                  2 !== t.stroke.width &&
                    this.Nf.nf(
                      "BusEntry Line Width %f is not supported",
                      t.stroke.width
                    ),
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("BE"),
                  this.rv(0),
                  this.qv(t.En),
                  this.qv(t.Fn),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.mw = function (t) {
                var e;
                t.ng.indexOf("\\") >= 0
                  ? (this.Nf.qf("NetLabel Net is not support \\ placeholder"),
                    (e = t.ng.replace(/\\/g, "")))
                  : (e = t.ng);
                var i = x.va.Vb(t.orientation).ta(t.location),
                  r = t.location.Qb(0, 0.2 * t.font.size).Xb(i);
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("N"),
                  this.qv(t.location),
                  this.rv(O.Ub.$b(-t.orientation)),
                  this.sv(t.color),
                  this.uv(e),
                  this.uv(""),
                  this.uv("left"),
                  this.qv(r),
                  this.uv(t.font.Fg),
                  this.uv(M(t.font.size)),
                  [this.Lt()]
                );
              }),
              (i.prototype.nw = function (t) {
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("O"),
                  this.qv(t.location),
                  this.uv(""),
                  this.Nt("~"),
                  this.ov(" ", !0),
                  this.uv("M"),
                  this.qv(t.location.Qb(-4, -4)),
                  this.uv("L"),
                  this.qv(t.location.Qb(4, 4)),
                  this.uv("M"),
                  this.qv(t.location.Qb(4, -4)),
                  this.uv("L"),
                  this.qv(t.location.Qb(-4, 4)),
                  this.ov("~", !1),
                  this.sv(t.color),
                  [this.Lt()]
                );
              }),
              (i.prototype.Xv = function (t) {
                return (
                  this.nv(),
                  this.ov("~", !0),
                  this.uv("J"),
                  this.qv(t.location),
                  this.rv(t.size),
                  this.sv(t.fill),
                  this.uv(""),
                  [this.Lt()]
                );
              }),
              (i.prototype.ow = function (t) {
                t.name.text.indexOf("\\") >= 0 &&
                  this.Nf.qf("\\ placeholder of port is not supported");
                var e = new Array(),
                  i = new Array(),
                  r = t.name.font.size,
                  n = t.width,
                  o = t.location,
                  a = t.location.Qb(n, 0),
                  h = !1,
                  u = !1;
                switch (t._s) {
                  case 2:
                    t.Zs && (h = !0), t.$s && (u = !0);
                    break;
                  case 1:
                    t.Zs && (u = !0), t.$s && (h = !0);
                }
                var c = null,
                  f = t.location,
                  l = 0;
                h && !u
                  ? ((n = 3 * r), (a = o.Qb(n, 0)), (c = a), (f = o))
                  : u &&
                    !h &&
                    ((n = 3 * r), (o = a.Qb(-n, 0)), (c = o), (f = a), (l = 2)),
                  t.Zs
                    ? (i.push(o.Qb(r, -r / 2)),
                      i.push(o),
                      i.push(o.Qb(r, r / 2)))
                    : (i.push(o.Qb(0, -r / 2)), i.push(o.Qb(0, r / 2))),
                  t.$s
                    ? (i.push(a.Qb(-r, r / 2)),
                      i.push(a),
                      i.push(a.Qb(-r, -r / 2)))
                    : (i.push(a.Qb(0, r / 2)), i.push(a.Qb(0, -r / 2))),
                  i.push(i[0]),
                  null === c && (c = a);
                var v = x.va.Vb(t.orientation).ta(t.location),
                  b = N.Zc.ld(
                    i.map(function (t) {
                      return t.Xb(v);
                    })
                  );
                e.push(new p.ys(b, new q.ws(new s._r(t.Ys, 0.5), t.Xs)));
                var y = t.orientation > 90 && t.orientation <= 270,
                  d = c.Qb(0, (((y ? 1 : -1) * r) / 2) * 0.7).Xb(v);
                this.nv(),
                  this.ov("~", !0),
                  this.uv("F"),
                  this.uv("part_netLabel_netPort"),
                  this.qv(t.location),
                  this.rv(0),
                  this.uv(""),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.qv(f.Xb(v)),
                  this.Nt("^^"),
                  this.ov("~", !0),
                  this.uv(t.name.text),
                  this.sv(t.name.color),
                  this.qv(d),
                  this.rv(O.Ub.$b(-t.orientation % 180)),
                  y ? (0 === l ? this.aw(2) : this.aw(0)) : this.aw(l),
                  this.tv(!0),
                  this.uv(t.name.font.Fg),
                  this.uv(M(t.name.font.size)),
                  this.ov("^^", !1);
                for (var g = 0, w = e; g < w.length; g++)
                  for (var m = w[g], E = 0, A = this.co(m); E < A.length; E++) {
                    var T = A[E];
                    this.uv(T, !1, !1);
                  }
                return [this.Lt()];
              }),
              (i.prototype.Tv = function (t) {
                var e = t.Og[t.fs][t.gs];
                this.nv(),
                  this.ov("~", !0),
                  this.uv("LIB"),
                  this.qv(t.location),
                  this.Nt("~"),
                  this.ov("`", !0),
                  this.uv("package"),
                  this.uv(t.fs.toUpperCase());
                for (var i = 0, r = t.hs; i < r.length; i++) {
                  var n = r[i],
                    s = n.name.trim();
                  "package" !== s.toLowerCase() &&
                    (this.uv(s), this.uv(n.value.trim()));
                }
                this.ov("~", !1),
                  this.rv(t.orientation),
                  this.uv(""),
                  this.uv(""),
                  this.uv(""),
                  this.ov("#@$", !1);
                for (
                  var o = new c.ss(
                      t.value.location,
                      t.value.font,
                      t.value.bs,
                      0,
                      t.value.value,
                      t.value.orientation,
                      t.value.color,
                      !1
                    ),
                    a = 0,
                    h = this.ew(o, "N", t.value.display);
                  a < h.length;
                  a++
                ) {
                  var u = h[a];
                  this.uv(u, !1, !1);
                }
                var p;
                p = t.ms()
                  ? A.L.format("%s.%s", t.prefix.value, t.gs)
                  : t.prefix.value;
                for (
                  var f = new c.ss(
                      t.prefix.location,
                      t.prefix.font,
                      t.prefix.bs,
                      0,
                      p,
                      t.prefix.orientation,
                      t.prefix.color,
                      !1
                    ),
                    l = 0,
                    v = this.ew(f, "P", t.prefix.display);
                  l < v.length;
                  l++
                ) {
                  var u = v[l];
                  this.uv(u, !1, !1);
                }
                for (var b = 0, y = t.hs; b < y.length; b++) {
                  var n = y[b];
                  if (n.display) {
                    var d = void 0;
                    d = n.as ? n.name + " = " + n.value : n.value;
                    for (
                      var g = new c.ss(
                          n.location,
                          n.font,
                          n.bs,
                          0,
                          d,
                          n.orientation,
                          n.color,
                          !1
                        ),
                        w = 0,
                        m = this.co(g);
                      w < m.length;
                      w++
                    ) {
                      var u = m[w];
                      this.uv(u, !1, !1);
                    }
                  }
                }
                for (var E = 0, O = e; E < O.length; E++)
                  for (var x = O[E], N = 0, q = this.co(x); N < q.length; N++) {
                    var u = q[N];
                    this.uv(u, !1, !1);
                  }
                return [this.Lt()];
              }),
              i
            );
          })(r.Ot);
        i.pw = F;
      }
    ),
    i(
      "pcb/altium/SchEncoder",
      [
        "require",
        "exports",
        "pcb/altium/AbstractEncoder",
        "utils/LinkedHashMap",
        "geometry/utils/Angle",
        "utils/Utils",
        "utils/StringKit",
        "pcb/primitives/sch/SchPin",
        "pcb/primitives/sch/SchPowerPort",
        "pcb/primitives/sch/SchPort",
        "pcb/primitives/sch/SchComponent",
        "pcb/primitives/sch/SchAnnotation",
        "pcb/primitives/sch/SchRectangle",
        "pcb/primitives/sch/SchPolyline",
        "pcb/primitives/sch/SchBezier",
        "pcb/primitives/sch/SchPie",
        "pcb/primitives/sch/SchEllipse",
        "pcb/primitives/sch/SchArc",
        "pcb/primitives/sch/SchWire",
        "pcb/primitives/sch/SchBus",
        "pcb/primitives/sch/SchJunction",
        "pcb/primitives/sch/SchBusEntry",
        "pcb/primitives/sch/SchNoERC",
        "pcb/primitives/sch/SchNetLabel",
        "pcb/primitives/sch/SchProperty",
        "utils/NativeMap",
        "geometry/Matrix3",
        "utils/UnitConverter",
        "utils/Itor",
        "geometry/BBox2"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S
      ) {
        function I(t) {
          return (s.Ub.$b(t) / 90) | 0;
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var L = new k.sq(1, 10),
          P = (function (t) {
            function i(e, i) {
              var r = t.call(this, i) || this;
              return (
                (r.fonts = new n.cb()),
                (r.qw = 0),
                (r.rw = 0),
                (r.sw = 0),
                (r.gs = NaN),
                (r.tw = NaN),
                (r.line = 0),
                (r._n = e),
                r
              );
            }
            return (
              e(i, t),
              (i.prototype.bo = function () {
                for (
                  var t = this, e = new S.xc(), i = 0, n = this._n.Og;
                  i < n.length;
                  i++
                ) {
                  var s = n[i];
                  e.pc(s.eb());
                }
                if (e.valid()) {
                  for (
                    var h = e.wc(),
                      u = new Array(),
                      c = T.va
                        .scale(this._n.scale * L.ratio)
                        .translate(40 - h.hb, 40 - h.fb),
                      p = new Array(),
                      f = 0,
                      l = this._n.Og;
                    f < l.length;
                    f++
                  ) {
                    var s = l[f],
                      v = this.co(s.Xb(c));
                    o.F.t(p, v);
                  }
                  this.item(
                    "HEADER",
                    "Protel for Windows - Schematic Capture Ascii File Version 5.0"
                  ),
                    this.uw("WEIGHT", 2 * p.length),
                    this.Nt(r.Jt),
                    u.push(this.Lt()),
                    this.uw("RECORD", 31),
                    this.uw("FONTIDCOUNT", this.fonts.size()),
                    R.Aa(this.fonts.entries(), function (e, i) {
                      var r = i.key,
                        n = i.value;
                      return (
                        t.uw(a.L.format("SIZE%d", n), 0 | r.size),
                        t.item(
                          a.L.format("FONTNAME%d", n),
                          "" === r.Fg ? "Arial" : r.Fg
                        ),
                        !0
                      );
                    }),
                    this.item("USEMBCS", "T"),
                    this.item("ISBOC", "T"),
                    this.item("HOTSPOTGRIDON", "T"),
                    this.item("HOTSPOTGRIDON", "T"),
                    this.item("HOTSPOTGRIDSIZE", "4"),
                    this.item("SHEETSTYLE", "17"),
                    this.item("SYSTEMFONT", "1"),
                    this.item("BORDERON", "T"),
                    this.item("SHEETNUMBERSPACESIZE", "4"),
                    this.item("AREACOLOR", "16317695"),
                    this.item("SNAPGRIDON", "T"),
                    this.item("VISIBLEGRIDON", "T"),
                    this.item("SNAPGRIDSIZE", "10"),
                    this.item("VISIBLEGRIDSIZE", "10"),
                    this.uw("CUSTOMX", h.width() + 80),
                    this.uw("CUSTOMY", h.height() + 80),
                    this.item("USECUSTOMSHEET", "T"),
                    this.item("CUSTOMXZONES", "6"),
                    this.item("CUSTOMYZONES", "4"),
                    this.item("CUSTOMMARGINWIDTH", "20"),
                    this.item("DISPLAY_UNIT", "4"),
                    this.Nt(r.Jt),
                    u.push(this.Lt());
                  for (var b = 0, y = p; b < y.length; b++) {
                    var v = y[b];
                    u.push(v), u.push(r.Jt);
                  }
                  return (
                    this.item("HEADER", "Icon storage"),
                    this.Nt(r.Jt),
                    u.push(this.Lt()),
                    this.item(
                      "HEADER",
                      "Protel for Windows - Schematic Capture Ascii File Version 5.0"
                    ),
                    this.Nt(r.Jt),
                    u.push(this.Lt()),
                    u
                  );
                }
                return null;
              }),
              (i.prototype.uw = function (t, e) {
                var i = this.Mt(e),
                  r = i.indexOf(".");
                if (r < 0) this.item(t, i);
                else {
                  this.item(t, i.substring(0, r));
                  var n = o.F.l(i.substring(r + 1), "0", 5);
                  i.startsWith("-") && (n = "-" + n), this.item(t + "_FRAC", n);
                }
              }),
              (i.prototype.font = function (t) {
                var e = this;
                this.item(
                  "FONTID",
                  this.fonts.ab(t, function (t) {
                    return ++e.qw;
                  })
                );
              }),
              (i.prototype.Ut = function (t) {
                isFinite(this.gs) &&
                  isFinite(this.tw) &&
                  (this.item("OWNERINDEX", this.rw),
                  this.item("OWNERPARTID", this.gs),
                  this.item("OWNERPARTDISPLAYMODE", this.tw),
                  this.item("ISNOTACCESIBLE", t ? "F" : "T"));
              }),
              (i.prototype.index = function (t) {
                void 0 === t && (t = ++this.sw), this.uw("INDEXINSHEET", t);
              }),
              (i.prototype.vw = function (t) {
                return (t.vq << 16) | (t.uq << 8) | t.tq;
              }),
              (i.prototype.ww = function (t) {
                switch (t) {
                  case 0:
                    return 0;
                  case 1:
                    return 1;
                  case 2:
                    return 2;
                  default:
                    return this.Nf.nf("unknow Stroke Style %s", t), 0;
                }
              }),
              (i.prototype.xw = function (t) {
                switch (t) {
                  case 0:
                    return 0;
                  case 1:
                    return 1;
                  case 2:
                    return 2;
                  case 3:
                    return 3;
                  case 4:
                    return 4;
                  case 5:
                    return 5;
                  case 6:
                    return 6;
                  case 7:
                    return 7;
                  default:
                    return this.Nf.nf("unknow electrical %s", t), 1;
                }
              }),
              (i.prototype.yw = function (t) {
                switch (t) {
                  case 0:
                    return 0;
                  case 1:
                    return 1;
                  case 2:
                    return 2;
                  case 3:
                    return 3;
                  case 4:
                    return 4;
                  case 5:
                    return 5;
                  case 6:
                    return 6;
                  default:
                    return this.Nf.nf("unknow Power Port style %s", t), 2;
                }
              }),
              (i.prototype.zw = function (t) {
                switch (t) {
                  case 0:
                    return 0;
                  case 1:
                    return 1;
                  case 2:
                    return 2;
                  case 3:
                    return 3;
                  default:
                    return this.Nf.nf("unknow IOType %s of Port", t), 0;
                }
              }),
              (i.prototype.Aw = function (t) {
                var e;
                switch (t.Pr) {
                  case 0:
                    e = 0;
                    break;
                  case 1:
                    e = 1;
                    break;
                  case 2:
                    e = 2;
                    break;
                  default:
                    this.Nf.nf("unknow horizontal %s", t.Pr), (e = 0);
                }
                var i;
                switch (t.vertical) {
                  case 0:
                    i = 2;
                    break;
                  case 1:
                    i = 1;
                    break;
                  case 2:
                    i = 0;
                    break;
                  default:
                    this.Nf.nf("unknow vertical %s", t.vertical), (i = 0);
                }
                return 3 * i + e;
              }),
              (i.prototype.co = function (t) {
                return (
                  this.line++,
                  t instanceof p.ps
                    ? this.Tv(t)
                    : t instanceof f.ss
                    ? this.ew(t)
                    : t instanceof l.zs
                    ? this.iw(t)
                    : t instanceof v.ys
                    ? this.fw(t)
                    : t instanceof b.Ks
                    ? this.bw(t)
                    : t instanceof y.Hs
                    ? this.gw(t)
                    : t instanceof d.Ls
                    ? this.dw(t)
                    : t instanceof g.Is
                    ? this.Mv(t)
                    : t instanceof h.Gs
                    ? this.hw(t)
                    : t instanceof w.ts
                    ? this.jw(t)
                    : t instanceof m.ft
                    ? this.cw(t)
                    : t instanceof E.us
                    ? this.Xv(t)
                    : t instanceof O.gt
                    ? this.kw(t)
                    : t instanceof x.ht
                    ? this.nw(t)
                    : t instanceof u.dt
                    ? this.lw(t)
                    : t instanceof A.et
                    ? this.mw(t)
                    : t instanceof c.at
                    ? this.ow(t)
                    : (this.line--, this.Nf.nf("%s is not supported", t), [])
                );
              }),
              (i.prototype.Tv = function (t) {
                var e = this,
                  i = new Array();
                (this.rw = this.line),
                  this.uw("RECORD", 1),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("ORIENTATION", I(t.orientation)),
                  this.item("LIBREFERENCE", t.name),
                  this.item("SHOWHIDDENPINS", "F"),
                  this.item("CURRENTPARTID", t.gs),
                  this.item("DISPLAYMODE", t.fs),
                  this.item("ISMIRRORED", t.es ? "T" : "F"),
                  i.push(this.Lt());
                for (var r = 0, n = t.hs; r < n.length; r++) {
                  var s = n[r];
                  this.line++, i.push(this.Bw(s));
                }
                this.line++,
                  i.push(
                    this.Bw(
                      new N.cs(
                        "Designator",
                        t.prefix.value,
                        t.prefix.location,
                        t.prefix.orientation,
                        t.prefix.as,
                        t.prefix.display,
                        t.prefix.font,
                        t.prefix.color,
                        t.prefix.bs
                      )
                    )
                  ),
                  this.line++,
                  i.push(
                    this.Bw(
                      new N.cs(
                        "Comment",
                        t.value.value,
                        t.value.location,
                        t.value.orientation,
                        t.value.as,
                        t.value.display,
                        t.value.font,
                        t.value.color,
                        t.value.bs
                      )
                    )
                  );
                var a = new q.wo(),
                  h = 0,
                  u = new q.wo(),
                  c = 0;
                for (var p in t.Og) {
                  var f = t.Og[p];
                  this.tw = u.ab(p, function (t) {
                    return c++;
                  });
                  for (var l in f) {
                    this.gs = a.ab(l, function (t) {
                      return ++h;
                    });
                    for (var v = 0, b = f[l]; v < b.length; v++) {
                      var y = b[v];
                      o.F.t(i, this.co(y));
                    }
                  }
                }
                (this.tw = NaN), (this.gs = NaN), this.line++;
                var d = this.line;
                return (
                  this.uw("RECORD", 44),
                  this.uw("OWNERINDEX", this.rw),
                  i.push(this.Lt()),
                  u.iterator(function (t, r) {
                    return (
                      e.line++,
                      e.uw("RECORD", 45),
                      e.uw("OWNERINDEX", d),
                      e.item("MODELNAME", t),
                      e.item("MODELTYPE", "PCBLIB"),
                      e.item("DESCRIPTION", ""),
                      i.push(e.Lt()),
                      !0
                    );
                  }),
                  i
                );
              }),
              (i.prototype.ew = function (t) {
                var e = t.text.indexOf("\n") >= 0;
                if (
                  (this.uw("RECORD", e ? 28 : 4),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  e &&
                    (this.uw("CORNER.X", t.location.x + 100),
                    this.uw("CORNER.Y", t.location.y - 100)),
                  e
                    ? this.uw("TEXTCOLOR", this.vw(t.color))
                    : this.uw("COLOR", this.vw(t.color)),
                  this.font(t.font),
                  e
                    ? this.item(
                        "TEXT",
                        t.text.replace(/~/g, "~~").replace(/\n/g, "~1")
                      )
                    : this.item("TEXT", t.text),
                  this.uw("ORIENTATION", I(t.orientation)),
                  e)
                ) {
                  var i = void 0;
                  switch (t.bs.Pr) {
                    case 1:
                      i = 0;
                      break;
                    case 0:
                      i = 1;
                      break;
                    case 2:
                      i = 2;
                      break;
                    default:
                      this.Nf.nf("unknow horizontal %s", t.bs.Pr), (i = 0);
                  }
                  this.uw("ALIGNMENT", i);
                } else this.uw("JUSTIFICATION", this.Aw(t.bs));
                return this.item("ISMIRRORED", t.Ig ? "T" : "F"), [this.Lt()];
              }),
              (i.prototype.iw = function (t) {
                var e = t.style,
                  i = e.stroke;
                return (
                  this.uw("RECORD", 10),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LOCATION.X", t.En.x),
                  this.uw("LOCATION.Y", t.En.y),
                  this.uw("CORNER.X", t.Fn.x),
                  this.uw("CORNER.Y", t.Fn.y),
                  this.uw("CORNERXRADIUS", t.rx),
                  this.uw("CORNERYRADIUS", t.ry),
                  this.uw("LINEWIDTH", 0 | i.width),
                  this.uw("COLOR", this.vw(i.color)),
                  null !== e.fill &&
                    (this.uw("AREACOLOR", this.vw(e.fill)),
                    this.item("ISSOLID", "T")),
                  [this.Lt()]
                );
              }),
              (i.prototype.fw = function (t) {
                var e = t.style,
                  i = e.stroke;
                if (null !== e.fill) {
                  for (
                    var r = new Array(), n = 0, s = t.xs.md().jd;
                    n < s.length;
                    n++
                  ) {
                    var h = s[n];
                    o.F.t(r, h.points(2));
                  }
                  this.uw("RECORD", 6),
                    this.Ut(!1),
                    this.index(),
                    this.uw("LINEWIDTH", Math.min(3, 0 | i.width)),
                    this.uw("LOCATIONCOUNT", r.length);
                  for (var u = 0; u < r.length; u++) {
                    var c = r[u];
                    this.uw(a.L.format("X%d", u + 1), c.x),
                      this.uw(a.L.format("Y%d", u + 1), c.y);
                  }
                  return (
                    this.uw("COLOR", this.vw(i.color)),
                    this.uw("AREACOLOR", this.vw(e.fill)),
                    this.item("ISSOLID", "T"),
                    this.item("TRANSPARENT", 1 !== e.vs ? "T" : "F"),
                    [this.Lt()]
                  );
                }
                for (
                  var r = new Array(), p = 0, f = t.xs.jd;
                  p < f.length;
                  p++
                ) {
                  var h = f[p];
                  o.F.t(r, h.points(2));
                }
                this.uw("RECORD", 6),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LINEWIDTH", Math.min(3, 0 | i.width)),
                  this.uw("LOCATIONCOUNT", r.length);
                for (var u = 0; u < r.length; u++) {
                  var c = r[u];
                  this.uw(a.L.format("X%d", u + 1), c.x),
                    this.uw(a.L.format("Y%d", u + 1), c.y);
                }
                return (
                  this.uw("COLOR", this.vw(i.color)),
                  this.uw("LINESTYLE", this.ww(i.style)),
                  this.item("STARTLINESHAPE", 0),
                  this.item("ENDLINESHAPE", 0),
                  [this.Lt()]
                );
              }),
              (i.prototype.bw = function (t) {
                var e = t.style,
                  i = e.stroke;
                this.uw("RECORD", 5),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LINEWIDTH", 0 | i.width),
                  this.uw("LOCATIONCOUNT", 4);
                for (var r = 0, n = 0, s = t.Js.dd; n < s.length; n++) {
                  var o = s[n];
                  r++,
                    this.uw(a.L.format("X%d", r), o.x),
                    this.uw(a.L.format("Y%d", r), o.y);
                }
                return this.uw("COLOR", this.vw(i.color)), [this.Lt()];
              }),
              (i.prototype.gw = function (t) {
                var e = t.style,
                  i = e.stroke,
                  r = t.arc;
                return (
                  1 !== r.zd() && (r = r.nd()),
                  this.uw("RECORD", 9),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LOCATION.X", r.Oc.x),
                  this.uw("LOCATION.Y", r.Oc.y),
                  this.uw("RADIUS", r.rx),
                  this.item("STARTANGLE", this.Mt(r.td)),
                  this.item("ENDANGLE", this.Mt(r.Ad())),
                  this.uw("LINEWIDTH", 0 | i.width),
                  this.uw("COLOR", this.vw(i.color)),
                  null !== e.fill &&
                    (this.uw("AREACOLOR", this.vw(e.fill)),
                    this.item("ISSOLID", "T")),
                  [this.Lt()]
                );
              }),
              (i.prototype.dw = function (t) {
                var e = t.style,
                  i = e.stroke;
                return (
                  this.uw("RECORD", 8),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LOCATION.X", t.Oc.x),
                  this.uw("LOCATION.Y", t.Oc.y),
                  this.uw("RADIUS", t.rx),
                  this.uw("SECONDARYRADIUS", t.ry),
                  this.uw("LINEWIDTH", 0 | i.width),
                  this.uw("COLOR", this.vw(i.color)),
                  null !== e.fill &&
                    (this.uw("AREACOLOR", this.vw(e.fill)),
                    this.item("ISSOLID", "T")),
                  this.item("TRANSPARENT", 1 !== e.vs ? "T" : "F"),
                  [this.Lt()]
                );
              }),
              (i.prototype.Mv = function (t) {
                var e = t.style,
                  i = e.stroke,
                  r = t.arc;
                return (
                  1 !== r.zd() && (r = r.nd()),
                  this.uw("RECORD", 11),
                  this.Ut(!1),
                  this.index(),
                  this.uw("LOCATION.X", r.Oc.x),
                  this.uw("LOCATION.Y", r.Oc.y),
                  this.uw("RADIUS", r.rx),
                  this.uw("SECONDARYRADIUS", r.ry),
                  this.item("STARTANGLE", this.Mt(r.td)),
                  this.item("ENDANGLE", this.Mt(r.Ad())),
                  this.uw("LINEWIDTH", 0 | i.width),
                  this.uw("COLOR", this.vw(i.color)),
                  [this.Lt()]
                );
              }),
              (i.prototype.hw = function (t) {
                this.uw("RECORD", 2),
                  this.Ut(!1),
                  this.uw("ELECTRICAL", this.xw(t.Es));
                for (
                  var e = 0, i = 0, r = 0, n = 0, s = 0, o = t.Fs;
                  s < o.length;
                  s++
                ) {
                  var a = o[s];
                  switch (a) {
                    case 0:
                      e = 8;
                      break;
                    case 1:
                      e = 9;
                      break;
                    case 2:
                      e = 10;
                      break;
                    case 3:
                      e = 11;
                      break;
                    case 4:
                      e = 12;
                      break;
                    case 5:
                      e = 13;
                      break;
                    case 6:
                      e = 22;
                      break;
                    case 7:
                      e = 23;
                      break;
                    case 8:
                      e = 24;
                      break;
                    case 9:
                      e = 30;
                      break;
                    case 10:
                      e = 32;
                      break;
                    case 11:
                      i = 3;
                      break;
                    case 15:
                      r = 2;
                      break;
                    case 16:
                      r = 5;
                      break;
                    case 17:
                      r = 6;
                      break;
                    case 18:
                      r = 25;
                      break;
                    case 19:
                      r = 33;
                      break;
                    case 20:
                      r = 34;
                      break;
                    case 12:
                      n = 1;
                      break;
                    case 13:
                      n = 4;
                      break;
                    case 14:
                      n = 17;
                      break;
                    default:
                      this.Nf.nf("unknow pin shape %s", a);
                  }
                }
                this.item("SYMBOL_INNER", this.Mt(e)),
                  this.item("SYMBOL_INNEREDGE", this.Mt(i)),
                  this.item("SYMBOL_OUTER", this.Mt(r)),
                  this.item("SYMBOL_OUTEREDGE", this.Mt(n)),
                  this.uw("COLOR", this.vw(t.color)),
                  this.font(t.name.font),
                  this.item("DESIGNATOR", t.number.text),
                  this.item("NAME", t.name.text);
                var h = 0;
                return (
                  (h += t.orientation / 90),
                  (h += (t.Cs ? 1 : 0) << 3),
                  (h += (t.Ds ? 1 : 0) << 4),
                  (h += (t.visible ? 1 : 0) << 5),
                  this.uw("PINCONGLOMERATE", h),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("PINLENGTH", t.length),
                  [this.Lt()]
                );
              }),
              (i.prototype.jw = function (t) {
                var e = t.stroke;
                this.uw("RECORD", 27), this.index();
                var i = 0 | e.width;
                (i = Math.max(i, 0)),
                  (i = Math.min(i, 3)),
                  this.uw("LINEWIDTH", i),
                  this.uw("LOCATIONCOUNT", t.points.length);
                for (var r = 0; r < t.points.length; r++) {
                  var n = t.points[r];
                  this.uw(a.L.format("X%d", r + 1), n.x),
                    this.uw(a.L.format("Y%d", r + 1), n.y);
                }
                return this.uw("COLOR", this.vw(t.stroke.color)), [this.Lt()];
              }),
              (i.prototype.cw = function (t) {
                var e = t.stroke;
                this.uw("RECORD", 26),
                  this.index(),
                  this.uw("LINEWIDTH", 0 | Math.min(e.width, 3)),
                  this.uw("LOCATIONCOUNT", t.points.length);
                for (var i = 0; i < t.points.length; i++) {
                  var r = t.points[i];
                  this.uw(a.L.format("X%d", i + 1), r.x),
                    this.uw(a.L.format("Y%d", i + 1), r.y);
                }
                return this.uw("COLOR", this.vw(t.stroke.color)), [this.Lt()];
              }),
              (i.prototype.Xv = function (t) {
                this.uw("RECORD", 29),
                  this.index(),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("COLOR", this.vw(t.fill));
                var e;
                return (
                  (e = t.size <= 2 ? 0 : t.size <= 3 ? 1 : t.size <= 5 ? 2 : 3),
                  this.uw("SIZE", e),
                  [this.Lt()]
                );
              }),
              (i.prototype.kw = function (t) {
                return (
                  this.uw("RECORD", 37),
                  this.index(),
                  this.uw("LOCATION.X", t.En.x),
                  this.uw("LOCATION.Y", t.En.y),
                  this.uw("CORNER.X", t.Fn.x),
                  this.uw("CORNER.Y", t.Fn.y),
                  this.uw("LINEWIDTH", t.stroke.width),
                  this.uw("COLOR", this.vw(t.stroke.color)),
                  [this.Lt()]
                );
              }),
              (i.prototype.nw = function (t) {
                return (
                  this.uw("RECORD", 22),
                  this.index(),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("COLOR", this.vw(t.color)),
                  [this.Lt()]
                );
              }),
              (i.prototype.lw = function (t) {
                return (
                  this.uw("RECORD", 17),
                  this.index(),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("ORIENTATION", I(t.orientation)),
                  this.uw("COLOR", this.vw(t.color)),
                  this.uw("STYLE", this.yw(t.type)),
                  this.item("TEXT", t.ng.text),
                  this.item("SHOWNETNAME", t.ct ? "T" : "F"),
                  [this.Lt()]
                );
              }),
              (i.prototype.mw = function (t) {
                return (
                  this.uw("RECORD", 25),
                  this.index(),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("ORIENTATION", I(t.orientation)),
                  this.uw("COLOR", this.vw(t.color)),
                  this.font(t.font),
                  this.item("TEXT", t.ng),
                  [this.Lt()]
                );
              }),
              (i.prototype.ow = function (t) {
                var e,
                  i = 180 === t.orientation || 270 === t.orientation;
                e = i
                  ? t.location
                      .Qb(t.width, 0)
                      .Xb(T.va.Vb(t.orientation).ta(t.location))
                  : t.location;
                var r,
                  n = 0 === t.orientation || 180 === t.orientation;
                return (
                  (r =
                    0 === t._s
                      ? n
                        ? t.Zs && t.$s
                          ? 3
                          : t.Zs
                          ? i
                            ? 2
                            : 1
                          : t.$s
                          ? i
                            ? 1
                            : 2
                          : 0
                        : t.Zs && t.$s
                        ? 7
                        : t.Zs
                        ? i
                          ? 5
                          : 6
                        : t.$s
                        ? i
                          ? 6
                          : 5
                        : 4
                      : n
                      ? 0
                      : 4),
                  this.uw("RECORD", 18),
                  this.index(),
                  this.uw("LOCATION.X", e.x),
                  this.uw("LOCATION.Y", e.y),
                  this.uw("COLOR", this.vw(t.Ys)),
                  this.uw("AREACOLOR", this.vw(t.Xs)),
                  this.uw("TEXTCOLOR", this.vw(t.name.color)),
                  this.uw("WIDTH", t.width),
                  this.uw("IOTYPE", this.zw(t._s)),
                  this.item("NAME", t.name.text),
                  this.uw("ALIGMENT", 0),
                  this.uw("STYLE", r),
                  this.font(t.name.font),
                  [this.Lt()]
                );
              }),
              (i.prototype.Bw = function (t) {
                return (
                  "Designator" === t.name
                    ? this.uw("RECORD", 34)
                    : this.uw("RECORD", 41),
                  this.uw("COLOR", this.vw(t.color)),
                  this.uw("LOCATION.X", t.location.x),
                  this.uw("LOCATION.Y", t.location.y),
                  this.uw("OWNERINDEX", this.rw),
                  this.uw("OWNERPARTID", -1),
                  this.index(),
                  this.font(t.font),
                  this.item("NAME", t.name),
                  this.item("TEXT", t.value),
                  this.item("SHOWNAME", t.as ? "T" : "F"),
                  this.item("ISHIDDEN", t.display ? "F" : "T"),
                  this.uw("ORIENTATION", I(t.orientation)),
                  this.uw("JUSTIFICATION", this.Aw(t.bs)),
                  this.Lt()
                );
              }),
              i
            );
          })(r.Ot);
        i.pw = P;
      }
    ),
    i(
      "pcb/Converter",
      [
        "require",
        "exports",
        "pcb/easyeda/Decoder",
        "pcb/easyeda/EasyEDASetting",
        "utils/Logger",
        "utils/StringKit",
        "pcb/primitives/pcb/PcbDocument",
        "pcb/altium/PcbEncoder",
        "pcb/altium/Decoder",
        "pcb/easyeda/PcbEncoder",
        "pcb/easyeda/ThreePcbEnc",
        "pcb/primitives/sch/SchDocument",
        "pcb/easyeda/SchEncoder",
        "pcb/altium/SchEncoder",
        "geometry/polybool/DefaultSweepEvent",
        "geometry/polybool/Simplify",
        "geometry/polybool/FillRule",
        "geometry/Vector2",
        "geometry/Polyline"
      ],
      function (t, e, i, r, n, s, o, a, h, u, c, p, f, l, v, b, y, d, g) {
        function w(t, e) {
          var i = new n.vf(
              t,
              function (t, i) {
                e.push(i);
              },
              function (t, e) {
                return s.L.format("%s: %s", n._e(t), e);
              }
            ),
            r = new n.vf(t);
          return n.vf.cf(r, i);
        }
        function m(t, e, n) {
          // easyeda2altium
          for (
            var s = new Array(),
              h = w(2, s),
              u = new i.Ht(new r.qq(t, h)).parse(e).Gt(),
              c = 0,
              f = u;
            c < f.length;
            c++
          ) {
            var v = f[c];
            if (v instanceof o.bh) {
              var b = new a.ou(v, h).bo();
              if (null !== b) {
                return b;
                // var y = v.Sg + ".pcbdoc";
                // n(y, new Blob(b))
              }
            } else if (v instanceof p.qs) {
              var b = new l.pw(v, h).bo();
              if (null !== b) {
                return b;
                // var y = v.Sg + ".schdoc";
                // n(y, new Blob(b))
              }
            }
          }
          return s;
        }
        function E(t) {
          var e = new n.vf(1);
          try {
            e.mf("start easyeda to three");
            var s = new r.qq("inner", e);
            s.nq = !0;
            var a = new i.Ht(s).parse(t).Gt();
            e.mf("complete parse");
            for (var h = 0, u = a; h < u.length; h++) {
              var p = u[h];
              if (p instanceof o.bh) {
                var f = new c.Wn(e),
                  l = new c.to(p, f),
                  v = l.bo();
                return e.lf("end easyeda to three"), v;
              }
              throw new Error("unsupported doc type");
            }
          } catch (t) {
            e.sf(t);
          }
          return null;
        }
        function O(t, e, i, r) {
          for (
            var n = new Array(),
              s = w(2, n),
              a = new h.Ht(t, s, i).parse(e).Gt(),
              c = 0,
              l = a;
            c < l.length;
            c++
          ) {
            var v = l[c];
            try {
              if (v instanceof o.bh) {
                var b = new u.ou(v, s);
                if (i)
                  for (var y = 0, d = v.ah(); y < d.length; y++) {
                    var g = d[y];
                    r(b.Fv(g));
                  }
                else r(b.bo());
              } else if (v instanceof p.qs) {
                var b = new f.pw(v, s);
                if (i)
                  for (var m = 0, E = v.ah(); m < E.length; m++) {
                    var g = E[m];
                    r(b.Fv(g));
                  }
                else r(b.bo());
              }
            } catch (t) {
              s.sf(t);
            }
          }
          return n;
        }
        function x(t) {
          return 1e-4 * Math.round(1e4 * parseFloat(t));
        }
        function A(t) {
          for (
            var e = new n.vf(0),
              i = new v.gh(!1),
              r = new b.Zh(y.Hf, e, i),
              s = 0;
            s < t.length;
            s++
          )
            for (var o = t[s].polygon, h = 0; h < o.length; h++)
              for (var u = o[h], c = 0; c < u.length; c++) {
                for (var p = u[c], f = new Array(), l = 0; l < p.length; l++) {
                  var w = p[l];
                  f.push(new d.Zb(x(w[0]), -x(w[1])));
                }
                f.length >= 3 && r.Rf(g.Zc.ld(f));
              }
          if ((r.Fh(), i.debug)) {
            var m = i.display();
            new a.ou(m, e).bo();
          }
          for (var E = new Array(), O = 0, A = i.fh; O < A.length; O++) {
            for (
              var N = A[O], q = new Array(), T = 0, k = N.nb;
              T < k.length;
              T++
            ) {
              var R = k[T];
              !(function (t) {
                var e = new Array();
                t.points(1, function (t) {
                  return e.push([t.x, -t.y]);
                }),
                  q.push(e);
              })(R);
            }
            E.push({
              polygon: [q]
            });
          }
          return E;
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.easyeda2altium = m),
          (e.Cw = E),
          (e.altium2easyeda = O),
          (e.unionCopperAreaPolygons = A);
      }
    ),
    i(
      "pcb/pour/PourConnection",
      [
        "require",
        "exports",
        "geometry/polybool/PolyIntersection",
        "utils/Logger"
      ],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t(t) {
            (this.connected = new Array()),
              (this.Kn = t),
              (this.Dw = new i.Bh(r.vf.uf)),
              (this.Ew = this.Dw.yh(t.nb));
          }
          return (
            (t.prototype.Fw = function (t) {
              var e = this.Dw.zh([t]);
              return this.Dw.Gc(this.Ew, e);
            }),
            t
          );
        })();
        e.Gw = n;
      }
    ),
    i(
      "pcb/pour/PourSetting",
      ["require", "exports", "utils/ListSet"],
      function (t, e, i) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = (function () {
            function t(t) {
              this.Hw = t;
            }
            return (
              (t.prototype.u = function (e) {
                return !(e instanceof t) || this.Hw === e.Hw;
              }),
              t
            );
          })(),
          n = (function () {
            function t(t) {
              (this.oq = new i.Yg()), (this.Nf = t);
            }
            return (
              (t.prototype.pours = function () {
                return this.oq.Xg();
              }),
              (t.prototype.Iw = function (t) {
                this.oq.add(new r(t));
              }),
              (t.prototype.contains = function (t) {
                return this.oq.bb() || this.oq.contains(new r(t));
              }),
              t
            );
          })();
        e.Jw = n;
      }
    ),
    i("pcb/pour/PourEventHandler", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }),
    i(
      "pcb/pour/PolylineInNet",
      ["require", "exports", "utils/LinkedHashMap"],
      function (t, e, i) {
        function r(t) {
          return {};
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t(t) {
            (this.points = new Array()),
              (this.Kw = new i.cb()),
              (this.Lw = new Array()),
              (this.ng = t);
          }
          return (
            (t.prototype.add = function (t, e) {
              for (var i = this.Lw.length, n = 0, s = e; n < s.length; n++) {
                var o = s[n];
                this.points.push(o), (this.Kw.ab(o, r)[i] = !0);
              }
              this.Lw.push(t);
            }),
            t
          );
        })();
        e.Mw = n;
      }
    ),
    i(
      "pcb/pour/GridGenerator",
      [
        "require",
        "exports",
        "geometry/polybool/EDASweepDebugger",
        "geometry/Line",
        "geometry/polybool/BooleanOperation",
        "geometry/polybool/FillRule",
        "geometry/polybool/SideLoader",
        "utils/Utils",
        "geometry/polybool/Sweeper",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h, u, c) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var p = (function (t) {
            function i(e) {
              var i = t.call(this, e) || this;
              return (i.Nw = new Array()), (i.y = NaN), i;
            }
            return (
              e(i, t),
              (i.prototype.Df = function (e, i, r, s, o, a) {
                (e = new c.Zb(r.Ne(this.y), this.y)),
                  (s = new c.Zb(a.Ne(this.y), this.y)),
                  t.prototype.Df.call(this, e, i, r, s, o, a),
                  this.Nw.push(new n.bd(e, s));
              }),
              i
            );
          })(r.eh),
          f = (function (t) {
            function i(e) {
              var i = t.call(this, new a.$e(!0), o.Hf, e, new p(!1)) || this;
              return (i.wh = null), (i.Ow = i.event), i;
            }
            return (
              e(i, t),
              (i.prototype.Rf = function (e, i) {
                void 0 === i && (i = 1), t.prototype.Rf.call(this, e, i);
              }),
              (i.prototype.Oh = function (t, e) {
                null === this.wh && (this.wh = this.Sf()), (this.Ow.y = t);
                var i = e.eb().Hc(1e-5),
                  r = new Array();
                this.Tf(r, this.wh.search(i), t),
                  h.j(
                    r,
                    function (e, i) {
                      return e.Ne(t) - i.Ne(t);
                    },
                    0,
                    r.length
                  );
                for (
                  var n = new u.vh(this.Of, this, t), s = 0, o = r;
                  s < o.length;
                  s++
                ) {
                  var a = o[s];
                  n.qh(a);
                }
                var c = new Array();
                return h.F.t(c, this.Ow.Nw), (this.Ow.Nw.length = 0), c;
              }),
              i
            );
          })(s.Yf);
        i.Pw = f;
      }
    ),
    i(
      "pcb/pour/PcbPour",
      [
        "require",
        "exports",
        "geometry/polybool/FillRule",
        "geometry/Polyline",
        "geometry/polybool/DefaultSweepEvent",
        "geometry/polybool/Simplify",
        "utils/Logger",
        "utils/Utils",
        "pcb/primitives/pcb/PcbPolygonPour",
        "geometry/utils/StaticRTree",
        "pcb/primitives/pcb/PcbLayer",
        "geometry/polybool/MultiLevelRule",
        "utils/LinkedHashMap",
        "pcb/pour/PolylineInNet",
        "pcb/primitives/pcb/PcbComponent",
        "pcb/primitives/pcb/PcbImage",
        "pcb/primitives/pcb/PcbRegion",
        "geometry/BBox2",
        "pcb/primitives/pcb/PcbTrack",
        "geometry/Line",
        "pcb/primitives/pcb/PcbArc",
        "geometry/PolylineGroup",
        "pcb/pour/PourConnection",
        "geometry/Matrix3",
        "utils/Itor",
        "geometry/polybool/Zoom",
        "pcb/primitives/pcb/PcbVia",
        "pcb/primitives/pcb/PcbPad",
        "pcb/primitives/pcb/PcbFill",
        "utils/Check",
        "pcb/easyeda/OutlineDetection",
        "pcb/primitives/Rules",
        "pcb/pour/GridGenerator",
        "geometry/Vector2",
        "pcb/altium/PcbEncoder"
      ],
      function (
        t,
        i,
        r,
        n,
        s,
        o,
        a,
        h,
        u,
        c,
        p,
        f,
        l,
        v,
        b,
        y,
        d,
        g,
        w,
        m,
        E,
        O,
        x,
        A,
        N,
        q,
        T,
        k,
        R,
        S,
        I,
        L,
        P,
        _,
        M
      ) {
        function C(t) {
          if (1 === t.length) return t[0].nb;
          for (var e = new Array(), i = 0, r = t; i < r.length; i++) {
            var n = r[i];
            h.F.t(e, n.nb);
          }
          return e;
        }
        function F(t, e) {
          return C(o.Hh(t, e));
        }
        function j(t, e) {
          return t.Bn - e.Bn;
        }
        function D(t) {
          return new c.yb(10);
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var B = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.lh = function (t) {
                return t[0] && t[1];
              }),
              i
            );
          })(f.mh))(2),
          U = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.lh = function (t) {
                return t[0] && t[1] && !t[2];
              }),
              i
            );
          })(f.mh))(3),
          Q = new ((function (t) {
            function i() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              e(i, t),
              (i.prototype.lh = function (t) {
                return t[0] && !t[1] && (t[2] || !t[3]);
              }),
              i
            );
          })(f.mh))(4),
          X = (function () {
            function t(t, e, i) {
              (this.pours = []),
                (this.Qw = []),
                (this.Rw = []),
                (this.Sw = []),
                (this.$n = []),
                (this.Tw = new l.cb()),
                (this.Uw = new c.yb(20)),
                (this.cache = new Array(100)),
                (this.Vw = new g.xc()),
                (this.Ww = {}),
                (this.Xw = NaN),
                (this.Yw = NaN),
                (this.Zw = NaN),
                (this.$w = NaN),
                (this.Nf = e.Nf),
                (this.document = t),
                (this._w = i),
                (this.ao = e);
            }
            return (
              (t.prototype.ax = function (t) {
                if (t.debug) {
                  var e = t.display(),
                    i = new M.ou(e, a.vf.uf).bo();
                  null !== i && h.F.B("debug.pcbdoc", new Blob(i));
                }
              }),
              (t.prototype.bx = function (t, e, i) {
                var r = new s.gh(t);
                return this.ex(r, e, i), r;
              }),
              (t.prototype.ex = function (t, e, i) {
                if (null !== i) {
                  for (
                    var r = new o.Zh(e.Of, this.Nf, t), n = 0;
                    n < i.length;
                    n++
                  ) {
                    var s = e.weight(n),
                      a = i[n];
                    if (null !== a)
                      for (var h = 0, u = a; h < u.length; h++) {
                        var c = u[h];
                        r.Rf(c.md(), s);
                      }
                  }
                  r.Fh(), this.ax(t);
                }
              }),
              (t.prototype.gx = function (t, e, i) {
                var r = new s.gh(t);
                return this.hx(r, e, i), r;
              }),
              (t.prototype.hx = function (t, e, i) {
                if (null !== i) {
                  for (
                    var r = new o.Zh(e, this.Nf, t), n = 0;
                    n < i.length;
                    n++
                  ) {
                    var s = i[n];
                    if (null !== s)
                      for (var a = 0, h = s; a < h.length; a++) {
                        var u = h[a];
                        r.Rf(u.md());
                      }
                  }
                  r.Fh(), this.ax(t);
                }
              }),
              (t.prototype.ix = function () {
                this.jx(), this.kx();
              }),
              (t.prototype.jx = function () {
                for (var t = 0, e = this.document.Og; t < e.length; t++) {
                  var i = e[t];
                  if (i instanceof b.Rg)
                    for (var r = 0, n = i.Og; r < n.length; r++) {
                      var s = n[r];
                      this.lx(s);
                    }
                  else this.lx(i);
                  this.Vw.pc(i.eb());
                }
              }),
              (t.prototype.kx = function () {
                h.j(this.pours, j, 0, this.pours.length);
                for (
                  var t = this.do(), e = 0, i = this.pours;
                  e < i.length;
                  e++
                ) {
                  var r = i[e];
                  if (null !== r.method && this.ao.contains(r.id)) {
                    var n = this.mx(r, t);
                    this._w.nx(n);
                  } else this._w.nx(r);
                  this.ox(r);
                }
              }),
              (t.prototype.lx = function (t) {
                if (t instanceof u.Dn) this.pours.push(t);
                else if (t instanceof y.Ln) {
                  var e = t.eb(),
                    i = n.Zc.ld([e.Kc(), e.Lc(), e.Nc(), e.Mc(), e.Kc()]),
                    r = new d.rg(t.ng, t.og, 0, i);
                  this.ox(r), this._w.nx(t);
                } else this.ox(t), this._w.nx(t);
              }),
              (t.prototype.ox = function (t) {
                switch (t.og.type) {
                  case 4:
                  case 7:
                  case 5:
                  case 0:
                    this.Tw.ab(t.og, D).add(t);
                    break;
                  case 11:
                    t instanceof w.tg
                      ? this.$n.push(new m.bd(t.start, t.end))
                      : t instanceof E.ug && this.$n.push(t.arc);
                }
              }),
              (t.prototype.mx = function (t, e) {
                this.Uw.clear(),
                  (this.Qw.length = 0),
                  (this.Rw.length = 0),
                  (this.Sw.length = 0),
                  (this.Ww = {}),
                  (this.Yw = Number.POSITIVE_INFINITY),
                  (this.Zw = 0),
                  (this.Xw = 0),
                  (this.$w = this.px(t)),
                  this.Nf.kf("pp %s step 1", t.id),
                  (this.Zw = t.Cg),
                  t.method instanceof u.un
                    ? (this.Xw = t.method.tn)
                    : t.method instanceof u.xn
                    ? (this.Xw = this.qx(Math.max(0.8, t.method.vn)))
                    : (this.Xw = 0.8),
                  this.sx(t, this.Zw);
                var i = this.tx(t, e);
                this.Nf.kf("pp %s step 2", t.id),
                  this.ux(this.Zw),
                  this.Nf.kf("pp %s step 3", t.id);
                var n = this.bx(!1, Q, [i, this.Qw, this.Sw, this.Rw]);
                this.Nf.kf("pp %s step 4", t.id);
                var s = [],
                  o = [];
                if (t.method instanceof u.un) {
                  var a = new Array(),
                    c = void 0;
                  if (t.method.tn > 0) {
                    for (var p = 0, f = n.fh; p < f.length; p++) {
                      var l = f[p],
                        v = this.zoom(l);
                      null !== v && h.F.t(a, v.nb);
                    }
                    c = this.gx(!1, r.Hf, [a]).fh;
                  } else c = n.fh;
                  for (var b = 0, y = c; b < y.length; b++) {
                    var l = y[b],
                      d = this.vx(t, l);
                    (t.An || 0 !== d.connected.length) &&
                      (s.push(l), o.push(d));
                  }
                } else if (t.method instanceof u.xn) {
                  var g = t.method.vn + t.method.wn;
                  0 == g ? (g = 2 * this.Xw) : (this.Xw += 0.01);
                  for (var w = 0, m = n.fh; w < m.length; w++) {
                    var l = m[w],
                      v = this.zoom(l);
                    if (null !== v) {
                      var d = this.vx(t, v);
                      (t.An || 0 !== d.connected.length) &&
                        (this.wx(s, g, l), o.push(d));
                    }
                  }
                }
                return (
                  this.Nf.kf("pp %s step 5", t.id),
                  this._w.xx(t.id, o),
                  new u.Dn(
                    t.id,
                    t.ng,
                    t.og,
                    t.method,
                    this.Xw - 0.01,
                    t.Cg,
                    t.zn,
                    t.An,
                    t.Bn,
                    t.qg,
                    s
                  )
                );
              }),
              (t.prototype.tx = function (t, e) {
                var i = this.qx(t.yn) - 0.05,
                  r = new Array(),
                  s = new Array(),
                  a = new Array(),
                  u = new Array();
                h.F.t(s, C(o.Hh(n.Zc.$c(t.qg), -this.Xw / 2)));
                for (
                  var c = 0, p = e.search(t.eb().Hc(0.01));
                  c < p.length;
                  c++
                ) {
                  var f = p[c];
                  if ((a.push(f), i > 0))
                    for (var l = 0, v = f.jd; l < v.length; l++) {
                      var b = v[l];
                      u.push(b.stroke(2 * i, 1, 1));
                    }
                }
                for (
                  var y = 0, d = this.bx(!1, U, [s, a, u]).fh;
                  y < d.length;
                  y++
                )
                  for (var g = d[y], w = 0, m = g.nb; w < m.length; w++) {
                    var f = m[w];
                    r.push(f);
                  }
                return r;
              }),
              (t.prototype.ux = function (t) {
                var e = t + t + Math.min(this.Yw / 2, t);
                e *= e;
                for (var i in this.Ww) {
                  for (
                    var n = this.Ww[i], s = {}, o = 0;
                    o < n.points.length;
                    o++
                  ) {
                    for (
                      var a = n.points[o], u = !1, c = o + 1;
                      c < n.points.length;
                      c++
                    ) {
                      var p = n.points[c];
                      a.Fb(p) < e && (this.yx(s, n, p), (u = !0));
                    }
                    u && this.yx(s, n, a);
                  }
                  var f = new Array();
                  for (var l in s) f.push(n.Lw[l]);
                  if (f.length > 2)
                    for (
                      var v = 0, b = this.gx(!1, r.Hf, [f]).fh;
                      v < b.length;
                      v++
                    ) {
                      var y = b[v];
                      h.F.t(this.Qw, y.nb);
                    }
                  else h.F.t(this.Qw, f);
                  for (var o = 0; o < n.Lw.length; o++)
                    o in s || this.Qw.push(n.Lw[o]);
                }
              }),
              (t.prototype.yx = function (t, e, i) {
                var r = e.Kw.get(i);
                if (null !== r) for (var n in r) t[n] = !0;
              }),
              (t.prototype.wx = function (t, e, i) {
                for (var r = new Array(), n = 0, s = i.nb; n < s.length; n++) {
                  var o = s[n];
                  r.push(o);
                }
                this.zx(e, r, i, 0),
                  this.zx(e, r, i, Math.PI / 2),
                  t.push(new O.Hd(r));
              }),
              (t.prototype.zx = function (t, e, i, r) {
                for (
                  var s = new P.Pw(this.Nf),
                    o = A.va.rotate(-r),
                    a = A.va.rotate(r),
                    u = 0,
                    c = i.nb;
                  u < c.length;
                  u++
                ) {
                  var p = c[u];
                  s.Rf(p.Xb(o));
                }
                for (
                  var f = this.Vw.wc().transform(o), l = new Array(), v = f.fb;
                  v <= f.gb;
                  v += t
                ) {
                  var b = new m.bd(new _.Zb(f.hb, v), new _.Zb(f.ib, v));
                  h.F.t(l, s.Oh(v, b));
                }
                for (var y = 0, d = l; y < d.length; y++) {
                  var b = d[y],
                    g = new Array();
                  g.push(b.Xb(a)), e.push(n.Zc.fd(N.Ea(g)));
                }
              }),
              (t.prototype.zoom = function (t) {
                for (var e = new Array(), i = 0, r = t.nb; i < r.length; i++) {
                  var n = r[i],
                    s = q.li.bi(n, this.Xw / 2);
                  null !== s && e.push(s);
                }
                return e.length > 0 ? new O.Hd(e) : null;
              }),
              (t.prototype.vx = function (t, e) {
                for (
                  var i = new x.Gw(e), r = 0, s = this.Uw.search(e.eb());
                  r < s.length;
                  r++
                ) {
                  var o = s[r],
                    a = !1,
                    h = null;
                  if (o instanceof k.rn) {
                    var c = o.shape(t.og, 0);
                    c instanceof n.Zc && (h = c);
                  } else
                    o instanceof T.cn
                      ? (h = o.shape(t.og, 0))
                      : o instanceof w.tg
                      ? (h = o.shape(t.og, 0))
                      : o instanceof E.ug
                      ? (h = o.shape(t.og, 0))
                      : o instanceof R.Gn
                      ? (h = o.shape(t.og, 0))
                      : o instanceof d.rg
                      ? 1 !== o.kind && (h = o.shape(t.og, 0))
                      : o instanceof u.Dn && o !== t && (o.ng, t.ng);
                  null !== h && (a = i.Fw(h.md())), a && i.connected.push(o);
                }
                return i;
              }),
              (t.prototype.sx = function (t, e) {
                var i = t.eb().Hc(e),
                  r = this.Tw.get(t.og);
                if (null !== r)
                  for (var n = 0, s = r.search(i); n < s.length; n++) {
                    var o = s[n];
                    this.co(o, t);
                  }
                var a = this.Tw.get(p.mg._f);
                if (null !== a)
                  for (var h = 0, u = a.search(i); h < u.length; h++) {
                    var o = u[h];
                    if (o instanceof w.tg || o instanceof E.ug) {
                      var c = o.shape(o.og, 0);
                      null !== c && this.Qw.push(c);
                    } else this.co(o, t);
                  }
              }),
              (t.prototype.co = function (t, e) {
                var i = !S.J.I(t.ng) && t.ng === e.ng;
                if (
                  (i && this.Uw.add(t),
                  t instanceof w.tg && !i && this.io(t, e),
                  t instanceof E.ug && !i && this.jo(t, e),
                  t instanceof d.rg && !i && this.lo(t, e),
                  t instanceof T.cn)
                ) {
                  var r = t;
                  i || this.Ax(r, e);
                }
                if (t instanceof k.rn) {
                  var n = t;
                  i || this.Bx(n, e),
                    i && e.method instanceof u.un && e.zn && this.Cx(n, e);
                }
                if (
                  (t instanceof R.Gn && !i && this.po(t, e), t instanceof u.Dn)
                ) {
                  var s = t,
                    o = s.shape(s.og, 0);
                  if (null !== o)
                    if (
                      i &&
                      e.method instanceof u.un &&
                      s.method instanceof u.un
                    );
                    else if (i) h.F.t(this.Qw, F(o, this.Xw / 2));
                    else {
                      var a = this.Dx(s, 0);
                      h.F.t(this.Qw, F(o, a));
                    }
                }
              }),
              (t.prototype.io = function (t, e) {
                var i = this.Dx(t, 0),
                  r = t.shape(e.og, i);
                null !== r && this.Ex(t.ng, t.width, r, [t.start, t.end]);
              }),
              (t.prototype.jo = function (t, e) {
                var i = this.Dx(t, 0),
                  r = t.shape(e.og, i);
                null !== r &&
                  this.Ex(t.ng, t.width, r, [t.arc.start(), t.arc.end()]);
              }),
              (t.prototype.do = function () {
                for (
                  var t = new I.Ym(this.Vw.wc(), 2, 0.1, this.Nf, this.$n),
                    e = new c.yb(20),
                    i = 0,
                    r = t.Xm().nb;
                  i < r.length;
                  i++
                ) {
                  var n = r[i];
                  e.add(n);
                }
                return e;
              }),
              (t.prototype.lo = function (t, e) {
                var i = t.shape(e.og, 0);
                null !== i &&
                  (1 === t.kind
                    ? h.F.t(this.Qw, F(i, this.Xw / 2))
                    : h.F.t(this.Qw, F(i, this.Dx(t, 0))));
              }),
              (t.prototype.po = function (t, e) {
                var i = this.Dx(t, 0),
                  r = t.shape(e.og, 0);
                if (null !== r)
                  for (var n = 0, s = F(r, i); n < s.length; n++) {
                    var o = s[n];
                    this.Ex(t.ng, o.eb().width(), o, [t.eb().Oc()]);
                  }
              }),
              (t.prototype.px = function (t) {
                for (var e = 0, i = this.Fx(t); e < i.length; e++) {
                  var r = i[e];
                  if (r instanceof L.Eg) return r.width;
                }
                return 0;
              }),
              (t.prototype.Dx = function (t, e) {
                for (var i = -1, r = 0, n = this.Fx(t); r < n.length; r++) {
                  var s = n[r];
                  if (s instanceof L.Dg) {
                    i = s.Cg;
                    break;
                  }
                }
                return this.qx(Math.max(Math.max(i, e), this.Zw));
              }),
              (t.prototype.qx = function (t) {
                return t + 0.01 + this.Xw / 2;
              }),
              (t.prototype.Fx = function (t) {
                for (
                  var e = new Array(), i = 0, r = this.document.rules;
                  i < r.length;
                  i++
                ) {
                  var n = r[i];
                  this.Gx(t, n.selector) && e.push(n);
                }
                return e;
              }),
              (t.prototype.Gx = function (t, e) {
                if (e instanceof L.yg) return e.ng === t.ng;
                if (e instanceof L.zg) return t.id === e.id;
                if (e instanceof L.Ag) return !0;
                if (e instanceof L.xg) {
                  for (var i = 0, r = e.wg; i < r.length; i++) {
                    var n = r[i];
                    if (this.Gx(t, n)) return !0;
                  }
                  return !1;
                }
                return !1;
              }),
              (t.prototype.Ax = function (t, e) {
                var i = this.Dx(t, 0),
                  r = t.shape(e.og, i);
                null !== r && this.Ex(t.ng, r.eb().width(), r, [t.Oc]);
              }),
              (t.prototype.Cx = function (t, e) {
                var i = this.Dx(t, 0);
                i = i > 0.6 + this.Xw / 2 ? i : 0.601 + this.Xw / 2;
                var r = t.shape(e.og, i),
                  s = new Array();
                if (Array.isArray(r))
                  for (var o = 0, a = r; o < a.length; o++) {
                    var u = a[o];
                    h.F.t(s, u.nb);
                  }
                else r instanceof n.Zc && s.push(r);
                if (s.length > 0) {
                  var c = null;
                  null !== t.Og.top && e.og.u(p.mg.dg) && (c = t.Og.top),
                    null !== t.Og.in && e.og.u(p.mg.eg) && (c = t.Og.in),
                    null !== t.Og.top &&
                      null !== t.Og.in &&
                      null !== t.Og.inner &&
                      5 === e.og.type &&
                      (c = t.Og.inner),
                    null !== c && this.Hx(t, i, s, c.en, c.fn);
                }
              }),
              (t.prototype.Hx = function (t, e, i, r, n) {
                for (var s = 0, o = i; s < o.length; s++) {
                  var a = o[s];
                  this.Rw.push(a);
                }
                for (
                  var u = this.zn(t, r + 1, n + 1, e),
                    c = this.bx(!1, B, [u, i]),
                    p = 0,
                    f = c.fh;
                  p < f.length;
                  p++
                ) {
                  var l = f[p];
                  h.F.t(this.Sw, l.nb);
                }
              }),
              (t.prototype.zn = function (t, e, i, r) {
                var n;
                if (t instanceof k.rn) n = t.location;
                else {
                  if (!(t instanceof T.cn))
                    throw new Error("not supported operation");
                  n = t.Oc;
                }
                var s, o;
                0 === this.$w
                  ? ((s = e / 2), (o = i / 2))
                  : ((s = this.$w), (o = this.$w)),
                  (s = s - this.Xw > 0 ? s - this.Xw : 0.01),
                  (o = o - this.Xw > 0 ? o - this.Xw : 0.01);
                var a = [];
                if (
                  (a.push(
                    new m.bd(n.Qb(-e / 2 - r, 0), n.Qb(e / 2 + r, 0)).stroke(
                      o,
                      2,
                      0
                    )
                  ),
                  a.push(
                    new m.bd(n.Qb(0, -i / 2 - r), n.Qb(0, i / 2 + r)).stroke(
                      s,
                      2,
                      0
                    )
                  ),
                  t instanceof k.rn)
                )
                  for (
                    var h = A.va
                        .translate(t.Og.offsetX, t.Og.offsetY)
                        .Xb(A.va.Vb(t.rotation).ta(t.location)),
                      u = 0;
                    u < a.length;
                    u++
                  )
                    a[u] = a[u].Xb(h);
                return a;
              }),
              (t.prototype.Bx = function (t, e) {
                var i = this.Dx(t, 0),
                  r = t.shape(e.og, i);
                if (null !== r)
                  if (r instanceof n.Zc)
                    this.Ex(t.ng, r.eb().width(), r, [t.location]);
                  else
                    for (var s = 0, o = r; s < o.length; s++)
                      for (var a = o[s], h = 0, u = a.nb; h < u.length; h++) {
                        var c = u[h];
                        this.Ex(t.ng, c.eb().width(), c, [t.location]);
                      }
              }),
              (t.prototype.Ex = function (t, e, i, r) {
                t = t.toUpperCase().trim();
                var n = this.Ww[t];
                void 0 === n && ((n = new v.Mw(t)), (this.Ww[t] = n)),
                  n.add(i, r),
                  this.Yw > e && (this.Yw = e);
              }),
              t
            );
          })();
        i.Ix = X;
      }
    ),
    i(
      "pcb/pour/EasyEDA2Pour",
      [
        "require",
        "exports",
        "utils/Logger",
        "pcb/primitives/pcb/PcbDocument",
        "pcb/pour/PourSetting",
        "pcb/easyeda/LayerHelper",
        "pcb/primitives/pcb/PcbPolygonPour",
        "pcb/pour/PcbPour",
        "utils/StringKit",
        "utils/svg/PathDataEnc",
        "pcb/primitives/pcb/PcbPad",
        "pcb/primitives/pcb/PcbVia",
        "pcb/primitives/pcb/PcbLayer",
        "pcb/easyeda/EasyEDASetting",
        "pcb/easyeda/Decoder",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n, s, o, a, h, u, c, p, f, l, v, b) {
        function y(t) {
          var e = new i.vf(1),
            h = {},
            u = {},
            c = {};
          try {
            e.mf("start pour");
            var p = JSON.parse(t),
              f = E(p.datastr, e)[0];
            if ((e.mf("complete parse"), !(f instanceof r.bh)))
              throw new Error("unsupported doc type");
            for (var l = new n.Jw(e), v = 0, b = p.ids; v < b.length; v++) {
              var y = b[v];
              l.Iw(y);
            }
            var g = new s.Nq(e, f.Zg),
              w = [],
              m = {};
            new a.Ix(
              f,
              l,
              new ((function () {
                function t() {}
                return (
                  (t.prototype.nx = function (t) {
                    t instanceof o.Dn && w.push(t);
                  }),
                  (t.prototype.xx = function (t, e) {
                    m[t] = e;
                  }),
                  t
                );
              })())()
            ).ix(),
              e.lf("complete pour");
            var O = l.pours();
            if (0 === O.length)
              for (var x = 0, A = w; x < A.length; x++) {
                var N = A[x];
                d(u, c, g, m, N);
              }
            else {
              for (var q = {}, T = 0, k = w; T < k.length; T++) {
                var N = k[T];
                q[N.id] = N;
              }
              for (var R = 0, S = O; R < S.length; R++) {
                var I = S[R],
                  N = q[I.Hw];
                void 0 === N ? (u[I.Hw] = []) : d(u, c, g, m, N);
              }
            }
            var L = {};
            for (var P in c) {
              var _ = c[P],
                M = {};
              for (var C in _) M[C] = _[C];
              L[P] = M;
            }
            (h["pours"] = u), (h["connect"] = L), e.lf("end pour");
          } catch (t) {
            e.sf(t);
          }
          return JSON.stringify(h);
        }
        function d(t, e, i, r, n) {
          var s = g(n.id, i, r[n.id]),
            a = h.L.format("%s_%d", n.ng, i.lf(n.og).id);
          a in e || (e[a] = {}),
            (e[a][n.id] = s),
            n.method instanceof o.xn
              ? (t[n.id] = {
                  stroke: h.L.K(n.method.vn),
                  paths: w(n)
                })
              : (t[n.id] = {
                  paths: w(n)
                });
        }
        function g(t, e, i) {
          var r = new Array();
          if (void 0 !== i)
            for (var n = 0, s = i; n < s.length; n++) {
              for (
                var o = s[n],
                  a = new Array(),
                  h = (new Array(), 0),
                  u = o.connected;
                h < u.length;
                h++
              ) {
                var l = u[h],
                  v = "",
                  y = "",
                  d = "",
                  g = b.Zb.oa;
                l instanceof c.rn
                  ? ((v = "PAD"),
                    (d = e.lf(l.og).id.toString()),
                    (g = l.location),
                    (y = l.id))
                  : l instanceof p.cn &&
                    ((v = "VIA"),
                    (d = e.lf(f.mg._f).id.toString()),
                    (g = l.Oc),
                    (y = l.id));
                var w = l.eb();
                a.push({
                  Jx: v,
                  Kx: t,
                  Lx: y,
                  Mx: d,
                  width: w.width(),
                  height: w.height(),
                  x: g.x,
                  y: -g.y
                });
              }
              r.push({
                Nx: a,
                polygon: []
              });
            }
          return r;
        }
        function w(t) {
          var e = new Array();
          if (t.method instanceof o.xn) {
            if (null !== t.Cn)
              for (var i = 0, r = t.Cn; i < r.length; i++) {
                for (
                  var n = r[i], s = new u.Cv(), a = 0, h = n.nb;
                  a < h.length;
                  a++
                )
                  for (var c = h[a], p = 0, f = c.jd; p < f.length; p++) {
                    var l = f[p];
                    l.start().Fb(l.end()) > 1e-6 && (s.yv(l), s.close(!1));
                  }
                e.push(s.toString());
              }
          } else if (null !== t.Cn)
            for (var v = 0, b = t.Cn; v < b.length; v++) {
              var n = b[v];
              e.push(m(n, !0));
            }
          return e;
        }
        function m(t, e) {
          for (var i = new u.Cv(), r = 0, n = t.nb; r < n.length; r++) {
            var s = n[r];
            i.xv(s), i.close(e);
          }
          return i.toString();
        }
        function E(t, e) {
          var i = new l.qq("inner", e);
          return (i.nq = !0), (i.oq = !0), new v.Ht(i).parse(t).Gt();
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.easyeda2pour = y);
      }
    ),
    i(
      "page/debug",
      [
        "require",
        "exports",
        "utils/Utils",
        "page/3dviewer/Pcb",
        "pcb/ltspice/LTSpiceRawCompressor",
        "pcb/Converter",
        "geometry/Line",
        "geometry/Vector2",
        "pcb/pour/EasyEDA2Pour"
      ],
      function (t, e, i, r, n, s, o, a, h) {
        function u(t) {
          return function () {
            return t;
          };
        }
        function c() {
          try {
            for (var t = 0; t < 1e5; t++)
              p.push(new o.bd(new a.Zb(1, 1), new a.Zb(2, 2)));
            setTimeout(c, 0);
          } catch (t) {}
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var p = new Array(),
          f = (function () {
            function t() {
              (this.batch = 0),
                (this.Ox = $("#frameContainer")),
                (this.Px = $("#layerSettings")),
                (this.Qx = new Worker("./js/worker.js")),
                this.Qx.postMessage({
                  type: "import",
                  url: "./app.js"
                }),
                (this.Qx.onmessage = this.Rx.bind(this)),
                $("#uploadType option")["each"](function (t, e) {
                  e.innerText =
                    e.getAttribute("from") + " - " + e.getAttribute("to");
                }),
                $("#fileOpenSource")["change"](this.Sx.bind(this)),
                $("#menu")["change"](this.Tx.bind(this)),
                (this.attrFn = {
                  pickData: this.pickData.bind(this),
                  logToLayerSetting: this.logToLayerSetting.bind(this),
                  checkActiveChange: function () {}
                }),
                (window["exportFunction"] = {
                  attrFn: this.attrFn
                });
              var t = i.F.v();
              "url" in t && this.Ux(t.url);
            }
            return (
              (t.prototype.Vx = function () {
                return this.Ox.find("> iframe")[0].contentWindow;
              }),
              (t.prototype.Ux = function (t) {
                var e = document.createElement("iframe");
                (e.className = "canvas_frame"),
                  this.Ox["addClass"]("scrollable"),
                  this.Ox.append(e),
                  (e.src = "/3d/3dviewer.html?url=" + encodeURIComponent(t));
              }),
              (t.prototype.Rx = function (t) {}),
              (t.prototype.Sx = function () {
                var t = $("#uploadType option:selected"),
                  e = $("#calcType option:selected"),
                  r = t["attr"]("from"),
                  n = t["attr"]("to"),
                  s = "/from/" + r + "/to/" + n;
                "remote" == e.text()
                  ? $["ajax"]({
                      url: i.F.prefix() + "/api/convert" + s,
                      data: new FormData($("form")[0]),
                      cache: !1,
                      contentType: !1,
                      processData: !1,
                      type: "POST",
                      dataType: "text",
                      xhrFields: {
                        withCredentials: !1
                      },
                      timeout: 0
                    })["then"](this.Wx.bind(this), function () {
                      alert("failed!");
                    })
                  : this.Xx(s),
                  $("#fileOpenSource").val("");
              }),
              (t.prototype.Xx = function (t) {
                var e = this,
                  r = $("#fileOpenSource")[0].files;
                if (null !== r && r.length > 0) {
                  var o = new FileReader();
                  o.readAsText(r[0], "UTF-8"),
                    (o.onload = function (r) {
                      if ((e.batch++, null !== r.target)) {
                        var o = r.target.result;
                        switch (t) {
                          case "/from/EasyEDA/to/3DView":
                            e.Ox["html"](""),
                              e.Ux(""),
                              (e.attrFn.get3DData = u(o));
                            break;
                          case "/from/LTSpiceRaw/to/Compressed":
                            new n.np(o).lp();
                            break;
                          case "/from/LTSpiceRaw/to/Decompressed":
                            new n.np(o).mp();
                            break;
                          case "/from/EasyEDA/to/Altium":
                            s.easyeda2altium("test", o, function (t, e) {
                              i.F.B(t, e);
                            });
                            break;
                          case "/from/Altium/to/EasyEDA":
                          case "/from/Altium/to/EasyEDALib":
                            var a = "/from/Altium/to/EasyEDALib" === t;
                            s.altium2easyeda("test", o, a, function (t) {
                              var e = t["title"] + ".json",
                                r = new Blob([
                                  JSON.stringify(t["dataStr"], void 0, 4)
                                ]);
                              i.F.B(e, r);
                            });
                            break;
                          case "/from/EasyEDA/to/Kitsune":
                            (e.attrFn.get3DData = function () {
                              return o;
                            }),
                              e.Ox["html"]("");
                            var h = document.createElement("iframe");
                            (h.className = "canvas_frame"),
                              e.Ox["addClass"]("notscrollable"),
                              e.Ox.append(h),
                              (h.src = "kitsune.html?type=easyeda");
                            break;
                          case "/from/Altium/to/Kitsune":
                            (e.attrFn.get3DData = function () {
                              return o;
                            }),
                              e.Ox["html"]("");
                            var h = document.createElement("iframe");
                            (h.className = "canvas_frame"),
                              e.Ox["addClass"]("notscrollable"),
                              e.Ox.append(h),
                              (h.src = "kitsune.html?type=altium");
                            break;
                          case "/from/Memory/to/Test":
                            setTimeout(c, 0);
                          default:
                            e.batch,
                              JSON.stringify({
                                datastr: o,
                                ids: []
                              });
                        }
                      }
                    });
                }
              }),
              (t.prototype.Wx = function (t, e, i) {
                var r = this;
                if (
                  "Kitsune" === $("#uploadType option:selected")["attr"]("to")
                ) {
                  (this.attrFn.get3DData = function () {
                    return JSON.parse(t);
                  }),
                    this.Ox["html"]("");
                  var n = document.createElement("iframe");
                  (n.className = "canvas_frame"),
                    this.Ox["addClass"]("notscrollable"),
                    this.Ox.append(n),
                    (n.src = "kitsune.html");
                } else if (((t = JSON.parse(t)), t["success"])) {
                  this.Ox["html"]("");
                  var s;
                  (s =
                    "url" in t["result"]
                      ? [
                          {
                            url: t["result"]["url"]
                          }
                        ]
                      : t["result"]),
                    s.forEach(function (t) {
                      r.Ux(t.url);
                    });
                } else alert(t["message"]);
              }),
              (t.prototype.Tx = function () {
                if ("undefined" != typeof event && null !== event.target) {
                  var t = $(event.target),
                    e = {},
                    i = t["attr"]("id"),
                    r = this.Vx();
                  void 0 !== i &&
                    null !== r &&
                    ("checkbox" === t["attr"]("type")
                      ? (e[i] =
                          void 0 !== t.attr("checked")
                            ? "visible"
                            : "invisible")
                      : (e[i] = t.val()),
                    r["attrpanel_apply"](null, e));
                }
              }),
              (t.prototype.logToLayerSetting = function (t) {
                this.Px["html"](t);
              }),
              (t.prototype.pickData = function () {
                var t = this.Vx();
                if (null !== t) {
                  this.Px["html"]("");
                  var e = t["attrpanel_data"]();
                  for (var i in e) {
                    var n = e[i],
                      s = document.getElementById(i);
                    if (null !== s) {
                      var o = $(s);
                      "checkbox" == o["attr"]("type")
                        ? "visible" === n
                          ? o["attr"]("checked", "")
                          : o["removeAttr"]("checked")
                        : o["val"](n);
                    } else if (i in r.yo) {
                      var a = document.createElement("label"),
                        h = document.createElement("input");
                      (h.id = i),
                        (h.type = "checkbox"),
                        (h.checked = !0),
                        a.appendChild(h);
                      var u = document.createElement("span");
                      (u.innerText = r.yo[i]),
                        a.appendChild(u),
                        this.Px.append(a);
                    }
                  }
                }
              }),
              t
            );
          })();
        e["load"] = function () {
          $(function () {
            new f();
          });
        };
      }
    ),
    i(
      "page/3dviewer/index",
      [
        "require",
        "exports",
        "utils/Utils",
        "page/3dviewer/Pcb",
        "page/3dviewer/Tasks",
        "kitsune/core/WebGLRender",
        "kitsune/3d/Camera",
        "kitsune/3d/Light",
        "kitsune/core/Color",
        "kitsune/3d/Scene",
        "geometry/Vector3",
        "kitsune/3d/Geometry",
        "kitsune/3d/PhongMaterial",
        "kitsune/3d/Mesh",
        "pcb/Converter"
      ],
      function (t, e, i, r, n, s, o, a, h, u, c, p, f, l, v) {
        function b() {
          var t = new s._j(document.createElement("canvas")),
            e = new o.Dj(50, 1, 1, 1e3, new c.pa(1, 1, 1)),
            i = new a.Ej(new h.aj(0.1, 0.1, 0.1)),
            r = new a.Fj(new h.aj(1, 1, 1), c.pa.oa),
            n = new u.Qk(t, e, i, r),
            v = new p.Ti(
              [
                new c.pa(50, -50, 40),
                new c.pa(50, 50, 40),
                new c.pa(-50, -50, 40)
              ],
              [new c.pa(0, 0, 1), new c.pa(0, 0, 1), new c.pa(0, 0, 1)]
            ),
            b = new h.aj(0, 0, 0),
            y = new f.gj(b, b, b, 1, 1);
          n.group.add(new l._k(v, y)), n.tk();
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var y,
          d = (function () {
            function t() {
              (this.No = {
                "attr-pcbcanvas-unit": "mm",
                "attr-layer-distance": "0",
                "attr-board-thickness": "6.299",
                "attr-pcbcanvas-bgcolor": "#808080",
                "attr-border-color": "blue",
                "attr-surface-finish-color": "gold"
              }),
                (this.Yx = {
                  uuid: "",
                  width: "0",
                  height: "0",
                  originX: "0",
                  originY: "0",
                  x: "0",
                  y: "0",
                  z: "0",
                  rotateX: "0",
                  rotateY: "0",
                  rotateZ: "0"
                }),
                (this.Zx = {
                  "attr-layer-distance": this.$x.bind(this),
                  "attr-board-thickness": this._x.bind(this),
                  "attr-border-color": this.ay("boardColor"),
                  "attr-surface-finish-color": this.ay("solderColor"),
                  "attr-pcbcanvas-bgcolor": this.ay("fogColor")
                }),
                (this.Oo = new Array()),
                (y = window),
                b(),
                (this.canvas = document.createElement("canvas"));
              var t = document.getElementById("canvas");
              null !== t &&
                (t.appendChild(this.canvas),
                (this.canvas.style.width = "100%"),
                (this.canvas.style.height = "100%")),
                (y["attrpanel_apply"] = this.by.bind(this)),
                (y["attrpanel_data"] = this.ey.bind(this)),
                (y["mouseEvent"] = this.mouseEvent.bind(this)),
                (y["focusIframe"] = this.focusIframe.bind(this)),
                (y["reset"] = this.gy.bind(this)),
                document.addEventListener("mousedown", this.vl.bind(this));
              var e = i.F.v().url;
              if ("string" == typeof e && e.length > 0) {
                var n = /\/3dmodel\/([^\/]+)/.exec(e);
                if (null === n) throw new Error();
                var s = n[1],
                  o = document.getElementById("canvas");
                if (null === o) throw new Error();
                var a = [
                  {
                    name: "Top",
                    Zk: "3dmodel",
                    data: [
                      {
                        width: o.offsetWidth,
                        height: o.offsetHeight,
                        id: s,
                        isTop: !0,
                        originX: 0,
                        originY: 0,
                        originRotation: 0,
                        rx: 0,
                        ry: 0,
                        rz: 0,
                        x: 0,
                        y: 0,
                        z: 0,
                        zIndex: 0
                      }
                    ]
                  }
                ];
                (this.hy = new r.gp(a, this.canvas, this.No, this.Oo)),
                  y["attrpanel_apply"](null, {
                    "attr-pcbcanvas-bgcolor": this.No["attr-pcbcanvas-bgcolor"]
                  });
              } else {
                var a = y.parent["exportFunction"]["attrFn"]["get3DData"](),
                  h = v.Cw(a);
                (this.hy = new r.gp(h, this.canvas, this.No, this.Oo)),
                  y["attrpanel_apply"](null, {
                    "attr-board-thickness": this.No["attr-board-thickness"]
                  }),
                  y["attrpanel_apply"](null, {
                    "attr-pcbcanvas-bgcolor": this.No["attr-pcbcanvas-bgcolor"]
                  }),
                  y.parent["exportFunction"]["attrFn"]["pickData"](),
                  null !== y["_initData"] &&
                    y["attrpanel_apply"](null, y["_initData"]);
              }
            }
            return (
              (t.prototype.iy = function (t) {
                this.Oo.forEach(function (e) {
                  e(t);
                });
              }),
              (t.prototype.mouseEvent = function (t) {
                if (
                  "wheel" === t.type ||
                  "mousewheel" === t.type ||
                  "DOMMouseScroll" === t.type
                ) {
                  "DOMMouseScroll" === t.type && (t.deltaY = t.detail);
                  var e = new WheelEvent("wheel", t);
                  this.canvas.dispatchEvent(e);
                } else {
                  var e = new MouseEvent(t.type, t);
                  this.canvas.dispatchEvent(e);
                }
              }),
              (t.prototype.focusIframe = function () {
                this.iy(new n.Tm());
              }),
              (t.prototype.by = function (t, e) {
                var i = !1;
                for (var s in e) {
                  var o = e[s];
                  s in this.Zx
                    ? ((this.No[s] = o), this.iy(this.Zx[s](o)))
                    : s in r.yo
                    ? ((this.No[s] = o),
                      this.iy(new n.Rm(r.yo[s], "visible" == o)))
                    : s in this.Yx && ((this.Yx[s] = o), (i = !0));
                }
                if (i) {
                  var a = new n.Sm(
                    this.Yx["uuid"],
                    parseFloat(this.Yx["width"]),
                    parseFloat(this.Yx["height"]),
                    parseFloat(this.Yx["originX"]),
                    parseFloat(this.Yx["originY"]),
                    parseFloat(this.Yx["rotateX"]),
                    parseFloat(this.Yx["rotateY"]),
                    parseFloat(this.Yx["rotateZ"]),
                    parseFloat(this.Yx["x"]),
                    -parseFloat(this.Yx["y"]),
                    parseFloat(this.Yx["z"])
                  );
                  this.iy(a);
                }
              }),
              (t.prototype.ey = function () {
                return JSON.parse(JSON.stringify(this.No));
              }),
              (t.prototype.gy = function () {
                y["attrpanel_apply"](null, {
                  "attr-layer-distance": 0
                }),
                  y["attrpanel_apply"](null, {
                    "attr-board-thickness": 6.299
                  }),
                  this.hy.control.reset(),
                  y.parent["exportFunction"]["attrFn"]["pickData"]();
              }),
              (t.prototype.vl = function () {
                y.parent["exportFunction"]["attrFn"]["checkActiveChange"](),
                  $("#canvas").focus();
              }),
              (t.prototype.$x = function (t) {
                return (
                  (this.No["attr-layer-distance"] = t),
                  new n.Qm(
                    parseInt(t),
                    parseInt(this.No["attr-board-thickness"])
                  )
                );
              }),
              (t.prototype._x = function (t) {
                return (
                  (this.No["attr-board-thickness"] = t),
                  new n.Qm(
                    parseInt(this.No["attr-layer-distance"]),
                    parseInt(t)
                  )
                );
              }),
              (t.prototype.ay = function (t) {
                return function (e) {
                  return new n.Pm(t, e);
                };
              }),
              t
            );
          })();
        e.jy = d;
      }
    ),
    i(
      "pcb/easyeda/EasyEDAFonts",
      [
        "require",
        "exports",
        "geometry/Polyline",
        "geometry/PolylineGroup",
        "geometry/Vector2"
      ],
      function (t, e, i, r, n) {
        function s(t, e) {
          for (var s = new Array(), a = 0, h = e; a < h.length; a++) {
            for (var u = h[a], c = new Array(), p = 0; p < u.length; p += 2)
              c.push(new n.Zb(u[p], -u[p + 1]));
            s.push(i.Zc.ld(c));
          }
          o[t] = new r.Hd(s);
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = {};
        (e.ky = o),
          s("!", [
            [1, -12, 1, 2],
            [1, 7, 0, 8, 1, 9, 2, 8, 1, 7]
          ]),
          s('"', [
            [0, -12, 0, -5],
            [8, -12, 8, -5]
          ]),
          s("#", [
            [8, -16, 1, 16],
            [14, -16, 7, 16],
            [1, -3, 15, -3],
            [0, 3, 14, 3]
          ]),
          s("$", [
            [5, -16, 5, 13],
            [9, -16, 9, 13],
            [
              14,
              -9,
              12,
              -11,
              9,
              -12,
              5,
              -12,
              2,
              -11,
              0,
              -9,
              0,
              -7,
              1,
              -5,
              2,
              -4,
              4,
              -3,
              10,
              -1,
              12,
              0,
              13,
              1,
              14,
              3,
              14,
              6,
              12,
              8,
              9,
              9,
              5,
              9,
              2,
              8,
              0,
              6
            ]
          ]),
          s("%", [
            [18, -12, 0, 9],
            [
              5,
              -12,
              7,
              -10,
              7,
              -8,
              6,
              -6,
              4,
              -5,
              2,
              -5,
              0,
              -7,
              0,
              -9,
              1,
              -11,
              3,
              -12,
              5,
              -12,
              7,
              -11,
              10,
              -10,
              13,
              -10,
              16,
              -11,
              18,
              -12
            ],
            [
              14,
              2,
              12,
              3,
              11,
              5,
              11,
              7,
              13,
              9,
              15,
              9,
              17,
              8,
              18,
              6,
              18,
              4,
              16,
              2,
              14,
              2
            ]
          ]),
          s("&", [
            [
              20,
              -3,
              20,
              -4,
              19,
              -5,
              18,
              -5,
              17,
              -4,
              16,
              -2,
              14,
              3,
              12,
              6,
              10,
              8,
              8,
              9,
              4,
              9,
              2,
              8,
              1,
              7,
              0,
              5,
              0,
              3,
              1,
              1,
              2,
              0,
              9,
              -4,
              10,
              -5,
              11,
              -7,
              11,
              -9,
              10,
              -11,
              8,
              -12,
              6,
              -11,
              5,
              -9,
              5,
              -7,
              6,
              -4,
              8,
              -1,
              13,
              6,
              15,
              8,
              17,
              9,
              19,
              9,
              20,
              8,
              20,
              7
            ]
          ]),
          s("'", [
            [2, -10, 1, -11, 2, -12, 3, -11, 3, -9, 2, -7, 1, -6],
            [2, -7, 0, -5, 0, -3, 1, -2, 2, -3, 1, -4, 0, -3]
          ]),
          s("(", [
            [
              7,
              -16,
              5,
              -14,
              3,
              -11,
              1,
              -7,
              0,
              -2,
              0,
              2,
              1,
              7,
              3,
              11,
              5,
              14,
              7,
              16
            ]
          ]),
          s(")", [
            [
              0,
              -16,
              2,
              -14,
              4,
              -11,
              6,
              -7,
              7,
              -2,
              7,
              2,
              6,
              7,
              4,
              11,
              2,
              14,
              0,
              16
            ]
          ]),
          s("*", [
            [5, -6, 5, 6],
            [0, -3, 10, 3],
            [10, -3, 0, 3]
          ]),
          s("+", [
            [9, -9, 9, 9],
            [0, 0, 18, 0]
          ]),
          s(",", [[2, 5, 1, 6, 0, 5, 1, 4, 2, 5, 2, 7, 0, 9]]),
          s("-", [[0, 0, 18, 0]]),
          s(".", [[1, 4, 0, 5, 1, 6, 2, 5, 1, 4]]),
          s("/", [[18, -16, 0, 16]]),
          s("0", [
            [
              6,
              -12,
              3,
              -11,
              1,
              -8,
              0,
              -3,
              0,
              0,
              1,
              5,
              3,
              8,
              6,
              9,
              8,
              9,
              11,
              8,
              13,
              5,
              14,
              0,
              14,
              -3,
              13,
              -8,
              11,
              -11,
              8,
              -12,
              6,
              -12
            ]
          ]),
          s("1", [[0, -8, 2, -9, 5, -12, 5, 9]]),
          s("2", [
            [
              1,
              -7,
              1,
              -8,
              2,
              -10,
              3,
              -11,
              5,
              -12,
              9,
              -12,
              11,
              -11,
              12,
              -10,
              13,
              -8,
              13,
              -6,
              12,
              -4,
              10,
              -1,
              0,
              9,
              14,
              9
            ]
          ]),
          s("3", [
            [
              2,
              -12,
              13,
              -12,
              7,
              -4,
              10,
              -4,
              12,
              -3,
              13,
              -2,
              14,
              1,
              14,
              3,
              13,
              6,
              11,
              8,
              8,
              9,
              5,
              9,
              2,
              8,
              1,
              7,
              0,
              5
            ]
          ]),
          s("4", [
            [10, -12, 0, 2, 15, 2],
            [10, -12, 10, 9]
          ]),
          s("5", [
            [
              12,
              -12,
              2,
              -12,
              1,
              -3,
              2,
              -4,
              5,
              -5,
              8,
              -5,
              11,
              -4,
              13,
              -2,
              14,
              1,
              14,
              3,
              13,
              6,
              11,
              8,
              8,
              9,
              5,
              9,
              2,
              8,
              1,
              7,
              0,
              5
            ]
          ]),
          s("6", [
            [
              12,
              -9,
              11,
              -11,
              8,
              -12,
              6,
              -12,
              3,
              -11,
              1,
              -8,
              0,
              -3,
              0,
              2,
              1,
              6,
              3,
              8,
              6,
              9,
              7,
              9,
              10,
              8,
              12,
              6,
              13,
              3,
              13,
              2,
              12,
              -1,
              10,
              -3,
              7,
              -4,
              6,
              -4,
              3,
              -3,
              1,
              -1,
              0,
              2
            ]
          ]),
          s("7", [
            [14, -12, 4, 9],
            [0, -12, 14, -12]
          ]),
          s("8", [
            [
              5,
              -12,
              2,
              -11,
              1,
              -9,
              1,
              -7,
              2,
              -5,
              4,
              -4,
              8,
              -3,
              11,
              -2,
              13,
              0,
              14,
              2,
              14,
              5,
              13,
              7,
              12,
              8,
              9,
              9,
              5,
              9,
              2,
              8,
              1,
              7,
              0,
              5,
              0,
              2,
              1,
              0,
              3,
              -2,
              6,
              -3,
              10,
              -4,
              12,
              -5,
              13,
              -7,
              13,
              -9,
              12,
              -11,
              9,
              -12,
              5,
              -12
            ]
          ]),
          s("9", [
            [
              13,
              -5,
              12,
              -2,
              10,
              0,
              7,
              1,
              6,
              1,
              3,
              0,
              1,
              -2,
              0,
              -5,
              0,
              -6,
              1,
              -9,
              3,
              -11,
              6,
              -12,
              7,
              -12,
              10,
              -11,
              12,
              -9,
              13,
              -5,
              13,
              0,
              12,
              5,
              10,
              8,
              7,
              9,
              5,
              9,
              2,
              8,
              1,
              6
            ]
          ]),
          s(":", [
            [1, -3, 0, -2, 1, -1, 2, -2, 1, -3],
            [1, 4, 0, 5, 1, 6, 2, 5, 1, 4]
          ]),
          s(";", [
            [1, -3, 0, -2, 1, -1, 2, -2, 1, -3],
            [2, 5, 1, 6, 0, 5, 1, 4, 2, 5, 2, 7, 0, 9]
          ]),
          s("<", [[16, -9, 0, 0, 16, 9]]),
          s("=", [
            [0, -3, 18, -3],
            [0, 3, 18, 3]
          ]),
          s(">", [[0, -9, 16, 0, 0, 9]]),
          s("?", [
            [
              0,
              -7,
              0,
              -8,
              1,
              -10,
              2,
              -11,
              4,
              -12,
              8,
              -12,
              10,
              -11,
              11,
              -10,
              12,
              -8,
              12,
              -6,
              11,
              -4,
              10,
              -3,
              6,
              -1,
              6,
              2
            ],
            [6, 7, 5, 8, 6, 9, 7, 8, 6, 7]
          ]),
          s("@", [
            [
              15,
              -4,
              14,
              -6,
              12,
              -7,
              9,
              -7,
              7,
              -6,
              6,
              -5,
              5,
              -2,
              5,
              1,
              6,
              3,
              8,
              4,
              11,
              4,
              13,
              3,
              14,
              1
            ],
            [9, -7, 7, -5, 6, -2, 6, 1, 7, 3, 8, 4],
            [
              15,
              -7,
              14,
              1,
              14,
              3,
              16,
              4,
              18,
              4,
              20,
              2,
              21,
              -1,
              21,
              -3,
              20,
              -6,
              19,
              -8,
              17,
              -10,
              15,
              -11,
              12,
              -12,
              9,
              -12,
              6,
              -11,
              4,
              -10,
              2,
              -8,
              1,
              -6,
              0,
              -3,
              0,
              0,
              1,
              3,
              2,
              5,
              4,
              7,
              6,
              8,
              9,
              9,
              12,
              9,
              15,
              8,
              17,
              7,
              18,
              6
            ],
            [16, -7, 15, 1, 15, 3, 16, 4]
          ]),
          s("A", [
            [8, -12, 0, 9],
            [8, -12, 16, 9],
            [3, 2, 13, 2]
          ]),
          s("B", [
            [0, -12, 0, 9],
            [
              0,
              -12,
              9,
              -12,
              12,
              -11,
              13,
              -10,
              14,
              -8,
              14,
              -6,
              13,
              -4,
              12,
              -3,
              9,
              -2
            ],
            [
              0,
              -2,
              9,
              -2,
              12,
              -1,
              13,
              0,
              14,
              2,
              14,
              5,
              13,
              7,
              12,
              8,
              9,
              9,
              0,
              9
            ]
          ]),
          s("C", [
            [
              15,
              -7,
              14,
              -9,
              12,
              -11,
              10,
              -12,
              6,
              -12,
              4,
              -11,
              2,
              -9,
              1,
              -7,
              0,
              -4,
              0,
              1,
              1,
              4,
              2,
              6,
              4,
              8,
              6,
              9,
              10,
              9,
              12,
              8,
              14,
              6,
              15,
              4
            ]
          ]),
          s("D", [
            [0, -12, 0, 9],
            [
              0,
              -12,
              7,
              -12,
              10,
              -11,
              12,
              -9,
              13,
              -7,
              14,
              -4,
              14,
              1,
              13,
              4,
              12,
              6,
              10,
              8,
              7,
              9,
              0,
              9
            ]
          ]),
          s("E", [
            [0, -12, 0, 9],
            [0, -12, 13, -12],
            [0, -2, 8, -2],
            [0, 9, 13, 9]
          ]),
          s("F", [
            [0, -12, 0, 9],
            [0, -12, 13, -12],
            [0, -2, 8, -2]
          ]),
          s("G", [
            [
              15,
              -7,
              14,
              -9,
              12,
              -11,
              10,
              -12,
              6,
              -12,
              4,
              -11,
              2,
              -9,
              1,
              -7,
              0,
              -4,
              0,
              1,
              1,
              4,
              2,
              6,
              4,
              8,
              6,
              9,
              10,
              9,
              12,
              8,
              14,
              6,
              15,
              4,
              15,
              1
            ],
            [10, 1, 15, 1]
          ]),
          s("H", [
            [0, -12, 0, 9],
            [14, -12, 14, 9],
            [0, -2, 14, -2]
          ]),
          s("I", [[0, -12, 0, 9]]),
          s("J", [
            [10, -12, 10, 4, 9, 7, 8, 8, 6, 9, 4, 9, 2, 8, 1, 7, 0, 4, 0, 2]
          ]),
          s("K", [
            [0, -12, 0, 9],
            [14, -12, 0, 2],
            [5, -3, 14, 9]
          ]),
          s("L", [
            [0, -12, 0, 9],
            [0, 9, 12, 9]
          ]),
          s("M", [
            [0, -12, 0, 9],
            [0, -12, 8, 9],
            [16, -12, 8, 9],
            [16, -12, 16, 9]
          ]),
          s("N", [
            [0, -12, 0, 9],
            [0, -12, 14, 9],
            [14, -12, 14, 9]
          ]),
          s("O", [
            [
              6,
              -12,
              4,
              -11,
              2,
              -9,
              1,
              -7,
              0,
              -4,
              0,
              1,
              1,
              4,
              2,
              6,
              4,
              8,
              6,
              9,
              10,
              9,
              12,
              8,
              14,
              6,
              15,
              4,
              16,
              1,
              16,
              -4,
              15,
              -7,
              14,
              -9,
              12,
              -11,
              10,
              -12,
              6,
              -12
            ]
          ]),
          s("P", [
            [0, -12, 0, 9],
            [
              0,
              -12,
              9,
              -12,
              12,
              -11,
              13,
              -10,
              14,
              -8,
              14,
              -5,
              13,
              -3,
              12,
              -2,
              9,
              -1,
              0,
              -1
            ]
          ]),
          s("Q", [
            [
              6,
              -12,
              4,
              -11,
              2,
              -9,
              1,
              -7,
              0,
              -4,
              0,
              1,
              1,
              4,
              2,
              6,
              4,
              8,
              6,
              9,
              10,
              9,
              12,
              8,
              14,
              6,
              15,
              4,
              16,
              1,
              16,
              -4,
              15,
              -7,
              14,
              -9,
              12,
              -11,
              10,
              -12,
              6,
              -12
            ],
            [9, 5, 15, 11]
          ]),
          s("R", [
            [0, -12, 0, 9],
            [
              0,
              -12,
              9,
              -12,
              12,
              -11,
              13,
              -10,
              14,
              -8,
              14,
              -6,
              13,
              -4,
              12,
              -3,
              9,
              -2,
              0,
              -2
            ],
            [7, -2, 14, 9]
          ]),
          s("S", [
            [
              14,
              -9,
              12,
              -11,
              9,
              -12,
              5,
              -12,
              2,
              -11,
              0,
              -9,
              0,
              -7,
              1,
              -5,
              2,
              -4,
              4,
              -3,
              10,
              -1,
              12,
              0,
              13,
              1,
              14,
              3,
              14,
              6,
              12,
              8,
              9,
              9,
              5,
              9,
              2,
              8,
              0,
              6
            ]
          ]),
          s("T", [
            [7, -12, 7, 9],
            [0, -12, 14, -12]
          ]),
          s("U", [
            [0, -12, 0, 3, 1, 6, 3, 8, 6, 9, 8, 9, 11, 8, 13, 6, 14, 3, 14, -12]
          ]),
          s("V", [
            [0, -12, 8, 9],
            [16, -12, 8, 9]
          ]),
          s("W", [
            [0, -12, 5, 9],
            [10, -12, 5, 9],
            [10, -12, 15, 9],
            [20, -12, 15, 9]
          ]),
          s("X", [
            [0, -12, 14, 9],
            [14, -12, 0, 9]
          ]),
          s("Y", [
            [0, -12, 8, -2, 8, 9],
            [16, -12, 8, -2]
          ]),
          s("Z", [
            [14, -12, 0, 9],
            [0, -12, 14, -12],
            [0, 9, 14, 9]
          ]),
          s("[", [
            [0, -16, 0, 16],
            [1, -16, 1, 16],
            [0, -16, 7, -16],
            [0, 16, 7, 16]
          ]),
          s("\\", [[0, -12, 14, 12]]),
          s("]", [
            [6, -16, 6, 16],
            [7, -16, 7, 16],
            [0, -16, 7, -16],
            [0, 16, 7, 16]
          ]),
          s("^", [
            [8, -14, 0, 0],
            [8, -14, 16, 0]
          ]),
          s("_", [[0, 16, 18, 16]]),
          s("a", [
            [12, -5, 12, 9],
            [
              12,
              -2,
              10,
              -4,
              8,
              -5,
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6
            ]
          ]),
          s("b", [
            [0, -12, 0, 9],
            [
              0,
              -2,
              2,
              -4,
              4,
              -5,
              7,
              -5,
              9,
              -4,
              11,
              -2,
              12,
              1,
              12,
              3,
              11,
              6,
              9,
              8,
              7,
              9,
              4,
              9,
              2,
              8,
              0,
              6
            ]
          ]),
          s("c", [
            [
              12,
              -2,
              10,
              -4,
              8,
              -5,
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6
            ]
          ]),
          s("d", [
            [12, -12, 12, 9],
            [
              12,
              -2,
              10,
              -4,
              8,
              -5,
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6
            ]
          ]),
          s("e", [
            [
              0,
              1,
              12,
              1,
              12,
              -1,
              11,
              -3,
              10,
              -4,
              8,
              -5,
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6
            ]
          ]),
          s("f", [
            [8, -12, 6, -12, 4, -11, 3, -8, 3, 9],
            [0, -5, 7, -5]
          ]),
          s("g", [
            [12, -5, 12, 11, 11, 14, 10, 15, 8, 16, 5, 16, 3, 15],
            [
              12,
              -2,
              10,
              -4,
              8,
              -5,
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6
            ]
          ]),
          s("h", [
            [0, -12, 0, 9],
            [0, -1, 3, -4, 5, -5, 8, -5, 10, -4, 11, -1, 11, 9]
          ]),
          s("i", [
            [0, -12, 1, -11, 2, -12, 1, -13, 0, -12],
            [1, -5, 1, 9]
          ]),
          s("j", [
            [4, -12, 5, -11, 6, -12, 5, -13, 4, -12],
            [5, -5, 5, 12, 4, 15, 2, 16, 0, 16]
          ]),
          s("k", [
            [0, -12, 0, 9],
            [10, -5, 0, 5],
            [4, 1, 11, 9]
          ]),
          s("l", [[0, -12, 0, 9]]),
          s("m", [
            [0, -5, 0, 9],
            [0, -1, 3, -4, 5, -5, 8, -5, 10, -4, 11, -1, 11, 9],
            [11, -1, 14, -4, 16, -5, 19, -5, 21, -4, 22, -1, 22, 9]
          ]),
          s("n", [
            [0, -5, 0, 9],
            [0, -1, 3, -4, 5, -5, 8, -5, 10, -4, 11, -1, 11, 9]
          ]),
          s("o", [
            [
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6,
              13,
              3,
              13,
              1,
              12,
              -2,
              10,
              -4,
              8,
              -5,
              5,
              -5
            ]
          ]),
          s("p", [
            [0, -5, 0, 16],
            [
              0,
              -2,
              2,
              -4,
              4,
              -5,
              7,
              -5,
              9,
              -4,
              11,
              -2,
              12,
              1,
              12,
              3,
              11,
              6,
              9,
              8,
              7,
              9,
              4,
              9,
              2,
              8,
              0,
              6
            ]
          ]),
          s("q", [
            [12, -5, 12, 16],
            [
              12,
              -2,
              10,
              -4,
              8,
              -5,
              5,
              -5,
              3,
              -4,
              1,
              -2,
              0,
              1,
              0,
              3,
              1,
              6,
              3,
              8,
              5,
              9,
              8,
              9,
              10,
              8,
              12,
              6
            ]
          ]),
          s("r", [
            [0, -5, 0, 9],
            [0, 1, 1, -2, 3, -4, 5, -5, 8, -5]
          ]),
          s("s", [
            [
              11,
              -2,
              10,
              -4,
              7,
              -5,
              4,
              -5,
              1,
              -4,
              0,
              -2,
              1,
              0,
              3,
              1,
              8,
              2,
              10,
              3,
              11,
              5,
              11,
              6,
              10,
              8,
              7,
              9,
              4,
              9,
              1,
              8,
              0,
              6
            ]
          ]),
          s("t", [
            [3, -12, 3, 5, 4, 8, 6, 9, 8, 9],
            [0, -5, 7, -5]
          ]),
          s("u", [
            [0, -5, 0, 5, 1, 8, 3, 9, 6, 9, 8, 8, 11, 5],
            [11, -5, 11, 9]
          ]),
          s("v", [
            [0, -5, 6, 9],
            [12, -5, 6, 9]
          ]),
          s("w", [
            [0, -5, 4, 9],
            [8, -5, 4, 9],
            [8, -5, 12, 9],
            [16, -5, 12, 9]
          ]),
          s("x", [
            [0, -5, 11, 9],
            [11, -5, 0, 9]
          ]),
          s("y", [
            [1, -5, 7, 9],
            [13, -5, 7, 9, 5, 13, 3, 15, 1, 16, 0, 16]
          ]),
          s("z", [
            [11, -5, 0, 9],
            [0, -5, 11, -5],
            [0, 9, 11, 9]
          ]),
          s("{", [
            [
              5,
              -16,
              3,
              -15,
              2,
              -14,
              1,
              -12,
              1,
              -10,
              2,
              -8,
              3,
              -7,
              4,
              -5,
              4,
              -3,
              2,
              -1
            ],
            [
              3,
              -15,
              2,
              -13,
              2,
              -11,
              3,
              -9,
              4,
              -8,
              5,
              -6,
              5,
              -4,
              4,
              -2,
              0,
              0,
              4,
              2,
              5,
              4,
              5,
              6,
              4,
              8,
              3,
              9,
              2,
              11,
              2,
              13,
              3,
              15
            ],
            [2, 1, 4, 3, 4, 5, 3, 7, 2, 8, 1, 10, 1, 12, 2, 14, 3, 15, 5, 16]
          ]),
          s("|", [[0, -16, 0, 16]]),
          s("}", [
            [
              0,
              -16,
              2,
              -15,
              3,
              -14,
              4,
              -12,
              4,
              -10,
              3,
              -8,
              2,
              -7,
              1,
              -5,
              1,
              -3,
              3,
              -1
            ],
            [
              2,
              -15,
              3,
              -13,
              3,
              -11,
              2,
              -9,
              1,
              -8,
              0,
              -6,
              0,
              -4,
              1,
              -2,
              5,
              0,
              1,
              2,
              0,
              4,
              0,
              6,
              1,
              8,
              2,
              9,
              3,
              11,
              3,
              13,
              2,
              15
            ],
            [3, 1, 1, 3, 1, 5, 2, 7, 3, 8, 4, 10, 4, 12, 3, 14, 2, 15, 0, 16]
          ]),
          s("~", [
            [
              0,
              3,
              0,
              1,
              1,
              -2,
              3,
              -3,
              5,
              -3,
              7,
              -2,
              11,
              1,
              13,
              2,
              15,
              2,
              17,
              1,
              18,
              -1
            ],
            [
              0,
              1,
              1,
              -1,
              3,
              -2,
              5,
              -2,
              7,
              -1,
              11,
              2,
              13,
              3,
              15,
              3,
              17,
              2,
              18,
              -1,
              18,
              -3
            ]
          ]);
      }
    ),
    i(
      "pcb/pour/PourIsland",
      [
        "require",
        "exports",
        "utils/svg/PathDataDec",
        "utils/Logger",
        "geometry/polybool/PolyIntersection"
      ],
      function (t, e, i, r, n) {
        function s(t, e) {
          var i = new n.Bh(r.vf.uf),
            s = o(t),
            a = i.yh(s),
            h = o(e),
            u = i.zh(h);
          return i.Gc(a, u);
        }
        function o(t) {
          var e = new Array();
          return (
            new i.cr(function (t) {
              return e.push(t), !0;
            }).parse(t),
            e
          );
        }
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.ly = s);
      }
    ),
    i("pcb/route/PriorityQueue", ["require", "exports"], function (t, e) {
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var i = (function () {
        function t(t) {
          (this.my = new Array()), (this.count = 0), (this.Ut = t);
        }
        return (
          (t.prototype.size = function () {
            return this.count;
          }),
          (t.prototype.add = function (t) {
            this.count > 0 ? this.ny(this.count, t) : (this.my[0] = t),
              this.count++;
          }),
          (t.prototype.oy = function () {
            for (;;) {
              if (this.count > 0) {
                this.count--;
                var t = this.my[0];
                return this.count > 0 && this.py(0, this.my[this.count]), t;
              }
              return null;
            }
          }),
          (t.prototype.ny = function (t, e) {
            for (; t > 0; ) {
              var i = (t - 1) >>> 1,
                r = this.my[i];
              if (this.Ut(e, r) >= 0) break;
              (this.my[t] = r), (t = i);
            }
            this.my[t] = e;
          }),
          (t.prototype.py = function (t, e) {
            for (var i = this.count >>> 1; t < i; ) {
              var r = 1 + (t << 1),
                n = this.my[r],
                s = r + 1;
              if (s < this.count) {
                var o = this.my[s];
                this.Ut(n, o) > 0 && ((r = s), (n = o));
              }
              if (this.Ut(e, n) <= 0) break;
              (this.my[t] = n), (t = r);
            }
            this.my[t] = e;
          }),
          t
        );
      })();
      e.qy = i;
    }),
    i(
      "pcb/route/AStar",
      [
        "require",
        "exports",
        "pcb/route/PriorityQueue",
        "utils/LinkedHashMap",
        "utils/HashSet",
        "geometry/Line",
        "utils/DoubleKit",
        "utils/Utils",
        "geometry/utils/Intersection",
        "geometry/Vector2"
      ],
      function (t, i, r, n, s, o, a, h, u, c) {
        function p(t, e, i, r) {
          var n = new b(t, e, i, r),
            s = n.sy,
            o = new Array();
          if (s.length > 0) {
            for (var a = s.length - 1; a >= 0; a--) {
              var h = s[a];
              o.push(h.start());
            }
            o.push(s[0].end());
          }
          return o;
        }
        function f(t, e) {
          return t.xy.ty - e.xy.ty;
        }
        Object.defineProperty(i, "__esModule", {
          value: !0
        }),
          (i.findPath = p);
        var l = (function (t) {
          function i(e, i) {
            var r = t.call(this, e, i) || this;
            return (
              (r.ty = 0),
              (r.uq = 0),
              (r.uy = 0),
              (r.parent = null),
              (r.vy = 0),
              r
            );
          }
          return (
            e(i, t),
            (i.prototype.wy = function () {
              this.ty = this.uq + this.uy;
            }),
            i
          );
        })(c.Zb);
        i.Node = l;
        var v = (function () {
            function t(t) {
              (this.xy = t), (this.vy = t.vy);
            }
            return (
              (t.prototype.yy = function () {
                return this.vy === this.xy.vy;
              }),
              t
            );
          })(),
          b = (function () {
            function t(t, e, i, o) {
              (this.zy = new r.qy(f)),
                (this.Ay = new n.cb()),
                (this.By = new s.Lf()),
                (this.sy = new Array()),
                (this.timeout = performance.now() + t),
                (this.Cy = o),
                (this.Cg = Math.max(e.Gb(i) / 50, 1)),
                (this.Dy = 1 * this.Cg),
                (this.Ey = 1.414 * this.Cg),
                this.findPath(e, i);
            }
            return (
              (t.prototype.findPath = function (t, e) {
                var i = new l(t.x, t.y),
                  r = new l(e.x, e.y),
                  n = this.Fy(i, r);
                this.connect(n, i), this.Gy(r), this.Hy(r);
              }),
              (t.prototype.Gy = function (t) {
                var e = new Array(),
                  i = new Array();
                e.push(new o.bd(t, new c.Zb(t.x + 1e4, t.y))),
                  e.push(new o.bd(t, new c.Zb(t.x + 1e4, t.y + 1e4))),
                  e.push(new o.bd(t, new c.Zb(t.x, t.y + 1e4))),
                  e.push(new o.bd(t, new c.Zb(t.x - 1e4, t.y + 1e4))),
                  e.push(new o.bd(t, new c.Zb(t.x - 1e4, t.y))),
                  e.push(new o.bd(t, new c.Zb(t.x - 1e4, t.y - 1e4))),
                  e.push(new o.bd(t, new c.Zb(t.x, t.y - 1e4))),
                  e.push(new o.bd(t, new c.Zb(t.x + 1e4, t.y - 1e4)));
                var r = !0;
                if (this.sy.length > 1)
                  for (var n = this.sy[0], s = 1; s < this.sy.length; s++) {
                    var p = this.sy[s];
                    if (r)
                      for (var f = 0, v = e; f < v.length; f++) {
                        for (
                          var b = v[f], y = u.Pd(p, b), d = 0;
                          d < y;
                          d += 2
                        ) {
                          var g = new l(u.cache[d], u.cache[d + 1]);
                          if (this.Cy(t, g) && !g.Yb(n.start())) {
                            var w = t.x - g.x,
                              m = t.y - g.y,
                              E = p.start().x - g.x,
                              O = p.start().y - g.y;
                            if (a.ca.aa(w * E + m * O, 0)) continue;
                            i.push(new o.bd(g, t)),
                              i.push(new o.bd(p.start(), g)),
                              (r = !1);
                            break;
                          }
                        }
                        if (!r) break;
                      }
                    else i.push(p);
                  }
                i.length > 0 && ((this.sy.length = 0), h.F.t(this.sy, i));
              }),
              (t.prototype.Hy = function (t) {
                var e = new Array();
                if (this.sy.length >= 4) {
                  for (var i = new Array(4), r = 0; r < 4; r++)
                    i[r] = this.Iy(this.sy[r]);
                  var n = new l(this.sy[3].start().x, this.sy[3].start().y),
                    s = i[0].x * i[2].y - i[0].y * i[2].x,
                    u = i[1].x * i[3].y - i[1].y * i[3].x;
                  if (a.ca.W(s, 0) && a.ca.W(u, 0)) {
                    var c = new l(t.x - i[0].x - i[2].x, t.y - i[0].y - i[2].y),
                      p = new l(t.x - i[1].x - i[3].x, t.y - i[1].y - i[3].y);
                    this.Cy(c, t) && this.Cy(n, c)
                      ? (e.push(new o.bd(c, t)), e.push(new o.bd(n, c)))
                      : this.Cy(p, t) &&
                        this.Cy(n, p) &&
                        (e.push(new o.bd(p, t)), e.push(new o.bd(n, p)));
                  }
                  if (e.length > 0)
                    for (var r = 4; r < this.sy.length; r++) e.push(this.sy[r]);
                }
                e.length > 0 && ((this.sy.length = 0), h.F.t(this.sy, e));
              }),
              (t.prototype.connect = function (t, e) {
                var i = 0,
                  r = 0;
                if (null != t) {
                  for (var n = t, s = e; null != t.parent; )
                    if (((s = t), (t = t.parent), (r = this.Jy(t, s)), 0 == i))
                      i = r;
                    else if (i != r) {
                      var a = new o.bd(s, n);
                      a.Wc() || this.sy.push(new o.bd(s, n)), (n = s), (i = r);
                    }
                  if (((s = t), !s.u(e)))
                    if (((r = this.Jy(e, s)), 0 == i)) i = r;
                    else if (i != r) {
                      var h = new o.bd(s, n);
                      h.Wc() || this.sy.push(new o.bd(s, n)), (n = s), (i = r);
                    }
                  new o.bd(s, n).Wc() || this.sy.push(new o.bd(s, n));
                }
              }),
              (t.prototype.Fy = function (t, e) {
                var i = null,
                  r = Number.MAX_VALUE;
                for (this.Ay.put(t, t), this.zy.add(new v(t)); ; ) {
                  var n = this.Ky();
                  if (
                    (null != n &&
                      !n.u(t) &&
                      n.ty + n.uy <= r &&
                      ((r = n.ty + n.uy), (i = n)),
                    !(null !== n && performance.now() < this.timeout))
                  )
                    return i;
                  this.Ay.remove(n), this.By.add(n), n.vy++;
                  for (
                    var s = this.Ly(n, this.Cg), o = 0, a = s;
                    o < a.length;
                    o++
                  ) {
                    var h = a[o],
                      u = this.Ay.get(h);
                    null !== u
                      ? ((h = u), this.My(n, u, e))
                      : (h = this.Ny(n, e, h));
                    var c = Math.abs(h.x - e.x),
                      p = Math.abs(h.y - e.y);
                    if (c < this.Cg && p < this.Cg) {
                      var f = Math.min(c, p),
                        l = this.Ly(e, f),
                        b = this.Oy(l, h);
                      return (
                        null != b
                          ? ((b.parent = h), (e.parent = b))
                          : ((f = Math.max(c, p) - f),
                            f > 0
                              ? ((l = this.Ly(h, f)),
                                (b = this.Oy(l, e)),
                                null != b ? ((b.parent = h), (e = b)) : (e = h))
                              : (e = h)),
                        e
                      );
                    }
                  }
                }
              }),
              (t.prototype.Oy = function (t, e) {
                for (
                  var i = Number.MAX_VALUE, r = null, n = 0, s = t;
                  n < s.length;
                  n++
                ) {
                  var o = s[n],
                    a = o.Fb(e);
                  a < i && this.Cy(o, e) && ((i = a), (r = o));
                }
                return r;
              }),
              (t.prototype.Py = function (t, e) {
                var i = 0,
                  r = 0;
                if (null != t.parent) {
                  var n = this.Jy(t.parent, t),
                    s = this.Jy(t, e);
                  if (n != s) {
                    var a = this.Iy(new o.bd(t.parent, t)),
                      h = this.Iy(new o.bd(t, e)),
                      u = a.x * h.x + a.y * h.y;
                    i = u > 0 ? 1 : 0 == u ? 10 : 4;
                  }
                  r = 1 == s || 2 == s ? this.Dy : this.Ey;
                }
                return t.uq + r + i;
              }),
              (t.prototype.Qy = function (t, e) {
                var i = e.x,
                  r = e.y;
                return (
                  Math.max(Math.abs(i - t.x), Math.abs(r - t.y)) +
                  0.414 * Math.min(Math.abs(i - t.x), Math.abs(r - t.y))
                );
              }),
              (t.prototype.Ky = function () {
                for (;;) {
                  var t = this.zy.oy();
                  if (null === t) return null;
                  if (t.yy()) return t.xy;
                }
              }),
              (t.prototype.Ny = function (t, e, i) {
                return (
                  (i.parent = t),
                  (i.uq = this.Py(t, i)),
                  (i.uy = this.Qy(e, i)),
                  i.wy(),
                  i.vy++,
                  this.Ay.put(i, i),
                  this.zy.add(new v(i)),
                  i
                );
              }),
              (t.prototype.My = function (t, e, i) {
                var r = this.Py(t, e);
                r < e.uq &&
                  ((e.parent = t),
                  (e.uq = r),
                  e.wy(),
                  e.vy++,
                  this.zy.add(new v(e)));
              }),
              (t.prototype.Jy = function (t, e) {
                var i = e.x - t.x,
                  r = e.y - t.y;
                return 0 == r ? 1 : 0 == i ? 2 : i * r > 0 ? 3 : 4;
              }),
              (t.prototype.Ly = function (t, e) {
                var i = new Array(),
                  r = t.x,
                  n = t.y - e,
                  s = new l(r, n);
                this.Ry(t, i, s);
                var o = t.x + e,
                  a = t.y + e;
                (s = new l(o, a)), this.Ry(t, i, s);
                var h = t.x + e,
                  u = t.y;
                (s = new l(h, u)), this.Ry(t, i, s);
                var c = t.x + e,
                  p = t.y - e;
                (s = new l(c, p)), this.Ry(t, i, s);
                var f = t.x,
                  v = t.y + e;
                (s = new l(f, v)), this.Ry(t, i, s);
                var b = t.x - e,
                  y = t.y - e;
                (s = new l(b, y)), this.Ry(t, i, s);
                var d = t.x - e,
                  g = t.y;
                (s = new l(d, g)), this.Ry(t, i, s);
                var w = t.x - e,
                  m = t.y + e;
                return (s = new l(w, m)), this.Ry(t, i, s), i;
              }),
              (t.prototype.Ry = function (t, e, i) {
                this.Cy(t, i) && !this.By.contains(i) && e.push(i);
              }),
              (t.prototype.Iy = function (t) {
                var e = t.end().x - t.start().x,
                  i = t.end().y - t.start().y;
                return new c.Zb(e, i);
              }),
              t
            );
          })();
        i.Sy = b;
      }
    ),
    i("utils/BitmapIndex", ["require", "exports"], function (t, e) {
      function i(t) {
        var e = t.toString(2),
          i = 32 - e.length;
        return i > 0 ? "0".repeat(i) + e : e;
      }
      Object.defineProperty(e, "__esModule", {
        value: !0
      });
      var r = 4294967295,
        n = (function () {
          function t(t) {
            (this.Ty = 0),
              (this.size = t),
              (this.index = new Uint32Array(Math.ceil(t / 32)));
          }
          return (
            (t.prototype.bb = function () {
              return 0 === this.Ty;
            }),
            (t.prototype.Uy = function () {
              return this.Ty;
            }),
            (t.prototype.Vy = function (t) {
              var e = (t / 32) | 0,
                i = this.index[e];
              return i === r || (0 !== i && 1 == ((i >> (31 - t)) & 1));
            }),
            (t.prototype.Wy = function (t) {
              var e = (t / 32) | 0,
                i = this.index[e],
                r = 1 << (31 - t);
              0 == (i & r) && ((this.index[e] = i | r), this.Ty++);
            }),
            (t.prototype.Xy = function (t) {
              var e = (t / 32) | 0,
                i = this.index[e],
                n = 1 << (31 - t);
              0 != (i & n) && ((this.index[e] = i & (r ^ n)), this.Ty--);
            }),
            (t.prototype.reset = function () {
              for (var t = this.index, e = 0; e < t.length; e++) t[e] = 0;
              this.Ty = 0;
            }),
            (t.prototype.Yy = function (t) {
              if ((void 0 === t && (t = 1), this.size - this.Ty < t)) return -1;
              for (var e = this.index, i = -1, n = 0; n < e.length; n++) {
                var s = e[n];
                if (0 === s)
                  if (-1 === i) {
                    if (((i = 32 * n), t <= 32)) return i;
                  } else {
                    var o = 32 * (n + 1);
                    if (o - i >= t) return i;
                  }
                else if (s !== r)
                  for (var a = 31; a >= 0; a--)
                    if (0 == ((s >> a) & 1)) {
                      var h = 32 * n + 31 - a;
                      if ((-1 === i && (i = h), h - i + 1 >= t)) return i;
                    } else i = -1;
                else i = -1;
              }
              return -1;
            }),
            (t.prototype.Zy = function (t) {
              void 0 === t && (t = 1);
              var e = [];
              if (this.size - this.Ty < t) return e;
              for (var i = this.index, r = 0; r < i.length; r++) {
                var n = i[r];
                if (0 === n) {
                  var s = 32 * r;
                  if (-1 == e.indexOf(s)) {
                    if ((e.push(s), e.length >= t)) return e;
                    var o = t - e.length;
                    if (o < 32) {
                      for (var a = 0; a < o; a++) e.push(s + a + 1);
                      return e;
                    }
                    for (var a = 0; a < 31; a++) e.push(s + a + 1);
                  }
                } else if (4294967295 !== n)
                  for (var h = 31; h >= 0; h--)
                    if (0 == ((n >> h) & 1)) {
                      var s = 32 * r + 31 - h;
                      if (-1 == e.indexOf(s) && (e.push(s), e.length == t))
                        return e;
                    }
              }
              return [];
            }),
            (t.prototype.debug = function () {
              for (var t = [], e = this.index, r = 0; r < e.length; r++)
                t.push(i(e[r]));
            }),
            t
          );
        })();
      e.$y = n;
    }),
    i(
      "utils/Equation",
      ["require", "exports", "utils/DoubleKit", "utils/Utils"],
      function (t, e, i, r) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var n = (function () {
          function t() {}
          return (
            (t._y = function (t, e, r, n) {
              var s = e * e - 4 * t * r,
                o = 2 * t;
              return 0 !== o && isFinite(s)
                ? ((s = i.ca.sqrt(s)),
                  0 === s
                    ? ((n[0] = -e / o), 1)
                    : ((n[0] = (-e + s) / o), (n[1] = (-e - s) / o), 2))
                : 0;
            }),
            (t.az = function (e, i, n, s, o, a, h, u, c, p, f, l, v) {
              var b = e * l - a * h,
                y = s * h - e * p,
                d = n * h - e * c,
                g = i * h - e * u,
                w = o * h - e * f,
                m = t.bz(
                  e * d * d + n * w * w - o * d * w,
                  2 * e * y * d -
                    i * d * w +
                    2 * n * g * w +
                    s * w * w -
                    (g * d + y * w) * o,
                  (y * y - 2 * b * d) * e -
                    (g * d + y * w) * i +
                    n * g * g +
                    2 * s * g * w +
                    (b * w - g * y) * o +
                    a * w * w,
                  -2 * e * b * y +
                    (b * w - g * y) * i +
                    s * g * g +
                    o * g * b +
                    2 * g * w * a,
                  e * b * b + i * g * b + a * g * g,
                  v
                );
              if (m > 0) {
                r.F.o(v, 0, v, 8, 4);
                for (var E = 0, O = 0; O < m; O++) {
                  var x = v[O + 8],
                    A = (b - y * x - d * x * x) / (g + w * x);
                  isFinite(A) && ((v[E++] = A), (v[E++] = x));
                }
                return E;
              }
              return 0;
            }),
            (t.bz = function (e, i, r, n, s, o) {
              if (0 === e && 0 === i) return t._y(r, n, s, o);
              for (
                var a = e * e,
                  h = e * e * e,
                  u = i * i,
                  c = i * i * i,
                  p = r * r,
                  f = r * r * r,
                  l = p - 3 * i * n + 12 * e * s,
                  v =
                    2 * f -
                    9 * i * r * n +
                    27 * e * n * n +
                    27 * u * s -
                    72 * e * r * s,
                  b = Math.pow(
                    v + Math.sqrt(-4 * Math.pow(l, 3) + v * v),
                    1 / 3
                  ),
                  y = (t.cz * l) / (3 * e * b) + b / (3 * t.cz * e),
                  d = u / (4 * a) - (2 * r) / (3 * e),
                  g = -c / h + (4 * i * r) / a - (8 * n) / e,
                  w = -i / (4 * e),
                  m = Math.sqrt(d + y) / 2,
                  E = 2 * d - y,
                  O = g / (8 * m),
                  x = Math.sqrt(E - O) / 2,
                  A = Math.sqrt(E + O) / 2,
                  N = [w - m - x, w - m + x, w + m - A, w + m + A],
                  q = 0,
                  T = 0;
                T < N.length;
                T++
              ) {
                var k = N[T];
                isFinite(k) && (o[q++] = k);
              }
              return q;
            }),
            (t.cz = Math.pow(2, 1 / 3)),
            t
          );
        })();
        e.dz = n;
      }
    ),
    i(
      "utils/JSAPI",
      [
        "require",
        "exports",
        "pcb/route/AStar",
        "pcb/pour/EasyEDA2Pour",
        "pcb/Converter",
        "geometry/Vector2",
        "page/3dviewer/index"
      ],
      function (t, e, i, r, n, s, o) {
        Object.defineProperty(e, "__esModule", {
          value: !0
        }),
          (e.default = {
            "easyeda2pour": r.easyeda2pour,
            "easyeda2altium": n.easyeda2altium,
            "altium2easyeda": n.altium2easyeda,
            "findPath": i.findPath,
            "Point2D": s.Zb,
            "unionCopperAreaPolygons": n.unionCopperAreaPolygons,
            "3dviewer": function () {
              return $(function () {
                return new o.jy();
              });
            }
          });
      }
    ),
    i(
      "utils/json/JsonParser",
      [
        "require",
        "exports",
        "utils/json/AbstractJsonParser",
        "utils/json/JObject",
        "utils/Logger"
      ],
      function (t, i, r, n, s) {
        Object.defineProperty(i, "__esModule", {
          value: !0
        });
        var o = (function () {
            function t() {
              (this.map = new n.Wp()), (this.bv = !0);
            }
            return (
              (t.prototype.add = function (t) {
                this.bv
                  ? ((this.key = t), (this.bv = !1))
                  : (this.map.put(this.key, t), (this.bv = !0));
              }),
              t
            );
          })(),
          a = (function (t) {
            function i(e, i) {
              void 0 === e && (e = !1), void 0 === i && (i = s.vf.uf);
              var r = t.call(this) || this;
              return (
                (r.jq = new Array()),
                (r.ez = new Array()),
                (r.fz = null),
                (r.multiple = e),
                (r.Nf = i),
                r
              );
            }
            return (
              e(i, t),
              (i.gz = function (t, e) {
                void 0 === e && (e = s.vf.uf);
                var r = new i(!1, e).parse(t),
                  n = r.hz();
                return 1 === n.length ? n[0] : null;
              }),
              (i.iz = function (t, e) {
                return (
                  void 0 === e && (e = s.vf.uf), new i(!0, e).parse(t).hz()
                );
              }),
              (i.prototype.aq = function () {
                this.debug("{");
                var t = new o();
                return (this.fz = t), this.jq.push(t), !0;
              }),
              (i.prototype.bq = function () {
                this.debug("}");
                var t = this.jq.pop();
                if (t instanceof o) return this.jz(t.map);
                throw new Error("unexpected }");
              }),
              (i.prototype.cq = function () {
                this.debug("[");
                var t = new n.Yp();
                return (this.fz = t), this.jq.push(t), !0;
              }),
              (i.prototype.dq = function () {
                this.debug("]");
                var t = this.jq.pop();
                if (t instanceof n.Yp) return this.jz(t);
                throw new Error("unexpected ]");
              }),
              (i.prototype.hq = function (t) {
                return (
                  this.debug(t),
                  null !== this.fz ? this.fz.add(t) : this.ez.push(t),
                  !0
                );
              }),
              (i.prototype.hz = function () {
                return this.ez;
              }),
              (i.prototype.jz = function (t) {
                var e = this.jq[this.jq.length - 1];
                return void 0 !== e
                  ? ((this.fz = e), e.add(t), !0)
                  : (this.ez.push(t), (this.fz = null), this.multiple);
              }),
              (i.prototype.debug = function (t) {
                this.Nf.hf(
                  "(%d, %d, %d): %s",
                  this.jq.length,
                  this.line(),
                  this.sp(),
                  t
                );
              }),
              i
            );
          })(r.iq);
        i.kz = a;
      }
    ),
    i(["utils/JSAPI"], function (e) {
      t["JSAPI"] = e.default;
    });
})(this);
